import { __values } from "tslib";
/**
 * Inbox API
 * Manage work for human moderators by adding, checking out and completing work items. Store User Generated Content to the database.  This will store it twice, once in short-term storage in it's exact form amd again in long term storage in it's redacted and pseudonymized form
 *
 * OpenAPI spec version: 2.1.1
 * Contact: support@twohat.com
 *
 * NOTE: This class is auto generated by the swagger code generator program.
 * https://github.com/swagger-api/swagger-codegen.git
 * Do not edit the class manually.
 */ /* tslint:disable:no-unused-variable member-ordering */
import { Inject, Injectable, Optional } from '@angular/core';
import { HttpHeaders, HttpParams } from '@angular/common/http';
import { CustomHttpUrlEncodingCodec } from '../encoder';
import { BASE_PATH, COLLECTION_FORMATS } from '../variables';
import { Configuration } from '../configuration';
import * as i0 from "@angular/core";
import * as i1 from "@angular/common/http";
import * as i2 from "../configuration";
var DefaultService = /** @class */ (function () {
    function DefaultService(httpClient, basePath, configuration) {
        this.httpClient = httpClient;
        this.basePath = 'https://virtserver.swaggerhub.com/twohat/inbox/2.1.1';
        this.defaultHeaders = new HttpHeaders();
        this.configuration = new Configuration();
        if (basePath) {
            this.basePath = basePath;
        }
        if (configuration) {
            this.configuration = configuration;
            this.basePath = basePath || configuration.basePath || this.basePath;
        }
    }
    /**
     * @param consumes string[] mime-types
     * @return true: consumes contains 'multipart/form-data', false: otherwise
     */
    DefaultService.prototype.canConsumeForm = function (consumes) {
        var e_1, _a;
        var form = 'multipart/form-data';
        try {
            for (var consumes_1 = __values(consumes), consumes_1_1 = consumes_1.next(); !consumes_1_1.done; consumes_1_1 = consumes_1.next()) {
                var consume = consumes_1_1.value;
                if (form === consume) {
                    return true;
                }
            }
        }
        catch (e_1_1) { e_1 = { error: e_1_1 }; }
        finally {
            try {
                if (consumes_1_1 && !consumes_1_1.done && (_a = consumes_1.return)) _a.call(consumes_1);
            }
            finally { if (e_1) throw e_1.error; }
        }
        return false;
    };
    DefaultService.prototype.addComment = function (queueId, contentId, body, observe, reportProgress) {
        if (observe === void 0) { observe = 'body'; }
        if (reportProgress === void 0) { reportProgress = false; }
        if (queueId === null || queueId === undefined) {
            throw new Error('Required parameter queueId was null or undefined when calling addComment.');
        }
        if (contentId === null || contentId === undefined) {
            throw new Error('Required parameter contentId was null or undefined when calling addComment.');
        }
        var headers = this.defaultHeaders;
        // to determine the Accept header
        var httpHeaderAccepts = [
            'application/json'
        ];
        var httpHeaderAcceptSelected = this.configuration.selectHeaderAccept(httpHeaderAccepts);
        if (httpHeaderAcceptSelected != undefined) {
            headers = headers.set('Accept', httpHeaderAcceptSelected);
        }
        // to determine the Content-Type header
        var consumes = [
            'application/json'
        ];
        var httpContentTypeSelected = this.configuration.selectHeaderContentType(consumes);
        if (httpContentTypeSelected != undefined) {
            headers = headers.set('Content-Type', httpContentTypeSelected);
        }
        return this.httpClient.request('post', this.basePath + "/inbox/queue/" + encodeURIComponent(String(queueId)) + "/items/" + encodeURIComponent(String(contentId)) + "/comments", {
            body: body,
            withCredentials: this.configuration.withCredentials,
            headers: headers,
            observe: observe,
            reportProgress: reportProgress
        });
    };
    DefaultService.prototype.addExamples = function (body, updateData, observe, reportProgress) {
        if (observe === void 0) { observe = 'body'; }
        if (reportProgress === void 0) { reportProgress = false; }
        var queryParameters = new HttpParams({ encoder: new CustomHttpUrlEncodingCodec() });
        if (updateData !== undefined && updateData !== null) {
            queryParameters = queryParameters.set('updateData', updateData);
        }
        var headers = this.defaultHeaders;
        // to determine the Accept header
        var httpHeaderAccepts = [
            'application/json'
        ];
        var httpHeaderAcceptSelected = this.configuration.selectHeaderAccept(httpHeaderAccepts);
        if (httpHeaderAcceptSelected != undefined) {
            headers = headers.set('Accept', httpHeaderAcceptSelected);
        }
        // to determine the Content-Type header
        var consumes = [
            'application/json'
        ];
        var httpContentTypeSelected = this.configuration.selectHeaderContentType(consumes);
        if (httpContentTypeSelected != undefined) {
            headers = headers.set('Content-Type', httpContentTypeSelected);
        }
        return this.httpClient.request('post', this.basePath + "/inbox/queue/examples/items", {
            body: body,
            params: queryParameters,
            withCredentials: this.configuration.withCredentials,
            headers: headers,
            observe: observe,
            reportProgress: reportProgress
        });
    };
    DefaultService.prototype.addRuleAuditItems = function (body, updateData, observe, reportProgress) {
        if (observe === void 0) { observe = 'body'; }
        if (reportProgress === void 0) { reportProgress = false; }
        var queryParameters = new HttpParams({ encoder: new CustomHttpUrlEncodingCodec() });
        if (updateData !== undefined && updateData !== null) {
            queryParameters = queryParameters.set('updateData', updateData);
        }
        var headers = this.defaultHeaders;
        // to determine the Accept header
        var httpHeaderAccepts = [
            'application/json'
        ];
        var httpHeaderAcceptSelected = this.configuration.selectHeaderAccept(httpHeaderAccepts);
        if (httpHeaderAcceptSelected != undefined) {
            headers = headers.set('Accept', httpHeaderAcceptSelected);
        }
        // to determine the Content-Type header
        var consumes = [
            'application/json'
        ];
        var httpContentTypeSelected = this.configuration.selectHeaderContentType(consumes);
        if (httpContentTypeSelected != undefined) {
            headers = headers.set('Content-Type', httpContentTypeSelected);
        }
        return this.httpClient.request('post', this.basePath + "/inbox/queue/rulesAudit/items", {
            body: body,
            params: queryParameters,
            withCredentials: this.configuration.withCredentials,
            headers: headers,
            observe: observe,
            reportProgress: reportProgress
        });
    };
    DefaultService.prototype.addSpelling = function (body, updateData, observe, reportProgress) {
        if (observe === void 0) { observe = 'body'; }
        if (reportProgress === void 0) { reportProgress = false; }
        var queryParameters = new HttpParams({ encoder: new CustomHttpUrlEncodingCodec() });
        if (updateData !== undefined && updateData !== null) {
            queryParameters = queryParameters.set('updateData', updateData);
        }
        var headers = this.defaultHeaders;
        // to determine the Accept header
        var httpHeaderAccepts = [
            'application/json'
        ];
        var httpHeaderAcceptSelected = this.configuration.selectHeaderAccept(httpHeaderAccepts);
        if (httpHeaderAcceptSelected != undefined) {
            headers = headers.set('Accept', httpHeaderAcceptSelected);
        }
        // to determine the Content-Type header
        var consumes = [
            'application/json'
        ];
        var httpContentTypeSelected = this.configuration.selectHeaderContentType(consumes);
        if (httpContentTypeSelected != undefined) {
            headers = headers.set('Content-Type', httpContentTypeSelected);
        }
        return this.httpClient.request('post', this.basePath + "/inbox/queue/spelling/items", {
            body: body,
            params: queryParameters,
            withCredentials: this.configuration.withCredentials,
            headers: headers,
            observe: observe,
            reportProgress: reportProgress
        });
    };
    DefaultService.prototype.addTaskItems = function (body, updateData, observe, reportProgress) {
        if (observe === void 0) { observe = 'body'; }
        if (reportProgress === void 0) { reportProgress = false; }
        var queryParameters = new HttpParams({ encoder: new CustomHttpUrlEncodingCodec() });
        if (updateData !== undefined && updateData !== null) {
            queryParameters = queryParameters.set('updateData', updateData);
        }
        var headers = this.defaultHeaders;
        // to determine the Accept header
        var httpHeaderAccepts = [
            'application/json'
        ];
        var httpHeaderAcceptSelected = this.configuration.selectHeaderAccept(httpHeaderAccepts);
        if (httpHeaderAcceptSelected != undefined) {
            headers = headers.set('Accept', httpHeaderAcceptSelected);
        }
        // to determine the Content-Type header
        var consumes = [
            'application/json'
        ];
        var httpContentTypeSelected = this.configuration.selectHeaderContentType(consumes);
        if (httpContentTypeSelected != undefined) {
            headers = headers.set('Content-Type', httpContentTypeSelected);
        }
        return this.httpClient.request('post', this.basePath + "/inbox/queue/task/items", {
            body: body,
            params: queryParameters,
            withCredentials: this.configuration.withCredentials,
            headers: headers,
            observe: observe,
            reportProgress: reportProgress
        });
    };
    DefaultService.prototype.addUseranmes = function (body, updateData, observe, reportProgress) {
        if (observe === void 0) { observe = 'body'; }
        if (reportProgress === void 0) { reportProgress = false; }
        var queryParameters = new HttpParams({ encoder: new CustomHttpUrlEncodingCodec() });
        if (updateData !== undefined && updateData !== null) {
            queryParameters = queryParameters.set('updateData', updateData);
        }
        var headers = this.defaultHeaders;
        // to determine the Accept header
        var httpHeaderAccepts = [
            'application/json'
        ];
        var httpHeaderAcceptSelected = this.configuration.selectHeaderAccept(httpHeaderAccepts);
        if (httpHeaderAcceptSelected != undefined) {
            headers = headers.set('Accept', httpHeaderAcceptSelected);
        }
        // to determine the Content-Type header
        var consumes = [
            'application/json'
        ];
        var httpContentTypeSelected = this.configuration.selectHeaderContentType(consumes);
        if (httpContentTypeSelected != undefined) {
            headers = headers.set('Content-Type', httpContentTypeSelected);
        }
        return this.httpClient.request('post', this.basePath + "/inbox/queue/usernames/items", {
            body: body,
            params: queryParameters,
            withCredentials: this.configuration.withCredentials,
            headers: headers,
            observe: observe,
            reportProgress: reportProgress
        });
    };
    DefaultService.prototype.deletExampleItems = function (clientId, languages, observe, reportProgress) {
        if (observe === void 0) { observe = 'body'; }
        if (reportProgress === void 0) { reportProgress = false; }
        var queryParameters = new HttpParams({ encoder: new CustomHttpUrlEncodingCodec() });
        if (clientId !== undefined && clientId !== null) {
            queryParameters = queryParameters.set('clientId', clientId);
        }
        if (languages) {
            languages.forEach(function (element) {
                queryParameters = queryParameters.append('languages', element);
            });
        }
        var headers = this.defaultHeaders;
        // to determine the Accept header
        var httpHeaderAccepts = [
            'application/json'
        ];
        var httpHeaderAcceptSelected = this.configuration.selectHeaderAccept(httpHeaderAccepts);
        if (httpHeaderAcceptSelected != undefined) {
            headers = headers.set('Accept', httpHeaderAcceptSelected);
        }
        // to determine the Content-Type header
        var consumes = [];
        return this.httpClient.request('delete', this.basePath + "/inbox/queue/examples/items", {
            params: queryParameters,
            withCredentials: this.configuration.withCredentials,
            headers: headers,
            observe: observe,
            reportProgress: reportProgress
        });
    };
    DefaultService.prototype.deleteAllCheckouts = function (queueId, clientId, languages, observe, reportProgress) {
        if (observe === void 0) { observe = 'body'; }
        if (reportProgress === void 0) { reportProgress = false; }
        if (queueId === null || queueId === undefined) {
            throw new Error('Required parameter queueId was null or undefined when calling deleteAllCheckouts.');
        }
        var queryParameters = new HttpParams({ encoder: new CustomHttpUrlEncodingCodec() });
        if (clientId !== undefined && clientId !== null) {
            queryParameters = queryParameters.set('clientId', clientId);
        }
        if (languages) {
            languages.forEach(function (element) {
                queryParameters = queryParameters.append('languages', element);
            });
        }
        var headers = this.defaultHeaders;
        // to determine the Accept header
        var httpHeaderAccepts = [
            'application/json'
        ];
        var httpHeaderAcceptSelected = this.configuration.selectHeaderAccept(httpHeaderAccepts);
        if (httpHeaderAcceptSelected != undefined) {
            headers = headers.set('Accept', httpHeaderAcceptSelected);
        }
        // to determine the Content-Type header
        var consumes = [];
        return this.httpClient.request('delete', this.basePath + "/inbox/queue/" + encodeURIComponent(String(queueId)) + "/items/checkout", {
            params: queryParameters,
            withCredentials: this.configuration.withCredentials,
            headers: headers,
            observe: observe,
            reportProgress: reportProgress
        });
    };
    DefaultService.prototype.deleteComment = function (queueId, contentId, commentId, observe, reportProgress) {
        if (observe === void 0) { observe = 'body'; }
        if (reportProgress === void 0) { reportProgress = false; }
        if (queueId === null || queueId === undefined) {
            throw new Error('Required parameter queueId was null or undefined when calling deleteComment.');
        }
        if (contentId === null || contentId === undefined) {
            throw new Error('Required parameter contentId was null or undefined when calling deleteComment.');
        }
        if (commentId === null || commentId === undefined) {
            throw new Error('Required parameter commentId was null or undefined when calling deleteComment.');
        }
        var headers = this.defaultHeaders;
        // to determine the Accept header
        var httpHeaderAccepts = [
            'application/json'
        ];
        var httpHeaderAcceptSelected = this.configuration.selectHeaderAccept(httpHeaderAccepts);
        if (httpHeaderAcceptSelected != undefined) {
            headers = headers.set('Accept', httpHeaderAcceptSelected);
        }
        // to determine the Content-Type header
        var consumes = [];
        return this.httpClient.request('delete', this.basePath + "/inbox/queue/" + encodeURIComponent(String(queueId)) + "/items/" + encodeURIComponent(String(contentId)) + "/comments/" + encodeURIComponent(String(commentId)), {
            withCredentials: this.configuration.withCredentials,
            headers: headers,
            observe: observe,
            reportProgress: reportProgress
        });
    };
    DefaultService.prototype.deleteItemCheckout = function (queueId, contentId, observe, reportProgress) {
        if (observe === void 0) { observe = 'body'; }
        if (reportProgress === void 0) { reportProgress = false; }
        if (queueId === null || queueId === undefined) {
            throw new Error('Required parameter queueId was null or undefined when calling deleteItemCheckout.');
        }
        if (contentId === null || contentId === undefined) {
            throw new Error('Required parameter contentId was null or undefined when calling deleteItemCheckout.');
        }
        var headers = this.defaultHeaders;
        // to determine the Accept header
        var httpHeaderAccepts = [
            'application/json'
        ];
        var httpHeaderAcceptSelected = this.configuration.selectHeaderAccept(httpHeaderAccepts);
        if (httpHeaderAcceptSelected != undefined) {
            headers = headers.set('Accept', httpHeaderAcceptSelected);
        }
        // to determine the Content-Type header
        var consumes = [];
        return this.httpClient.request('delete', this.basePath + "/inbox/queue/" + encodeURIComponent(String(queueId)) + "/items/" + encodeURIComponent(String(contentId)) + "/checkout", {
            withCredentials: this.configuration.withCredentials,
            headers: headers,
            observe: observe,
            reportProgress: reportProgress
        });
    };
    DefaultService.prototype.deleteItems = function (queueId, clientId, languages, observe, reportProgress) {
        if (observe === void 0) { observe = 'body'; }
        if (reportProgress === void 0) { reportProgress = false; }
        if (queueId === null || queueId === undefined) {
            throw new Error('Required parameter queueId was null or undefined when calling deleteItems.');
        }
        var queryParameters = new HttpParams({ encoder: new CustomHttpUrlEncodingCodec() });
        if (clientId !== undefined && clientId !== null) {
            queryParameters = queryParameters.set('clientId', clientId);
        }
        if (languages) {
            languages.forEach(function (element) {
                queryParameters = queryParameters.append('languages', element);
            });
        }
        var headers = this.defaultHeaders;
        // to determine the Accept header
        var httpHeaderAccepts = [
            'application/json'
        ];
        var httpHeaderAcceptSelected = this.configuration.selectHeaderAccept(httpHeaderAccepts);
        if (httpHeaderAcceptSelected != undefined) {
            headers = headers.set('Accept', httpHeaderAcceptSelected);
        }
        // to determine the Content-Type header
        var consumes = [];
        return this.httpClient.request('delete', this.basePath + "/inbox/queue/" + encodeURIComponent(String(queueId)) + "/items", {
            params: queryParameters,
            withCredentials: this.configuration.withCredentials,
            headers: headers,
            observe: observe,
            reportProgress: reportProgress
        });
    };
    DefaultService.prototype.deleteParam = function (queueId, paramId, observe, reportProgress) {
        if (observe === void 0) { observe = 'body'; }
        if (reportProgress === void 0) { reportProgress = false; }
        if (queueId === null || queueId === undefined) {
            throw new Error('Required parameter queueId was null or undefined when calling deleteParam.');
        }
        if (paramId === null || paramId === undefined) {
            throw new Error('Required parameter paramId was null or undefined when calling deleteParam.');
        }
        var headers = this.defaultHeaders;
        // to determine the Accept header
        var httpHeaderAccepts = [
            'application/json'
        ];
        var httpHeaderAcceptSelected = this.configuration.selectHeaderAccept(httpHeaderAccepts);
        if (httpHeaderAcceptSelected != undefined) {
            headers = headers.set('Accept', httpHeaderAcceptSelected);
        }
        // to determine the Content-Type header
        var consumes = [];
        return this.httpClient.request('delete', this.basePath + "/inbox/queue/" + encodeURIComponent(String(queueId)) + "/param/" + encodeURIComponent(String(paramId)), {
            withCredentials: this.configuration.withCredentials,
            headers: headers,
            observe: observe,
            reportProgress: reportProgress
        });
    };
    DefaultService.prototype.deleteRuleAuditItems = function (clientId, languages, observe, reportProgress) {
        if (observe === void 0) { observe = 'body'; }
        if (reportProgress === void 0) { reportProgress = false; }
        var queryParameters = new HttpParams({ encoder: new CustomHttpUrlEncodingCodec() });
        if (clientId !== undefined && clientId !== null) {
            queryParameters = queryParameters.set('clientId', clientId);
        }
        if (languages) {
            languages.forEach(function (element) {
                queryParameters = queryParameters.append('languages', element);
            });
        }
        var headers = this.defaultHeaders;
        // to determine the Accept header
        var httpHeaderAccepts = [
            'application/json'
        ];
        var httpHeaderAcceptSelected = this.configuration.selectHeaderAccept(httpHeaderAccepts);
        if (httpHeaderAcceptSelected != undefined) {
            headers = headers.set('Accept', httpHeaderAcceptSelected);
        }
        // to determine the Content-Type header
        var consumes = [];
        return this.httpClient.request('delete', this.basePath + "/inbox/queue/rulesAudit/items", {
            params: queryParameters,
            withCredentials: this.configuration.withCredentials,
            headers: headers,
            observe: observe,
            reportProgress: reportProgress
        });
    };
    DefaultService.prototype.deleteSpellingItems = function (clientId, languages, observe, reportProgress) {
        if (observe === void 0) { observe = 'body'; }
        if (reportProgress === void 0) { reportProgress = false; }
        var queryParameters = new HttpParams({ encoder: new CustomHttpUrlEncodingCodec() });
        if (clientId !== undefined && clientId !== null) {
            queryParameters = queryParameters.set('clientId', clientId);
        }
        if (languages) {
            languages.forEach(function (element) {
                queryParameters = queryParameters.append('languages', element);
            });
        }
        var headers = this.defaultHeaders;
        // to determine the Accept header
        var httpHeaderAccepts = [
            'application/json'
        ];
        var httpHeaderAcceptSelected = this.configuration.selectHeaderAccept(httpHeaderAccepts);
        if (httpHeaderAcceptSelected != undefined) {
            headers = headers.set('Accept', httpHeaderAcceptSelected);
        }
        // to determine the Content-Type header
        var consumes = [];
        return this.httpClient.request('delete', this.basePath + "/inbox/queue/spelling/items", {
            params: queryParameters,
            withCredentials: this.configuration.withCredentials,
            headers: headers,
            observe: observe,
            reportProgress: reportProgress
        });
    };
    DefaultService.prototype.deleteTaskItems = function (clientId, languages, observe, reportProgress) {
        if (observe === void 0) { observe = 'body'; }
        if (reportProgress === void 0) { reportProgress = false; }
        var queryParameters = new HttpParams({ encoder: new CustomHttpUrlEncodingCodec() });
        if (clientId !== undefined && clientId !== null) {
            queryParameters = queryParameters.set('clientId', clientId);
        }
        if (languages) {
            languages.forEach(function (element) {
                queryParameters = queryParameters.append('languages', element);
            });
        }
        var headers = this.defaultHeaders;
        // to determine the Accept header
        var httpHeaderAccepts = [
            'application/json'
        ];
        var httpHeaderAcceptSelected = this.configuration.selectHeaderAccept(httpHeaderAccepts);
        if (httpHeaderAcceptSelected != undefined) {
            headers = headers.set('Accept', httpHeaderAcceptSelected);
        }
        // to determine the Content-Type header
        var consumes = [];
        return this.httpClient.request('delete', this.basePath + "/inbox/queue/task/items", {
            params: queryParameters,
            withCredentials: this.configuration.withCredentials,
            headers: headers,
            observe: observe,
            reportProgress: reportProgress
        });
    };
    DefaultService.prototype.deleteUser = function (userId, observe, reportProgress) {
        if (observe === void 0) { observe = 'body'; }
        if (reportProgress === void 0) { reportProgress = false; }
        if (userId === null || userId === undefined) {
            throw new Error('Required parameter userId was null or undefined when calling deleteUser.');
        }
        var headers = this.defaultHeaders;
        // to determine the Accept header
        var httpHeaderAccepts = [
            'application/json'
        ];
        var httpHeaderAcceptSelected = this.configuration.selectHeaderAccept(httpHeaderAccepts);
        if (httpHeaderAcceptSelected != undefined) {
            headers = headers.set('Accept', httpHeaderAcceptSelected);
        }
        // to determine the Content-Type header
        var consumes = [];
        return this.httpClient.request('delete', this.basePath + "/inbox/user/" + encodeURIComponent(String(userId)), {
            withCredentials: this.configuration.withCredentials,
            headers: headers,
            observe: observe,
            reportProgress: reportProgress
        });
    };
    DefaultService.prototype.deleteUsernameItems = function (clientId, languages, observe, reportProgress) {
        if (observe === void 0) { observe = 'body'; }
        if (reportProgress === void 0) { reportProgress = false; }
        var queryParameters = new HttpParams({ encoder: new CustomHttpUrlEncodingCodec() });
        if (clientId !== undefined && clientId !== null) {
            queryParameters = queryParameters.set('clientId', clientId);
        }
        if (languages) {
            languages.forEach(function (element) {
                queryParameters = queryParameters.append('languages', element);
            });
        }
        var headers = this.defaultHeaders;
        // to determine the Accept header
        var httpHeaderAccepts = [
            'application/json'
        ];
        var httpHeaderAcceptSelected = this.configuration.selectHeaderAccept(httpHeaderAccepts);
        if (httpHeaderAcceptSelected != undefined) {
            headers = headers.set('Accept', httpHeaderAcceptSelected);
        }
        // to determine the Content-Type header
        var consumes = [];
        return this.httpClient.request('delete', this.basePath + "/inbox/queue/usernames/items", {
            params: queryParameters,
            withCredentials: this.configuration.withCredentials,
            headers: headers,
            observe: observe,
            reportProgress: reportProgress
        });
    };
    DefaultService.prototype.getComments = function (queueId, contentId, observe, reportProgress) {
        if (observe === void 0) { observe = 'body'; }
        if (reportProgress === void 0) { reportProgress = false; }
        if (queueId === null || queueId === undefined) {
            throw new Error('Required parameter queueId was null or undefined when calling getComment.');
        }
        if (contentId === null || contentId === undefined) {
            throw new Error('Required parameter contentId was null or undefined when calling getComment.');
        }
        var headers = this.defaultHeaders;
        // to determine the Accept header
        var httpHeaderAccepts = [
            'application/json'
        ];
        var httpHeaderAcceptSelected = this.configuration.selectHeaderAccept(httpHeaderAccepts);
        if (httpHeaderAcceptSelected != undefined) {
            headers = headers.set('Accept', httpHeaderAcceptSelected);
        }
        // to determine the Content-Type header
        var consumes = [];
        return this.httpClient.request('get', this.basePath + "/inbox/queue/" + encodeURIComponent(String(queueId)) + "/items/" + encodeURIComponent(String(contentId)) + "/comments", {
            withCredentials: this.configuration.withCredentials,
            headers: headers,
            observe: observe,
            reportProgress: reportProgress
        });
    };
    DefaultService.prototype.getComment = function (queueId, contentId, commentId, observe, reportProgress) {
        if (observe === void 0) { observe = 'body'; }
        if (reportProgress === void 0) { reportProgress = false; }
        if (queueId === null || queueId === undefined) {
            throw new Error('Required parameter queueId was null or undefined when calling getComment.');
        }
        if (contentId === null || contentId === undefined) {
            throw new Error('Required parameter contentId was null or undefined when calling getComment.');
        }
        if (commentId === null || commentId === undefined) {
            throw new Error('Required parameter commentId was null or undefined when calling getComment.');
        }
        var headers = this.defaultHeaders;
        // to determine the Accept header
        var httpHeaderAccepts = [
            'application/json'
        ];
        var httpHeaderAcceptSelected = this.configuration.selectHeaderAccept(httpHeaderAccepts);
        if (httpHeaderAcceptSelected != undefined) {
            headers = headers.set('Accept', httpHeaderAcceptSelected);
        }
        // to determine the Content-Type header
        var consumes = [];
        return this.httpClient.request('get', this.basePath + "/inbox/queue/" + encodeURIComponent(String(queueId)) + "/items/" + encodeURIComponent(String(contentId)) + "/comments/" + encodeURIComponent(String(commentId)), {
            withCredentials: this.configuration.withCredentials,
            headers: headers,
            observe: observe,
            reportProgress: reportProgress
        });
    };
    DefaultService.prototype.getExamples = function (language, ai, checkout, clientIds, contentIds, notContentIds, endDate, startDate, reviewedStartDate, reviewedEndDate, checkoutAvailable, doneByModeratorId, limit, offset, sortBy, tags, text, topics, unresolvedComments, observe, reportProgress) {
        if (observe === void 0) { observe = 'body'; }
        if (reportProgress === void 0) { reportProgress = false; }
        if (language === null || language === undefined) {
            throw new Error('Required parameter language was null or undefined when calling getExamples.');
        }
        var queryParameters = new HttpParams({ encoder: new CustomHttpUrlEncodingCodec() });
        if (ai) {
            ai.forEach(function (element) {
                queryParameters = queryParameters.append('ai', element);
            });
        }
        if (checkout !== undefined && checkout !== null) {
            queryParameters = queryParameters.set('checkout', checkout);
        }
        if (clientIds) {
            queryParameters = queryParameters.set('clientIds', clientIds.join(COLLECTION_FORMATS['csv']));
        }
        if (contentIds) {
            queryParameters = queryParameters.set('contentIds', contentIds.join(COLLECTION_FORMATS['csv']));
        }
        if (notContentIds) {
            queryParameters = queryParameters.set('notContentIds', notContentIds.join(COLLECTION_FORMATS['csv']));
        }
        if (endDate !== undefined && endDate !== null) {
            queryParameters = queryParameters.set('endDate', endDate);
        }
        if (startDate !== undefined && startDate !== null) {
            queryParameters = queryParameters.set('startDate', startDate);
        }
        if (reviewedStartDate !== undefined && reviewedStartDate !== null) {
            queryParameters = queryParameters.set('reviewedStartDate', reviewedStartDate);
        }
        if (reviewedEndDate !== undefined && reviewedEndDate !== null) {
            queryParameters = queryParameters.set('reviewedEndDate', reviewedEndDate);
        }
        if (checkoutAvailable !== undefined && checkoutAvailable !== null) {
            queryParameters = queryParameters.set('checkoutAvailable', checkoutAvailable);
        }
        if (doneByModeratorId !== undefined && doneByModeratorId !== null) {
            queryParameters = queryParameters.set('doneByModeratorId', doneByModeratorId);
        }
        if (language !== undefined && language !== null) {
            queryParameters = queryParameters.set('language', language);
        }
        if (limit !== undefined && limit !== null) {
            queryParameters = queryParameters.set('limit', limit);
        }
        if (offset !== undefined && offset !== null) {
            queryParameters = queryParameters.set('offset', offset);
        }
        if (sortBy !== undefined && sortBy !== null) {
            queryParameters = queryParameters.set('sortBy', sortBy);
        }
        if (tags) {
            queryParameters = queryParameters.set('tags', tags.join(COLLECTION_FORMATS['csv']));
        }
        if (text !== undefined && text !== null) {
            queryParameters = queryParameters.set('text', text);
        }
        if (topics) {
            topics.forEach(function (element) {
                queryParameters = queryParameters.append('topics', element);
            });
        }
        if (unresolvedComments !== undefined && unresolvedComments !== null) {
            queryParameters = queryParameters.set('unresolvedComments', unresolvedComments);
        }
        var headers = this.defaultHeaders;
        // to determine the Accept header
        var httpHeaderAccepts = [
            'application/json'
        ];
        var httpHeaderAcceptSelected = this.configuration.selectHeaderAccept(httpHeaderAccepts);
        if (httpHeaderAcceptSelected != undefined) {
            headers = headers.set('Accept', httpHeaderAcceptSelected);
        }
        // to determine the Content-Type header
        var consumes = [];
        return this.httpClient.request('get', this.basePath + "/inbox/queue/examples/items", {
            params: queryParameters,
            withCredentials: this.configuration.withCredentials,
            headers: headers,
            observe: observe,
            reportProgress: reportProgress
        });
    };
    DefaultService.prototype.getInbox = function (observe, reportProgress) {
        if (observe === void 0) { observe = 'body'; }
        if (reportProgress === void 0) { reportProgress = false; }
        var headers = this.defaultHeaders;
        // to determine the Accept header
        var httpHeaderAccepts = [
            'application/json'
        ];
        var httpHeaderAcceptSelected = this.configuration.selectHeaderAccept(httpHeaderAccepts);
        if (httpHeaderAcceptSelected != undefined) {
            headers = headers.set('Accept', httpHeaderAcceptSelected);
        }
        // to determine the Content-Type header
        var consumes = [];
        return this.httpClient.request('get', this.basePath + "/inbox", {
            withCredentials: this.configuration.withCredentials,
            headers: headers,
            observe: observe,
            reportProgress: reportProgress
        });
    };
    DefaultService.prototype.getItemCheckout = function (queueId, contentId, observe, reportProgress) {
        if (observe === void 0) { observe = 'body'; }
        if (reportProgress === void 0) { reportProgress = false; }
        if (queueId === null || queueId === undefined) {
            throw new Error('Required parameter queueId was null or undefined when calling getItemCheckout.');
        }
        if (contentId === null || contentId === undefined) {
            throw new Error('Required parameter contentId was null or undefined when calling getItemCheckout.');
        }
        var headers = this.defaultHeaders;
        // to determine the Accept header
        var httpHeaderAccepts = [
            'application/json'
        ];
        var httpHeaderAcceptSelected = this.configuration.selectHeaderAccept(httpHeaderAccepts);
        if (httpHeaderAcceptSelected != undefined) {
            headers = headers.set('Accept', httpHeaderAcceptSelected);
        }
        // to determine the Content-Type header
        var consumes = [];
        return this.httpClient.request('get', this.basePath + "/inbox/queue/" + encodeURIComponent(String(queueId)) + "/items/" + encodeURIComponent(String(contentId)) + "/checkout", {
            withCredentials: this.configuration.withCredentials,
            headers: headers,
            observe: observe,
            reportProgress: reportProgress
        });
    };
    DefaultService.prototype.getQueue = function (queueId, observe, reportProgress) {
        if (observe === void 0) { observe = 'body'; }
        if (reportProgress === void 0) { reportProgress = false; }
        if (queueId === null || queueId === undefined) {
            throw new Error('Required parameter queueId was null or undefined when calling getQueue.');
        }
        var headers = this.defaultHeaders;
        // to determine the Accept header
        var httpHeaderAccepts = [
            'application/json'
        ];
        var httpHeaderAcceptSelected = this.configuration.selectHeaderAccept(httpHeaderAccepts);
        if (httpHeaderAcceptSelected != undefined) {
            headers = headers.set('Accept', httpHeaderAcceptSelected);
        }
        // to determine the Content-Type header
        var consumes = [];
        return this.httpClient.request('get', this.basePath + "/inbox/queue/" + encodeURIComponent(String(queueId)), {
            withCredentials: this.configuration.withCredentials,
            headers: headers,
            observe: observe,
            reportProgress: reportProgress
        });
    };
    DefaultService.prototype.getRuleAuditItems = function (language, ai, checkout, clientIds, contentIds, notContentIds, endDate, startDate, reviewedStartDate, reviewedEndDate, checkoutAvailable, doneByModeratorId, limit, offset, sortBy, tags, text, topics, unresolvedComments, observe, reportProgress) {
        if (observe === void 0) { observe = 'body'; }
        if (reportProgress === void 0) { reportProgress = false; }
        if (language === null || language === undefined) {
            throw new Error('Required parameter language was null or undefined when calling getRuleAuditItems.');
        }
        var queryParameters = new HttpParams({ encoder: new CustomHttpUrlEncodingCodec() });
        if (ai) {
            ai.forEach(function (element) {
                queryParameters = queryParameters.append('ai', element);
            });
        }
        if (checkout !== undefined && checkout !== null) {
            queryParameters = queryParameters.set('checkout', checkout);
        }
        if (clientIds) {
            queryParameters = queryParameters.set('clientIds', clientIds.join(COLLECTION_FORMATS['csv']));
        }
        if (contentIds) {
            queryParameters = queryParameters.set('contentIds', contentIds.join(COLLECTION_FORMATS['csv']));
        }
        if (notContentIds) {
            queryParameters = queryParameters.set('notContentIds', notContentIds.join(COLLECTION_FORMATS['csv']));
        }
        if (endDate !== undefined && endDate !== null) {
            queryParameters = queryParameters.set('endDate', endDate);
        }
        if (startDate !== undefined && startDate !== null) {
            queryParameters = queryParameters.set('startDate', startDate);
        }
        if (reviewedStartDate !== undefined && reviewedStartDate !== null) {
            queryParameters = queryParameters.set('reviewedStartDate', reviewedStartDate);
        }
        if (reviewedEndDate !== undefined && reviewedEndDate !== null) {
            queryParameters = queryParameters.set('reviewedEndDate', reviewedEndDate);
        }
        if (checkoutAvailable !== undefined && checkoutAvailable !== null) {
            queryParameters = queryParameters.set('checkoutAvailable', checkoutAvailable);
        }
        if (doneByModeratorId !== undefined && doneByModeratorId !== null) {
            queryParameters = queryParameters.set('doneByModeratorId', doneByModeratorId);
        }
        if (language !== undefined && language !== null) {
            queryParameters = queryParameters.set('language', language);
        }
        if (limit !== undefined && limit !== null) {
            queryParameters = queryParameters.set('limit', limit);
        }
        if (offset !== undefined && offset !== null) {
            queryParameters = queryParameters.set('offset', offset);
        }
        if (sortBy !== undefined && sortBy !== null) {
            queryParameters = queryParameters.set('sortBy', sortBy);
        }
        if (tags) {
            queryParameters = queryParameters.set('tags', tags.join(COLLECTION_FORMATS['csv']));
        }
        if (text !== undefined && text !== null) {
            queryParameters = queryParameters.set('text', text);
        }
        if (topics) {
            topics.forEach(function (element) {
                queryParameters = queryParameters.append('topics', element);
            });
        }
        if (unresolvedComments !== undefined && unresolvedComments !== null) {
            queryParameters = queryParameters.set('unresolvedComments', unresolvedComments);
        }
        var headers = this.defaultHeaders;
        // to determine the Accept header
        var httpHeaderAccepts = [
            'application/json'
        ];
        var httpHeaderAcceptSelected = this.configuration.selectHeaderAccept(httpHeaderAccepts);
        if (httpHeaderAcceptSelected != undefined) {
            headers = headers.set('Accept', httpHeaderAcceptSelected);
        }
        // to determine the Content-Type header
        var consumes = [];
        return this.httpClient.request('get', this.basePath + "/inbox/queue/rulesAudit/items", {
            params: queryParameters,
            withCredentials: this.configuration.withCredentials,
            headers: headers,
            observe: observe,
            reportProgress: reportProgress
        });
    };
    DefaultService.prototype.getSpelling = function (language, ai, checkout, clientIds, contentIds, notContentIds, endDate, startDate, reviewedStartDate, reviewedEndDate, checkoutAvailable, doneByModeratorId, limit, offset, sortBy, tags, text, topics, unresolvedComments, observe, reportProgress) {
        if (observe === void 0) { observe = 'body'; }
        if (reportProgress === void 0) { reportProgress = false; }
        if (language === null || language === undefined) {
            throw new Error('Required parameter language was null or undefined when calling getSpelling.');
        }
        var queryParameters = new HttpParams({ encoder: new CustomHttpUrlEncodingCodec() });
        if (ai) {
            ai.forEach(function (element) {
                queryParameters = queryParameters.append('ai', element);
            });
        }
        if (checkout !== undefined && checkout !== null) {
            queryParameters = queryParameters.set('checkout', checkout);
        }
        if (clientIds) {
            queryParameters = queryParameters.set('clientIds', clientIds.join(COLLECTION_FORMATS['csv']));
        }
        if (contentIds) {
            queryParameters = queryParameters.set('contentIds', contentIds.join(COLLECTION_FORMATS['csv']));
        }
        if (notContentIds) {
            queryParameters = queryParameters.set('notContentIds', notContentIds.join(COLLECTION_FORMATS['csv']));
        }
        if (endDate !== undefined && endDate !== null) {
            queryParameters = queryParameters.set('endDate', endDate);
        }
        if (startDate !== undefined && startDate !== null) {
            queryParameters = queryParameters.set('startDate', startDate);
        }
        if (reviewedStartDate !== undefined && reviewedStartDate !== null) {
            queryParameters = queryParameters.set('reviewedStartDate', reviewedStartDate);
        }
        if (reviewedEndDate !== undefined && reviewedEndDate !== null) {
            queryParameters = queryParameters.set('reviewedEndDate', reviewedEndDate);
        }
        if (checkoutAvailable !== undefined && checkoutAvailable !== null) {
            queryParameters = queryParameters.set('checkoutAvailable', checkoutAvailable);
        }
        if (doneByModeratorId !== undefined && doneByModeratorId !== null) {
            queryParameters = queryParameters.set('doneByModeratorId', doneByModeratorId);
        }
        if (language !== undefined && language !== null) {
            queryParameters = queryParameters.set('language', language);
        }
        if (limit !== undefined && limit !== null) {
            queryParameters = queryParameters.set('limit', limit);
        }
        if (offset !== undefined && offset !== null) {
            queryParameters = queryParameters.set('offset', offset);
        }
        if (sortBy !== undefined && sortBy !== null) {
            queryParameters = queryParameters.set('sortBy', sortBy);
        }
        if (tags) {
            queryParameters = queryParameters.set('tags', tags.join(COLLECTION_FORMATS['csv']));
        }
        if (text !== undefined && text !== null) {
            queryParameters = queryParameters.set('text', text);
        }
        if (topics) {
            topics.forEach(function (element) {
                queryParameters = queryParameters.append('topics', element);
            });
        }
        if (unresolvedComments !== undefined && unresolvedComments !== null) {
            queryParameters = queryParameters.set('unresolvedComments', unresolvedComments);
        }
        var headers = this.defaultHeaders;
        // to determine the Accept header
        var httpHeaderAccepts = [
            'application/json'
        ];
        var httpHeaderAcceptSelected = this.configuration.selectHeaderAccept(httpHeaderAccepts);
        if (httpHeaderAcceptSelected != undefined) {
            headers = headers.set('Accept', httpHeaderAcceptSelected);
        }
        // to determine the Content-Type header
        var consumes = [];
        return this.httpClient.request('get', this.basePath + "/inbox/queue/spelling/items", {
            params: queryParameters,
            withCredentials: this.configuration.withCredentials,
            headers: headers,
            observe: observe,
            reportProgress: reportProgress
        });
    };
    DefaultService.prototype.getTaskItems = function (language, clientIds, contentIds, notContentIds, endDate, startDate, reviewedStartDate, reviewedEndDate, checkoutAvailable, doneByModeratorId, assignedToModeratorId, limit, offset, sortBy, tags, text, unresolvedComments, observe, reportProgress) {
        if (observe === void 0) { observe = 'body'; }
        if (reportProgress === void 0) { reportProgress = false; }
        if (language === null || language === undefined) {
            throw new Error('Required parameter language was null or undefined when calling getTaskItems.');
        }
        var queryParameters = new HttpParams({ encoder: new CustomHttpUrlEncodingCodec() });
        if (clientIds) {
            queryParameters = queryParameters.set('clientIds', clientIds.join(COLLECTION_FORMATS['csv']));
        }
        if (contentIds) {
            queryParameters = queryParameters.set('contentIds', contentIds.join(COLLECTION_FORMATS['csv']));
        }
        if (notContentIds) {
            queryParameters = queryParameters.set('notContentIds', notContentIds.join(COLLECTION_FORMATS['csv']));
        }
        if (endDate !== undefined && endDate !== null) {
            queryParameters = queryParameters.set('endDate', endDate);
        }
        if (startDate !== undefined && startDate !== null) {
            queryParameters = queryParameters.set('startDate', startDate);
        }
        if (reviewedStartDate !== undefined && reviewedStartDate !== null) {
            queryParameters = queryParameters.set('reviewedStartDate', reviewedStartDate);
        }
        if (reviewedEndDate !== undefined && reviewedEndDate !== null) {
            queryParameters = queryParameters.set('reviewedEndDate', reviewedEndDate);
        }
        if (checkoutAvailable !== undefined && checkoutAvailable !== null) {
            queryParameters = queryParameters.set('checkoutAvailable', checkoutAvailable);
        }
        if (doneByModeratorId !== undefined && doneByModeratorId !== null) {
            queryParameters = queryParameters.set('doneByModeratorId', doneByModeratorId);
        }
        if (assignedToModeratorId !== undefined && assignedToModeratorId !== null) {
            queryParameters = queryParameters.set('assignedToModeratorId', assignedToModeratorId);
        }
        if (language !== undefined && language !== null) {
            queryParameters = queryParameters.set('language', language);
        }
        if (limit !== undefined && limit !== null) {
            queryParameters = queryParameters.set('limit', limit);
        }
        if (offset !== undefined && offset !== null) {
            queryParameters = queryParameters.set('offset', offset);
        }
        if (sortBy !== undefined && sortBy !== null) {
            queryParameters = queryParameters.set('sortBy', sortBy);
        }
        if (tags) {
            queryParameters = queryParameters.set('tags', tags.join(COLLECTION_FORMATS['csv']));
        }
        if (text !== undefined && text !== null) {
            queryParameters = queryParameters.set('text', text);
        }
        if (unresolvedComments !== undefined && unresolvedComments !== null) {
            queryParameters = queryParameters.set('unresolvedComments', unresolvedComments);
        }
        var headers = this.defaultHeaders;
        // to determine the Accept header
        var httpHeaderAccepts = [
            'application/json'
        ];
        var httpHeaderAcceptSelected = this.configuration.selectHeaderAccept(httpHeaderAccepts);
        if (httpHeaderAcceptSelected != undefined) {
            headers = headers.set('Accept', httpHeaderAcceptSelected);
        }
        // to determine the Content-Type header
        var consumes = [];
        return this.httpClient.request('get', this.basePath + "/inbox/queue/task/items", {
            params: queryParameters,
            withCredentials: this.configuration.withCredentials,
            headers: headers,
            observe: observe,
            reportProgress: reportProgress
        });
    };
    DefaultService.prototype.getUserData = function (userId, observe, reportProgress) {
        if (observe === void 0) { observe = 'body'; }
        if (reportProgress === void 0) { reportProgress = false; }
        if (userId === null || userId === undefined) {
            throw new Error('Required parameter userId was null or undefined when calling getUserData.');
        }
        var headers = this.defaultHeaders;
        // to determine the Accept header
        var httpHeaderAccepts = [
            'application/x-ndjson',
            'application/json'
        ];
        var httpHeaderAcceptSelected = this.configuration.selectHeaderAccept(httpHeaderAccepts);
        if (httpHeaderAcceptSelected != undefined) {
            headers = headers.set('Accept', httpHeaderAcceptSelected);
        }
        // to determine the Content-Type header
        var consumes = [];
        return this.httpClient.request('get', this.basePath + "/inbox/user/" + encodeURIComponent(String(userId)), {
            withCredentials: this.configuration.withCredentials,
            headers: headers,
            observe: observe,
            reportProgress: reportProgress
        });
    };
    DefaultService.prototype.getUsernames = function (language, ai, checkout, clientIds, contentIds, notContentIds, endDate, startDate, reviewedStartDate, reviewedEndDate, checkoutAvailable, doneByModeratorId, limit, offset, sortBy, tags, text, topics, unresolvedComments, observe, reportProgress) {
        if (observe === void 0) { observe = 'body'; }
        if (reportProgress === void 0) { reportProgress = false; }
        if (language === null || language === undefined) {
            throw new Error('Required parameter language was null or undefined when calling getUsernames.');
        }
        var queryParameters = new HttpParams({ encoder: new CustomHttpUrlEncodingCodec() });
        if (ai) {
            ai.forEach(function (element) {
                queryParameters = queryParameters.append('ai', element);
            });
        }
        if (checkout !== undefined && checkout !== null) {
            queryParameters = queryParameters.set('checkout', checkout);
        }
        if (clientIds) {
            queryParameters = queryParameters.set('clientIds', clientIds.join(COLLECTION_FORMATS['csv']));
        }
        if (contentIds) {
            queryParameters = queryParameters.set('contentIds', contentIds.join(COLLECTION_FORMATS['csv']));
        }
        if (notContentIds) {
            queryParameters = queryParameters.set('notContentIds', notContentIds.join(COLLECTION_FORMATS['csv']));
        }
        if (endDate !== undefined && endDate !== null) {
            queryParameters = queryParameters.set('endDate', endDate);
        }
        if (startDate !== undefined && startDate !== null) {
            queryParameters = queryParameters.set('startDate', startDate);
        }
        if (reviewedStartDate !== undefined && reviewedStartDate !== null) {
            queryParameters = queryParameters.set('reviewedStartDate', reviewedStartDate);
        }
        if (reviewedEndDate !== undefined && reviewedEndDate !== null) {
            queryParameters = queryParameters.set('reviewedEndDate', reviewedEndDate);
        }
        if (checkoutAvailable !== undefined && checkoutAvailable !== null) {
            queryParameters = queryParameters.set('checkoutAvailable', checkoutAvailable);
        }
        if (doneByModeratorId !== undefined && doneByModeratorId !== null) {
            queryParameters = queryParameters.set('doneByModeratorId', doneByModeratorId);
        }
        if (language !== undefined && language !== null) {
            queryParameters = queryParameters.set('language', language);
        }
        if (limit !== undefined && limit !== null) {
            queryParameters = queryParameters.set('limit', limit);
        }
        if (offset !== undefined && offset !== null) {
            queryParameters = queryParameters.set('offset', offset);
        }
        if (sortBy !== undefined && sortBy !== null) {
            queryParameters = queryParameters.set('sortBy', sortBy);
        }
        if (tags) {
            queryParameters = queryParameters.set('tags', tags.join(COLLECTION_FORMATS['csv']));
        }
        if (text !== undefined && text !== null) {
            queryParameters = queryParameters.set('text', text);
        }
        if (topics) {
            topics.forEach(function (element) {
                queryParameters = queryParameters.append('topics', element);
            });
        }
        if (unresolvedComments !== undefined && unresolvedComments !== null) {
            queryParameters = queryParameters.set('unresolvedComments', unresolvedComments);
        }
        var headers = this.defaultHeaders;
        // to determine the Accept header
        var httpHeaderAccepts = [
            'application/json'
        ];
        var httpHeaderAcceptSelected = this.configuration.selectHeaderAccept(httpHeaderAccepts);
        if (httpHeaderAcceptSelected != undefined) {
            headers = headers.set('Accept', httpHeaderAcceptSelected);
        }
        // to determine the Content-Type header
        var consumes = [];
        return this.httpClient.request('get', this.basePath + "/inbox/queue/usernames/items", {
            params: queryParameters,
            withCredentials: this.configuration.withCredentials,
            headers: headers,
            observe: observe,
            reportProgress: reportProgress
        });
    };
    DefaultService.prototype.itemDone = function (queueId, contentId, body, observe, reportProgress) {
        if (observe === void 0) { observe = 'body'; }
        if (reportProgress === void 0) { reportProgress = false; }
        if (queueId === null || queueId === undefined) {
            throw new Error('Required parameter queueId was null or undefined when calling itemDone.');
        }
        if (contentId === null || contentId === undefined) {
            throw new Error('Required parameter contentId was null or undefined when calling itemDone.');
        }
        var headers = this.defaultHeaders;
        // to determine the Accept header
        var httpHeaderAccepts = [
            'application/json'
        ];
        var httpHeaderAcceptSelected = this.configuration.selectHeaderAccept(httpHeaderAccepts);
        if (httpHeaderAcceptSelected != undefined) {
            headers = headers.set('Accept', httpHeaderAcceptSelected);
        }
        // to determine the Content-Type header
        var consumes = [
            'application/json'
        ];
        var httpContentTypeSelected = this.configuration.selectHeaderContentType(consumes);
        if (httpContentTypeSelected != undefined) {
            headers = headers.set('Content-Type', httpContentTypeSelected);
        }
        return this.httpClient.request('post', this.basePath + "/inbox/queue/" + encodeURIComponent(String(queueId)) + "/items/" + encodeURIComponent(String(contentId)) + "/decision", {
            body: body,
            withCredentials: this.configuration.withCredentials,
            headers: headers,
            observe: observe,
            reportProgress: reportProgress
        });
    };
    DefaultService.prototype.listCommentsForContentId = function (queueId, contentId, observe, reportProgress) {
        if (observe === void 0) { observe = 'body'; }
        if (reportProgress === void 0) { reportProgress = false; }
        if (queueId === null || queueId === undefined) {
            throw new Error('Required parameter queueId was null or undefined when calling listCommentsForContentId.');
        }
        if (contentId === null || contentId === undefined) {
            throw new Error('Required parameter contentId was null or undefined when calling listCommentsForContentId.');
        }
        var headers = this.defaultHeaders;
        // to determine the Accept header
        var httpHeaderAccepts = [
            'application/json'
        ];
        var httpHeaderAcceptSelected = this.configuration.selectHeaderAccept(httpHeaderAccepts);
        if (httpHeaderAcceptSelected != undefined) {
            headers = headers.set('Accept', httpHeaderAcceptSelected);
        }
        // to determine the Content-Type header
        var consumes = [];
        return this.httpClient.request('get', this.basePath + "/inbox/queue/" + encodeURIComponent(String(queueId)) + "/items/" + encodeURIComponent(String(contentId)) + "/comments", {
            withCredentials: this.configuration.withCredentials,
            headers: headers,
            observe: observe,
            reportProgress: reportProgress
        });
    };
    DefaultService.prototype.redactItem = function (queueId, contentId, body, observe, reportProgress) {
        if (observe === void 0) { observe = 'body'; }
        if (reportProgress === void 0) { reportProgress = false; }
        if (queueId === null || queueId === undefined) {
            throw new Error('Required parameter queueId was null or undefined when calling redactItem.');
        }
        if (contentId === null || contentId === undefined) {
            throw new Error('Required parameter contentId was null or undefined when calling redactItem.');
        }
        var headers = this.defaultHeaders;
        // to determine the Accept header
        var httpHeaderAccepts = [
            'application/json'
        ];
        var httpHeaderAcceptSelected = this.configuration.selectHeaderAccept(httpHeaderAccepts);
        if (httpHeaderAcceptSelected != undefined) {
            headers = headers.set('Accept', httpHeaderAcceptSelected);
        }
        // to determine the Content-Type header
        var consumes = [
            'application/json'
        ];
        var httpContentTypeSelected = this.configuration.selectHeaderContentType(consumes);
        if (httpContentTypeSelected != undefined) {
            headers = headers.set('Content-Type', httpContentTypeSelected);
        }
        return this.httpClient.request('put', this.basePath + "/inbox/queue/" + encodeURIComponent(String(queueId)) + "/items/" + encodeURIComponent(String(contentId)) + "/text", {
            body: body,
            withCredentials: this.configuration.withCredentials,
            headers: headers,
            observe: observe,
            reportProgress: reportProgress
        });
    };
    DefaultService.prototype.redactUser = function (userId, observe, reportProgress) {
        if (observe === void 0) { observe = 'body'; }
        if (reportProgress === void 0) { reportProgress = false; }
        if (userId === null || userId === undefined) {
            throw new Error('Required parameter userId was null or undefined when calling redactUser.');
        }
        var headers = this.defaultHeaders;
        // to determine the Accept header
        var httpHeaderAccepts = [
            'application/json'
        ];
        var httpHeaderAcceptSelected = this.configuration.selectHeaderAccept(httpHeaderAccepts);
        if (httpHeaderAcceptSelected != undefined) {
            headers = headers.set('Accept', httpHeaderAcceptSelected);
        }
        // to determine the Content-Type header
        var consumes = [];
        return this.httpClient.request('put', this.basePath + "/inbox/user/" + encodeURIComponent(String(userId)), {
            withCredentials: this.configuration.withCredentials,
            headers: headers,
            observe: observe,
            reportProgress: reportProgress
        });
    };
    DefaultService.prototype.resolveComment = function (queueId, contentId, commentId, body, observe, reportProgress) {
        if (observe === void 0) { observe = 'body'; }
        if (reportProgress === void 0) { reportProgress = false; }
        if (queueId === null || queueId === undefined) {
            throw new Error('Required parameter queueId was null or undefined when calling resolveComment.');
        }
        if (contentId === null || contentId === undefined) {
            throw new Error('Required parameter contentId was null or undefined when calling resolveComment.');
        }
        if (commentId === null || commentId === undefined) {
            throw new Error('Required parameter commentId was null or undefined when calling resolveComment.');
        }
        var headers = this.defaultHeaders;
        // to determine the Accept header
        var httpHeaderAccepts = [
            'application/json'
        ];
        var httpHeaderAcceptSelected = this.configuration.selectHeaderAccept(httpHeaderAccepts);
        if (httpHeaderAcceptSelected != undefined) {
            headers = headers.set('Accept', httpHeaderAcceptSelected);
        }
        // to determine the Content-Type header
        var consumes = [
            'application/json'
        ];
        var httpContentTypeSelected = this.configuration.selectHeaderContentType(consumes);
        if (httpContentTypeSelected != undefined) {
            headers = headers.set('Content-Type', httpContentTypeSelected);
        }
        return this.httpClient.request('put', this.basePath + "/inbox/queue/" + encodeURIComponent(String(queueId)) + "/items/" + encodeURIComponent(String(contentId)) + "/comments/" + encodeURIComponent(String(commentId)) + "/resolved", {
            body: body,
            withCredentials: this.configuration.withCredentials,
            headers: headers,
            observe: observe,
            reportProgress: reportProgress
        });
    };
    DefaultService.prototype.updateComment = function (queueId, contentId, commentId, body, observe, reportProgress) {
        if (observe === void 0) { observe = 'body'; }
        if (reportProgress === void 0) { reportProgress = false; }
        if (queueId === null || queueId === undefined) {
            throw new Error('Required parameter queueId was null or undefined when calling updateComment.');
        }
        if (contentId === null || contentId === undefined) {
            throw new Error('Required parameter contentId was null or undefined when calling updateComment.');
        }
        if (commentId === null || commentId === undefined) {
            throw new Error('Required parameter commentId was null or undefined when calling updateComment.');
        }
        var headers = this.defaultHeaders;
        // to determine the Accept header
        var httpHeaderAccepts = [
            'application/json'
        ];
        var httpHeaderAcceptSelected = this.configuration.selectHeaderAccept(httpHeaderAccepts);
        if (httpHeaderAcceptSelected != undefined) {
            headers = headers.set('Accept', httpHeaderAcceptSelected);
        }
        // to determine the Content-Type header
        var consumes = [
            'application/json'
        ];
        var httpContentTypeSelected = this.configuration.selectHeaderContentType(consumes);
        if (httpContentTypeSelected != undefined) {
            headers = headers.set('Content-Type', httpContentTypeSelected);
        }
        return this.httpClient.request('put', this.basePath + "/inbox/queue/" + encodeURIComponent(String(queueId)) + "/items/" + encodeURIComponent(String(contentId)) + "/comments/" + encodeURIComponent(String(commentId)), {
            body: body,
            withCredentials: this.configuration.withCredentials,
            headers: headers,
            observe: observe,
            reportProgress: reportProgress
        });
    };
    DefaultService.prototype.updateItemCheckout = function (queueId, contentId, body, observe, reportProgress) {
        if (observe === void 0) { observe = 'body'; }
        if (reportProgress === void 0) { reportProgress = false; }
        if (queueId === null || queueId === undefined) {
            throw new Error('Required parameter queueId was null or undefined when calling updateItemCheckout.');
        }
        if (contentId === null || contentId === undefined) {
            throw new Error('Required parameter contentId was null or undefined when calling updateItemCheckout.');
        }
        var headers = this.defaultHeaders;
        // to determine the Accept header
        var httpHeaderAccepts = [
            'application/json'
        ];
        var httpHeaderAcceptSelected = this.configuration.selectHeaderAccept(httpHeaderAccepts);
        if (httpHeaderAcceptSelected != undefined) {
            headers = headers.set('Accept', httpHeaderAcceptSelected);
        }
        // to determine the Content-Type header
        var consumes = [
            'application/json'
        ];
        var httpContentTypeSelected = this.configuration.selectHeaderContentType(consumes);
        if (httpContentTypeSelected != undefined) {
            headers = headers.set('Content-Type', httpContentTypeSelected);
        }
        return this.httpClient.request('put', this.basePath + "/inbox/queue/" + encodeURIComponent(String(queueId)) + "/items/" + encodeURIComponent(String(contentId)) + "/checkout", {
            body: body,
            withCredentials: this.configuration.withCredentials,
            headers: headers,
            observe: observe,
            reportProgress: reportProgress
        });
    };
    DefaultService.prototype.updateParam = function (queueId, paramId, body, observe, reportProgress) {
        if (observe === void 0) { observe = 'body'; }
        if (reportProgress === void 0) { reportProgress = false; }
        if (queueId === null || queueId === undefined) {
            throw new Error('Required parameter queueId was null or undefined when calling updateParam.');
        }
        if (paramId === null || paramId === undefined) {
            throw new Error('Required parameter paramId was null or undefined when calling updateParam.');
        }
        var headers = this.defaultHeaders;
        // to determine the Accept header
        var httpHeaderAccepts = [
            'application/json'
        ];
        var httpHeaderAcceptSelected = this.configuration.selectHeaderAccept(httpHeaderAccepts);
        if (httpHeaderAcceptSelected != undefined) {
            headers = headers.set('Accept', httpHeaderAcceptSelected);
        }
        // to determine the Content-Type header
        var consumes = [
            'application/json'
        ];
        var httpContentTypeSelected = this.configuration.selectHeaderContentType(consumes);
        if (httpContentTypeSelected != undefined) {
            headers = headers.set('Content-Type', httpContentTypeSelected);
        }
        return this.httpClient.request('put', this.basePath + "/inbox/queue/" + encodeURIComponent(String(queueId)) + "/param/" + encodeURIComponent(String(paramId)), {
            body: body,
            withCredentials: this.configuration.withCredentials,
            headers: headers,
            observe: observe,
            reportProgress: reportProgress
        });
    };
    DefaultService.ɵfac = function DefaultService_Factory(t) { return new (t || DefaultService)(i0.ɵɵinject(i1.HttpClient), i0.ɵɵinject(BASE_PATH, 8), i0.ɵɵinject(i2.Configuration, 8)); };
    DefaultService.ɵprov = i0.ɵɵdefineInjectable({ token: DefaultService, factory: DefaultService.ɵfac, providedIn: 'root' });
    return DefaultService;
}());
export { DefaultService };
/*@__PURE__*/ (function () { i0.ɵsetClassMetadata(DefaultService, [{
        type: Injectable,
        args: [{
                providedIn: 'root'
            }]
    }], function () { return [{ type: i1.HttpClient }, { type: undefined, decorators: [{
                type: Optional
            }, {
                type: Inject,
                args: [BASE_PATH]
            }] }, { type: i2.Configuration, decorators: [{
                type: Optional
            }] }]; }, null); })();
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiZGVmYXVsdC5zZXJ2aWNlLmpzIiwic291cmNlUm9vdCI6Im5nOi8vbGFuZ3VhZ2UtdGFza3Mtc3dhZ2dlci1jbGllbnQvc3JjLyIsInNvdXJjZXMiOlsiYXBpL2RlZmF1bHQuc2VydmljZS50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiO0FBQUE7Ozs7Ozs7Ozs7R0FVRyxDQUFBLHVEQUF1RDtBQUUxRCxPQUFPLEVBQUUsTUFBTSxFQUFFLFVBQVUsRUFBRSxRQUFRLEVBQUUsTUFBMkIsZUFBZSxDQUFDO0FBQ2xGLE9BQU8sRUFBYyxXQUFXLEVBQUUsVUFBVSxFQUNWLE1BQWdDLHNCQUFzQixDQUFDO0FBQ3pGLE9BQU8sRUFBRSwwQkFBMEIsRUFBRSxNQUE2QixZQUFZLENBQUM7QUE2Qi9FLE9BQU8sRUFBRSxTQUFTLEVBQUUsa0JBQWtCLEVBQUUsTUFBMEIsY0FBYyxDQUFDO0FBQ2pGLE9BQU8sRUFBRSxhQUFhLEVBQUUsTUFBMEMsa0JBQWtCLENBQUM7Ozs7QUFJckY7SUFTSSx3QkFBc0IsVUFBc0IsRUFBZ0MsUUFBZ0IsRUFBYyxhQUE0QjtRQUFoSCxlQUFVLEdBQVYsVUFBVSxDQUFZO1FBSmxDLGFBQVEsR0FBRyxzREFBc0QsQ0FBQztRQUNyRSxtQkFBYyxHQUFHLElBQUksV0FBVyxFQUFFLENBQUM7UUFDbkMsa0JBQWEsR0FBRyxJQUFJLGFBQWEsRUFBRSxDQUFDO1FBR3ZDLElBQUksUUFBUSxFQUFFO1lBQ1YsSUFBSSxDQUFDLFFBQVEsR0FBRyxRQUFRLENBQUM7U0FDNUI7UUFDRCxJQUFJLGFBQWEsRUFBRTtZQUNmLElBQUksQ0FBQyxhQUFhLEdBQUcsYUFBYSxDQUFDO1lBQ25DLElBQUksQ0FBQyxRQUFRLEdBQUcsUUFBUSxJQUFJLGFBQWEsQ0FBQyxRQUFRLElBQUksSUFBSSxDQUFDLFFBQVEsQ0FBQztTQUN2RTtJQUNMLENBQUM7SUFFRDs7O09BR0c7SUFDSyx1Q0FBYyxHQUF0QixVQUF1QixRQUFrQjs7UUFDckMsSUFBTSxJQUFJLEdBQUcscUJB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T0FBTyxDQUFNLEtBQUssRUFBSSxJQUFJLENBQUMsUUFBUSxxQkFBZ0Isa0JBQWtCLENBQUMsTUFBTSxDQUFDLE9BQU8sQ0FBQyxDQUFDLGVBQVUsa0JBQWtCLENBQUMsTUFBTSxDQUFDLE9BQU8sQ0FBQyxDQUFHLEVBQ3hKO1lBQ0ksSUFBSSxFQUFFLElBQUk7WUFDVixlQUFlLEVBQUUsSUFBSSxDQUFDLGFBQWEsQ0FBQyxlQUFlO1lBQ25ELE9BQU8sRUFBRSxPQUFPO1lBQ2hCLE9BQU8sRUFBRSxPQUFPO1lBQ2hCLGNBQWMsRUFBRSxjQUFjO1NBQ2pDLENBQ0osQ0FBQztJQUNOLENBQUM7Z0ZBM3RFUSxjQUFjLDBDQU0wQyxTQUFTOzBEQU5qRSxjQUFjLFdBQWQsY0FBYyxtQkFGWCxNQUFNO3lCQWxEdEI7Q0FpeEVDLEFBaHVFRCxJQWd1RUM7U0E3dEVZLGNBQWM7a0RBQWQsY0FBYztjQUgxQixVQUFVO2VBQUM7Z0JBQ1IsVUFBVSxFQUFFLE1BQU07YUFDckI7O3NCQU9rRCxRQUFROztzQkFBRyxNQUFNO3VCQUFDLFNBQVM7O3NCQUFxQixRQUFRIiwic291cmNlc0NvbnRlbnQiOlsiLyoqXHJcbiAqIEluYm94IEFQSVxyXG4gKiBNYW5hZ2Ugd29yayBmb3IgaHVtYW4gbW9kZXJhdG9ycyBieSBhZGRpbmcsIGNoZWNraW5nIG91dCBhbmQgY29tcGxldGluZyB3b3JrIGl0ZW1zLiBTdG9yZSBVc2VyIEdlbmVyYXRlZCBDb250ZW50IHRvIHRoZSBkYXRhYmFzZS4gIFRoaXMgd2lsbCBzdG9yZSBpdCB0d2ljZSwgb25jZSBpbiBzaG9ydC10ZXJtIHN0b3JhZ2UgaW4gaXQncyBleGFjdCBmb3JtIGFtZCBhZ2FpbiBpbiBsb25nIHRlcm0gc3RvcmFnZSBpbiBpdCdzIHJlZGFjdGVkIGFuZCBwc2V1ZG9ueW1pemVkIGZvcm0gXHJcbiAqXHJcbiAqIE9wZW5BUEkgc3BlYyB2ZXJzaW9uOiAyLjEuMVxyXG4gKiBDb250YWN0OiBzdXBwb3J0QHR3b2hhdC5jb21cclxuICpcclxuICogTk9URTogVGhpcyBjbGFzcyBpcyBhdXRvIGdlbmVyYXRlZCBieSB0aGUgc3dhZ2dlciBjb2RlIGdlbmVyYXRvciBwcm9ncmFtLlxyXG4gKiBodHRwczovL2dpdGh1Yi5jb20vc3dhZ2dlci1hcGkvc3dhZ2dlci1jb2RlZ2VuLmdpdFxyXG4gKiBEbyBub3QgZWRpdCB0aGUgY2xhc3MgbWFudWFsbHkuXHJcbiAqLy8qIHRzbGludDpkaXNhYmxlOm5vLXVudXNlZC12YXJpYWJsZSBtZW1iZXItb3JkZXJpbmcgKi9cclxuXHJcbmltcG9ydCB7IEluamVjdCwgSW5qZWN0YWJsZSwgT3B0aW9uYWwgfSAgICAgICAgICAgICAgICAgICAgICBmcm9tICdAYW5ndWxhci9jb3JlJztcclxuaW1wb3J0IHsgSHR0cENsaWVudCwgSHR0cEhlYWRlcnMsIEh0dHBQYXJhbXMsXHJcbiAgICAgICAgIEh0dHBSZXNwb25zZSwgSHR0cEV2ZW50IH0gICAgICAgICAgICAgICAgICAgICAgICAgICBmcm9tICdAYW5ndWxhci9jb21tb24vaHR0cCc7XHJcbmltcG9ydCB7IEN1c3RvbUh0dHBVcmxFbmNvZGluZ0NvZGVjIH0gICAgICAgICAgICAgICAgICAgICAgICBmcm9tICcuLi9lbmNvZGVyJztcclxuXHJcbmltcG9ydCB7IE9ic2VydmFibGUgfSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBmcm9tICdyeGpzJztcclxuXHJcbmltcG9ydCB7IEFpIH0gZnJvbSAnLi4vbW9kZWwvYWknO1xyXG5pbXBvcnQgeyBCb2R5IH0gZnJvbSAnLi4vbW9kZWwvYm9keSc7XHJcbmltcG9ydCB7IEJvZHkxIH0gZnJvbSAnLi4vbW9kZWwvYm9keTEnO1xyXG5pbXBvcnQgeyBCb2R5MiB9IGZyb20gJy4uL21vZGVsL2JvZHkyJztcclxuaW1wb3J0IHsgQ2hlY2tvdXQgfSBmcm9tICcuLi9tb2RlbC9jaGVja291dCc7XHJcbmltcG9ydCB7IENvbW1lbnQgfSBmcm9tICcuLi9tb2RlbC9jb21tZW50JztcclxuaW1wb3J0IHsgQ29tbWVudElucHV0IH0gZnJvbSAnLi4vbW9kZWwvY29tbWVudElucHV0JztcclxuaW1wb3J0IHsgRGVjaXNpb24gfSBmcm9tICcuLi9tb2RlbC9kZWNpc2lvbic7XHJcbmltcG9ydCB7IEV4YW1wbGVJbnB1dCB9IGZyb20gJy4uL21vZGVsL2V4YW1wbGVJbnB1dCc7XHJcbmltcG9ydCB7IEV4YW1wbGVPdXRwdXQgfSBmcm9tICcuLi9tb2RlbC9leGFtcGxlT3V0cHV0JztcclxuaW1wb3J0IHsgSW5saW5lUmVzcG9uc2UyMDAgfSBmcm9tICcuLi9tb2RlbC9pbmxpbmVSZXNwb25zZTIwMCc7XHJcbmltcG9ydCB7IElubGluZVJlc3BvbnNlMjAwMSB9IGZyb20gJy4uL21vZGVsL2lubGluZVJlc3BvbnNlMjAwMSc7XHJcbmltcG9ydCB7IElubGluZVJlc3BvbnNlMjAxIH0gZnJvbSAnLi4vbW9kZWwvaW5saW5lUmVzcG9uc2UyMDEnO1xyXG5pbXBvcnQgeyBNb2RlcmF0b3JJZCB9IGZyb20gJy4uL21vZGVsL21vZGVyYXRvcklkJztcclxuaW1wb3J0IHsgUXVldWUgfSBmcm9tICcuLi9tb2RlbC9xdWV1ZSc7XHJcbmltcG9ydCB7IFJ1bGVBdWRpdElucHV0IH0gZnJvbSAnLi4vbW9kZWwvcnVsZUF1ZGl0SW5wdXQnO1xyXG5pbXBvcnQgeyBSdWxlQXVkaXRPdXRwdXQgfSBmcm9tICcuLi9tb2RlbC9ydWxlQXVkaXRPdXRwdXQnO1xyXG5pbXBvcnQgeyBTcGVsbGluZ01pc3Rha2VJbnB1dCB9IGZyb20gJy4uL21vZGVsL3NwZWxsaW5nTWlzdGFrZUlucHV0JztcclxuaW1wb3J0IHsgU3BlbGxpbmdNaXN0YWtlT3V0cHV0IH0gZnJvbSAnLi4vbW9kZWwvc3BlbGxpbmdNaXN0YWtlT3V0cHV0JztcclxuaW1wb3J0IHsgVGFza0lucHV0IH0gZnJvbSAnLi4vbW9kZWwvdGFza0lucHV0JztcclxuaW1wb3J0IHsgVGFza091dHB1dCB9IGZyb20gJy4uL21vZGVsL3Rhc2tPdXRwdXQnO1xyXG5pbXBvcnQgeyBUb3BpY3MgfSBmcm9tICcuLi9tb2RlbC90b3BpY3MnO1xyXG5pbXBvcnQgeyBVc2VybmFtZUlucHV0IH0gZnJvbSAnLi4vbW9kZWwvdXNlcm5hbWVJbnB1dCc7XHJcbmltcG9ydCB7IFVzZXJuYW1lT3V0cHV0IH0gZnJvbSAnLi4vbW9kZWwvdXNlcm5hbWVPdXRwdXQnO1xyXG5cclxuaW1wb3J0IHsgQkFTRV9QQVRILCBDT0xMRUNUSU9OX0ZPUk1BVFMgfSAgICAgICAgICAgICAgICAgICAgIGZyb20gJy4uL3ZhcmlhYmxlcyc7XHJcbmltcG9ydCB7IENvbmZpZ3VyYXRpb24gfSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBmcm9tICcuLi9jb25maWd1cmF0aW9uJztcclxuaW1wb3J0IHsgRGVmYXVsdFNlcnZpY2VJbnRlcmZhY2UgfSAgICAgICAgICAgICAgICAgICAgICAgICAgICBmcm9tICcuL2RlZmF1bHQuc2VydmljZUludGVyZmFjZSc7XHJcblxyXG5cclxuQEluamVjdGFibGUoe1xyXG4gICAgcHJvdmlkZWRJbjogJ3Jvb3QnXHJcbn0pXHJcbmV4cG9ydCBjbGFzcyBEZWZhdWx0U2VydmljZSBpbXBsZW1lbnRzIERlZmF1bHRTZXJ2aWNlSW50ZXJmYWNlIHtcclxuXHJcbiAgICBwcm90ZWN0ZWQgYmFzZVBhdGggPSAnaHR0cHM6Ly92aXJ0c2VydmVyLnN3YWdnZXJodWIuY29tL3R3b2hhdC9pbmJveC8yLjEuMSc7XHJcbiAgICBwdWJsaWMgZGVmYXVsdEhlYWRlcnMgPSBuZXcgSHR0cEhlYWRlcnMoKTtcclxuICAgIHB1YmxpYyBjb25maWd1cmF0aW9uID0gbmV3IENvbmZpZ3VyYXRpb24oKTtcclxuXHJcbiAgICBjb25zdHJ1Y3Rvcihwcm90ZWN0ZWQgaHR0cENsaWVudDogSHR0cENsaWVudCwgQE9wdGlvbmFsKClASW5qZWN0KEJBU0VfUEFUSCkgYmFzZVBhdGg6IHN0cmluZywgQE9wdGlvbmFsKCkgY29uZmlndXJhdGlvbjogQ29uZmlndXJhdGlvbikge1xyXG4gICAgICAgIGlmIChiYXNlUGF0aCkge1xyXG4gICAgICAgICAgICB0aGlzLmJhc2VQYXRoID0gYmFzZVBhdGg7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGlmIChjb25maWd1cmF0aW9uKSB7XHJcbiAgICAgICAgICAgIHRoaXMuY29uZmlndXJhdGlvbiA9IGNvbmZpZ3VyYXRpb247XHJcbiAgICAgICAgICAgIHRoaXMuYmFzZVBhdGggPSBiYXNlUGF0aCB8fCBjb25maWd1cmF0aW9uLmJhc2VQYXRoIHx8IHRoaXMuYmFzZVBhdGg7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogQHBhcmFtIGNvbnN1bWVzIHN0cmluZ1tdIG1pbWUtdHlwZXNcclxuICAgICAqIEByZXR1cm4gdHJ1ZTogY29uc3VtZXMgY29udGFpbnMgJ211bHRpcGFydC9mb3JtLWRhdGEnLCBmYWxzZTogb3RoZXJ3aXNlXHJcbiAgICAgKi9cclxuICAgIHByaXZhdGUgY2FuQ29uc3VtZUZvcm0oY29uc3VtZXM6IHN0cmluZ1tdKTogYm9vbGVhbiB7XHJcbiAgICAgICAgY29uc3QgZm9ybSA9ICdtdWx0aXBhcnQvZm9ybS1kYXRhJztcclxuICAgICAgICBmb3IgKGNvbnN0IGNvbnN1bWUgb2YgY29uc3VtZXMpIHtcclxuICAgICAgICAgICAgaWYgKGZvcm0gPT09IGNvbnN1bWUpIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiB0cnVlO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgIH1cclxuXHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBBZGQgYSBjb21tZW50IHRvIHRoaXMgY29udGVudCBpdGVtXHJcbiAgICAgKiBDb21tZW50cyBhcmUgd2F5cyB0byBsZWF2ZSBhIG5vdGUgdG8gc2F5IHdoeSBhIHBlcnNvbiBtYWRlIHRoZSBkZWNpc2lvbiB0aGV5IGRpZC4gIE9yIGl0IGNvdWxkIGJlIGEgcXVlc3Rpb24gb3IgYW5zd2VyIHRyeWluZyB0byBnZXQgaGVscCBvbiBhbiBpdGVtLiBcclxuICAgICAqIEBwYXJhbSBxdWV1ZUlkIFRoZSB1bmlxdWUgaWRlbnRpZmllciBmb3IgdGhpcyBxdWV1ZVxyXG4gICAgICogQHBhcmFtIGNvbnRlbnRJZCBUaGUgdW5pcXVlIGlkZW50aWZpZXIgZm9yIHRoZSBjb250ZW50XHJcbiAgICAgKiBAcGFyYW0gYm9keSBcclxuICAgICAqIEBwYXJhbSBvYnNlcnZlIHNldCB3aGV0aGVyIG9yIG5vdCB0byByZXR1cm4gdGhlIGRhdGEgT2JzZXJ2YWJsZSBhcyB0aGUgYm9keSwgcmVzcG9uc2Ugb3IgZXZlbnRzLiBkZWZhdWx0cyB0byByZXR1cm5pbmcgdGhlIGJvZHkuXHJcbiAgICAgKiBAcGFyYW0gcmVwb3J0UHJvZ3Jlc3MgZmxhZyB0byByZXBvcnQgcmVxdWVzdCBhbmQgcmVzcG9uc2UgcHJvZ3Jlc3MuXHJcbiAgICAgKi9cclxuICAgIHB1YmxpYyBhZGRDb21tZW50KHF1ZXVlSWQ6IHN0cmluZywgY29udGVudElkOiBzdHJpbmcsIGJvZHk/OiBDb21tZW50SW5wdXQsIG9ic2VydmU/OiAnYm9keScsIHJlcG9ydFByb2dyZXNzPzogYm9vbGVhbik6IE9ic2VydmFibGU8Q29tbWVudD47XHJcbiAgICBwdWJsaWMgYWRkQ29tbWVudChxdWV1ZUlkOiBzdHJpbmcsIGNvbnRlbnRJZDogc3RyaW5nLCBib2R5PzogQ29tbWVudElucHV0LCBvYnNlcnZlPzogJ3Jlc3BvbnNlJywgcmVwb3J0UHJvZ3Jlc3M/OiBib29sZWFuKTogT2JzZXJ2YWJsZTxIdHRwUmVzcG9uc2U8Q29tbWVudD4+O1xyXG4gICAgcHVibGljIGFkZENvbW1lbnQocXVldWVJZDogc3RyaW5nLCBjb250ZW50SWQ6IHN0cmluZywgYm9keT86IENvbW1lbnRJbnB1dCwgb2JzZXJ2ZT86ICdldmVudHMnLCByZXBvcnRQcm9ncmVzcz86IGJvb2xlYW4pOiBPYnNlcnZhYmxlPEh0dHBFdmVudDxDb21tZW50Pj47XHJcbiAgICBwdWJsaWMgYWRkQ29tbWVudChxdWV1ZUlkOiBzdHJpbmcsIGNvbnRlbnRJZDogc3RyaW5nLCBib2R5PzogQ29tbWVudElucHV0LCBvYnNlcnZlOiBhbnkgPSAnYm9keScsIHJlcG9ydFByb2dyZXNzOiBib29sZWFuID0gZmFsc2UgKTogT2JzZXJ2YWJsZTxhbnk+IHtcclxuXHJcbiAgICAgICAgaWYgKHF1ZXVlSWQgPT09IG51bGwgfHwgcXVldWVJZCA9PT0gdW5kZWZpbmVkKSB7XHJcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcignUmVxdWlyZWQgcGFyYW1ldGVyIHF1ZXVlSWQgd2FzIG51bGwgb3IgdW5kZWZpbmVkIHdoZW4gY2FsbGluZyBhZGRDb21tZW50LicpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgaWYgKGNvbnRlbnRJZCA9PT0gbnVsbCB8fCBjb250ZW50SWQgPT09IHVuZGVmaW5lZCkge1xyXG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ1JlcXVpcmVkIHBhcmFtZXRlciBjb250ZW50SWQgd2FzIG51bGwgb3IgdW5kZWZpbmVkIHdoZW4gY2FsbGluZyBhZGRDb21tZW50LicpO1xyXG4gICAgICAgIH1cclxuXHJcblxyXG4gICAgICAgIGxldCBoZWFkZXJzID0gdGhpcy5kZWZhdWx0SGVhZGVycztcclxuXHJcbiAgICAgICAgLy8gdG8gZGV0ZXJtaW5lIHRoZSBBY2NlcHQgaGVhZGVyXHJcbiAgICAgICAgbGV0IGh0dHBIZWFkZXJBY2NlcHRzOiBzdHJpbmdbXSA9IFtcclxuICAgICAgICAgICAgJ2FwcGxpY2F0aW9uL2pzb24nXHJcbiAgICAgICAgXTtcclxuICAgICAgICBjb25zdCBodHRwSGVhZGVyQWNjZXB0U2VsZWN0ZWQ6IHN0cmluZyB8IHVuZGVmaW5lZCA9IHRoaXMuY29uZmlndXJhdGlvbi5zZWxlY3RIZWFkZXJBY2NlcHQoaHR0cEhlYWRlckFjY2VwdHMpO1xyXG4gICAgICAgIGlmIChodHRwSGVhZGVyQWNjZXB0U2VsZWN0ZWQgIT0gdW5kZWZpbmVkKSB7XHJcbiAgICAgICAgICAgIGhlYWRlcnMgPSBoZWFkZXJzLnNldCgnQWNjZXB0JywgaHR0cEhlYWRlckFjY2VwdFNlbGVjdGVkKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8vIHRvIGRldGVybWluZSB0aGUgQ29udGVudC1UeXBlIGhlYWRlclxyXG4gICAgICAgIGNvbnN0IGNvbnN1bWVzOiBzdHJpbmdbXSA9IFtcclxuICAgICAgICAgICAgJ2FwcGxpY2F0aW9uL2pzb24nXHJcbiAgICAgICAgXTtcclxuICAgICAgICBjb25zdCBodHRwQ29udGVudFR5cGVTZWxlY3RlZDogc3RyaW5nIHwgdW5kZWZpbmVkID0gdGhpcy5jb25maWd1cmF0aW9uLnNlbGVjdEhlYWRlckNvbnRlbnRUeXBlKGNvbnN1bWVzKTtcclxuICAgICAgICBpZiAoaHR0cENvbnRlbnRUeXBlU2VsZWN0ZWQgIT0gdW5kZWZpbmVkKSB7XHJcbiAgICAgICAgICAgIGhlYWRlcnMgPSBoZWFkZXJzLnNldCgnQ29udGVudC1UeXBlJywgaHR0cENvbnRlbnRUeXBlU2VsZWN0ZWQpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcmV0dXJuIHRoaXMuaHR0cENsaWVudC5yZXF1ZXN0PENvbW1lbnQ+KCdwb3N0JyxgJHt0aGlzLmJhc2VQYXRofS9pbmJveC9xdWV1ZS8ke2VuY29kZVVSSUNvbXBvbmVudChTdHJpbmcocXVldWVJZCkpfS9pdGVtcy8ke2VuY29kZVVSSUNvbXBvbmVudChTdHJpbmcoY29udGVudElkKSl9L2NvbW1lbnRzYCxcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgYm9keTogYm9keSxcclxuICAgICAgICAgICAgICAgIHdpdGhDcmVkZW50aWFsczogdGhpcy5jb25maWd1cmF0aW9uLndpdGhDcmVkZW50aWFscyxcclxuICAgICAgICAgICAgICAgIGhlYWRlcnM6IGhlYWRlcnMsXHJcbiAgICAgICAgICAgICAgICBvYnNlcnZlOiBvYnNlcnZlLFxyXG4gICAgICAgICAgICAgICAgcmVwb3J0UHJvZ3Jlc3M6IHJlcG9ydFByb2dyZXNzXHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICApO1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogQWRkIGV4YW1wbGVzIG9mIHRleHQgdG8gYmUgcmV2aWV3ZWRcclxuICAgICAqIEFkZCBhbiBleGFtcGxlIG9mIHNob3J0IHRleHQgZm9yIFF1YWxpdHkgQ29udHJvbC4gIFRoaXMgd2lsbCBsYXRlciBiZSB1c2VkIGZvciAgLSBSZWdyZXNzaW9uIFRlc3RzIHwgT25jZSB5b3UgbWFyayBhbiBpdGVtIGFzIHdyb25nIGFuZCBpdCBpcyBmaXhlZCB5b3Ugd2lsbCB3YW50IHRvIGJlIGFibGUgdG8gcnVuIGl0IHRocm91Z2ggdGhlIGZpbHRlciBhZ2FpbiB0byBlbnN1cmUgdGhlIGVycm9ycyBhcmUgbm90IHJlcHJvZHVjZWQgYnkgY3JlYXRpbmcgZnV0dXJlIHJ1bGVzLiAtIEV4YW1wbGVzIHwgV2hlbiByZXZpZXdpbmcgdGhpbmdzIGxpa2Ugc3BlbGxpbmcgbWlzdGFrZXMgb3IgcnVsZXMgaXQgbWFrZXMgYSBodWdlIGRpZmZlcmVuY2UgdG8gbG9vayBhdCBob3cgd29yZHMgYXJlIHJlYWxseSB1c2VkLiAgRm9yIGluc3RhbmNlIG9uZSBtaWdodCB0aGluayB0aGF0IFxcJnF1b3Q7bWFkZSBvdXRcXCZxdW90OyBpcyBzZXh1YWwgdGlsbCB0aGV5IHNlZSB0aGUgZXhhbXBsZSBcXCZxdW90O21hZGUgb3V0IG9mIHBsYXN0aWNcXCZxdW90OyAtIFRyYWluaW5nIEFJIHwgV2UgY2FuIGltcHJvdmUgdGhlIGZpbHRlciBpbiB0aGUgZnV0dXJlIGJ5IHRyYWluaW5nIEFJIHRvIHByZWRpY3QgdGhlIHJpc2tzIGFuZCBsYWJlbHMgeW91IHByb3ZpZGUgYW5kIGluIHNvIGRvaW5nIGNvbWJpbmUgYSBydWxlcyBiYXNlZCBhcHByb2FjaCB5b3UgY2FuIGNvbnRyb2wgd2l0aCB0aGUgZnV6enkgbWF0Y2hpbmcgb2YgQUkgdG8gZmluZCBzaW1pbGFyIHRoaW5ncy4gXHJcbiAgICAgKiBAcGFyYW0gYm9keSBcclxuICAgICAqIEBwYXJhbSB1cGRhdGVEYXRhIElmIHRoZSBpdGVtIGFscmVhZHkgZXhpc3RzIHNob3VsZCB3ZSB1cGRhdGUgdGhlIHZhbHVlcyBvZiB0aGUgYm9keSBlbGVtZW50XHJcbiAgICAgKiBAcGFyYW0gb2JzZXJ2ZSBzZXQgd2hldGhlciBvciBub3QgdG8gcmV0dXJuIHRoZSBkYXRhIE9ic2VydmFibGUgYXMgdGhlIGJvZHksIHJlc3BvbnNlIG9yIGV2ZW50cy4gZGVmYXVsdHMgdG8gcmV0dXJuaW5nIHRoZSBib2R5LlxyXG4gICAgICogQHBhcmFtIHJlcG9ydFByb2dyZXNzIGZsYWcgdG8gcmVwb3J0IHJlcXVlc3QgYW5kIHJlc3BvbnNlIHByb2dyZXNzLlxyXG4gICAgICovXHJcbiAgICBwdWJsaWMgYWRkRXhhbXBsZXMoYm9keT86IEFycmF5PEV4YW1wbGVJbnB1dD4sIHVwZGF0ZURhdGE/OiBib29sZWFuLCBvYnNlcnZlPzogJ2JvZHknLCByZXBvcnRQcm9ncmVzcz86IGJvb2xlYW4pOiBPYnNlcnZhYmxlPElubGluZVJlc3BvbnNlMjAxPjtcclxuICAgIHB1YmxpYyBhZGRFeGFtcGxlcyhib2R5PzogQXJyYXk8RXhhbXBsZUlucHV0PiwgdXBkYXRlRGF0YT86IGJvb2xlYW4sIG9ic2VydmU/OiAncmVzcG9uc2UnLCByZXBvcnRQcm9ncmVzcz86IGJvb2xlYW4pOiBPYnNlcnZhYmxlPEh0dHBSZXNwb25zZTxJbmxpbmVSZXNwb25zZTIwMT4+O1xyXG4gICAgcHVibGljIGFkZEV4YW1wbGVzKGJvZHk/OiBBcnJheTxFeGFtcGxlSW5wdXQ+LCB1cGRhdGVEYXRhPzogYm9vbGVhbiwgb2JzZXJ2ZT86ICdldmVudHMnLCByZXBvcnRQcm9ncmVzcz86IGJvb2xlYW4pOiBPYnNlcnZhYmxlPEh0dHBFdmVudDxJbmxpbmVSZXNwb25zZTIwMT4+O1xyXG4gICAgcHVibGljIGFkZEV4YW1wbGVzKGJvZHk/OiBBcnJheTxFeGFtcGxlSW5wdXQ+LCB1cGRhdGVEYXRhPzogYm9vbGVhbiwgb2JzZXJ2ZTogYW55ID0gJ2JvZHknLCByZXBvcnRQcm9ncmVzczogYm9vbGVhbiA9IGZhbHNlICk6IE9ic2VydmFibGU8YW55PiB7XHJcblxyXG5cclxuXHJcbiAgICAgICAgbGV0IHF1ZXJ5UGFyYW1ldGVycyA9IG5ldyBIdHRwUGFyYW1zKHtlbmNvZGVyOiBuZXcgQ3VzdG9tSHR0cFVybEVuY29kaW5nQ29kZWMoKX0pO1xyXG4gICAgICAgIGlmICh1cGRhdGVEYXRhICE9PSB1bmRlZmluZWQgJiYgdXBkYXRlRGF0YSAhPT0gbnVsbCkge1xyXG4gICAgICAgICAgICBxdWVyeVBhcmFtZXRlcnMgPSBxdWVyeVBhcmFtZXRlcnMuc2V0KCd1cGRhdGVEYXRhJywgPGFueT51cGRhdGVEYXRhKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGxldCBoZWFkZXJzID0gdGhpcy5kZWZhdWx0SGVhZGVycztcclxuXHJcbiAgICAgICAgLy8gdG8gZGV0ZXJtaW5lIHRoZSBBY2NlcHQgaGVhZGVyXHJcbiAgICAgICAgbGV0IGh0dHBIZWFkZXJBY2NlcHRzOiBzdHJpbmdbXSA9IFtcclxuICAgICAgICAgICAgJ2FwcGxpY2F0aW9uL2pzb24nXHJcbiAgICAgICAgXTtcclxuICAgICAgICBjb25zdCBodHRwSGVhZGVyQWNjZXB0U2VsZWN0ZWQ6IHN0cmluZyB8IHVuZGVmaW5lZCA9IHRoaXMuY29uZmlndXJhdGlvbi5zZWxlY3RIZWFkZXJBY2NlcHQoaHR0cEhlYWRlckFjY2VwdHMpO1xyXG4gICAgICAgIGlmIChodHRwSGVhZGVyQWNjZXB0U2VsZWN0ZWQgIT0gdW5kZWZpbmVkKSB7XHJcbiAgICAgICAgICAgIGhlYWRlcnMgPSBoZWFkZXJzLnNldCgnQWNjZXB0JywgaHR0cEhlYWRlckFjY2VwdFNlbGVjdGVkKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8vIHRvIGRldGVybWluZSB0aGUgQ29udGVudC1UeXBlIGhlYWRlclxyXG4gICAgICAgIGNvbnN0IGNvbnN1bWVzOiBzdHJpbmdbXSA9IFtcclxuICAgICAgICAgICAgJ2FwcGxpY2F0aW9uL2pzb24nXHJcbiAgICAgICAgXTtcclxuICAgICAgICBjb25zdCBodHRwQ29udGVudFR5cGVTZWxlY3RlZDogc3RyaW5nIHwgdW5kZWZpbmVkID0gdGhpcy5jb25maWd1cmF0aW9uLnNlbGVjdEhlYWRlckNvbnRlbnRUeXBlKGNvbnN1bWVzKTtcclxuICAgICAgICBpZiAoaHR0cENvbnRlbnRUeXBlU2VsZWN0ZWQgIT0gdW5kZWZpbmVkKSB7XHJcbiAgICAgICAgICAgIGhlYWRlcnMgPSBoZWFkZXJzLnNldCgnQ29udGVudC1UeXBlJywgaHR0cENvbnRlbnRUeXBlU2VsZWN0ZWQpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcmV0dXJuIHRoaXMuaHR0cENsaWVudC5yZXF1ZXN0PElubGluZVJlc3BvbnNlMjAxPigncG9zdCcsYCR7dGhpcy5iYXNlUGF0aH0vaW5ib3gvcXVldWUvZXhhbXBsZXMvaXRlbXNgLFxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICBib2R5OiBib2R5LFxyXG4gICAgICAgICAgICAgICAgcGFyYW1zOiBxdWVyeVBhcmFtZXRlcnMsXHJcbiAgICAgICAgICAgICAgICB3aXRoQ3JlZGVudGlhbHM6IHRoaXMuY29uZmlndXJhdGlvbi53aXRoQ3JlZGVudGlhbHMsXHJcbiAgICAgICAgICAgICAgICBoZWFkZXJzOiBoZWFkZXJzLFxyXG4gICAgICAgICAgICAgICAgb2JzZXJ2ZTogb2JzZXJ2ZSxcclxuICAgICAgICAgICAgICAgIHJlcG9ydFByb2dyZXNzOiByZXBvcnRQcm9ncmVzc1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgKTtcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIEFkZCBydWxlcyB0byBiZSBhdWRpdGVkXHJcbiAgICAgKiBPdXIgcHJpbWFyeSBwdXJwb3NlIGlzIGFzIGEgY29udGVudCBmaWx0ZXIuICBUbyBhY2hpZXZlIHRoaXMgeW91IGNhbiBtYW51YWxseSBhZGQgd29yZCBwYXR0ZXJucyB0byB0aGUgc3lzdGVtLiAgQnV0IGhvdyBkbyB5b3Uga25vdyBpZiBpdCBpcyBjcmVhdGluZyBlcnJvcnMgbGlrZSBmYWxzZSBwb3NpdGl2ZXMgIFRvIGhhbmRsZSB0aGF0IHdlIGNvdW50IGhvdyBtYW55IHRpbWVzIHRoYXQgcnVsZSBpcyB1c2VkIGluIHlvdXIgbmV3IGNvbnRlbnQgYW5kIG9uIGtleSBwb2ludHMgbGlrZSB3aGVuIGl0IGlzIHNhaWQgMTAwIHRpbWVzIHdlIGJyaW5nIGl0IHVwIGhlcmUgZm9yIHJldmlldy4gIEluIHRoaXMgd2F5IHlvdSBrbm93IHlvdSBhcmUgd29ya2luZyBvbiB0aGUgbW9zdCBpbXBhY3RmdWwgdGhpbmdzIGZpcnN0LiAgSWYgdGhlIHJ1bGUgaGFzIGFscmVhZHkgYmVlbiBhZGRlZCBpdCB3aWxsIGluY3JlYXNlIGl0JiN4Mjc7cyBwcmlvcml0eS4gIE5vdGUgdGhhdCB0aGUgcmVxdWVzdCBhY2NlcHRzIGFuIGFycmF5IG9mIG1pbmltdW0gMSB0byBtYXhpbXVtIDEwMCBpdGVtcyBzbyB5b3UgY2FuIGRvIGEgYnVsayBpbnNlcnQuIFxyXG4gICAgICogQHBhcmFtIGJvZHkgXHJcbiAgICAgKiBAcGFyYW0gdXBkYXRlRGF0YSBJZiB0aGUgaXRlbSBhbHJlYWR5IGV4aXN0cyBzaG91bGQgd2UgdXBkYXRlIHRoZSB2YWx1ZXMgb2YgdGhlIGJvZHkgZWxlbWVudFxyXG4gICAgICogQHBhcmFtIG9ic2VydmUgc2V0IHdoZXRoZXIgb3Igbm90IHRvIHJldHVybiB0aGUgZGF0YSBPYnNlcnZhYmxlIGFzIHRoZSBib2R5LCByZXNwb25zZSBvciBldmVudHMuIGRlZmF1bHRzIHRvIHJldHVybmluZyB0aGUgYm9keS5cclxuICAgICAqIEBwYXJhbSByZXBvcnRQcm9ncmVzcyBmbGFnIHRvIHJlcG9ydCByZXF1ZXN0IGFuZCByZXNwb25zZSBwcm9ncmVzcy5cclxuICAgICAqL1xyXG4gICAgcHVibGljIGFkZFJ1bGVBdWRpdEl0ZW1zKGJvZHk/OiBBcnJheTxSdWxlQXVkaXRJbnB1dD4sIHVwZGF0ZURhdGE/OiBib29sZWFuLCBvYnNlcnZlPzogJ2JvZHknLCByZXBvcnRQcm9ncmVzcz86IGJvb2xlYW4pOiBPYnNlcnZhYmxlPElubGluZVJlc3BvbnNlMjAxPjtcclxuICAgIHB1YmxpYyBhZGRSdWxlQXVkaXRJdGVtcyhib2R5PzogQXJyYXk8UnVsZUF1ZGl0SW5wdXQ+LCB1cGRhdGVEYXRhPzogYm9vbGVhbiwgb2JzZXJ2ZT86ICdyZXNwb25zZScsIHJlcG9ydFByb2dyZXNzPzogYm9vbGVhbik6IE9ic2VydmFibGU8SHR0cFJlc3BvbnNlPElubGluZVJlc3BvbnNlMjAxPj47XHJcbiAgICBwdWJsaWMgYWRkUnVsZUF1ZGl0SXRlbXMoYm9keT86IEFycmF5PFJ1bGVBdWRpdElucHV0PiwgdXBkYXRlRGF0YT86IGJvb2xlYW4sIG9ic2VydmU/OiAnZXZlbnRzJywgcmVwb3J0UHJvZ3Jlc3M/OiBib29sZWFuKTogT2JzZXJ2YWJsZTxIdHRwRXZlbnQ8SW5saW5lUmVzcG9uc2UyMDE+PjtcclxuICAgIHB1YmxpYyBhZGRSdWxlQXVkaXRJdGVtcyhib2R5PzogQXJyYXk8UnVsZUF1ZGl0SW5wdXQ+LCB1cGRhdGVEYXRhPzogYm9vbGVhbiwgb2JzZXJ2ZTogYW55ID0gJ2JvZHknLCByZXBvcnRQcm9ncmVzczogYm9vbGVhbiA9IGZhbHNlICk6IE9ic2VydmFibGU8YW55PiB7XHJcblxyXG5cclxuXHJcbiAgICAgICAgbGV0IHF1ZXJ5UGFyYW1ldGVycyA9IG5ldyBIdHRwUGFyYW1zKHtlbmNvZGVyOiBuZXcgQ3VzdG9tSHR0cFVybEVuY29kaW5nQ29kZWMoKX0pO1xyXG4gICAgICAgIGlmICh1cGRhdGVEYXRhICE9PSB1bmRlZmluZWQgJiYgdXBkYXRlRGF0YSAhPT0gbnVsbCkge1xyXG4gICAgICAgICAgICBxdWVyeVBhcmFtZXRlcnMgPSBxdWVyeVBhcmFtZXRlcnMuc2V0KCd1cGRhdGVEYXRhJywgPGFueT51cGRhdGVEYXRhKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGxldCBoZWFkZXJzID0gdGhpcy5kZWZhdWx0SGVhZGVycztcclxuXHJcbiAgICAgICAgLy8gdG8gZGV0ZXJtaW5lIHRoZSBBY2NlcHQgaGVhZGVyXHJcbiAgICAgICAgbGV0IGh0dHBIZWFkZXJBY2NlcHRzOiBzdHJpbmdbXSA9IFtcclxuICAgICAgICAgICAgJ2FwcGxpY2F0aW9uL2pzb24nXHJcbiAgICAgICAgXTtcclxuICAgICAgICBjb25zdCBodHRwSGVhZGVyQWNjZXB0U2VsZWN0ZWQ6IHN0cmluZyB8IHVuZGVmaW5lZCA9IHRoaXMuY29uZmlndXJhdGlvbi5zZWxlY3RIZWFkZXJBY2NlcHQoaHR0cEhlYWRlckFjY2VwdHMpO1xyXG4gICAgICAgIGlmIChodHRwSGVhZGVyQWNjZXB0U2VsZWN0ZWQgIT0gdW5kZWZpbmVkKSB7XHJcbiAgICAgICAgICAgIGhlYWRlcnMgPSBoZWFkZXJzLnNldCgnQWNjZXB0JywgaHR0cEhlYWRlckFjY2VwdFNlbGVjdGVkKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8vIHRvIGRldGVybWluZSB0aGUgQ29udGVudC1UeXBlIGhlYWRlclxyXG4gICAgICAgIGNvbnN0IGNvbnN1bWVzOiBzdHJpbmdbXSA9IFtcclxuICAgICAgICAgICAgJ2FwcGxpY2F0aW9uL2pzb24nXHJcbiAgICAgICAgXTtcclxuICAgICAgICBjb25zdCBodHRwQ29udGVudFR5cGVTZWxlY3RlZDogc3RyaW5nIHwgdW5kZWZpbmVkID0gdGhpcy5jb25maWd1cmF0aW9uLnNlbGVjdEhlYWRlckNvbnRlbnRUeXBlKGNvbnN1bWVzKTtcclxuICAgICAgICBpZiAoaHR0cENvbnRlbnRUeXBlU2VsZWN0ZWQgIT0gdW5kZWZpbmVkKSB7XHJcbiAgICAgICAgICAgIGhlYWRlcnMgPSBoZWFkZXJzLnNldCgnQ29udGVudC1UeXBlJywgaHR0cENvbnRlbnRUeXBlU2VsZWN0ZWQpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcmV0dXJuIHRoaXMuaHR0cENsaWVudC5yZXF1ZXN0PElubGluZVJlc3BvbnNlMjAxPigncG9zdCcsYCR7dGhpcy5iYXNlUGF0aH0vaW5ib3gvcXVldWUvcnVsZXNBdWRpdC9pdGVtc2AsXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIGJvZHk6IGJvZHksXHJcbiAgICAgICAgICAgICAgICBwYXJhbXM6IHF1ZXJ5UGFyYW1ldGVycyxcclxuICAgICAgICAgICAgICAgIHdpdGhDcmVkZW50aWFsczogdGhpcy5jb25maWd1cmF0aW9uLndpdGhDcmVkZW50aWFscyxcclxuICAgICAgICAgICAgICAgIGhlYWRlcnM6IGhlYWRlcnMsXHJcbiAgICAgICAgICAgICAgICBvYnNlcnZlOiBvYnNlcnZlLFxyXG4gICAgICAgICAgICAgICAgcmVwb3J0UHJvZ3Jlc3M6IHJlcG9ydFByb2dyZXNzXHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICApO1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogQWRkIGEgY29tbW9uIHNwZWxsaW5nIG1pc3Rha2UgZm9yIHJldmlld1xyXG4gICAgICogT25lIG9mIHRoZSBncmVhdGVzdCBpbXBhY3RzIGVhcmx5IG9uIHdoZW4geW91IHVzZSB0aGUgc3lzdGVtIGlzIHNwZWxsaW5nIG1pc3Rha2VzLCBtb3N0IG9mdGVuIHdvcmRzIHVuaXF1ZSB0byB5b3VyIHByb2R1Y3QuICBXZSBhdXRvbWF0aWNhbGx5IGNvdW50IHdoaWNoIHdvcmRzIGFyZSB1c2VkIGFuZCBob3cgb2Z0ZW4uICBJZiBpdCBpcyBmcmVxdWVudGx5IG1pc3NwZWxsZWQgd2Ugd2lsbCBlc2NhbGF0ZSBpdCBoZXJlLiBcclxuICAgICAqIEBwYXJhbSBib2R5IFxyXG4gICAgICogQHBhcmFtIHVwZGF0ZURhdGEgSWYgdGhlIGl0ZW0gYWxyZWFkeSBleGlzdHMgc2hvdWxkIHdlIHVwZGF0ZSB0aGUgdmFsdWVzIG9mIHRoZSBib2R5IGVsZW1lbnRcclxuICAgICAqIEBwYXJhbSBvYnNlcnZlIHNldCB3aGV0aGVyIG9yIG5vdCB0byByZXR1cm4gdGhlIGRhdGEgT2JzZXJ2YWJsZSBhcyB0aGUgYm9keSwgcmVzcG9uc2Ugb3IgZXZlbnRzLiBkZWZhdWx0cyB0byByZXR1cm5pbmcgdGhlIGJvZHkuXHJcbiAgICAgKiBAcGFyYW0gcmVwb3J0UHJvZ3Jlc3MgZmxhZyB0byByZXBvcnQgcmVxdWVzdCBhbmQgcmVzcG9uc2UgcHJvZ3Jlc3MuXHJcbiAgICAgKi9cclxuICAgIHB1YmxpYyBhZGRTcGVsbGluZyhib2R5PzogQXJyYXk8U3BlbGxpbmdNaXN0YWtlSW5wdXQ+LCB1cGRhdGVEYXRhPzogYm9vbGVhbiwgb2JzZXJ2ZT86ICdib2R5JywgcmVwb3J0UHJvZ3Jlc3M/OiBib29sZWFuKTogT2JzZXJ2YWJsZTxJbmxpbmVSZXNwb25zZTIwMT47XHJcbiAgICBwdWJsaWMgYWRkU3BlbGxpbmcoYm9keT86IEFycmF5PFNwZWxsaW5nTWlzdGFrZUlucHV0PiwgdXBkYXRlRGF0YT86IGJvb2xlYW4sIG9ic2VydmU/OiAncmVzcG9uc2UnLCByZXBvcnRQcm9ncmVzcz86IGJvb2xlYW4pOiBPYnNlcnZhYmxlPEh0dHBSZXNwb25zZTxJbmxpbmVSZXNwb25zZTIwMT4+O1xyXG4gICAgcHVibGljIGFkZFNwZWxsaW5nKGJvZHk/OiBBcnJheTxTcGVsbGluZ01pc3Rha2VJbnB1dD4sIHVwZGF0ZURhdGE/OiBib29sZWFuLCBvYnNlcnZlPzogJ2V2ZW50cycsIHJlcG9ydFByb2dyZXNzPzogYm9vbGVhbik6IE9ic2VydmFibGU8SHR0cEV2ZW50PElubGluZVJlc3BvbnNlMjAxPj47XHJcbiAgICBwdWJsaWMgYWRkU3BlbGxpbmcoYm9keT86IEFycmF5PFNwZWxsaW5nTWlzdGFrZUlucHV0PiwgdXBkYXRlRGF0YT86IGJvb2xlYW4sIG9ic2VydmU6IGFueSA9ICdib2R5JywgcmVwb3J0UHJvZ3Jlc3M6IGJvb2xlYW4gPSBmYWxzZSApOiBPYnNlcnZhYmxlPGFueT4ge1xyXG5cclxuXHJcblxyXG4gICAgICAgIGxldCBxdWVyeVBhcmFtZXRlcnMgPSBuZXcgSHR0cFBhcmFtcyh7ZW5jb2RlcjogbmV3IEN1c3RvbUh0dHBVcmxFbmNvZGluZ0NvZGVjKCl9KTtcclxuICAgICAgICBpZiAodXBkYXRlRGF0YSAhPT0gdW5kZWZpbmVkICYmIHVwZGF0ZURhdGEgIT09IG51bGwpIHtcclxuICAgICAgICAgICAgcXVlcnlQYXJhbWV0ZXJzID0gcXVlcnlQYXJhbWV0ZXJzLnNldCgndXBkYXRlRGF0YScsIDxhbnk+dXBkYXRlRGF0YSk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBsZXQgaGVhZGVycyA9IHRoaXMuZGVmYXVsdEhlYWRlcnM7XHJcblxyXG4gICAgICAgIC8vIHRvIGRldGVybWluZSB0aGUgQWNjZXB0IGhlYWRlclxyXG4gICAgICAgIGxldCBodHRwSGVhZGVyQWNjZXB0czogc3RyaW5nW10gPSBbXHJcbiAgICAgICAgICAgICdhcHBsaWNhdGlvbi9qc29uJ1xyXG4gICAgICAgIF07XHJcbiAgICAgICAgY29uc3QgaHR0cEhlYWRlckFjY2VwdFNlbGVjdGVkOiBzdHJpbmcgfCB1bmRlZmluZWQgPSB0aGlzLmNvbmZpZ3VyYXRpb24uc2VsZWN0SGVhZGVyQWNjZXB0KGh0dHBIZWFkZXJBY2NlcHRzKTtcclxuICAgICAgICBpZiAoaHR0cEhlYWRlckFjY2VwdFNlbGVjdGVkICE9IHVuZGVmaW5lZCkge1xyXG4gICAgICAgICAgICBoZWFkZXJzID0gaGVhZGVycy5zZXQoJ0FjY2VwdCcsIGh0dHBIZWFkZXJBY2NlcHRTZWxlY3RlZCk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvLyB0byBkZXRlcm1pbmUgdGhlIENvbnRlbnQtVHlwZSBoZWFkZXJcclxuICAgICAgICBjb25zdCBjb25zdW1lczogc3RyaW5nW10gPSBbXHJcbiAgICAgICAgICAgICdhcHBsaWNhdGlvbi9qc29uJ1xyXG4gICAgICAgIF07XHJcbiAgICAgICAgY29uc3QgaHR0cENvbnRlbnRUeXBlU2VsZWN0ZWQ6IHN0cmluZyB8IHVuZGVmaW5lZCA9IHRoaXMuY29uZmlndXJhdGlvbi5zZWxlY3RIZWFkZXJDb250ZW50VHlwZShjb25zdW1lcyk7XHJcbiAgICAgICAgaWYgKGh0dHBDb250ZW50VHlwZVNlbGVjdGVkICE9IHVuZGVmaW5lZCkge1xyXG4gICAgICAgICAgICBoZWFkZXJzID0gaGVhZGVycy5zZXQoJ0NvbnRlbnQtVHlwZScsIGh0dHBDb250ZW50VHlwZVNlbGVjdGVkKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHJldHVybiB0aGlzLmh0dHBDbGllbnQucmVxdWVzdDxJbmxpbmVSZXNwb25zZTIwMT4oJ3Bvc3QnLGAke3RoaXMuYmFzZVBhdGh9L2luYm94L3F1ZXVlL3NwZWxsaW5nL2l0ZW1zYCxcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgYm9keTogYm9keSxcclxuICAgICAgICAgICAgICAgIHBhcmFtczogcXVlcnlQYXJhbWV0ZXJzLFxyXG4gICAgICAgICAgICAgICAgd2l0aENyZWRlbnRpYWxzOiB0aGlzLmNvbmZpZ3VyYXRpb24ud2l0aENyZWRlbnRpYWxzLFxyXG4gICAgICAgICAgICAgICAgaGVhZGVyczogaGVhZGVycyxcclxuICAgICAgICAgICAgICAgIG9ic2VydmU6IG9ic2VydmUsXHJcbiAgICAgICAgICAgICAgICByZXBvcnRQcm9ncmVzczogcmVwb3J0UHJvZ3Jlc3NcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICk7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBBZGQgYSB0YXNrIGZvciB0aGUgdGVhbSB0byBkbyB3b3JrIG9uXHJcbiAgICAgKiBZb3UgY2FuIGNyZWF0ZSBhIHRhc2sgdG8gd29yayBvbi4gIEZvciBleGFtcGxlIHNwbGl0IGFsbCB0aGUgc2V4dGluZyB3b3JkcyBpbnRvIHNleHVhbCBib2R5IHBhcnRzIGFuZCBzZXh1YWwgYWN0aXZpdHkuIFxyXG4gICAgICogQHBhcmFtIGJvZHkgXHJcbiAgICAgKiBAcGFyYW0gdXBkYXRlRGF0YSBJZiB0aGUgaXRlbSBhbHJlYWR5IGV4aXN0cyBzaG91bGQgd2UgdXBkYXRlIHRoZSB2YWx1ZXMgb2YgdGhlIGJvZHkgZWxlbWVudFxyXG4gICAgICogQHBhcmFtIG9ic2VydmUgc2V0IHdoZXRoZXIgb3Igbm90IHRvIHJldHVybiB0aGUgZGF0YSBPYnNlcnZhYmxlIGFzIHRoZSBib2R5LCByZXNwb25zZSBvciBldmVudHMuIGRlZmF1bHRzIHRvIHJldHVybmluZyB0aGUgYm9keS5cclxuICAgICAqIEBwYXJhbSByZXBvcnRQcm9ncmVzcyBmbGFnIHRvIHJlcG9ydCByZXF1ZXN0IGFuZCByZXNwb25zZSBwcm9ncmVzcy5cclxuICAgICAqL1xyXG4gICAgcHVibGljIGFkZFRhc2tJdGVtcyhib2R5PzogQXJyYXk8VGFza0lucHV0PiwgdXBkYXRlRGF0YT86IGJvb2xlYW4sIG9ic2VydmU/OiAnYm9keScsIHJlcG9ydFByb2dyZXNzPzogYm9vbGVhbik6IE9ic2VydmFibGU8SW5saW5lUmVzcG9uc2UyMDE+O1xyXG4gICAgcHVibGljIGFkZFRhc2tJdGVtcyhib2R5PzogQXJyYXk8VGFza0lucHV0PiwgdXBkYXRlRGF0YT86IGJvb2xlYW4sIG9ic2VydmU/OiAncmVzcG9uc2UnLCByZXBvcnRQcm9ncmVzcz86IGJvb2xlYW4pOiBPYnNlcnZhYmxlPEh0dHBSZXNwb25zZTxJbmxpbmVSZXNwb25zZTIwMT4+O1xyXG4gICAgcHVibGljIGFkZFRhc2tJdGVtcyhib2R5PzogQXJyYXk8VGFza0lucHV0PiwgdXBkYXRlRGF0YT86IGJvb2xlYW4sIG9ic2VydmU/OiAnZXZlbnRzJywgcmVwb3J0UHJvZ3Jlc3M/OiBib29sZWFuKTogT2JzZXJ2YWJsZTxIdHRwRXZlbnQ8SW5saW5lUmVzcG9uc2UyMDE+PjtcclxuICAgIHB1YmxpYyBhZGRUYXNrSXRlbXMoYm9keT86IEFycmF5PFRhc2tJbnB1dD4sIHVwZGF0ZURhdGE/OiBib29sZWFuLCBvYnNlcnZlOiBhbnkgPSAnYm9keScsIHJlcG9ydFByb2dyZXNzOiBib29sZWFuID0gZmFsc2UgKTogT2JzZXJ2YWJsZTxhbnk+IHtcclxuXHJcblxyXG5cclxuICAgICAgICBsZXQgcXVlcnlQYXJhbWV0ZXJzID0gbmV3IEh0dHBQYXJhbXMoe2VuY29kZXI6IG5ldyBDdXN0b21IdHRwVXJsRW5jb2RpbmdDb2RlYygpfSk7XHJcbiAgICAgICAgaWYgKHVwZGF0ZURhdGEgIT09IHVuZGVmaW5lZCAmJiB1cGRhdGVEYXRhICE9PSBudWxsKSB7XHJcbiAgICAgICAgICAgIHF1ZXJ5UGFyYW1ldGVycyA9IHF1ZXJ5UGFyYW1ldGVycy5zZXQoJ3VwZGF0ZURhdGEnLCA8YW55PnVwZGF0ZURhdGEpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgbGV0IGhlYWRlcnMgPSB0aGlzLmRlZmF1bHRIZWFkZXJzO1xyXG5cclxuICAgICAgICAvLyB0byBkZXRlcm1pbmUgdGhlIEFjY2VwdCBoZWFkZXJcclxuICAgICAgICBsZXQgaHR0cEhlYWRlckFjY2VwdHM6IHN0cmluZ1tdID0gW1xyXG4gICAgICAgICAgICAnYXBwbGljYXRpb24vanNvbidcclxuICAgICAgICBdO1xyXG4gICAgICAgIGNvbnN0IGh0dHBIZWFkZXJBY2NlcHRTZWxlY3RlZDogc3RyaW5nIHwgdW5kZWZpbmVkID0gdGhpcy5jb25maWd1cmF0aW9uLnNlbGVjdEhlYWRlckFjY2VwdChodHRwSGVhZGVyQWNjZXB0cyk7XHJcbiAgICAgICAgaWYgKGh0dHBIZWFkZXJBY2NlcHRTZWxlY3RlZCAhPSB1bmRlZmluZWQpIHtcclxuICAgICAgICAgICAgaGVhZGVycyA9IGhlYWRlcnMuc2V0KCdBY2NlcHQnLCBodHRwSGVhZGVyQWNjZXB0U2VsZWN0ZWQpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLy8gdG8gZGV0ZXJtaW5lIHRoZSBDb250ZW50LVR5cGUgaGVhZGVyXHJcbiAgICAgICAgY29uc3QgY29uc3VtZXM6IHN0cmluZ1tdID0gW1xyXG4gICAgICAgICAgICAnYXBwbGljYXRpb24vanNvbidcclxuICAgICAgICBdO1xyXG4gICAgICAgIGNvbnN0IGh0dHBDb250ZW50VHlwZVNlbGVjdGVkOiBzdHJpbmcgfCB1bmRlZmluZWQgPSB0aGlzLmNvbmZpZ3VyYXRpb24uc2VsZWN0SGVhZGVyQ29udGVudFR5cGUoY29uc3VtZXMpO1xyXG4gICAgICAgIGlmIChodHRwQ29udGVudFR5cGVTZWxlY3RlZCAhPSB1bmRlZmluZWQpIHtcclxuICAgICAgICAgICAgaGVhZGVycyA9IGhlYWRlcnMuc2V0KCdDb250ZW50LVR5cGUnLCBodHRwQ29udGVudFR5cGVTZWxlY3RlZCk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICByZXR1cm4gdGhpcy5odHRwQ2xpZW50LnJlcXVlc3Q8SW5saW5lUmVzcG9uc2UyMDE+KCdwb3N0JyxgJHt0aGlzLmJhc2VQYXRofS9pbmJveC9xdWV1ZS90YXNrL2l0ZW1zYCxcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgYm9keTogYm9keSxcclxuICAgICAgICAgICAgICAgIHBhcmFtczogcXVlcnlQYXJhbWV0ZXJzLFxyXG4gICAgICAgICAgICAgICAgd2l0aENyZWRlbnRpYWxzOiB0aGlzLmNvbmZpZ3VyYXRpb24ud2l0aENyZWRlbnRpYWxzLFxyXG4gICAgICAgICAgICAgICAgaGVhZGVyczogaGVhZGVycyxcclxuICAgICAgICAgICAgICAgIG9ic2VydmU6IG9ic2VydmUsXHJcbiAgICAgICAgICAgICAgICByZXBvcnRQcm9ncmVzczogcmVwb3J0UHJvZ3Jlc3NcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICk7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBBZGQgdXNlcm5hbWVzIHRvIGJlIHJldmlld2VkXHJcbiAgICAgKiBBZGQgYW4gZXhhbXBsZSBvZiBhIHVzZXJuYW1lIGZvciBRdWFsaXR5IENvbnRyb2wuICBUaGlzIHdpbGwgbGF0ZXIgYmUgdXNlZCBmb3IgIC0gUmVncmVzc2lvbiBUZXN0cyB8IE9uY2UgeW91IG1hcmsgYW4gaXRlbSBhcyB3cm9uZyBhbmQgaXQgaXMgZml4ZWQgeW91IHdpbGwgd2FudCB0byBiZSBhYmxlIHRvIHJ1biBpdCB0aHJvdWdoIHRoZSBmaWx0ZXIgYWdhaW4gdG8gZW5zdXJlIHRoZSBlcnJvcnMgYXJlIG5vdCByZXByb2R1Y2VkIGJ5IGNyZWF0aW5nIGZ1dHVyZSBydWxlcy4gLSBUcmFpbmluZyBBSSB8IFdlIGNhbiBpbXByb3ZlIHRoZSBmaWx0ZXIgaW4gdGhlIGZ1dHVyZSBieSB0cmFpbmluZyBBSSB0byBwcmVkaWN0IHRoZSByaXNrcyBhbmQgbGFiZWxzIHlvdSBwcm92aWRlIGFuZCBpbiBzbyBkb2luZyBjb21iaW5lIGEgcnVsZXMgYmFzZWQgYXBwcm9hY2ggeW91IGNhbiBjb250cm9sIHdpdGggdGhlIGZ1enp5IG1hdGNoaW5nIG9mIEFJIHRvIGZpbmQgc2ltaWxhciB0aGluZ3MuIFxyXG4gICAgICogQHBhcmFtIGJvZHkgXHJcbiAgICAgKiBAcGFyYW0gdXBkYXRlRGF0YSBJZiB0aGUgaXRlbSBhbHJlYWR5IGV4aXN0cyBzaG91bGQgd2UgdXBkYXRlIHRoZSB2YWx1ZXMgb2YgdGhlIGJvZHkgZWxlbWVudFxyXG4gICAgICogQHBhcmFtIG9ic2VydmUgc2V0IHdoZXRoZXIgb3Igbm90IHRvIHJldHVybiB0aGUgZGF0YSBPYnNlcnZhYmxlIGFzIHRoZSBib2R5LCByZXNwb25zZSBvciBldmVudHMuIGRlZmF1bHRzIHRvIHJldHVybmluZyB0aGUgYm9keS5cclxuICAgICAqIEBwYXJhbSByZXBvcnRQcm9ncmVzcyBmbGFnIHRvIHJlcG9ydCByZXF1ZXN0IGFuZCByZXNwb25zZSBwcm9ncmVzcy5cclxuICAgICAqL1xyXG4gICAgcHVibGljIGFkZFVzZXJhbm1lcyhib2R5PzogQXJyYXk8VXNlcm5hbWVJbnB1dD4sIHVwZGF0ZURhdGE/OiBib29sZWFuLCBvYnNlcnZlPzogJ2JvZHknLCByZXBvcnRQcm9ncmVzcz86IGJvb2xlYW4pOiBPYnNlcnZhYmxlPElubGluZVJlc3BvbnNlMjAxPjtcclxuICAgIHB1YmxpYyBhZGRVc2VyYW5tZXMoYm9keT86IEFycmF5PFVzZXJuYW1lSW5wdXQ+LCB1cGRhdGVEYXRhPzogYm9vbGVhbiwgb2JzZXJ2ZT86ICdyZXNwb25zZScsIHJlcG9ydFByb2dyZXNzPzogYm9vbGVhbik6IE9ic2VydmFibGU8SHR0cFJlc3BvbnNlPElubGluZVJlc3BvbnNlMjAxPj47XHJcbiAgICBwdWJsaWMgYWRkVXNlcmFubWVzKGJvZHk/OiBBcnJheTxVc2VybmFtZUlucHV0PiwgdXBkYXRlRGF0YT86IGJvb2xlYW4sIG9ic2VydmU/OiAnZXZlbnRzJywgcmVwb3J0UHJvZ3Jlc3M/OiBib29sZWFuKTogT2JzZXJ2YWJsZTxIdHRwRXZlbnQ8SW5saW5lUmVzcG9uc2UyMDE+PjtcclxuICAgIHB1YmxpYyBhZGRVc2VyYW5tZXMoYm9keT86IEFycmF5PFVzZXJuYW1lSW5wdXQ+LCB1cGRhdGVEYXRhPzogYm9vbGVhbiwgb2JzZXJ2ZTogYW55ID0gJ2JvZHknLCByZXBvcnRQcm9ncmVzczogYm9vbGVhbiA9IGZhbHNlICk6IE9ic2VydmFibGU8YW55PiB7XHJcblxyXG5cclxuXHJcbiAgICAgICAgbGV0IHF1ZXJ5UGFyYW1ldGVycyA9IG5ldyBIdHRwUGFyYW1zKHtlbmNvZGVyOiBuZXcgQ3VzdG9tSHR0cFVybEVuY29kaW5nQ29kZWMoKX0pO1xyXG4gICAgICAgIGlmICh1cGRhdGVEYXRhICE9PSB1bmRlZmluZWQgJiYgdXBkYXRlRGF0YSAhPT0gbnVsbCkge1xyXG4gICAgICAgICAgICBxdWVyeVBhcmFtZXRlcnMgPSBxdWVyeVBhcmFtZXRlcnMuc2V0KCd1cGRhdGVEYXRhJywgPGFueT51cGRhdGVEYXRhKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGxldCBoZWFkZXJzID0gdGhpcy5kZWZhdWx0SGVhZGVycztcclxuXHJcbiAgICAgICAgLy8gdG8gZGV0ZXJtaW5lIHRoZSBBY2NlcHQgaGVhZGVyXHJcbiAgICAgICAgbGV0IGh0dHBIZWFkZXJBY2NlcHRzOiBzdHJpbmdbXSA9IFtcclxuICAgICAgICAgICAgJ2FwcGxpY2F0aW9uL2pzb24nXHJcbiAgICAgICAgXTtcclxuICAgICAgICBjb25zdCBodHRwSGVhZGVyQWNjZXB0U2VsZWN0ZWQ6IHN0cmluZyB8IHVuZGVmaW5lZCA9IHRoaXMuY29uZmlndXJhdGlvbi5zZWxlY3RIZWFkZXJBY2NlcHQoaHR0cEhlYWRlckFjY2VwdHMpO1xyXG4gICAgICAgIGlmIChodHRwSGVhZGVyQWNjZXB0U2VsZWN0ZWQgIT0gdW5kZWZpbmVkKSB7XHJcbiAgICAgICAgICAgIGhlYWRlcnMgPSBoZWFkZXJzLnNldCgnQWNjZXB0JywgaHR0cEhlYWRlckFjY2VwdFNlbGVjdGVkKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8vIHRvIGRldGVybWluZSB0aGUgQ29udGVudC1UeXBlIGhlYWRlclxyXG4gICAgICAgIGNvbnN0IGNvbnN1bWVzOiBzdHJpbmdbXSA9IFtcclxuICAgICAgICAgICAgJ2FwcGxpY2F0aW9uL2pzb24nXHJcbiAgICAgICAgXTtcclxuICAgICAgICBjb25zdCBodHRwQ29udGVudFR5cGVTZWxlY3RlZDogc3RyaW5nIHwgdW5kZWZpbmVkID0gdGhpcy5jb25maWd1cmF0aW9uLnNlbGVjdEhlYWRlckNvbnRlbnRUeXBlKGNvbnN1bWVzKTtcclxuICAgICAgICBpZiAoaHR0cENvbnRlbnRUeXBlU2VsZWN0ZWQgIT0gdW5kZWZpbmVkKSB7XHJcbiAgICAgICAgICAgIGhlYWRlcnMgPSBoZWFkZXJzLnNldCgnQ29udGVudC1UeXBlJywgaHR0cENvbnRlbnRUeXBlU2VsZWN0ZWQpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcmV0dXJuIHRoaXMuaHR0cENsaWVudC5yZXF1ZXN0PElubGluZVJlc3BvbnNlMjAxPigncG9zdCcsYCR7dGhpcy5iYXNlUGF0aH0vaW5ib3gvcXVldWUvdXNlcm5hbWVzL2l0ZW1zYCxcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgYm9keTogYm9keSxcclxuICAgICAgICAgICAgICAgIHBhcmFtczogcXVlcnlQYXJhbWV0ZXJzLFxyXG4gICAgICAgICAgICAgICAgd2l0aENyZWRlbnRpYWxzOiB0aGlzLmNvbmZpZ3VyYXRpb24ud2l0aENyZWRlbnRpYWxzLFxyXG4gICAgICAgICAgICAgICAgaGVhZGVyczogaGVhZGVycyxcclxuICAgICAgICAgICAgICAgIG9ic2VydmU6IG9ic2VydmUsXHJcbiAgICAgICAgICAgICAgICByZXBvcnRQcm9ncmVzczogcmVwb3J0UHJvZ3Jlc3NcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICk7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBEZWxldGUgYWxsIGl0ZW1zIGluIHRoaXMgcXVldWVcclxuICAgICAqIEFzIHRoaXMgbWF5IHRha2Ugc29tZSB0aW1lIGFuZCB0aGlzIHNlcnZlciBtYXkgYmUgc2NhbGVkIG91dCB3ZSB3aWxsIHNldHVwIGEgbG9uZyBydW5uaW5nIHRhc2sgdG8gYWNjb21wbGlzaCB0aGlzIGFuZCB0aGF0IHdpbGwgcmVzdGFydCBpZiBkb2VzbiYjeDI3O3QgZmluaXNoLlxyXG4gICAgICogQHBhcmFtIGNsaWVudElkIFNob3cgcmVzdWx0cyBmb3IgYSBnaXZlbiBjbGllbnQuICBUeXBpY2FsbHkgdGhpcyBpcyBzZXQgZm9yIHlvdSBieSB0aGUgaW50ZXJuYWwgc3lzdGVtIGJhc2VkIG9uIHRoZSBBUElfS0VZIHlvdSBhcmUgdXNpbmcuICBIb3dldmVyIHNvbWUgY2xpZW50cyBhcmUgYWxsb3dlZCB0byB2aWV3IG90aGVyIGNsaWVudHMgc3VjaCBhcyB3aGVuIHRoZXkgaGF2ZSBhIHNhbmRib3ggb3Igd2hlbiB0aGV5IGFyZSBhIGxhcmdlIGVudGVycHJpc2UgYW5kIGhhdmUgbXVsdGlwbGUgY2xpZW50cyB0aGV5IG1hbmFnZS4gIEl0IHdpbGwgb25seSBhbGxvdyB5b3UgdG8gdmlldyBjbGllbnQgZGF0YSB5b3UgaGF2ZSBhY2Nlc3MgdG8uXHJcbiAgICAgKiBAcGFyYW0gbGFuZ3VhZ2VzIFdoaWNoIGxhbmd1YWdlcyBkb2VzIHRoaXMgYXBwbHkgdG9cclxuICAgICAqIEBwYXJhbSBvYnNlcnZlIHNldCB3aGV0aGVyIG9yIG5vdCB0byByZXR1cm4gdGhlIGRhdGEgT2JzZXJ2YWJsZSBhcyB0aGUgYm9keSwgcmVzcG9uc2Ugb3IgZXZlbnRzLiBkZWZhdWx0cyB0byByZXR1cm5pbmcgdGhlIGJvZHkuXHJcbiAgICAgKiBAcGFyYW0gcmVwb3J0UHJvZ3Jlc3MgZmxhZyB0byByZXBvcnQgcmVxdWVzdCBhbmQgcmVzcG9uc2UgcHJvZ3Jlc3MuXHJcbiAgICAgKi9cclxuICAgIHB1YmxpYyBkZWxldEV4YW1wbGVJdGVtcyhjbGllbnRJZD86IG51bWJlciwgbGFuZ3VhZ2VzPzogQXJyYXk8c3RyaW5nPiwgb2JzZXJ2ZT86ICdib2R5JywgcmVwb3J0UHJvZ3Jlc3M/OiBib29sZWFuKTogT2JzZXJ2YWJsZTxhbnk+O1xyXG4gICAgcHVibGljIGRlbGV0RXhhbXBsZUl0ZW1zKGNsaWVudElkPzogbnVtYmVyLCBsYW5ndWFnZXM/OiBBcnJheTxzdHJpbmc+LCBvYnNlcnZlPzogJ3Jlc3BvbnNlJywgcmVwb3J0UHJvZ3Jlc3M/OiBib29sZWFuKTogT2JzZXJ2YWJsZTxIdHRwUmVzcG9uc2U8YW55Pj47XHJcbiAgICBwdWJsaWMgZGVsZXRFeGFtcGxlSXRlbXMoY2xpZW50SWQ/OiBudW1iZXIsIGxhbmd1YWdlcz86IEFycmF5PHN0cmluZz4sIG9ic2VydmU/OiAnZXZlbnRzJywgcmVwb3J0UHJvZ3Jlc3M/OiBib29sZWFuKTogT2JzZXJ2YWJsZTxIdHRwRXZlbnQ8YW55Pj47XHJcbiAgICBwdWJsaWMgZGVsZXRFeGFtcGxlSXRlbXMoY2xpZW50SWQ/OiBudW1iZXIsIGxhbmd1YWdlcz86IEFycmF5PHN0cmluZz4sIG9ic2VydmU6IGFueSA9ICdib2R5JywgcmVwb3J0UHJvZ3Jlc3M6IGJvb2xlYW4gPSBmYWxzZSApOiBPYnNlcnZhYmxlPGFueT4ge1xyXG5cclxuXHJcblxyXG4gICAgICAgIGxldCBxdWVyeVBhcmFtZXRlcnMgPSBuZXcgSHR0cFBhcmFtcyh7ZW5jb2RlcjogbmV3IEN1c3RvbUh0dHBVcmxFbmNvZGluZ0NvZGVjKCl9KTtcclxuICAgICAgICBpZiAoY2xpZW50SWQgIT09IHVuZGVmaW5lZCAmJiBjbGllbnRJZCAhPT0gbnVsbCkge1xyXG4gICAgICAgICAgICBxdWVyeVBhcmFtZXRlcnMgPSBxdWVyeVBhcmFtZXRlcnMuc2V0KCdjbGllbnRJZCcsIDxhbnk+Y2xpZW50SWQpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpZiAobGFuZ3VhZ2VzKSB7XHJcbiAgICAgICAgICAgIGxhbmd1YWdlcy5mb3JFYWNoKChlbGVtZW50KSA9PiB7XHJcbiAgICAgICAgICAgICAgICBxdWVyeVBhcmFtZXRlcnMgPSBxdWVyeVBhcmFtZXRlcnMuYXBwZW5kKCdsYW5ndWFnZXMnLCA8YW55PmVsZW1lbnQpO1xyXG4gICAgICAgICAgICB9KVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgbGV0IGhlYWRlcnMgPSB0aGlzLmRlZmF1bHRIZWFkZXJzO1xyXG5cclxuICAgICAgICAvLyB0byBkZXRlcm1pbmUgdGhlIEFjY2VwdCBoZWFkZXJcclxuICAgICAgICBsZXQgaHR0cEhlYWRlckFjY2VwdHM6IHN0cmluZ1tdID0gW1xyXG4gICAgICAgICAgICAnYXBwbGljYXRpb24vanNvbidcclxuICAgICAgICBdO1xyXG4gICAgICAgIGNvbnN0IGh0dHBIZWFkZXJBY2NlcHRTZWxlY3RlZDogc3RyaW5nIHwgdW5kZWZpbmVkID0gdGhpcy5jb25maWd1cmF0aW9uLnNlbGVjdEhlYWRlckFjY2VwdChodHRwSGVhZGVyQWNjZXB0cyk7XHJcbiAgICAgICAgaWYgKGh0dHBIZWFkZXJBY2NlcHRTZWxlY3RlZCAhPSB1bmRlZmluZWQpIHtcclxuICAgICAgICAgICAgaGVhZGVycyA9IGhlYWRlcnMuc2V0KCdBY2NlcHQnLCBodHRwSGVhZGVyQWNjZXB0U2VsZWN0ZWQpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLy8gdG8gZGV0ZXJtaW5lIHRoZSBDb250ZW50LVR5cGUgaGVhZGVyXHJcbiAgICAgICAgY29uc3QgY29uc3VtZXM6IHN0cmluZ1tdID0gW1xyXG4gICAgICAgIF07XHJcblxyXG4gICAgICAgIHJldHVybiB0aGlzLmh0dHBDbGllbnQucmVxdWVzdDxhbnk+KCdkZWxldGUnLGAke3RoaXMuYmFzZVBhdGh9L2luYm94L3F1ZXVlL2V4YW1wbGVzL2l0ZW1zYCxcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgcGFyYW1zOiBxdWVyeVBhcmFtZXRlcnMsXHJcbiAgICAgICAgICAgICAgICB3aXRoQ3JlZGVudGlhbHM6IHRoaXMuY29uZmlndXJhdGlvbi53aXRoQ3JlZGVudGlhbHMsXHJcbiAgICAgICAgICAgICAgICBoZWFkZXJzOiBoZWFkZXJzLFxyXG4gICAgICAgICAgICAgICAgb2JzZXJ2ZTogb2JzZXJ2ZSxcclxuICAgICAgICAgICAgICAgIHJlcG9ydFByb2dyZXNzOiByZXBvcnRQcm9ncmVzc1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgKTtcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIFJlbGVhc2UgYWxsIGNoZWNrb3V0cyBvbiBhIHF1ZXVlXHJcbiAgICAgKiBTb21ldGltZXMgcGVvcGxlIGdvIGZvciBjb2ZmZWUgYW5kIHN0aWxsIGhhdmUgaXRlbXMgY2hlY2tlZCBvdXQuICBXaGVuIHlvdSBnZXQgZG93biB0byBhIGZldyBpdGVtcyBsZWZ0IHRoaXMgY2FuIGJlIGEgcHJvYmxlbS4gIFRoaXMgd2lsbCBmcmVlIHVwIGFsbCBub24tZXhwaXJpbmcgY2hlY2tvdXRzLiBcclxuICAgICAqIEBwYXJhbSBxdWV1ZUlkIFRoZSB1bmlxdWUgaWRlbnRpZmllciBmb3IgdGhpcyBxdWV1ZVxyXG4gICAgICogQHBhcmFtIGNsaWVudElkIFNob3cgcmVzdWx0cyBmb3IgYSBnaXZlbiBjbGllbnQuICBUeXBpY2FsbHkgdGhpcyBpcyBzZXQgZm9yIHlvdSBieSB0aGUgaW50ZXJuYWwgc3lzdGVtIGJhc2VkIG9uIHRoZSBBUElfS0VZIHlvdSBhcmUgdXNpbmcuICBIb3dldmVyIHNvbWUgY2xpZW50cyBhcmUgYWxsb3dlZCB0byB2aWV3IG90aGVyIGNsaWVudHMgc3VjaCBhcyB3aGVuIHRoZXkgaGF2ZSBhIHNhbmRib3ggb3Igd2hlbiB0aGV5IGFyZSBhIGxhcmdlIGVudGVycHJpc2UgYW5kIGhhdmUgbXVsdGlwbGUgY2xpZW50cyB0aGV5IG1hbmFnZS4gIEl0IHdpbGwgb25seSBhbGxvdyB5b3UgdG8gdmlldyBjbGllbnQgZGF0YSB5b3UgaGF2ZSBhY2Nlc3MgdG8uXHJcbiAgICAgKiBAcGFyYW0gbGFuZ3VhZ2VzIFdoaWNoIGxhbmd1YWdlcyBkb2VzIHRoaXMgYXBwbHkgdG9cclxuICAgICAqIEBwYXJhbSBvYnNlcnZlIHNldCB3aGV0aGVyIG9yIG5vdCB0byByZXR1cm4gdGhlIGRhdGEgT2JzZXJ2YWJsZSBhcyB0aGUgYm9keSwgcmVzcG9uc2Ugb3IgZXZlbnRzLiBkZWZhdWx0cyB0byByZXR1cm5pbmcgdGhlIGJvZHkuXHJcbiAgICAgKiBAcGFyYW0gcmVwb3J0UHJvZ3Jlc3MgZmxhZyB0byByZXBvcnQgcmVxdWVzdCBhbmQgcmVzcG9uc2UgcHJvZ3Jlc3MuXHJcbiAgICAgKi9cclxuICAgIHB1YmxpYyBkZWxldGVBbGxDaGVja291dHMocXVldWVJZDogc3RyaW5nLCBjbGllbnRJZD86IG51bWJlciwgbGFuZ3VhZ2VzPzogQXJyYXk8c3RyaW5nPiwgb2JzZXJ2ZT86ICdib2R5JywgcmVwb3J0UHJvZ3Jlc3M/OiBib29sZWFuKTogT2JzZXJ2YWJsZTxJbmxpbmVSZXNwb25zZTIwMDE+O1xyXG4gICAgcHVibGljIGRlbGV0ZUFsbENoZWNrb3V0cyhxdWV1ZUlkOiBzdHJpbmcsIGNsaWVudElkPzogbnVtYmVyLCBsYW5ndWFnZXM/OiBBcnJheTxzdHJpbmc+LCBvYnNlcnZlPzogJ3Jlc3BvbnNlJywgcmVwb3J0UHJvZ3Jlc3M/OiBib29sZWFuKTogT2JzZXJ2YWJsZTxIdHRwUmVzcG9uc2U8SW5saW5lUmVzcG9uc2UyMDAxPj47XHJcbiAgICBwdWJsaWMgZGVsZXRlQWxsQ2hlY2tvdXRzKHF1ZXVlSWQ6IHN0cmluZywgY2xpZW50SWQ/OiBudW1iZXIsIGxhbmd1YWdlcz86IEFycmF5PHN0cmluZz4sIG9ic2VydmU/OiAnZXZlbnRzJywgcmVwb3J0UHJvZ3Jlc3M/OiBib29sZWFuKTogT2JzZXJ2YWJsZTxIdHRwRXZlbnQ8SW5saW5lUmVzcG9uc2UyMDAxPj47XHJcbiAgICBwdWJsaWMgZGVsZXRlQWxsQ2hlY2tvdXRzKHF1ZXVlSWQ6IHN0cmluZywgY2xpZW50SWQ/OiBudW1iZXIsIGxhbmd1YWdlcz86IEFycmF5PHN0cmluZz4sIG9ic2VydmU6IGFueSA9ICdib2R5JywgcmVwb3J0UHJvZ3Jlc3M6IGJvb2xlYW4gPSBmYWxzZSApOiBPYnNlcnZhYmxlPGFueT4ge1xyXG5cclxuICAgICAgICBpZiAocXVldWVJZCA9PT0gbnVsbCB8fCBxdWV1ZUlkID09PSB1bmRlZmluZWQpIHtcclxuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdSZXF1aXJlZCBwYXJhbWV0ZXIgcXVldWVJZCB3YXMgbnVsbCBvciB1bmRlZmluZWQgd2hlbiBjYWxsaW5nIGRlbGV0ZUFsbENoZWNrb3V0cy4nKTtcclxuICAgICAgICB9XHJcblxyXG5cclxuXHJcbiAgICAgICAgbGV0IHF1ZXJ5UGFyYW1ldGVycyA9IG5ldyBIdHRwUGFyYW1zKHtlbmNvZGVyOiBuZXcgQ3VzdG9tSHR0cFVybEVuY29kaW5nQ29kZWMoKX0pO1xyXG4gICAgICAgIGlmIChjbGllbnRJZCAhPT0gdW5kZWZpbmVkICYmIGNsaWVudElkICE9PSBudWxsKSB7XHJcbiAgICAgICAgICAgIHF1ZXJ5UGFyYW1ldGVycyA9IHF1ZXJ5UGFyYW1ldGVycy5zZXQoJ2NsaWVudElkJywgPGFueT5jbGllbnRJZCk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGlmIChsYW5ndWFnZXMpIHtcclxuICAgICAgICAgICAgbGFuZ3VhZ2VzLmZvckVhY2goKGVsZW1lbnQpID0+IHtcclxuICAgICAgICAgICAgICAgIHF1ZXJ5UGFyYW1ldGVycyA9IHF1ZXJ5UGFyYW1ldGVycy5hcHBlbmQoJ2xhbmd1YWdlcycsIDxhbnk+ZWxlbWVudCk7XHJcbiAgICAgICAgICAgIH0pXHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBsZXQgaGVhZGVycyA9IHRoaXMuZGVmYXVsdEhlYWRlcnM7XHJcblxyXG4gICAgICAgIC8vIHRvIGRldGVybWluZSB0aGUgQWNjZXB0IGhlYWRlclxyXG4gICAgICAgIGxldCBodHRwSGVhZGVyQWNjZXB0czogc3RyaW5nW10gPSBbXHJcbiAgICAgICAgICAgICdhcHBsaWNhdGlvbi9qc29uJ1xyXG4gICAgICAgIF07XHJcbiAgICAgICAgY29uc3QgaHR0cEhlYWRlckFjY2VwdFNlbGVjdGVkOiBzdHJpbmcgfCB1bmRlZmluZWQgPSB0aGlzLmNvbmZpZ3VyYXRpb24uc2VsZWN0SGVhZGVyQWNjZXB0KGh0dHBIZWFkZXJBY2NlcHRzKTtcclxuICAgICAgICBpZiAoaHR0cEhlYWRlckFjY2VwdFNlbGVjdGVkICE9IHVuZGVmaW5lZCkge1xyXG4gICAgICAgICAgICBoZWFkZXJzID0gaGVhZGVycy5zZXQoJ0FjY2VwdCcsIGh0dHBIZWFkZXJBY2NlcHRTZWxlY3RlZCk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvLyB0byBkZXRlcm1pbmUgdGhlIENvbnRlbnQtVHlwZSBoZWFkZXJcclxuICAgICAgICBjb25zdCBjb25zdW1lczogc3RyaW5nW10gPSBbXHJcbiAgICAgICAgXTtcclxuXHJcbiAgICAgICAgcmV0dXJuIHRoaXMuaHR0cENsaWVudC5yZXF1ZXN0PElubGluZVJlc3BvbnNlMjAwMT4oJ2RlbGV0ZScsYCR7dGhpcy5iYXNlUGF0aH0vaW5ib3gvcXVldWUvJHtlbmNvZGVVUklDb21wb25lbnQoU3RyaW5nKHF1ZXVlSWQpKX0vaXRlbXMvY2hlY2tvdXRgLFxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICBwYXJhbXM6IHF1ZXJ5UGFyYW1ldGVycyxcclxuICAgICAgICAgICAgICAgIHdpdGhDcmVkZW50aWFsczogdGhpcy5jb25maWd1cmF0aW9uLndpdGhDcmVkZW50aWFscyxcclxuICAgICAgICAgICAgICAgIGhlYWRlcnM6IGhlYWRlcnMsXHJcbiAgICAgICAgICAgICAgICBvYnNlcnZlOiBvYnNlcnZlLFxyXG4gICAgICAgICAgICAgICAgcmVwb3J0UHJvZ3Jlc3M6IHJlcG9ydFByb2dyZXNzXHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICApO1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogRGVsZXRlIGEgY29tbWVudFxyXG4gICAgICogUmVtb3ZlIGEgY29tbWVudFxyXG4gICAgICogQHBhcmFtIHF1ZXVlSWQgVGhlIHVuaXF1ZSBpZGVudGlmaWVyIGZvciB0aGlzIHF1ZXVlXHJcbiAgICAgKiBAcGFyYW0gY29udGVudElkIFRoZSB1bmlxdWUgaWRlbnRpZmllciBmb3IgdGhlIGNvbnRlbnRcclxuICAgICAqIEBwYXJhbSBjb21tZW50SWQgVGhlIHVuaXF1ZSBpZGVudGlmaWVyIGZvciB0aGUgY29tbWVudFxyXG4gICAgICogQHBhcmFtIG9ic2VydmUgc2V0IHdoZXRoZXIgb3Igbm90IHRvIHJldHVybiB0aGUgZGF0YSBPYnNlcnZhYmxlIGFzIHRoZSBib2R5LCByZXNwb25zZSBvciBldmVudHMuIGRlZmF1bHRzIHRvIHJldHVybmluZyB0aGUgYm9keS5cclxuICAgICAqIEBwYXJhbSByZXBvcnRQcm9ncmVzcyBmbGFnIHRvIHJlcG9ydCByZXF1ZXN0IGFuZCByZXNwb25zZSBwcm9ncmVzcy5cclxuICAgICAqL1xyXG4gICAgcHVibGljIGRlbGV0ZUNvbW1lbnQocXVldWVJZDogc3RyaW5nLCBjb250ZW50SWQ6IHN0cmluZywgY29tbWVudElkOiBzdHJpbmcsIG9ic2VydmU/OiAnYm9keScsIHJlcG9ydFByb2dyZXNzPzogYm9vbGVhbik6IE9ic2VydmFibGU8SW5saW5lUmVzcG9uc2UyMDAxPjtcclxuICAgIHB1YmxpYyBkZWxldGVDb21tZW50KHF1ZXVlSWQ6IHN0cmluZywgY29udGVudElkOiBzdHJpbmcsIGNvbW1lbnRJZDogc3RyaW5nLCBvYnNlcnZlPzogJ3Jlc3BvbnNlJywgcmVwb3J0UHJvZ3Jlc3M/OiBib29sZWFuKTogT2JzZXJ2YWJsZTxIdHRwUmVzcG9uc2U8SW5saW5lUmVzcG9uc2UyMDAxPj47XHJcbiAgICBwdWJsaWMgZGVsZXRlQ29tbWVudChxdWV1ZUlkOiBzdHJpbmcsIGNvbnRlbnRJZDogc3RyaW5nLCBjb21tZW50SWQ6IHN0cmluZywgb2JzZXJ2ZT86ICdldmVudHMnLCByZXBvcnRQcm9ncmVzcz86IGJvb2xlYW4pOiBPYnNlcnZhYmxlPEh0dHBFdmVudDxJbmxpbmVSZXNwb25zZTIwMDE+PjtcclxuICAgIHB1YmxpYyBkZWxldGVDb21tZW50KHF1ZXVlSWQ6IHN0cmluZywgY29udGVudElkOiBzdHJpbmcsIGNvbW1lbnRJZDogc3RyaW5nLCBvYnNlcnZlOiBhbnkgPSAnYm9keScsIHJlcG9ydFByb2dyZXNzOiBib29sZWFuID0gZmFsc2UgKTogT2JzZXJ2YWJsZTxhbnk+IHtcclxuXHJcbiAgICAgICAgaWYgKHF1ZXVlSWQgPT09IG51bGwgfHwgcXVldWVJZCA9PT0gdW5kZWZpbmVkKSB7XHJcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcignUmVxdWlyZWQgcGFyYW1ldGVyIHF1ZXVlSWQgd2FzIG51bGwgb3IgdW5kZWZpbmVkIHdoZW4gY2FsbGluZyBkZWxldGVDb21tZW50LicpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgaWYgKGNvbnRlbnRJZCA9PT0gbnVsbCB8fCBjb250ZW50SWQgPT09IHVuZGVmaW5lZCkge1xyXG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ1JlcXVpcmVkIHBhcmFtZXRlciBjb250ZW50SWQgd2FzIG51bGwgb3IgdW5kZWZpbmVkIHdoZW4gY2FsbGluZyBkZWxldGVDb21tZW50LicpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgaWYgKGNvbW1lbnRJZCA9PT0gbnVsbCB8fCBjb21tZW50SWQgPT09IHVuZGVmaW5lZCkge1xyXG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ1JlcXVpcmVkIHBhcmFtZXRlciBjb21tZW50SWQgd2FzIG51bGwgb3IgdW5kZWZpbmVkIHdoZW4gY2FsbGluZyBkZWxldGVDb21tZW50LicpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgbGV0IGhlYWRlcnMgPSB0aGlzLmRlZmF1bHRIZWFkZXJzO1xyXG5cclxuICAgICAgICAvLyB0byBkZXRlcm1pbmUgdGhlIEFjY2VwdCBoZWFkZXJcclxuICAgICAgICBsZXQgaHR0cEhlYWRlckFjY2VwdHM6IHN0cmluZ1tdID0gW1xyXG4gICAgICAgICAgICAnYXBwbGljYXRpb24vanNvbidcclxuICAgICAgICBdO1xyXG4gICAgICAgIGNvbnN0IGh0dHBIZWFkZXJBY2NlcHRTZWxlY3RlZDogc3RyaW5nIHwgdW5kZWZpbmVkID0gdGhpcy5jb25maWd1cmF0aW9uLnNlbGVjdEhlYWRlckFjY2VwdChodHRwSGVhZGVyQWNjZXB0cyk7XHJcbiAgICAgICAgaWYgKGh0dHBIZWFkZXJBY2NlcHRTZWxlY3RlZCAhPSB1bmRlZmluZWQpIHtcclxuICAgICAgICAgICAgaGVhZGVycyA9IGhlYWRlcnMuc2V0KCdBY2NlcHQnLCBodHRwSGVhZGVyQWNjZXB0U2VsZWN0ZWQpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLy8gdG8gZGV0ZXJtaW5lIHRoZSBDb250ZW50LVR5cGUgaGVhZGVyXHJcbiAgICAgICAgY29uc3QgY29uc3VtZXM6IHN0cmluZ1tdID0gW1xyXG4gICAgICAgIF07XHJcblxyXG4gICAgICAgIHJldHVybiB0aGlzLmh0dHBDbGllbnQucmVxdWVzdDxJbmxpbmVSZXNwb25zZTIwMDE+KCdkZWxldGUnLGAke3RoaXMuYmFzZVBhdGh9L2luYm94L3F1ZXVlLyR7ZW5jb2RlVVJJQ29tcG9uZW50KFN0cmluZyhxdWV1ZUlkKSl9L2l0ZW1zLyR7ZW5jb2RlVVJJQ29tcG9uZW50KFN0cmluZyhjb250ZW50SWQpKX0vY29tbWVudHMvJHtlbmNvZGVVUklDb21wb25lbnQoU3RyaW5nKGNvbW1lbnRJZCkpfWAsXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIHdpdGhDcmVkZW50aWFsczogdGhpcy5jb25maWd1cmF0aW9uLndpdGhDcmVkZW50aWFscyxcclxuICAgICAgICAgICAgICAgIGhlYWRlcnM6IGhlYWRlcnMsXHJcbiAgICAgICAgICAgICAgICBvYnNlcnZlOiBvYnNlcnZlLFxyXG4gICAgICAgICAgICAgICAgcmVwb3J0UHJvZ3Jlc3M6IHJlcG9ydFByb2dyZXNzXHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICApO1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogQWJhbmRvbiBhIGNoZWNrb3V0XHJcbiAgICAgKiBSZW1vdmUgYSBjaGVja291dCBhc3NpZ25lZCB0byB5b3Ugd2l0aG91dCBkb2luZyBhbnkgd29yay5cclxuICAgICAqIEBwYXJhbSBxdWV1ZUlkIFRoZSB1bmlxdWUgaWRlbnRpZmllciBmb3IgdGhpcyBxdWV1ZVxyXG4gICAgICogQHBhcmFtIGNvbnRlbnRJZCBUaGUgdW5pcXVlIGlkZW50aWZpZXIgZm9yIHRoZSBjb250ZW50XHJcbiAgICAgKiBAcGFyYW0gb2JzZXJ2ZSBzZXQgd2hldGhlciBvciBub3QgdG8gcmV0dXJuIHRoZSBkYXRhIE9ic2VydmFibGUgYXMgdGhlIGJvZHksIHJlc3BvbnNlIG9yIGV2ZW50cy4gZGVmYXVsdHMgdG8gcmV0dXJuaW5nIHRoZSBib2R5LlxyXG4gICAgICogQHBhcmFtIHJlcG9ydFByb2dyZXNzIGZsYWcgdG8gcmVwb3J0IHJlcXVlc3QgYW5kIHJlc3BvbnNlIHByb2dyZXNzLlxyXG4gICAgICovXHJcbiAgICBwdWJsaWMgZGVsZXRlSXRlbUNoZWNrb3V0KHF1ZXVlSWQ6IHN0cmluZywgY29udGVudElkOiBzdHJpbmcsIG9ic2VydmU/OiAnYm9keScsIHJlcG9ydFByb2dyZXNzPzogYm9vbGVhbik6IE9ic2VydmFibGU8SW5saW5lUmVzcG9uc2UyMDAxPjtcclxuICAgIHB1YmxpYyBkZWxldGVJdGVtQ2hlY2tvdXQocXVldWVJZDogc3RyaW5nLCBjb250ZW50SWQ6IHN0cmluZywgb2JzZXJ2ZT86ICdyZXNwb25zZScsIHJlcG9ydFByb2dyZXNzPzogYm9vbGVhbik6IE9ic2VydmFibGU8SHR0cFJlc3BvbnNlPElubGluZVJlc3BvbnNlMjAwMT4+O1xyXG4gICAgcHVibGljIGRlbGV0ZUl0ZW1DaGVja291dChxdWV1ZUlkOiBzdHJpbmcsIGNvbnRlbnRJZDogc3RyaW5nLCBvYnNlcnZlPzogJ2V2ZW50cycsIHJlcG9ydFByb2dyZXNzPzogYm9vbGVhbik6IE9ic2VydmFibGU8SHR0cEV2ZW50PElubGluZVJlc3BvbnNlMjAwMT4+O1xyXG4gICAgcHVibGljIGRlbGV0ZUl0ZW1DaGVja291dChxdWV1ZUlkOiBzdHJpbmcsIGNvbnRlbnRJZDogc3RyaW5nLCBvYnNlcnZlOiBhbnkgPSAnYm9keScsIHJlcG9ydFByb2dyZXNzOiBib29sZWFuID0gZmFsc2UgKTogT2JzZXJ2YWJsZTxhbnk+IHtcclxuXHJcbiAgICAgICAgaWYgKHF1ZXVlSWQgPT09IG51bGwgfHwgcXVldWVJZCA9PT0gdW5kZWZpbmVkKSB7XHJcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcignUmVxdWlyZWQgcGFyYW1ldGVyIHF1ZXVlSWQgd2FzIG51bGwgb3IgdW5kZWZpbmVkIHdoZW4gY2FsbGluZyBkZWxldGVJdGVtQ2hlY2tvdXQuJyk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBpZiAoY29udGVudElkID09PSBudWxsIHx8IGNvbnRlbnRJZCA9PT0gdW5kZWZpbmVkKSB7XHJcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcignUmVxdWlyZWQgcGFyYW1ldGVyIGNvbnRlbnRJZCB3YXMgbnVsbCBvciB1bmRlZmluZWQgd2hlbiBjYWxsaW5nIGRlbGV0ZUl0ZW1DaGVja291dC4nKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGxldCBoZWFkZXJzID0gdGhpcy5kZWZhdWx0SGVhZGVycztcclxuXHJcbiAgICAgICAgLy8gdG8gZGV0ZXJtaW5lIHRoZSBBY2NlcHQgaGVhZGVyXHJcbiAgICAgICAgbGV0IGh0dHBIZWFkZXJBY2NlcHRzOiBzdHJpbmdbXSA9IFtcclxuICAgICAgICAgICAgJ2FwcGxpY2F0aW9uL2pzb24nXHJcbiAgICAgICAgXTtcclxuICAgICAgICBjb25zdCBodHRwSGVhZGVyQWNjZXB0U2VsZWN0ZWQ6IHN0cmluZyB8IHVuZGVmaW5lZCA9IHRoaXMuY29uZmlndXJhdGlvbi5zZWxlY3RIZWFkZXJBY2NlcHQoaHR0cEhlYWRlckFjY2VwdHMpO1xyXG4gICAgICAgIGlmIChodHRwSGVhZGVyQWNjZXB0U2VsZWN0ZWQgIT0gdW5kZWZpbmVkKSB7XHJcbiAgICAgICAgICAgIGhlYWRlcnMgPSBoZWFkZXJzLnNldCgnQWNjZXB0JywgaHR0cEhlYWRlckFjY2VwdFNlbGVjdGVkKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8vIHRvIGRldGVybWluZSB0aGUgQ29udGVudC1UeXBlIGhlYWRlclxyXG4gICAgICAgIGNvbnN0IGNvbnN1bWVzOiBzdHJpbmdbXSA9IFtcclxuICAgICAgICBdO1xyXG5cclxuICAgICAgICByZXR1cm4gdGhpcy5odHRwQ2xpZW50LnJlcXVlc3Q8SW5saW5lUmVzcG9uc2UyMDAxPignZGVsZXRlJyxgJHt0aGlzLmJhc2VQYXRofS9pbmJveC9xdWV1ZS8ke2VuY29kZVVSSUNvbXBvbmVudChTdHJpbmcocXVldWVJZCkpfS9pdGVtcy8ke2VuY29kZVVSSUNvbXBvbmVudChTdHJpbmcoY29udGVudElkKSl9L2NoZWNrb3V0YCxcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgd2l0aENyZWRlbnRpYWxzOiB0aGlzLmNvbmZpZ3VyYXRpb24ud2l0aENyZWRlbnRpYWxzLFxyXG4gICAgICAgICAgICAgICAgaGVhZGVyczogaGVhZGVycyxcclxuICAgICAgICAgICAgICAgIG9ic2VydmU6IG9ic2VydmUsXHJcbiAgICAgICAgICAgICAgICByZXBvcnRQcm9ncmVzczogcmVwb3J0UHJvZ3Jlc3NcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICk7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBEZWxldGUgYWxsIGl0ZW1zIGluIHRoaXMgcXVldWVcclxuICAgICAqIEFzIHRoaXMgbWF5IHRha2Ugc29tZSB0aW1lIGFuZCB0aGlzIHNlcnZlciBtYXkgYmUgc2NhbGVkIG91dCB3ZSB3aWxsIHNldHVwIGEgbG9uZyBydW5uaW5nIHRhc2sgdG8gYWNjb21wbGlzaCB0aGlzIGFuZCB0aGF0IHdpbGwgcmVzdGFydCBpZiBkb2VzbiYjeDI3O3QgZmluaXNoLlxyXG4gICAgICogQHBhcmFtIHF1ZXVlSWQgVGhlIHVuaXF1ZSBpZGVudGlmaWVyIGZvciB0aGlzIHF1ZXVlXHJcbiAgICAgKiBAcGFyYW0gY2xpZW50SWQgU2hvdyByZXN1bHRzIGZvciBhIGdpdmVuIGNsaWVudC4gIFR5cGljYWxseSB0aGlzIGlzIHNldCBmb3IgeW91IGJ5IHRoZSBpbnRlcm5hbCBzeXN0ZW0gYmFzZWQgb24gdGhlIEFQSV9LRVkgeW91IGFyZSB1c2luZy4gIEhvd2V2ZXIgc29tZSBjbGllbnRzIGFyZSBhbGxvd2VkIHRvIHZpZXcgb3RoZXIgY2xpZW50cyBzdWNoIGFzIHdoZW4gdGhleSBoYXZlIGEgc2FuZGJveCBvciB3aGVuIHRoZXkgYXJlIGEgbGFyZ2UgZW50ZXJwcmlzZSBhbmQgaGF2ZSBtdWx0aXBsZSBjbGllbnRzIHRoZXkgbWFuYWdlLiAgSXQgd2lsbCBvbmx5IGFsbG93IHlvdSB0byB2aWV3IGNsaWVudCBkYXRhIHlvdSBoYXZlIGFjY2VzcyB0by5cclxuICAgICAqIEBwYXJhbSBsYW5ndWFnZXMgV2hpY2ggbGFuZ3VhZ2VzIGRvZXMgdGhpcyBhcHBseSB0b1xyXG4gICAgICogQHBhcmFtIG9ic2VydmUgc2V0IHdoZXRoZXIgb3Igbm90IHRvIHJldHVybiB0aGUgZGF0YSBPYnNlcnZhYmxlIGFzIHRoZSBib2R5LCByZXNwb25zZSBvciBldmVudHMuIGRlZmF1bHRzIHRvIHJldHVybmluZyB0aGUgYm9keS5cclxuICAgICAqIEBwYXJhbSByZXBvcnRQcm9ncmVzcyBmbGFnIHRvIHJlcG9ydCByZXF1ZXN0IGFuZCByZXNwb25zZSBwcm9ncmVzcy5cclxuICAgICAqL1xyXG4gICAgcHVibGljIGRlbGV0ZUl0ZW1zKHF1ZXVlSWQ6IHN0cmluZywgY2xpZW50SWQ/OiBudW1iZXIsIGxhbmd1YWdlcz86IEFycmF5PHN0cmluZz4sIG9ic2VydmU/OiAnYm9keScsIHJlcG9ydFByb2dyZXNzPzogYm9vbGVhbik6IE9ic2VydmFibGU8SW5saW5lUmVzcG9uc2UyMDA+O1xyXG4gICAgcHVibGljIGRlbGV0ZUl0ZW1zKHF1ZXVlSWQ6IHN0cmluZywgY2xpZW50SWQ/OiBudW1iZXIsIGxhbmd1YWdlcz86IEFycmF5PHN0cmluZz4sIG9ic2VydmU/OiAncmVzcG9uc2UnLCByZXBvcnRQcm9ncmVzcz86IGJvb2xlYW4pOiBPYnNlcnZhYmxlPEh0dHBSZXNwb25zZTxJbmxpbmVSZXNwb25zZTIwMD4+O1xyXG4gICAgcHVibGljIGRlbGV0ZUl0ZW1zKHF1ZXVlSWQ6IHN0cmluZywgY2xpZW50SWQ/OiBudW1iZXIsIGxhbmd1YWdlcz86IEFycmF5PHN0cmluZz4sIG9ic2VydmU/OiAnZXZlbnRzJywgcmVwb3J0UHJvZ3Jlc3M/OiBib29sZWFuKTogT2JzZXJ2YWJsZTxIdHRwRXZlbnQ8SW5saW5lUmVzcG9uc2UyMDA+PjtcclxuICAgIHB1YmxpYyBkZWxldGVJdGVtcyhxdWV1ZUlkOiBzdHJpbmcsIGNsaWVudElkPzogbnVtYmVyLCBsYW5ndWFnZXM/OiBBcnJheTxzdHJpbmc+LCBvYnNlcnZlOiBhbnkgPSAnYm9keScsIHJlcG9ydFByb2dyZXNzOiBib29sZWFuID0gZmFsc2UgKTogT2JzZXJ2YWJsZTxhbnk+IHtcclxuXHJcbiAgICAgICAgaWYgKHF1ZXVlSWQgPT09IG51bGwgfHwgcXVldWVJZCA9PT0gdW5kZWZpbmVkKSB7XHJcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcignUmVxdWlyZWQgcGFyYW1ldGVyIHF1ZXVlSWQgd2FzIG51bGwgb3IgdW5kZWZpbmVkIHdoZW4gY2FsbGluZyBkZWxldGVJdGVtcy4nKTtcclxuICAgICAgICB9XHJcblxyXG5cclxuXHJcbiAgICAgICAgbGV0IHF1ZXJ5UGFyYW1ldGVycyA9IG5ldyBIdHRwUGFyYW1zKHtlbmNvZGVyOiBuZXcgQ3VzdG9tSHR0cFVybEVuY29kaW5nQ29kZWMoKX0pO1xyXG4gICAgICAgIGlmIChjbGllbnRJZCAhPT0gdW5kZWZpbmVkICYmIGNsaWVudElkICE9PSBudWxsKSB7XHJcbiAgICAgICAgICAgIHF1ZXJ5UGFyYW1ldGVycyA9IHF1ZXJ5UGFyYW1ldGVycy5zZXQoJ2NsaWVudElkJywgPGFueT5jbGllbnRJZCk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGlmIChsYW5ndWFnZXMpIHtcclxuICAgICAgICAgICAgbGFuZ3VhZ2VzLmZvckVhY2goKGVsZW1lbnQpID0+IHtcclxuICAgICAgICAgICAgICAgIHF1ZXJ5UGFyYW1ldGVycyA9IHF1ZXJ5UGFyYW1ldGVycy5hcHBlbmQoJ2xhbmd1YWdlcycsIDxhbnk+ZWxlbWVudCk7XHJcbiAgICAgICAgICAgIH0pXHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBsZXQgaGVhZGVycyA9IHRoaXMuZGVmYXVsdEhlYWRlcnM7XHJcblxyXG4gICAgICAgIC8vIHRvIGRldGVybWluZSB0aGUgQWNjZXB0IGhlYWRlclxyXG4gICAgICAgIGxldCBodHRwSGVhZGVyQWNjZXB0czogc3RyaW5nW10gPSBbXHJcbiAgICAgICAgICAgICdhcHBsaWNhdGlvbi9qc29uJ1xyXG4gICAgICAgIF07XHJcbiAgICAgICAgY29uc3QgaHR0cEhlYWRlckFjY2VwdFNlbGVjdGVkOiBzdHJpbmcgfCB1bmRlZmluZWQgPSB0aGlzLmNvbmZpZ3VyYXRpb24uc2VsZWN0SGVhZGVyQWNjZXB0KGh0dHBIZWFkZXJBY2NlcHRzKTtcclxuICAgICAgICBpZiAoaHR0cEhlYWRlckFjY2VwdFNlbGVjdGVkICE9IHVuZGVmaW5lZCkge1xyXG4gICAgICAgICAgICBoZWFkZXJzID0gaGVhZGVycy5zZXQoJ0FjY2VwdCcsIGh0dHBIZWFkZXJBY2NlcHRTZWxlY3RlZCk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvLyB0byBkZXRlcm1pbmUgdGhlIENvbnRlbnQtVHlwZSBoZWFkZXJcclxuICAgICAgICBjb25zdCBjb25zdW1lczogc3RyaW5nW10gPSBbXHJcbiAgICAgICAgXTtcclxuXHJcbiAgICAgICAgcmV0dXJuIHRoaXMuaHR0cENsaWVudC5yZXF1ZXN0PElubGluZVJlc3BvbnNlMjAwPignZGVsZXRlJyxgJHt0aGlzLmJhc2VQYXRofS9pbmJveC9xdWV1ZS8ke2VuY29kZVVSSUNvbXBvbmVudChTdHJpbmcocXVldWVJZCkpfS9pdGVtc2AsXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIHBhcmFtczogcXVlcnlQYXJhbWV0ZXJzLFxyXG4gICAgICAgICAgICAgICAgd2l0aENyZWRlbnRpYWxzOiB0aGlzLmNvbmZpZ3VyYXRpb24ud2l0aENyZWRlbnRpYWxzLFxyXG4gICAgICAgICAgICAgICAgaGVhZGVyczogaGVhZGVycyxcclxuICAgICAgICAgICAgICAgIG9ic2VydmU6IG9ic2VydmUsXHJcbiAgICAgICAgICAgICAgICByZXBvcnRQcm9ncmVzczogcmVwb3J0UHJvZ3Jlc3NcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICk7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBEZWxldGUgYSBwYXJhbVxyXG4gICAgICogRGVsZXRlIGEgcGFyYW0gYW5kIHVzZSB0aGUgZGVmYXVsdCBpbnN0ZWFkXHJcbiAgICAgKiBAcGFyYW0gcXVldWVJZCBUaGUgdW5pcXVlIGlkZW50aWZpZXIgZm9yIHRoaXMgcXVldWVcclxuICAgICAqIEBwYXJhbSBwYXJhbUlkIEEgY3VzdG9tIGNvbmZpZ3VyYXRpb24gZm9yIGEgY2xpZW50XHJcbiAgICAgKiBAcGFyYW0gb2JzZXJ2ZSBzZXQgd2hldGhlciBvciBub3QgdG8gcmV0dXJuIHRoZSBkYXRhIE9ic2VydmFibGUgYXMgdGhlIGJvZHksIHJlc3BvbnNlIG9yIGV2ZW50cy4gZGVmYXVsdHMgdG8gcmV0dXJuaW5nIHRoZSBib2R5LlxyXG4gICAgICogQHBhcmFtIHJlcG9ydFByb2dyZXNzIGZsYWcgdG8gcmVwb3J0IHJlcXVlc3QgYW5kIHJlc3BvbnNlIHByb2dyZXNzLlxyXG4gICAgICovXHJcbiAgICBwdWJsaWMgZGVsZXRlUGFyYW0ocXVldWVJZDogc3RyaW5nLCBwYXJhbUlkOiBzdHJpbmcsIG9ic2VydmU/OiAnYm9keScsIHJlcG9ydFByb2dyZXNzPzogYm9vbGVhbik6IE9ic2VydmFibGU8YW55PjtcclxuICAgIHB1YmxpYyBkZWxldGVQYXJhbShxdWV1ZUlkOiBzdHJpbmcsIHBhcmFtSWQ6IHN0cmluZywgb2JzZXJ2ZT86ICdyZXNwb25zZScsIHJlcG9ydFByb2dyZXNzPzogYm9vbGVhbik6IE9ic2VydmFibGU8SHR0cFJlc3BvbnNlPGFueT4+O1xyXG4gICAgcHVibGljIGRlbGV0ZVBhcmFtKHF1ZXVlSWQ6IHN0cmluZywgcGFyYW1JZDogc3RyaW5nLCBvYnNlcnZlPzogJ2V2ZW50cycsIHJlcG9ydFByb2dyZXNzPzogYm9vbGVhbik6IE9ic2VydmFibGU8SHR0cEV2ZW50PGFueT4+O1xyXG4gICAgcHVibGljIGRlbGV0ZVBhcmFtKHF1ZXVlSWQ6IHN0cmluZywgcGFyYW1JZDogc3RyaW5nLCBvYnNlcnZlOiBhbnkgPSAnYm9keScsIHJlcG9ydFByb2dyZXNzOiBib29sZWFuID0gZmFsc2UgKTogT2JzZXJ2YWJsZTxhbnk+IHtcclxuXHJcbiAgICAgICAgaWYgKHF1ZXVlSWQgPT09IG51bGwgfHwgcXVldWVJZCA9PT0gdW5kZWZpbmVkKSB7XHJcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcignUmVxdWlyZWQgcGFyYW1ldGVyIHF1ZXVlSWQgd2FzIG51bGwgb3IgdW5kZWZpbmVkIHdoZW4gY2FsbGluZyBkZWxldGVQYXJhbS4nKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGlmIChwYXJhbUlkID09PSBudWxsIHx8IHBhcmFtSWQgPT09IHVuZGVmaW5lZCkge1xyXG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ1JlcXVpcmVkIHBhcmFtZXRlciBwYXJhbUlkIHdhcyBudWxsIG9yIHVuZGVmaW5lZCB3aGVuIGNhbGxpbmcgZGVsZXRlUGFyYW0uJyk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBsZXQgaGVhZGVycyA9IHRoaXMuZGVmYXVsdEhlYWRlcnM7XHJcblxyXG4gICAgICAgIC8vIHRvIGRldGVybWluZSB0aGUgQWNjZXB0IGhlYWRlclxyXG4gICAgICAgIGxldCBodHRwSGVhZGVyQWNjZXB0czogc3RyaW5nW10gPSBbXHJcbiAgICAgICAgICAgICdhcHBsaWNhdGlvbi9qc29uJ1xyXG4gICAgICAgIF07XHJcbiAgICAgICAgY29uc3QgaHR0cEhlYWRlckFjY2VwdFNlbGVjdGVkOiBzdHJpbmcgfCB1bmRlZmluZWQgPSB0aGlzLmNvbmZpZ3VyYXRpb24uc2VsZWN0SGVhZGVyQWNjZXB0KGh0dHBIZWFkZXJBY2NlcHRzKTtcclxuICAgICAgICBpZiAoaHR0cEhlYWRlckFjY2VwdFNlbGVjdGVkICE9IHVuZGVmaW5lZCkge1xyXG4gICAgICAgICAgICBoZWFkZXJzID0gaGVhZGVycy5zZXQoJ0FjY2VwdCcsIGh0dHBIZWFkZXJBY2NlcHRTZWxlY3RlZCk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvLyB0byBkZXRlcm1pbmUgdGhlIENvbnRlbnQtVHlwZSBoZWFkZXJcclxuICAgICAgICBjb25zdCBjb25zdW1lczogc3RyaW5nW10gPSBbXHJcbiAgICAgICAgXTtcclxuXHJcbiAgICAgICAgcmV0dXJuIHRoaXMuaHR0cENsaWVudC5yZXF1ZXN0PGFueT4oJ2RlbGV0ZScsYCR7dGhpcy5iYXNlUGF0aH0vaW5ib3gvcXVldWUvJHtlbmNvZGVVUklDb21wb25lbnQoU3RyaW5nKHF1ZXVlSWQpKX0vcGFyYW0vJHtlbmNvZGVVUklDb21wb25lbnQoU3RyaW5nKHBhcmFtSWQpKX1gLFxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICB3aXRoQ3JlZGVudGlhbHM6IHRoaXMuY29uZmlndXJhdGlvbi53aXRoQ3JlZGVudGlhbHMsXHJcbiAgICAgICAgICAgICAgICBoZWFkZXJzOiBoZWFkZXJzLFxyXG4gICAgICAgICAgICAgICAgb2JzZXJ2ZTogb2JzZXJ2ZSxcclxuICAgICAgICAgICAgICAgIHJlcG9ydFByb2dyZXNzOiByZXBvcnRQcm9ncmVzc1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgKTtcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIERlbGV0ZSBhbGwgaXRlbXMgaW4gdGhpcyBxdWV1ZVxyXG4gICAgICogQXMgdGhpcyBtYXkgdGFrZSBzb21lIHRpbWUgYW5kIHRoaXMgc2VydmVyIG1heSBiZSBzY2FsZWQgb3V0IHdlIHdpbGwgc2V0dXAgYSBsb25nIHJ1bm5pbmcgdGFzayB0byBhY2NvbXBsaXNoIHRoaXMgYW5kIHRoYXQgd2lsbCByZXN0YXJ0IGlmIGRvZXNuJiN4Mjc7dCBmaW5pc2guXHJcbiAgICAgKiBAcGFyYW0gY2xpZW50SWQgU2hvdyByZXN1bHRzIGZvciBhIGdpdmVuIGNsaWVudC4gIFR5cGljYWxseSB0aGlzIGlzIHNldCBmb3IgeW91IGJ5IHRoZSBpbnRlcm5hbCBzeXN0ZW0gYmFzZWQgb24gdGhlIEFQSV9LRVkgeW91IGFyZSB1c2luZy4gIEhvd2V2ZXIgc29tZSBjbGllbnRzIGFyZSBhbGxvd2VkIHRvIHZpZXcgb3RoZXIgY2xpZW50cyBzdWNoIGFzIHdoZW4gdGhleSBoYXZlIGEgc2FuZGJveCBvciB3aGVuIHRoZXkgYXJlIGEgbGFyZ2UgZW50ZXJwcmlzZSBhbmQgaGF2ZSBtdWx0aXBsZSBjbGllbnRzIHRoZXkgbWFuYWdlLiAgSXQgd2lsbCBvbmx5IGFsbG93IHlvdSB0byB2aWV3IGNsaWVudCBkYXRhIHlvdSBoYXZlIGFjY2VzcyB0by5cclxuICAgICAqIEBwYXJhbSBsYW5ndWFnZXMgV2hpY2ggbGFuZ3VhZ2VzIGRvZXMgdGhpcyBhcHBseSB0b1xyXG4gICAgICogQHBhcmFtIG9ic2VydmUgc2V0IHdoZXRoZXIgb3Igbm90IHRvIHJldHVybiB0aGUgZGF0YSBPYnNlcnZhYmxlIGFzIHRoZSBib2R5LCByZXNwb25zZSBvciBldmVudHMuIGRlZmF1bHRzIHRvIHJldHVybmluZyB0aGUgYm9keS5cclxuICAgICAqIEBwYXJhbSByZXBvcnRQcm9ncmVzcyBmbGFnIHRvIHJlcG9ydCByZXF1ZXN0IGFuZCByZXNwb25zZSBwcm9ncmVzcy5cclxuICAgICAqL1xyXG4gICAgcHVibGljIGRlbGV0ZVJ1bGVBdWRpdEl0ZW1zKGNsaWVudElkPzogbnVtYmVyLCBsYW5ndWFnZXM/OiBBcnJheTxzdHJpbmc+LCBvYnNlcnZlPzogJ2JvZHknLCByZXBvcnRQcm9ncmVzcz86IGJvb2xlYW4pOiBPYnNlcnZhYmxlPGFueT47XHJcbiAgICBwdWJsaWMgZGVsZXRlUnVsZUF1ZGl0SXRlbXMoY2xpZW50SWQ/OiBudW1iZXIsIGxhbmd1YWdlcz86IEFycmF5PHN0cmluZz4sIG9ic2VydmU/OiAncmVzcG9uc2UnLCByZXBvcnRQcm9ncmVzcz86IGJvb2xlYW4pOiBPYnNlcnZhYmxlPEh0dHBSZXNwb25zZTxhbnk+PjtcclxuICAgIHB1YmxpYyBkZWxldGVSdWxlQXVkaXRJdGVtcyhjbGllbnRJZD86IG51bWJlciwgbGFuZ3VhZ2VzPzogQXJyYXk8c3RyaW5nPiwgb2JzZXJ2ZT86ICdldmVudHMnLCByZXBvcnRQcm9ncmVzcz86IGJvb2xlYW4pOiBPYnNlcnZhYmxlPEh0dHBFdmVudDxhbnk+PjtcclxuICAgIHB1YmxpYyBkZWxldGVSdWxlQXVkaXRJdGVtcyhjbGllbnRJZD86IG51bWJlciwgbGFuZ3VhZ2VzPzogQXJyYXk8c3RyaW5nPiwgb2JzZXJ2ZTogYW55ID0gJ2JvZHknLCByZXBvcnRQcm9ncmVzczogYm9vbGVhbiA9IGZhbHNlICk6IE9ic2VydmFibGU8YW55PiB7XHJcblxyXG5cclxuXHJcbiAgICAgICAgbGV0IHF1ZXJ5UGFyYW1ldGVycyA9IG5ldyBIdHRwUGFyYW1zKHtlbmNvZGVyOiBuZXcgQ3VzdG9tSHR0cFVybEVuY29kaW5nQ29kZWMoKX0pO1xyXG4gICAgICAgIGlmIChjbGllbnRJZCAhPT0gdW5kZWZpbmVkICYmIGNsaWVudElkICE9PSBudWxsKSB7XHJcbiAgICAgICAgICAgIHF1ZXJ5UGFyYW1ldGVycyA9IHF1ZXJ5UGFyYW1ldGVycy5zZXQoJ2NsaWVudElkJywgPGFueT5jbGllbnRJZCk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGlmIChsYW5ndWFnZXMpIHtcclxuICAgICAgICAgICAgbGFuZ3VhZ2VzLmZvckVhY2goKGVsZW1lbnQpID0+IHtcclxuICAgICAgICAgICAgICAgIHF1ZXJ5UGFyYW1ldGVycyA9IHF1ZXJ5UGFyYW1ldGVycy5hcHBlbmQoJ2xhbmd1YWdlcycsIDxhbnk+ZWxlbWVudCk7XHJcbiAgICAgICAgICAgIH0pXHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBsZXQgaGVhZGVycyA9IHRoaXMuZGVmYXVsdEhlYWRlcnM7XHJcblxyXG4gICAgICAgIC8vIHRvIGRldGVybWluZSB0aGUgQWNjZXB0IGhlYWRlclxyXG4gICAgICAgIGxldCBodHRwSGVhZGVyQWNjZXB0czogc3RyaW5nW10gPSBbXHJcbiAgICAgICAgICAgICdhcHBsaWNhdGlvbi9qc29uJ1xyXG4gICAgICAgIF07XHJcbiAgICAgICAgY29uc3QgaHR0cEhlYWRlckFjY2VwdFNlbGVjdGVkOiBzdHJpbmcgfCB1bmRlZmluZWQgPSB0aGlzLmNvbmZpZ3VyYXRpb24uc2VsZWN0SGVhZGVyQWNjZXB0KGh0dHBIZWFkZXJBY2NlcHRzKTtcclxuICAgICAgICBpZiAoaHR0cEhlYWRlckFjY2VwdFNlbGVjdGVkICE9IHVuZGVmaW5lZCkge1xyXG4gICAgICAgICAgICBoZWFkZXJzID0gaGVhZGVycy5zZXQoJ0FjY2VwdCcsIGh0dHBIZWFkZXJBY2NlcHRTZWxlY3RlZCk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvLyB0byBkZXRlcm1pbmUgdGhlIENvbnRlbnQtVHlwZSBoZWFkZXJcclxuICAgICAgICBjb25zdCBjb25zdW1lczogc3RyaW5nW10gPSBbXHJcbiAgICAgICAgXTtcclxuXHJcbiAgICAgICAgcmV0dXJuIHRoaXMuaHR0cENsaWVudC5yZXF1ZXN0PGFueT4oJ2RlbGV0ZScsYCR7dGhpcy5iYXNlUGF0aH0vaW5ib3gvcXVldWUvcnVsZXNBdWRpdC9pdGVtc2AsXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIHBhcmFtczogcXVlcnlQYXJhbWV0ZXJzLFxyXG4gICAgICAgICAgICAgICAgd2l0aENyZWRlbnRpYWxzOiB0aGlzLmNvbmZpZ3VyYXRpb24ud2l0aENyZWRlbnRpYWxzLFxyXG4gICAgICAgICAgICAgICAgaGVhZGVyczogaGVhZGVycyxcclxuICAgICAgICAgICAgICAgIG9ic2VydmU6IG9ic2VydmUsXHJcbiAgICAgICAgICAgICAgICByZXBvcnRQcm9ncmVzczogcmVwb3J0UHJvZ3Jlc3NcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICk7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBEZWxldGUgYWxsIGl0ZW1zIGluIHRoaXMgcXVldWVcclxuICAgICAqIEFzIHRoaXMgbWF5IHRha2Ugc29tZSB0aW1lIGFuZCB0aGlzIHNlcnZlciBtYXkgYmUgc2NhbGVkIG91dCB3ZSB3aWxsIHNldHVwIGEgbG9uZyBydW5uaW5nIHRhc2sgdG8gYWNjb21wbGlzaCB0aGlzIGFuZCB0aGF0IHdpbGwgcmVzdGFydCBpZiBkb2VzbiYjeDI3O3QgZmluaXNoLlxyXG4gICAgICogQHBhcmFtIGNsaWVudElkIFNob3cgcmVzdWx0cyBmb3IgYSBnaXZlbiBjbGllbnQuICBUeXBpY2FsbHkgdGhpcyBpcyBzZXQgZm9yIHlvdSBieSB0aGUgaW50ZXJuYWwgc3lzdGVtIGJhc2VkIG9uIHRoZSBBUElfS0VZIHlvdSBhcmUgdXNpbmcuICBIb3dldmVyIHNvbWUgY2xpZW50cyBhcmUgYWxsb3dlZCB0byB2aWV3IG90aGVyIGNsaWVudHMgc3VjaCBhcyB3aGVuIHRoZXkgaGF2ZSBhIHNhbmRib3ggb3Igd2hlbiB0aGV5IGFyZSBhIGxhcmdlIGVudGVycHJpc2UgYW5kIGhhdmUgbXVsdGlwbGUgY2xpZW50cyB0aGV5IG1hbmFnZS4gIEl0IHdpbGwgb25seSBhbGxvdyB5b3UgdG8gdmlldyBjbGllbnQgZGF0YSB5b3UgaGF2ZSBhY2Nlc3MgdG8uXHJcbiAgICAgKiBAcGFyYW0gbGFuZ3VhZ2VzIFdoaWNoIGxhbmd1YWdlcyBkb2VzIHRoaXMgYXBwbHkgdG9cclxuICAgICAqIEBwYXJhbSBvYnNlcnZlIHNldCB3aGV0aGVyIG9yIG5vdCB0byByZXR1cm4gdGhlIGRhdGEgT2JzZXJ2YWJsZSBhcyB0aGUgYm9keSwgcmVzcG9uc2Ugb3IgZXZlbnRzLiBkZWZhdWx0cyB0byByZXR1cm5pbmcgdGhlIGJvZHkuXHJcbiAgICAgKiBAcGFyYW0gcmVwb3J0UHJvZ3Jlc3MgZmxhZyB0byByZXBvcnQgcmVxdWVzdCBhbmQgcmVzcG9uc2UgcHJvZ3Jlc3MuXHJcbiAgICAgKi9cclxuICAgIHB1YmxpYyBkZWxldGVTcGVsbGluZ0l0ZW1zKGNsaWVudElkPzogbnVtYmVyLCBsYW5ndWFnZXM/OiBBcnJheTxzdHJpbmc+LCBvYnNlcnZlPzogJ2JvZHknLCByZXBvcnRQcm9ncmVzcz86IGJvb2xlYW4pOiBPYnNlcnZhYmxlPGFueT47XHJcbiAgICBwdWJsaWMgZGVsZXRlU3BlbGxpbmdJdGVtcyhjbGllbnRJZD86IG51bWJlciwgbGFuZ3VhZ2VzPzogQXJyYXk8c3RyaW5nPiwgb2JzZXJ2ZT86ICdyZXNwb25zZScsIHJlcG9ydFByb2dyZXNzPzogYm9vbGVhbik6IE9ic2VydmFibGU8SHR0cFJlc3BvbnNlPGFueT4+O1xyXG4gICAgcHVibGljIGRlbGV0ZVNwZWxsaW5nSXRlbXMoY2xpZW50SWQ/OiBudW1iZXIsIGxhbmd1YWdlcz86IEFycmF5PHN0cmluZz4sIG9ic2VydmU/OiAnZXZlbnRzJywgcmVwb3J0UHJvZ3Jlc3M/OiBib29sZWFuKTogT2JzZXJ2YWJsZTxIdHRwRXZlbnQ8YW55Pj47XHJcbiAgICBwdWJsaWMgZGVsZXRlU3BlbGxpbmdJdGVtcyhjbGllbnRJZD86IG51bWJlciwgbGFuZ3VhZ2VzPzogQXJyYXk8c3RyaW5nPiwgb2JzZXJ2ZTogYW55ID0gJ2JvZHknLCByZXBvcnRQcm9ncmVzczogYm9vbGVhbiA9IGZhbHNlICk6IE9ic2VydmFibGU8YW55PiB7XHJcblxyXG5cclxuXHJcbiAgICAgICAgbGV0IHF1ZXJ5UGFyYW1ldGVycyA9IG5ldyBIdHRwUGFyYW1zKHtlbmNvZGVyOiBuZXcgQ3VzdG9tSHR0cFVybEVuY29kaW5nQ29kZWMoKX0pO1xyXG4gICAgICAgIGlmIChjbGllbnRJZCAhPT0gdW5kZWZpbmVkICYmIGNsaWVudElkICE9PSBudWxsKSB7XHJcbiAgICAgICAgICAgIHF1ZXJ5UGFyYW1ldGVycyA9IHF1ZXJ5UGFyYW1ldGVycy5zZXQoJ2NsaWVudElkJywgPGFueT5jbGllbnRJZCk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGlmIChsYW5ndWFnZXMpIHtcclxuICAgICAgICAgICAgbGFuZ3VhZ2VzLmZvckVhY2goKGVsZW1lbnQpID0+IHtcclxuICAgICAgICAgICAgICAgIHF1ZXJ5UGFyYW1ldGVycyA9IHF1ZXJ5UGFyYW1ldGVycy5hcHBlbmQoJ2xhbmd1YWdlcycsIDxhbnk+ZWxlbWVudCk7XHJcbiAgICAgICAgICAgIH0pXHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBsZXQgaGVhZGVycyA9IHRoaXMuZGVmYXVsdEhlYWRlcnM7XHJcblxyXG4gICAgICAgIC8vIHRvIGRldGVybWluZSB0aGUgQWNjZXB0IGhlYWRlclxyXG4gICAgICAgIGxldCBodHRwSGVhZGVyQWNjZXB0czogc3RyaW5nW10gPSBbXHJcbiAgICAgICAgICAgICdhcHBsaWNhdGlvbi9qc29uJ1xyXG4gICAgICAgIF07XHJcbiAgICAgICAgY29uc3QgaHR0cEhlYWRlckFjY2VwdFNlbGVjdGVkOiBzdHJpbmcgfCB1bmRlZmluZWQgPSB0aGlzLmNvbmZpZ3VyYXRpb24uc2VsZWN0SGVhZGVyQWNjZXB0KGh0dHBIZWFkZXJBY2NlcHRzKTtcclxuICAgICAgICBpZiAoaHR0cEhlYWRlckFjY2VwdFNlbGVjdGVkICE9IHVuZGVmaW5lZCkge1xyXG4gICAgICAgICAgICBoZWFkZXJzID0gaGVhZGVycy5zZXQoJ0FjY2VwdCcsIGh0dHBIZWFkZXJBY2NlcHRTZWxlY3RlZCk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvLyB0byBkZXRlcm1pbmUgdGhlIENvbnRlbnQtVHlwZSBoZWFkZXJcclxuICAgICAgICBjb25zdCBjb25zdW1lczogc3RyaW5nW10gPSBbXHJcbiAgICAgICAgXTtcclxuXHJcbiAgICAgICAgcmV0dXJuIHRoaXMuaHR0cENsaWVudC5yZXF1ZXN0PGFueT4oJ2RlbGV0ZScsYCR7dGhpcy5iYXNlUGF0aH0vaW5ib3gvcXVldWUvc3BlbGxpbmcvaXRlbXNgLFxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICBwYXJhbXM6IHF1ZXJ5UGFyYW1ldGVycyxcclxuICAgICAgICAgICAgICAgIHdpdGhDcmVkZW50aWFsczogdGhpcy5jb25maWd1cmF0aW9uLndpdGhDcmVkZW50aWFscyxcclxuICAgICAgICAgICAgICAgIGhlYWRlcnM6IGhlYWRlcnMsXHJcbiAgICAgICAgICAgICAgICBvYnNlcnZlOiBvYnNlcnZlLFxyXG4gICAgICAgICAgICAgICAgcmVwb3J0UHJvZ3Jlc3M6IHJlcG9ydFByb2dyZXNzXHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICApO1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogRGVsZXRlIGFsbCBpdGVtcyBpbiB0aGlzIHF1ZXVlXHJcbiAgICAgKiBBcyB0aGlzIG1heSB0YWtlIHNvbWUgdGltZSBhbmQgdGhpcyBzZXJ2ZXIgbWF5IGJlIHNjYWxlZCBvdXQgd2Ugd2lsbCBzZXR1cCBhIGxvbmcgcnVubmluZyB0YXNrIHRvIGFjY29tcGxpc2ggdGhpcyBhbmQgdGhhdCB3aWxsIHJlc3RhcnQgaWYgZG9lc24mI3gyNzt0IGZpbmlzaC5cclxuICAgICAqIEBwYXJhbSBjbGllbnRJZCBTaG93IHJlc3VsdHMgZm9yIGEgZ2l2ZW4gY2xpZW50LiAgVHlwaWNhbGx5IHRoaXMgaXMgc2V0IGZvciB5b3UgYnkgdGhlIGludGVybmFsIHN5c3RlbSBiYXNlZCBvbiB0aGUgQVBJX0tFWSB5b3UgYXJlIHVzaW5nLiAgSG93ZXZlciBzb21lIGNsaWVudHMgYXJlIGFsbG93ZWQgdG8gdmlldyBvdGhlciBjbGllbnRzIHN1Y2ggYXMgd2hlbiB0aGV5IGhhdmUgYSBzYW5kYm94IG9yIHdoZW4gdGhleSBhcmUgYSBsYXJnZSBlbnRlcnByaXNlIGFuZCBoYXZlIG11bHRpcGxlIGNsaWVudHMgdGhleSBtYW5hZ2UuICBJdCB3aWxsIG9ubHkgYWxsb3cgeW91IHRvIHZpZXcgY2xpZW50IGRhdGEgeW91IGhhdmUgYWNjZXNzIHRvLlxyXG4gICAgICogQHBhcmFtIGxhbmd1YWdlcyBXaGljaCBsYW5ndWFnZXMgZG9lcyB0aGlzIGFwcGx5IHRvXHJcbiAgICAgKiBAcGFyYW0gb2JzZXJ2ZSBzZXQgd2hldGhlciBvciBub3QgdG8gcmV0dXJuIHRoZSBkYXRhIE9ic2VydmFibGUgYXMgdGhlIGJvZHksIHJlc3BvbnNlIG9yIGV2ZW50cy4gZGVmYXVsdHMgdG8gcmV0dXJuaW5nIHRoZSBib2R5LlxyXG4gICAgICogQHBhcmFtIHJlcG9ydFByb2dyZXNzIGZsYWcgdG8gcmVwb3J0IHJlcXVlc3QgYW5kIHJlc3BvbnNlIHByb2dyZXNzLlxyXG4gICAgICovXHJcbiAgICBwdWJsaWMgZGVsZXRlVGFza0l0ZW1zKGNsaWVudElkPzogbnVtYmVyLCBsYW5ndWFnZXM/OiBBcnJheTxzdHJpbmc+LCBvYnNlcnZlPzogJ2JvZHknLCByZXBvcnRQcm9ncmVzcz86IGJvb2xlYW4pOiBPYnNlcnZhYmxlPGFueT47XHJcbiAgICBwdWJsaWMgZGVsZXRlVGFza0l0ZW1zKGNsaWVudElkPzogbnVtYmVyLCBsYW5ndWFnZXM/OiBBcnJheTxzdHJpbmc+LCBvYnNlcnZlPzogJ3Jlc3BvbnNlJywgcmVwb3J0UHJvZ3Jlc3M/OiBib29sZWFuKTogT2JzZXJ2YWJsZTxIdHRwUmVzcG9uc2U8YW55Pj47XHJcbiAgICBwdWJsaWMgZGVsZXRlVGFza0l0ZW1zKGNsaWVudElkPzogbnVtYmVyLCBsYW5ndWFnZXM/OiBBcnJheTxzdHJpbmc+LCBvYnNlcnZlPzogJ2V2ZW50cycsIHJlcG9ydFByb2dyZXNzPzogYm9vbGVhbik6IE9ic2VydmFibGU8SHR0cEV2ZW50PGFueT4+O1xyXG4gICAgcHVibGljIGRlbGV0ZVRhc2tJdGVtcyhjbGllbnRJZD86IG51bWJlciwgbGFuZ3VhZ2VzPzogQXJyYXk8c3RyaW5nPiwgb2JzZXJ2ZTogYW55ID0gJ2JvZHknLCByZXBvcnRQcm9ncmVzczogYm9vbGVhbiA9IGZhbHNlICk6IE9ic2VydmFibGU8YW55PiB7XHJcblxyXG5cclxuXHJcbiAgICAgICAgbGV0IHF1ZXJ5UGFyYW1ldGVycyA9IG5ldyBIdHRwUGFyYW1zKHtlbmNvZGVyOiBuZXcgQ3VzdG9tSHR0cFVybEVuY29kaW5nQ29kZWMoKX0pO1xyXG4gICAgICAgIGlmIChjbGllbnRJZCAhPT0gdW5kZWZpbmVkICYmIGNsaWVudElkICE9PSBudWxsKSB7XHJcbiAgICAgICAgICAgIHF1ZXJ5UGFyYW1ldGVycyA9IHF1ZXJ5UGFyYW1ldGVycy5zZXQoJ2NsaWVudElkJywgPGFueT5jbGllbnRJZCk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGlmIChsYW5ndWFnZXMpIHtcclxuICAgICAgICAgICAgbGFuZ3VhZ2VzLmZvckVhY2goKGVsZW1lbnQpID0+IHtcclxuICAgICAgICAgICAgICAgIHF1ZXJ5UGFyYW1ldGVycyA9IHF1ZXJ5UGFyYW1ldGVycy5hcHBlbmQoJ2xhbmd1YWdlcycsIDxhbnk+ZWxlbWVudCk7XHJcbiAgICAgICAgICAgIH0pXHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBsZXQgaGVhZGVycyA9IHRoaXMuZGVmYXVsdEhlYWRlcnM7XHJcblxyXG4gICAgICAgIC8vIHRvIGRldGVybWluZSB0aGUgQWNjZXB0IGhlYWRlclxyXG4gICAgICAgIGxldCBodHRwSGVhZGVyQWNjZXB0czogc3RyaW5nW10gPSBbXHJcbiAgICAgICAgICAgICdhcHBsaWNhdGlvbi9qc29uJ1xyXG4gICAgICAgIF07XHJcbiAgICAgICAgY29uc3QgaHR0cEhlYWRlckFjY2VwdFNlbGVjdGVkOiBzdHJpbmcgfCB1bmRlZmluZWQgPSB0aGlzLmNvbmZpZ3VyYXRpb24uc2VsZWN0SGVhZGVyQWNjZXB0KGh0dHBIZWFkZXJBY2NlcHRzKTtcclxuICAgICAgICBpZiAoaHR0cEhlYWRlckFjY2VwdFNlbGVjdGVkICE9IHVuZGVmaW5lZCkge1xyXG4gICAgICAgICAgICBoZWFkZXJzID0gaGVhZGVycy5zZXQoJ0FjY2VwdCcsIGh0dHBIZWFkZXJBY2NlcHRTZWxlY3RlZCk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvLyB0byBkZXRlcm1pbmUgdGhlIENvbnRlbnQtVHlwZSBoZWFkZXJcclxuICAgICAgICBjb25zdCBjb25zdW1lczogc3RyaW5nW10gPSBbXHJcbiAgICAgICAgXTtcclxuXHJcbiAgICAgICAgcmV0dXJuIHRoaXMuaHR0cENsaWVudC5yZXF1ZXN0PGFueT4oJ2RlbGV0ZScsYCR7dGhpcy5iYXNlUGF0aH0vaW5ib3gvcXVldWUvdGFzay9pdGVtc2AsXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIHBhcmFtczogcXVlcnlQYXJhbWV0ZXJzLFxyXG4gICAgICAgICAgICAgICAgd2l0aENyZWRlbnRpYWxzOiB0aGlzLmNvbmZpZ3VyYXRpb24ud2l0aENyZWRlbnRpYWxzLFxyXG4gICAgICAgICAgICAgICAgaGVhZGVyczogaGVhZGVycyxcclxuICAgICAgICAgICAgICAgIG9ic2VydmU6IG9ic2VydmUsXHJcbiAgICAgICAgICAgICAgICByZXBvcnRQcm9ncmVzczogcmVwb3J0UHJvZ3Jlc3NcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICk7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBEZWxldGUgYSB1c2VycyBkYXRhXHJcbiAgICAgKiBUaGlzIHdpbGwgZGVsZXRlIGFsbCBkYXRhIHdlIGhhdmUgb24gYSB1c2VyLiBUaGlzIGlzIHJlY29tbWVuZGVkIGZvciBHRFBSIGFuZCBDQ1BBIGNvbXBsaWFuY2UgYXJvdW5kIHRlcm1zIGxpa2UgcmlnaHQgdG8gYmUgZm9yZ2V0dGVuLiAgUHJvYmFibHkgd2hhdCB5b3Ugd2FudCBpbnN0ZWFkIGhvd2V2ZXIgaXMgdG8gcHNldWRvbnltaXplIGFsbCB0aGUgZGF0YSB3aXRoIGEgcHV0IHJlcXVlc3QgaW5zdGVhZC4gXHJcbiAgICAgKiBAcGFyYW0gdXNlcklkIFRoZSB1bmlxdWUgaWRlbnRpZmllciBmb3IgdGhpcyB1c2VyXHJcbiAgICAgKiBAcGFyYW0gb2JzZXJ2ZSBzZXQgd2hldGhlciBvciBub3QgdG8gcmV0dXJuIHRoZSBkYXRhIE9ic2VydmFibGUgYXMgdGhlIGJvZHksIHJlc3BvbnNlIG9yIGV2ZW50cy4gZGVmYXVsdHMgdG8gcmV0dXJuaW5nIHRoZSBib2R5LlxyXG4gICAgICogQHBhcmFtIHJlcG9ydFByb2dyZXNzIGZsYWcgdG8gcmVwb3J0IHJlcXVlc3QgYW5kIHJlc3BvbnNlIHByb2dyZXNzLlxyXG4gICAgICovXHJcbiAgICBwdWJsaWMgZGVsZXRlVXNlcih1c2VySWQ6IHN0cmluZywgb2JzZXJ2ZT86ICdib2R5JywgcmVwb3J0UHJvZ3Jlc3M/OiBib29sZWFuKTogT2JzZXJ2YWJsZTxRdWV1ZT47XHJcbiAgICBwdWJsaWMgZGVsZXRlVXNlcih1c2VySWQ6IHN0cmluZywgb2JzZXJ2ZT86ICdyZXNwb25zZScsIHJlcG9ydFByb2dyZXNzPzogYm9vbGVhbik6IE9ic2VydmFibGU8SHR0cFJlc3BvbnNlPFF1ZXVlPj47XHJcbiAgICBwdWJsaWMgZGVsZXRlVXNlcih1c2VySWQ6IHN0cmluZywgb2JzZXJ2ZT86ICdldmVudHMnLCByZXBvcnRQcm9ncmVzcz86IGJvb2xlYW4pOiBPYnNlcnZhYmxlPEh0dHBFdmVudDxRdWV1ZT4+O1xyXG4gICAgcHVibGljIGRlbGV0ZVVzZXIodXNlcklkOiBzdHJpbmcsIG9ic2VydmU6IGFueSA9ICdib2R5JywgcmVwb3J0UHJvZ3Jlc3M6IGJvb2xlYW4gPSBmYWxzZSApOiBPYnNlcnZhYmxlPGFueT4ge1xyXG5cclxuICAgICAgICBpZiAodXNlcklkID09PSBudWxsIHx8IHVzZXJJZCA9PT0gdW5kZWZpbmVkKSB7XHJcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcignUmVxdWlyZWQgcGFyYW1ldGVyIHVzZXJJZCB3YXMgbnVsbCBvciB1bmRlZmluZWQgd2hlbiBjYWxsaW5nIGRlbGV0ZVVzZXIuJyk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBsZXQgaGVhZGVycyA9IHRoaXMuZGVmYXVsdEhlYWRlcnM7XHJcblxyXG4gICAgICAgIC8vIHRvIGRldGVybWluZSB0aGUgQWNjZXB0IGhlYWRlclxyXG4gICAgICAgIGxldCBodHRwSGVhZGVyQWNjZXB0czogc3RyaW5nW10gPSBbXHJcbiAgICAgICAgICAgICdhcHBsaWNhdGlvbi9qc29uJ1xyXG4gICAgICAgIF07XHJcbiAgICAgICAgY29uc3QgaHR0cEhlYWRlckFjY2VwdFNlbGVjdGVkOiBzdHJpbmcgfCB1bmRlZmluZWQgPSB0aGlzLmNvbmZpZ3VyYXRpb24uc2VsZWN0SGVhZGVyQWNjZXB0KGh0dHBIZWFkZXJBY2NlcHRzKTtcclxuICAgICAgICBpZiAoaHR0cEhlYWRlckFjY2VwdFNlbGVjdGVkICE9IHVuZGVmaW5lZCkge1xyXG4gICAgICAgICAgICBoZWFkZXJzID0gaGVhZGVycy5zZXQoJ0FjY2VwdCcsIGh0dHBIZWFkZXJBY2NlcHRTZWxlY3RlZCk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvLyB0byBkZXRlcm1pbmUgdGhlIENvbnRlbnQtVHlwZSBoZWFkZXJcclxuICAgICAgICBjb25zdCBjb25zdW1lczogc3RyaW5nW10gPSBbXHJcbiAgICAgICAgXTtcclxuXHJcbiAgICAgICAgcmV0dXJuIHRoaXMuaHR0cENsaWVudC5yZXF1ZXN0PFF1ZXVlPignZGVsZXRlJyxgJHt0aGlzLmJhc2VQYXRofS9pbmJveC91c2VyLyR7ZW5jb2RlVVJJQ29tcG9uZW50KFN0cmluZyh1c2VySWQpKX1gLFxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICB3aXRoQ3JlZGVudGlhbHM6IHRoaXMuY29uZmlndXJhdGlvbi53aXRoQ3JlZGVudGlhbHMsXHJcbiAgICAgICAgICAgICAgICBoZWFkZXJzOiBoZWFkZXJzLFxyXG4gICAgICAgICAgICAgICAgb2JzZXJ2ZTogb2JzZXJ2ZSxcclxuICAgICAgICAgICAgICAgIHJlcG9ydFByb2dyZXNzOiByZXBvcnRQcm9ncmVzc1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgKTtcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIERlbGV0ZSBhbGwgaXRlbXMgaW4gdGhpcyBxdWV1ZVxyXG4gICAgICogQXMgdGhpcyBtYXkgdGFrZSBzb21lIHRpbWUgYW5kIHRoaXMgc2VydmVyIG1heSBiZSBzY2FsZWQgb3V0IHdlIHdpbGwgc2V0dXAgYSBsb25nIHJ1bm5pbmcgdGFzayB0byBhY2NvbXBsaXNoIHRoaXMgYW5kIHRoYXQgd2lsbCByZXN0YXJ0IGlmIGRvZXNuJiN4Mjc7dCBmaW5pc2guXHJcbiAgICAgKiBAcGFyYW0gY2xpZW50SWQgU2hvdyByZXN1bHRzIGZvciBhIGdpdmVuIGNsaWVudC4gIFR5cGljYWxseSB0aGlzIGlzIHNldCBmb3IgeW91IGJ5IHRoZSBpbnRlcm5hbCBzeXN0ZW0gYmFzZWQgb24gdGhlIEFQSV9LRVkgeW91IGFyZSB1c2luZy4gIEhvd2V2ZXIgc29tZSBjbGllbnRzIGFyZSBhbGxvd2VkIHRvIHZpZXcgb3RoZXIgY2xpZW50cyBzdWNoIGFzIHdoZW4gdGhleSBoYXZlIGEgc2FuZGJveCBvciB3aGVuIHRoZXkgYXJlIGEgbGFyZ2UgZW50ZXJwcmlzZSBhbmQgaGF2ZSBtdWx0aXBsZSBjbGllbnRzIHRoZXkgbWFuYWdlLiAgSXQgd2lsbCBvbmx5IGFsbG93IHlvdSB0byB2aWV3IGNsaWVudCBkYXRhIHlvdSBoYXZlIGFjY2VzcyB0by5cclxuICAgICAqIEBwYXJhbSBsYW5ndWFnZXMgV2hpY2ggbGFuZ3VhZ2VzIGRvZXMgdGhpcyBhcHBseSB0b1xyXG4gICAgICogQHBhcmFtIG9ic2VydmUgc2V0IHdoZXRoZXIgb3Igbm90IHRvIHJldHVybiB0aGUgZGF0YSBPYnNlcnZhYmxlIGFzIHRoZSBib2R5LCByZXNwb25zZSBvciBldmVudHMuIGRlZmF1bHRzIHRvIHJldHVybmluZyB0aGUgYm9keS5cclxuICAgICAqIEBwYXJhbSByZXBvcnRQcm9ncmVzcyBmbGFnIHRvIHJlcG9ydCByZXF1ZXN0IGFuZCByZXNwb25zZSBwcm9ncmVzcy5cclxuICAgICAqL1xyXG4gICAgcHVibGljIGRlbGV0ZVVzZXJuYW1lSXRlbXMoY2xpZW50SWQ/OiBudW1iZXIsIGxhbmd1YWdlcz86IEFycmF5PHN0cmluZz4sIG9ic2VydmU/OiAnYm9keScsIHJlcG9ydFByb2dyZXNzPzogYm9vbGVhbik6IE9ic2VydmFibGU8YW55PjtcclxuICAgIHB1YmxpYyBkZWxldGVVc2VybmFtZUl0ZW1zKGNsaWVudElkPzogbnVtYmVyLCBsYW5ndWFnZXM/OiBBcnJheTxzdHJpbmc+LCBvYnNlcnZlPzogJ3Jlc3BvbnNlJywgcmVwb3J0UHJvZ3Jlc3M/OiBib29sZWFuKTogT2JzZXJ2YWJsZTxIdHRwUmVzcG9uc2U8YW55Pj47XHJcbiAgICBwdWJsaWMgZGVsZXRlVXNlcm5hbWVJdGVtcyhjbGllbnRJZD86IG51bWJlciwgbGFuZ3VhZ2VzPzogQXJyYXk8c3RyaW5nPiwgb2JzZXJ2ZT86ICdldmVudHMnLCByZXBvcnRQcm9ncmVzcz86IGJvb2xlYW4pOiBPYnNlcnZhYmxlPEh0dHBFdmVudDxhbnk+PjtcclxuICAgIHB1YmxpYyBkZWxldGVVc2VybmFtZUl0ZW1zKGNsaWVudElkPzogbnVtYmVyLCBsYW5ndWFnZXM/OiBBcnJheTxzdHJpbmc+LCBvYnNlcnZlOiBhbnkgPSAnYm9keScsIHJlcG9ydFByb2dyZXNzOiBib29sZWFuID0gZmFsc2UgKTogT2JzZXJ2YWJsZTxhbnk+IHtcclxuXHJcblxyXG5cclxuICAgICAgICBsZXQgcXVlcnlQYXJhbWV0ZXJzID0gbmV3IEh0dHBQYXJhbXMoe2VuY29kZXI6IG5ldyBDdXN0b21IdHRwVXJsRW5jb2RpbmdDb2RlYygpfSk7XHJcbiAgICAgICAgaWYgKGNsaWVudElkICE9PSB1bmRlZmluZWQgJiYgY2xpZW50SWQgIT09IG51bGwpIHtcclxuICAgICAgICAgICAgcXVlcnlQYXJhbWV0ZXJzID0gcXVlcnlQYXJhbWV0ZXJzLnNldCgnY2xpZW50SWQnLCA8YW55PmNsaWVudElkKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgaWYgKGxhbmd1YWdlcykge1xyXG4gICAgICAgICAgICBsYW5ndWFnZXMuZm9yRWFjaCgoZWxlbWVudCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgcXVlcnlQYXJhbWV0ZXJzID0gcXVlcnlQYXJhbWV0ZXJzLmFwcGVuZCgnbGFuZ3VhZ2VzJywgPGFueT5lbGVtZW50KTtcclxuICAgICAgICAgICAgfSlcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGxldCBoZWFkZXJzID0gdGhpcy5kZWZhdWx0SGVhZGVycztcclxuXHJcbiAgICAgICAgLy8gdG8gZGV0ZXJtaW5lIHRoZSBBY2NlcHQgaGVhZGVyXHJcbiAgICAgICAgbGV0IGh0dHBIZWFkZXJBY2NlcHRzOiBzdHJpbmdbXSA9IFtcclxuICAgICAgICAgICAgJ2FwcGxpY2F0aW9uL2pzb24nXHJcbiAgICAgICAgXTtcclxuICAgICAgICBjb25zdCBodHRwSGVhZGVyQWNjZXB0U2VsZWN0ZWQ6IHN0cmluZyB8IHVuZGVmaW5lZCA9IHRoaXMuY29uZmlndXJhdGlvbi5zZWxlY3RIZWFkZXJBY2NlcHQoaHR0cEhlYWRlckFjY2VwdHMpO1xyXG4gICAgICAgIGlmIChodHRwSGVhZGVyQWNjZXB0U2VsZWN0ZWQgIT0gdW5kZWZpbmVkKSB7XHJcbiAgICAgICAgICAgIGhlYWRlcnMgPSBoZWFkZXJzLnNldCgnQWNjZXB0JywgaHR0cEhlYWRlckFjY2VwdFNlbGVjdGVkKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8vIHRvIGRldGVybWluZSB0aGUgQ29udGVudC1UeXBlIGhlYWRlclxyXG4gICAgICAgIGNvbnN0IGNvbnN1bWVzOiBzdHJpbmdbXSA9IFtcclxuICAgICAgICBdO1xyXG5cclxuICAgICAgICByZXR1cm4gdGhpcy5odHRwQ2xpZW50LnJlcXVlc3Q8YW55PignZGVsZXRlJyxgJHt0aGlzLmJhc2VQYXRofS9pbmJveC9xdWV1ZS91c2VybmFtZXMvaXRlbXNgLFxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICBwYXJhbXM6IHF1ZXJ5UGFyYW1ldGVycyxcclxuICAgICAgICAgICAgICAgIHdpdGhDcmVkZW50aWFsczogdGhpcy5jb25maWd1cmF0aW9uLndpdGhDcmVkZW50aWFscyxcclxuICAgICAgICAgICAgICAgIGhlYWRlcnM6IGhlYWRlcnMsXHJcbiAgICAgICAgICAgICAgICBvYnNlcnZlOiBvYnNlcnZlLFxyXG4gICAgICAgICAgICAgICAgcmVwb3J0UHJvZ3Jlc3M6IHJlcG9ydFByb2dyZXNzXHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICApO1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogR2V0IGEgY29tbWVudHNcclxuICAgICAqIEBwYXJhbSBxdWV1ZUlkIFRoZSB1bmlxdWUgaWRlbnRpZmllciBmb3IgdGhpcyBxdWV1ZVxyXG4gICAgICogQHBhcmFtIGNvbnRlbnRJZCBUaGUgdW5pcXVlIGlkZW50aWZpZXIgZm9yIHRoZSBjb250ZW50XHJcbiAgICAgKiBAcGFyYW0gb2JzZXJ2ZSBzZXQgd2hldGhlciBvciBub3QgdG8gcmV0dXJuIHRoZSBkYXRhIE9ic2VydmFibGUgYXMgdGhlIGJvZHksIHJlc3BvbnNlIG9yIGV2ZW50cy4gZGVmYXVsdHMgdG8gcmV0dXJuaW5nIHRoZSBib2R5LlxyXG4gICAgICogQHBhcmFtIHJlcG9ydFByb2dyZXNzIGZsYWcgdG8gcmVwb3J0IHJlcXVlc3QgYW5kIHJlc3BvbnNlIHByb2dyZXNzLlxyXG4gICAgICovXHJcbiAgICBwdWJsaWMgZ2V0Q29tbWVudHMocXVldWVJZDogc3RyaW5nLCBjb250ZW50SWQ6IHN0cmluZywgb2JzZXJ2ZT86ICdib2R5JywgcmVwb3J0UHJvZ3Jlc3M/OiBib29sZWFuKTogT2JzZXJ2YWJsZTxBcnJheTxDb21tZW50Pj47XHJcbiAgICBwdWJsaWMgZ2V0Q29tbWVudHMocXVldWVJZDogc3RyaW5nLCBjb250ZW50SWQ6IHN0cmluZywgb2JzZXJ2ZT86ICdyZXNwb25zZScsIHJlcG9ydFByb2dyZXNzPzogYm9vbGVhbik6IE9ic2VydmFibGU8SHR0cFJlc3BvbnNlPEFycmF5PENvbW1lbnQ+Pj47XHJcbiAgICBwdWJsaWMgZ2V0Q29tbWVudHMocXVldWVJZDogc3RyaW5nLCBjb250ZW50SWQ6IHN0cmluZywgb2JzZXJ2ZT86ICdldmVudHMnLCByZXBvcnRQcm9ncmVzcz86IGJvb2xlYW4pOiBPYnNlcnZhYmxlPEh0dHBFdmVudDxBcnJheTxDb21tZW50Pj4+O1xyXG4gICAgcHVibGljIGdldENvbW1lbnRzKHF1ZXVlSWQ6IHN0cmluZywgY29udGVudElkOiBzdHJpbmcsIG9ic2VydmU6IGFueSA9ICdib2R5JywgcmVwb3J0UHJvZ3Jlc3M6IGJvb2xlYW4gPSBmYWxzZSApOiBPYnNlcnZhYmxlPGFueT4ge1xyXG5cclxuICAgICAgICBpZiAocXVldWVJZCA9PT0gbnVsbCB8fCBxdWV1ZUlkID09PSB1bmRlZmluZWQpIHtcclxuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdSZXF1aXJlZCBwYXJhbWV0ZXIgcXVldWVJZCB3YXMgbnVsbCBvciB1bmRlZmluZWQgd2hlbiBjYWxsaW5nIGdldENvbW1lbnQuJyk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBpZiAoY29udGVudElkID09PSBudWxsIHx8IGNvbnRlbnRJZCA9PT0gdW5kZWZpbmVkKSB7XHJcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcignUmVxdWlyZWQgcGFyYW1ldGVyIGNvbnRlbnRJZCB3YXMgbnVsbCBvciB1bmRlZmluZWQgd2hlbiBjYWxsaW5nIGdldENvbW1lbnQuJyk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBsZXQgaGVhZGVycyA9IHRoaXMuZGVmYXVsdEhlYWRlcnM7XHJcblxyXG4gICAgICAgIC8vIHRvIGRldGVybWluZSB0aGUgQWNjZXB0IGhlYWRlclxyXG4gICAgICAgIGxldCBodHRwSGVhZGVyQWNjZXB0czogc3RyaW5nW10gPSBbXHJcbiAgICAgICAgICAgICdhcHBsaWNhdGlvbi9qc29uJ1xyXG4gICAgICAgIF07XHJcbiAgICAgICAgY29uc3QgaHR0cEhlYWRlckFjY2VwdFNlbGVjdGVkOiBzdHJpbmcgfCB1bmRlZmluZWQgPSB0aGlzLmNvbmZpZ3VyYXRpb24uc2VsZWN0SGVhZGVyQWNjZXB0KGh0dHBIZWFkZXJBY2NlcHRzKTtcclxuICAgICAgICBpZiAoaHR0cEhlYWRlckFjY2VwdFNlbGVjdGVkICE9IHVuZGVmaW5lZCkge1xyXG4gICAgICAgICAgICBoZWFkZXJzID0gaGVhZGVycy5zZXQoJ0FjY2VwdCcsIGh0dHBIZWFkZXJBY2NlcHRTZWxlY3RlZCk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvLyB0byBkZXRlcm1pbmUgdGhlIENvbnRlbnQtVHlwZSBoZWFkZXJcclxuICAgICAgICBjb25zdCBjb25zdW1lczogc3RyaW5nW10gPSBbXHJcbiAgICAgICAgXTtcclxuXHJcbiAgICAgICAgcmV0dXJuIHRoaXMuaHR0cENsaWVudC5yZXF1ZXN0PENvbW1lbnQ+KCdnZXQnLGAke3RoaXMuYmFzZVBhdGh9L2luYm94L3F1ZXVlLyR7ZW5jb2RlVVJJQ29tcG9uZW50KFN0cmluZyhxdWV1ZUlkKSl9L2l0ZW1zLyR7ZW5jb2RlVVJJQ29tcG9uZW50KFN0cmluZyhjb250ZW50SWQpKX0vY29tbWVudHNgLFxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICB3aXRoQ3JlZGVudGlhbHM6IHRoaXMuY29uZmlndXJhdGlvbi53aXRoQ3JlZGVudGlhbHMsXHJcbiAgICAgICAgICAgICAgICBoZWFkZXJzOiBoZWFkZXJzLFxyXG4gICAgICAgICAgICAgICAgb2JzZXJ2ZTogb2JzZXJ2ZSxcclxuICAgICAgICAgICAgICAgIHJlcG9ydFByb2dyZXNzOiByZXBvcnRQcm9ncmVzc1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgKTtcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIEdldCBhIGNvbW1lbnRcclxuICAgICAqIEdldCBhIGNvbW1lbnQgYnkgSWQgZm9yIHRoaXMgaXRlbVxyXG4gICAgICogQHBhcmFtIHF1ZXVlSWQgVGhlIHVuaXF1ZSBpZGVudGlmaWVyIGZvciB0aGlzIHF1ZXVlXHJcbiAgICAgKiBAcGFyYW0gY29udGVudElkIFRoZSB1bmlxdWUgaWRlbnRpZmllciBmb3IgdGhlIGNvbnRlbnRcclxuICAgICAqIEBwYXJhbSBjb21tZW50SWQgVGhlIHVuaXF1ZSBpZGVudGlmaWVyIGZvciB0aGUgY29tbWVudFxyXG4gICAgICogQHBhcmFtIG9ic2VydmUgc2V0IHdoZXRoZXIgb3Igbm90IHRvIHJldHVybiB0aGUgZGF0YSBPYnNlcnZhYmxlIGFzIHRoZSBib2R5LCByZXNwb25zZSBvciBldmVudHMuIGRlZmF1bHRzIHRvIHJldHVybmluZyB0aGUgYm9keS5cclxuICAgICAqIEBwYXJhbSByZXBvcnRQcm9ncmVzcyBmbGFnIHRvIHJlcG9ydCByZXF1ZXN0IGFuZCByZXNwb25zZSBwcm9ncmVzcy5cclxuICAgICAqL1xyXG4gICAgcHVibGljIGdldENvbW1lbnQocXVldWVJZDogc3RyaW5nLCBjb250ZW50SWQ6IHN0cmluZywgY29tbWVudElkOiBzdHJpbmcsIG9ic2VydmU/OiAnYm9keScsIHJlcG9ydFByb2dyZXNzPzogYm9vbGVhbik6IE9ic2VydmFibGU8Q29tbWVudD47XHJcbiAgICBwdWJsaWMgZ2V0Q29tbWVudChxdWV1ZUlkOiBzdHJpbmcsIGNvbnRlbnRJZDogc3RyaW5nLCBjb21tZW50SWQ6IHN0cmluZywgb2JzZXJ2ZT86ICdyZXNwb25zZScsIHJlcG9ydFByb2dyZXNzPzogYm9vbGVhbik6IE9ic2VydmFibGU8SHR0cFJlc3BvbnNlPENvbW1lbnQ+PjtcclxuICAgIHB1YmxpYyBnZXRDb21tZW50KHF1ZXVlSWQ6IHN0cmluZywgY29udGVudElkOiBzdHJpbmcsIGNvbW1lbnRJZDogc3RyaW5nLCBvYnNlcnZlPzogJ2V2ZW50cycsIHJlcG9ydFByb2dyZXNzPzogYm9vbGVhbik6IE9ic2VydmFibGU8SHR0cEV2ZW50PENvbW1lbnQ+PjtcclxuICAgIHB1YmxpYyBnZXRDb21tZW50KHF1ZXVlSWQ6IHN0cmluZywgY29udGVudElkOiBzdHJpbmcsIGNvbW1lbnRJZDogc3RyaW5nLCBvYnNlcnZlOiBhbnkgPSAnYm9keScsIHJlcG9ydFByb2dyZXNzOiBib29sZWFuID0gZmFsc2UgKTogT2JzZXJ2YWJsZTxhbnk+IHtcclxuXHJcbiAgICAgICAgaWYgKHF1ZXVlSWQgPT09IG51bGwgfHwgcXVldWVJZCA9PT0gdW5kZWZpbmVkKSB7XHJcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcignUmVxdWlyZWQgcGFyYW1ldGVyIHF1ZXVlSWQgd2FzIG51bGwgb3IgdW5kZWZpbmVkIHdoZW4gY2FsbGluZyBnZXRDb21tZW50LicpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgaWYgKGNvbnRlbnRJZCA9PT0gbnVsbCB8fCBjb250ZW50SWQgPT09IHVuZGVmaW5lZCkge1xyXG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ1JlcXVpcmVkIHBhcmFtZXRlciBjb250ZW50SWQgd2FzIG51bGwgb3IgdW5kZWZpbmVkIHdoZW4gY2FsbGluZyBnZXRDb21tZW50LicpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgaWYgKGNvbW1lbnRJZCA9PT0gbnVsbCB8fCBjb21tZW50SWQgPT09IHVuZGVmaW5lZCkge1xyXG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ1JlcXVpcmVkIHBhcmFtZXRlciBjb21tZW50SWQgd2FzIG51bGwgb3IgdW5kZWZpbmVkIHdoZW4gY2FsbGluZyBnZXRDb21tZW50LicpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgbGV0IGhlYWRlcnMgPSB0aGlzLmRlZmF1bHRIZWFkZXJzO1xyXG5cclxuICAgICAgICAvLyB0byBkZXRlcm1pbmUgdGhlIEFjY2VwdCBoZWFkZXJcclxuICAgICAgICBsZXQgaHR0cEhlYWRlckFjY2VwdHM6IHN0cmluZ1tdID0gW1xyXG4gICAgICAgICAgICAnYXBwbGljYXRpb24vanNvbidcclxuICAgICAgICBdO1xyXG4gICAgICAgIGNvbnN0IGh0dHBIZWFkZXJBY2NlcHRTZWxlY3RlZDogc3RyaW5nIHwgdW5kZWZpbmVkID0gdGhpcy5jb25maWd1cmF0aW9uLnNlbGVjdEhlYWRlckFjY2VwdChodHRwSGVhZGVyQWNjZXB0cyk7XHJcbiAgICAgICAgaWYgKGh0dHBIZWFkZXJBY2NlcHRTZWxlY3RlZCAhPSB1bmRlZmluZWQpIHtcclxuICAgICAgICAgICAgaGVhZGVycyA9IGhlYWRlcnMuc2V0KCdBY2NlcHQnLCBodHRwSGVhZGVyQWNjZXB0U2VsZWN0ZWQpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLy8gdG8gZGV0ZXJtaW5lIHRoZSBDb250ZW50LVR5cGUgaGVhZGVyXHJcbiAgICAgICAgY29uc3QgY29uc3VtZXM6IHN0cmluZ1tdID0gW1xyXG4gICAgICAgIF07XHJcblxyXG4gICAgICAgIHJldHVybiB0aGlzLmh0dHBDbGllbnQucmVxdWVzdDxDb21tZW50PignZ2V0JyxgJHt0aGlzLmJhc2VQYXRofS9pbmJveC9xdWV1ZS8ke2VuY29kZVVSSUNvbXBvbmVudChTdHJpbmcocXVldWVJZCkpfS9pdGVtcy8ke2VuY29kZVVSSUNvbXBvbmVudChTdHJpbmcoY29udGVudElkKSl9L2NvbW1lbnRzLyR7ZW5jb2RlVVJJQ29tcG9uZW50KFN0cmluZyhjb21tZW50SWQpKX1gLFxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICB3aXRoQ3JlZGVudGlhbHM6IHRoaXMuY29uZmlndXJhdGlvbi53aXRoQ3JlZGVudGlhbHMsXHJcbiAgICAgICAgICAgICAgICBoZWFkZXJzOiBoZWFkZXJzLFxyXG4gICAgICAgICAgICAgICAgb2JzZXJ2ZTogb2JzZXJ2ZSxcclxuICAgICAgICAgICAgICAgIHJlcG9ydFByb2dyZXNzOiByZXBvcnRQcm9ncmVzc1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgKTtcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIFNlYXJjaCBmb3Igb3IgY2hlY2tvdXQgaXRlbXMgaW4gdGhpcyBxdWV1ZVxyXG4gICAgICogTG9va3VwIGl0ZW1zIGZvciB0aGlzIHF1ZXVlXHJcbiAgICAgKiBAcGFyYW0gbGFuZ3VhZ2UgU2hvdyByZXN1bHRzIGZvciB0aGUgZ2l2ZW4gbGFuZ3VhZ2Ugb25seS4gICBUaGlzIGlzIHRoZSBsYW5ndWFnZSB1c2VkLCBjb3VsZCBoYXZlIGJlZW4gc2V0IGJ5IHRoZSB1c2VyIG9yIGRldGVjdGVkIGJ5IGxhbmd1YWdlIGlkLlxyXG4gICAgICogQHBhcmFtIGFpIFNob3cgaXRlbXMgdGhlIEFJIHByZWRpY3RzIGFzIHVzZWZ1bCBiZWNhdXNlIG1vZGVyYXRvcnMgaW4gdGhlIHBhc3QgaGF2ZSB0YWtlbiBhbiBhY3Rpb24gb24gdGhpcyBpdGVtcy4gIFBhc3NpbmcgYW4gYXJyYXkgb2Ygb2JqZWN0cyBhcyBwYXJhbXMgY2FuIGJlIHRyaWNreSBhdCBmaXJzdCBzbyBoZXJlIGlzIGFuIGV4YW1wbGUgJmFtcDthaVswXVttaW5QcmVkaWN0aW9uXSYjeDNEOzAuNTAmYW1wO2FpWzBdW21vZGVsTmFtZV0mI3gzRDt0b3BpY192dWxnYXImYW1wO2FpWzBdW21heFByZWRpY3Rpb25dJiN4M0Q7MC45NSZhbXA7YWlbMV1bbWluUHJlZGljdGlvbl0mI3gzRDswLjEwJmFtcDthaVsxXVttb2RlbE5hbWVdJiN4M0Q7dG9waWNfZnJhdWQmYW1wO2FpWzFdW21heFByZWRpY3Rpb25dJiN4M0Q7MC44MCAgSW4gdXJsZW5jb2RlZCBmb3JtIHRoYXQgd291bGQgYmUgJmFtcDthaSU1QjAlNUQlNUJtaW5QcmVkaWN0aW9uJTVEJiN4M0Q7MC41MCZhbXA7YWklNUIwJTVEJTVCbW9kZWxOYW1lJTVEJiN4M0Q7dG9waWNfdnVsZ2FyJmFtcDthaSU1QjAlNUQlNUJtYXhQcmVkaWN0aW9uJTVEJiN4M0Q7MC45NSZhbXA7YWklNUIxJTVEJTVCbWluUHJlZGljdGlvbiU1RCYjeDNEOzAuMTAmYW1wO2FpJTVCMSU1RCU1Qm1vZGVsTmFtZSU1RCYjeDNEO3RvcGljX2ZyYXVkJmFtcDthaSU1QjElNUQlNUJtYXhQcmVkaWN0aW9uJTVEJiN4M0Q7MC44MCBcclxuICAgICAqIEBwYXJhbSBjaGVja291dCBDaGVja291dCB0aGlzIGl0ZW0gZm9yIHJldmlld1xyXG4gICAgICogQHBhcmFtIGNsaWVudElkcyBTaG93IHJlc3VsdHMgZm9yIGEgZ2l2ZW4gY2xpZW50LiAgVHlwaWNhbGx5IHRoaXMgaXMgc2V0IGZvciB5b3UgYnkgdGhlIGludGVybmFsIHN5c3RlbSBiYXNlZCBvbiB0aGUgQVBJX0tFWSB5b3UgYXJlIHVzaW5nLiAgSG93ZXZlciBzb21lIGNsaWVudHMgYXJlIGFsbG93ZWQgdG8gdmlldyBvdGhlciBjbGllbnRzIHN1Y2ggYXMgd2hlbiB0aGV5IGhhdmUgYSBzYW5kYm94IG9yIHdoZW4gdGhleSBhcmUgYSBsYXJnZSBlbnRlcnByaXNlIGFuZCBoYXZlIG11bHRpcGxlIGNsaWVudHMgdGhleSBtYW5hZ2UuICBJdCB3aWxsIG9ubHkgYWxsb3cgeW91IHRvIHZpZXcgY2xpZW50IGRhdGEgeW91IGhhdmUgYWNjZXNzIHRvLiBZb3UgY2FuIHNldCB0aGlzIHRvIC0xIHRvIGFwcGx5IHRvIGFsbCBjbGllbnRzIHlvdSBoYXZlIGFjY2VzcyB0by5cclxuICAgICAqIEBwYXJhbSBjb250ZW50SWRzIEdldCB0aGVzZSBzcGVjaWZpYyBjb250ZW50SWRzLiAgRnJlcXVlbnRseSB1c2VkIHdoZW4geW91IHVzZSB0aGUgUHJldmlvdXMgYnV0dG9uLlxyXG4gICAgICogQHBhcmFtIG5vdENvbnRlbnRJZHMgRXhjbHVkZSB0aGVzZSBzcGVjaWZpYyBjb250ZW50SWRzLiAgT3JpZ2luYWxseSBkZXNpZ25lZCBzbyB5b3UgY2FuIGNhbGwgY2hlY2tvdXQgYW5kIHBhc3MgaW4gdGhlIGl0ZW0geW91IGFyZSB3b3JraW5nIG9uIHJpZ2h0IG5vdyBhbmQgaXQgd2lsbCBnaXZlIHlvdSBhIGRpZmZlcmVudCBvbmUuICBUaGUgZGVmYXVsdCBjaGVja291dCBiZWhhdmlvdXIgd2lsbCBhc3NpZ24gdGhlIGl0ZW1zIHlvdSBhbHJlYWR5IGhhdmUgY2hlY2tlZCBvdXQgICh3aGljaCBpcyBvbiB5b3VyIHNjcmVlbikuIFxyXG4gICAgICogQHBhcmFtIGVuZERhdGUgU2hvdyByZXN1bHRzIG9jY3VycmluZyBiZWZvcmUgdGhlIGdpdmVuIGRhdGUgaW4gdW5peHRpbWVzdGFtcCAobWlsbGlzZWNvbmRzIHNpbmNlIEVwb2NoKVxyXG4gICAgICogQHBhcmFtIHN0YXJ0RGF0ZSBTaG93IHJlc3VsdHMgb2NjdXJyaW5nIGFmdGVyIHRoZSBnaXZlbiBkYXRlIGluIHVuaXh0aW1lc3RhbXAgKG1pbGxpc2Vjb25kcyBzaW5jZSBFcG9jaClcclxuICAgICAqIEBwYXJhbSByZXZpZXdlZFN0YXJ0RGF0ZSBTaG93IHJlc3VsdHMgdGhhdCB3aGVyZSByZXZpZXdlZCBiZXR3ZWVuIGdpdmVuIGRhdGUgaW4gdW5peHRpbWVzdGFtcCAobWlsbGlzZWNvbmRzIHNpbmNlIEVwb2NoKVxyXG4gICAgICogQHBhcmFtIHJldmlld2VkRW5kRGF0ZSBTaG93IHJlc3VsdHMgdGhhdCB3aGVyZSByZXZpZXdlZCBiZXR3ZWVuIGdpdmVuIGRhdGUgaW4gdW5peHRpbWVzdGFtcCAobWlsbGlzZWNvbmRzIHNpbmNlIEVwb2NoKVxyXG4gICAgICogQHBhcmFtIGNoZWNrb3V0QXZhaWxhYmxlIE9ubHkgc2hvdyBpdGVtcyB3aGVyZSB0aGUgaXRlbSBjb3VsZCBiZSBjaGVja2VkIG91dCBieSBtZS4gIFRoaXMgaXMgdGhlIHNhbWUgYXMgY2hlY2tvdXQmI3gzRDt0cnVlIGJ1dCBpdCBkb2VzIG5vdCBjaGVjayBpdCBvdXQuXHJcbiAgICAgKiBAcGFyYW0gZG9uZUJ5TW9kZXJhdG9ySWQgT25seSBzaG93IHdvcmsgZG9uZSBieSB0aGlzIG1vZGVyYXRvcklkXHJcbiAgICAgKiBAcGFyYW0gbGltaXQgTGltaXQgdGhlIG51bWJlciBvZiByZXN1bHRzXHJcbiAgICAgKiBAcGFyYW0gb2Zmc2V0IFN0YXJ0IHRoZSBzZWFyY2ggZnJvbSBvZmZzZXQgMC4gIEZvciBpbnN0YW5jZSBpZiB5b3VyIHVzaW5nIHBhZ2luYXRpb24gcGFnZSAyIHdvdWxkIGJlIG9uIHRvdGFsSXRlbXNQZXJQYWdlKnBhZ2VOdW0uIFxyXG4gICAgICogQHBhcmFtIHNvcnRCeSBXaGF0IGRvIHlvdSB3YW50IHRvIHNvcnQgdGhlIHJlc3VsdHMgYnkgIC0gRklGTyB8IEZpcnN0IGluIEZpcnN0IE91dCwgdGhlIHNhbWUgb3JkZXIgdGhleSBjYW1lIGluIC0gUmVjZW50IHwgSGFuZGxlIHRoZSBtb3N0IHJlY2VudCBpdGVtcyBmaXJzdCAtIFByaW9yaXR5IHwgQnkgcHJpb3JpdHkgKGlmIGFwcGxpY2FibGUpLiAgRm9yIHF1YWxpdHkgY29udHJvbCBsaWtlIHNwZWxsaW5nIGl0IGlzIHRoZSB0aW1lcyB1c2VkIHNvIGl0IHdpbGwgc2hvdyB0aGUgaXRlbXMgbWlzc3BlbGxlZCAxMDAwIHRpbWVzIGJlZm9yZSB0aGUgb25lcyA1MDAgdGltZXMuICBGb3IgcmVwb3J0ZWQgdXNlcnMgaXQgd2lsbCBiZSB0aGUgb25lcyB3aGVyZSBtdWx0aXBsZSB1c2VycyBoYXZlIHJlcG9ydGVkIHRoZSBzYW1lIHVzZXIuIC0gQUkgfCBEZWFsIHdpdGggdGhlIGhpZ2VzdCBBSSBwcmVkaWN0aW9ucyBmaXJzdCB0aGF0IHByZWRpY3QgdGhpcyBzaG91bGQgYmUgcmVsZXZhbnQgZm9yIG1lLiAgKE5PVEU6IHRvIHNlYXJjaCBieSBBSSB5b3UgbXVzdCBhbHNvIGhhdmUgc2V0IHRoZSBhaS5tb2RlbE5hbWUgaW4gdGhlIGZpcnN0IGl0ZW0gb2YgdGhlIHBhcmFtZXRlciBhaSkgXHJcbiAgICAgKiBAcGFyYW0gdGFncyBPbmx5IGZpbmQgaXRlbXMgbWF0Y2hpbmcgYSBjZXJ0YWluIHRhZ1xyXG4gICAgICogQHBhcmFtIHRleHQgVGV4dCBzZWFyY2guICBUaGlzIHVzZXMgZnV6enkgbWF0Y2hpbmcuXHJcbiAgICAgKiBAcGFyYW0gdG9waWNzIE9ubHkgc2hvdyBpdGVtcyBmb3IgdGhlc2UgdG9waWNzICh0b3BpY0lkKSBiZXR3ZWVuIHJpc2sgbGV2ZWwgbWluUmlzayBhbmQgbWF4Umlza1xyXG4gICAgICogQHBhcmFtIHVucmVzb2x2ZWRDb21tZW50cyBXaWxsIHNlZSBpZiB0aGVyZSBhcmUgYW55IHVucmVzb2x2ZWQgY29tbWVudHMgZm9yIHlvdSBhbmQgc2hvdyBvbmx5IHRob3NlXHJcbiAgICAgKiBAcGFyYW0gb2JzZXJ2ZSBzZXQgd2hldGhlciBvciBub3QgdG8gcmV0dXJuIHRoZSBkYXRhIE9ic2VydmFibGUgYXMgdGhlIGJvZHksIHJlc3BvbnNlIG9yIGV2ZW50cy4gZGVmYXVsdHMgdG8gcmV0dXJuaW5nIHRoZSBib2R5LlxyXG4gICAgICogQHBhcmFtIHJlcG9ydFByb2dyZXNzIGZsYWcgdG8gcmVwb3J0IHJlcXVlc3QgYW5kIHJlc3BvbnNlIHByb2dyZXNzLlxyXG4gICAgICovXHJcbiAgICBwdWJsaWMgZ2V0RXhhbXBsZXMobGFuZ3VhZ2U6IHN0cmluZywgYWk/OiBBcnJheTxBaT4sIGNoZWNrb3V0PzogYm9vbGVhbiwgY2xpZW50SWRzPzogQXJyYXk8bnVtYmVyPiwgY29udGVudElkcz86IEFycmF5PHN0cmluZz4sIG5vdENvbnRlbnRJZHM/OiBBcnJheTxzdHJpbmc+LCBlbmREYXRlPzogbnVtYmVyLCBzdGFydERhdGU/OiBudW1iZXIsIHJldmlld2VkU3RhcnREYXRlPzogbnVtYmVyLCByZXZpZXdlZEVuZERhdGU/OiBudW1iZXIsIGNoZWNrb3V0QXZhaWxhYmxlPzogYm9vbGVhbiwgZG9uZUJ5TW9kZXJhdG9ySWQ/OiBNb2RlcmF0b3JJZCwgbGltaXQ/OiBudW1iZXIsIG9mZnNldD86IG51bWJlciwgc29ydEJ5Pzogc3RyaW5nLCB0YWdzPzogQXJyYXk8c3RyaW5nPiwgdGV4dD86IHN0cmluZywgdG9waWNzPzogQXJyYXk8VG9waWNzPiwgdW5yZXNvbHZlZENvbW1lbnRzPzogYm9vbGVhbiwgb2JzZXJ2ZT86ICdib2R5JywgcmVwb3J0UHJvZ3Jlc3M/OiBib29sZWFuKTogT2JzZXJ2YWJsZTxFeGFtcGxlT3V0cHV0PjtcclxuICAgIHB1YmxpYyBnZXRFeGFtcGxlcyhsYW5ndWFnZTogc3RyaW5nLCBhaT86IEFycmF5PEFpPiwgY2hlY2tvdXQ/OiBib29sZWFuLCBjbGllbnRJZHM/OiBBcnJheTxudW1iZXI+LCBjb250ZW50SWRzPzogQXJyYXk8c3RyaW5nPiwgbm90Q29udGVudElkcz86IEFycmF5PHN0cmluZz4sIGVuZERhdGU/OiBudW1iZXIsIHN0YXJ0RGF0ZT86IG51bWJlciwgcmV2aWV3ZWRTdGFydERhdGU/OiBudW1iZXIsIHJldmlld2VkRW5kRGF0ZT86IG51bWJlciwgY2hlY2tvdXRBdmFpbGFibGU/OiBib29sZWFuLCBkb25lQnlNb2RlcmF0b3JJZD86IE1vZGVyYXRvcklkLCBsaW1pdD86IG51bWJlciwgb2Zmc2V0PzogbnVtYmVyLCBzb3J0Qnk/OiBzdHJpbmcsIHRhZ3M/OiBBcnJheTxzdHJpbmc+LCB0ZXh0Pzogc3RyaW5nLCB0b3BpY3M/OiBBcnJheTxUb3BpY3M+LCB1bnJlc29sdmVkQ29tbWVudHM/OiBib29sZWFuLCBvYnNlcnZlPzogJ3Jlc3BvbnNlJywgcmVwb3J0UHJvZ3Jlc3M/OiBib29sZWFuKTogT2JzZXJ2YWJsZTxIdHRwUmVzcG9uc2U8RXhhbXBsZU91dHB1dD4+O1xyXG4gICAgcHVibGljIGdldEV4YW1wbGVzKGxhbmd1YWdlOiBzdHJpbmcsIGFpPzogQXJyYXk8QWk+LCBjaGVja291dD86IGJvb2xlYW4sIGNsaWVudElkcz86IEFycmF5PG51bWJlcj4sIGNvbnRlbnRJZHM/OiBBcnJheTxzdHJpbmc+LCBub3RDb250ZW50SWRzPzogQXJyYXk8c3RyaW5nPiwgZW5kRGF0ZT86IG51bWJlciwgc3RhcnREYXRlPzogbnVtYmVyLCByZXZpZXdlZFN0YXJ0RGF0ZT86IG51bWJlciwgcmV2aWV3ZWRFbmREYXRlPzogbnVtYmVyLCBjaGVja291dEF2YWlsYWJsZT86IGJvb2xlYW4sIGRvbmVCeU1vZGVyYXRvcklkPzogTW9kZXJhdG9ySWQsIGxpbWl0PzogbnVtYmVyLCBvZmZzZXQ/OiBudW1iZXIsIHNvcnRCeT86IHN0cmluZywgdGFncz86IEFycmF5PHN0cmluZz4sIHRleHQ/OiBzdHJpbmcsIHRvcGljcz86IEFycmF5PFRvcGljcz4sIHVucmVzb2x2ZWRDb21tZW50cz86IGJvb2xlYW4sIG9ic2VydmU/OiAnZXZlbnRzJywgcmVwb3J0UHJvZ3Jlc3M/OiBib29sZWFuKTogT2JzZXJ2YWJsZTxIdHRwRXZlbnQ8RXhhbXBsZU91dHB1dD4+O1xyXG4gICAgcHVibGljIGdldEV4YW1wbGVzKGxhbmd1YWdlOiBzdHJpbmcsIGFpPzogQXJyYXk8QWk+LCBjaGVja291dD86IGJvb2xlYW4sIGNsaWVudElkcz86IEFycmF5PG51bWJlcj4sIGNvbnRlbnRJZHM/OiBBcnJheTxzdHJpbmc+LCBub3RDb250ZW50SWRzPzogQXJyYXk8c3RyaW5nPiwgZW5kRGF0ZT86IG51bWJlciwgc3RhcnREYXRlPzogbnVtYmVyLCByZXZpZXdlZFN0YXJ0RGF0ZT86IG51bWJlciwgcmV2aWV3ZWRFbmREYXRlPzogbnVtYmVyLCBjaGVja291dEF2YWlsYWJsZT86IGJvb2xlYW4sIGRvbmVCeU1vZGVyYXRvcklkPzogTW9kZXJhdG9ySWQsIGxpbWl0PzogbnVtYmVyLCBvZmZzZXQ/OiBudW1iZXIsIHNvcnRCeT86IHN0cmluZywgdGFncz86IEFycmF5PHN0cmluZz4sIHRleHQ/OiBzdHJpbmcsIHRvcGljcz86IEFycmF5PFRvcGljcz4sIHVucmVzb2x2ZWRDb21tZW50cz86IGJvb2xlYW4sIG9ic2VydmU6IGFueSA9ICdib2R5JywgcmVwb3J0UHJvZ3Jlc3M6IGJvb2xlYW4gPSBmYWxzZSApOiBPYnNlcnZhYmxlPGFueT4ge1xyXG5cclxuICAgICAgICBpZiAobGFuZ3VhZ2UgPT09IG51bGwgfHwgbGFuZ3VhZ2UgPT09IHVuZGVmaW5lZCkge1xyXG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ1JlcXVpcmVkIHBhcmFtZXRlciBsYW5ndWFnZSB3YXMgbnVsbCBvciB1bmRlZmluZWQgd2hlbiBjYWxsaW5nIGdldEV4YW1wbGVzLicpO1xyXG4gICAgICAgIH1cclxuXHJcblxyXG5cclxuXHJcblxyXG5cclxuXHJcblxyXG5cclxuXHJcblxyXG5cclxuXHJcblxyXG5cclxuXHJcblxyXG5cclxuXHJcbiAgICAgICAgbGV0IHF1ZXJ5UGFyYW1ldGVycyA9IG5ldyBIdHRwUGFyYW1zKHtlbmNvZGVyOiBuZXcgQ3VzdG9tSHR0cFVybEVuY29kaW5nQ29kZWMoKX0pO1xyXG4gICAgICAgIGlmIChhaSkge1xyXG4gICAgICAgICAgICBhaS5mb3JFYWNoKChlbGVtZW50KSA9PiB7XHJcbiAgICAgICAgICAgICAgICBxdWVyeVBhcmFtZXRlcnMgPSBxdWVyeVBhcmFtZXRlcnMuYXBwZW5kKCdhaScsIDxhbnk+ZWxlbWVudCk7XHJcbiAgICAgICAgICAgIH0pXHJcbiAgICAgICAgfVxyXG4gICAgICAgIGlmIChjaGVja291dCAhPT0gdW5kZWZpbmVkICYmIGNoZWNrb3V0ICE9PSBudWxsKSB7XHJcbiAgICAgICAgICAgIHF1ZXJ5UGFyYW1ldGVycyA9IHF1ZXJ5UGFyYW1ldGVycy5zZXQoJ2NoZWNrb3V0JywgPGFueT5jaGVja291dCk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGlmIChjbGllbnRJZHMpIHtcclxuICAgICAgICAgICAgcXVlcnlQYXJhbWV0ZXJzID0gcXVlcnlQYXJhbWV0ZXJzLnNldCgnY2xpZW50SWRzJywgY2xpZW50SWRzLmpvaW4oQ09MTEVDVElPTl9GT1JNQVRTWydjc3YnXSkpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpZiAoY29udGVudElkcykge1xyXG4gICAgICAgICAgICBxdWVyeVBhcmFtZXRlcnMgPSBxdWVyeVBhcmFtZXRlcnMuc2V0KCdjb250ZW50SWRzJywgY29udGVudElkcy5qb2luKENPTExFQ1RJT05fRk9STUFUU1snY3N2J10pKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgaWYgKG5vdENvbnRlbnRJZHMpIHtcclxuICAgICAgICAgICAgcXVlcnlQYXJhbWV0ZXJzID0gcXVlcnlQYXJhbWV0ZXJzLnNldCgnbm90Q29udGVudElkcycsIG5vdENvbnRlbnRJZHMuam9pbihDT0xMRUNUSU9OX0ZPUk1BVFNbJ2NzdiddKSk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGlmIChlbmREYXRlICE9PSB1bmRlZmluZWQgJiYgZW5kRGF0ZSAhPT0gbnVsbCkge1xyXG4gICAgICAgICAgICBxdWVyeVBhcmFtZXRlcnMgPSBxdWVyeVBhcmFtZXRlcnMuc2V0KCdlbmREYXRlJywgPGFueT5lbmREYXRlKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgaWYgKHN0YXJ0RGF0ZSAhPT0gdW5kZWZpbmVkICYmIHN0YXJ0RGF0ZSAhPT0gbnVsbCkge1xyXG4gICAgICAgICAgICBxdWVyeVBhcmFtZXRlcnMgPSBxdWVyeVBhcmFtZXRlcnMuc2V0KCdzdGFydERhdGUnLCA8YW55PnN0YXJ0RGF0ZSk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGlmIChyZXZpZXdlZFN0YXJ0RGF0ZSAhPT0gdW5kZWZpbmVkICYmIHJldmlld2VkU3RhcnREYXRlICE9PSBudWxsKSB7XHJcbiAgICAgICAgICAgIHF1ZXJ5UGFyYW1ldGVycyA9IHF1ZXJ5UGFyYW1ldGVycy5zZXQoJ3Jldmlld2VkU3RhcnREYXRlJywgPGFueT5yZXZpZXdlZFN0YXJ0RGF0ZSk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGlmIChyZXZpZXdlZEVuZERhdGUgIT09IHVuZGVmaW5lZCAmJiByZXZpZXdlZEVuZERhdGUgIT09IG51bGwpIHtcclxuICAgICAgICAgICAgcXVlcnlQYXJhbWV0ZXJzID0gcXVlcnlQYXJhbWV0ZXJzLnNldCgncmV2aWV3ZWRFbmREYXRlJywgPGFueT5yZXZpZXdlZEVuZERhdGUpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpZiAoY2hlY2tvdXRBdmFpbGFibGUgIT09IHVuZGVmaW5lZCAmJiBjaGVja291dEF2YWlsYWJsZSAhPT0gbnVsbCkge1xyXG4gICAgICAgICAgICBxdWVyeVBhcmFtZXRlcnMgPSBxdWVyeVBhcmFtZXRlcnMuc2V0KCdjaGVja291dEF2YWlsYWJsZScsIDxhbnk+Y2hlY2tvdXRBdmFpbGFibGUpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpZiAoZG9uZUJ5TW9kZXJhdG9ySWQgIT09IHVuZGVmaW5lZCAmJiBkb25lQnlNb2RlcmF0b3JJZCAhPT0gbnVsbCkge1xyXG4gICAgICAgICAgICBxdWVyeVBhcmFtZXRlcnMgPSBxdWVyeVBhcmFtZXRlcnMuc2V0KCdkb25lQnlNb2RlcmF0b3JJZCcsIDxhbnk+ZG9uZUJ5TW9kZXJhdG9ySWQpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpZiAobGFuZ3VhZ2UgIT09IHVuZGVmaW5lZCAmJiBsYW5ndWFnZSAhPT0gbnVsbCkge1xyXG4gICAgICAgICAgICBxdWVyeVBhcmFtZXRlcnMgPSBxdWVyeVBhcmFtZXRlcnMuc2V0KCdsYW5ndWFnZScsIDxhbnk+bGFuZ3VhZ2UpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpZiAobGltaXQgIT09IHVuZGVmaW5lZCAmJiBsaW1pdCAhPT0gbnVsbCkge1xyXG4gICAgICAgICAgICBxdWVyeVBhcmFtZXRlcnMgPSBxdWVyeVBhcmFtZXRlcnMuc2V0KCdsaW1pdCcsIDxhbnk+bGltaXQpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpZiAob2Zmc2V0ICE9PSB1bmRlZmluZWQgJiYgb2Zmc2V0ICE9PSBudWxsKSB7XHJcbiAgICAgICAgICAgIHF1ZXJ5UGFyYW1ldGVycyA9IHF1ZXJ5UGFyYW1ldGVycy5zZXQoJ29mZnNldCcsIDxhbnk+b2Zmc2V0KTtcclxuICAgICAgICB9XHJcbiAgICAgICAgaWYgKHNvcnRCeSAhPT0gdW5kZWZpbmVkICYmIHNvcnRCeSAhPT0gbnVsbCkge1xyXG4gICAgICAgICAgICBxdWVyeVBhcmFtZXRlcnMgPSBxdWVyeVBhcmFtZXRlcnMuc2V0KCdzb3J0QnknLCA8YW55PnNvcnRCeSk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGlmICh0YWdzKSB7XHJcbiAgICAgICAgICAgIHF1ZXJ5UGFyYW1ldGVycyA9IHF1ZXJ5UGFyYW1ldGVycy5zZXQoJ3RhZ3MnLCB0YWdzLmpvaW4oQ09MTEVDVElPTl9GT1JNQVRTWydjc3YnXSkpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpZiAodGV4dCAhPT0gdW5kZWZpbmVkICYmIHRleHQgIT09IG51bGwpIHtcclxuICAgICAgICAgICAgcXVlcnlQYXJhbWV0ZXJzID0gcXVlcnlQYXJhbWV0ZXJzLnNldCgndGV4dCcsIDxhbnk+dGV4dCk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGlmICh0b3BpY3MpIHtcclxuICAgICAgICAgICAgdG9waWNzLmZvckVhY2goKGVsZW1lbnQpID0+IHtcclxuICAgICAgICAgICAgICAgIHF1ZXJ5UGFyYW1ldGVycyA9IHF1ZXJ5UGFyYW1ldGVycy5hcHBlbmQoJ3RvcGljcycsIDxhbnk+ZWxlbWVudCk7XHJcbiAgICAgICAgICAgIH0pXHJcbiAgICAgICAgfVxyXG4gICAgICAgIGlmICh1bnJlc29sdmVkQ29tbWVudHMgIT09IHVuZGVmaW5lZCAmJiB1bnJlc29sdmVkQ29tbWVudHMgIT09IG51bGwpIHtcclxuICAgICAgICAgICAgcXVlcnlQYXJhbWV0ZXJzID0gcXVlcnlQYXJhbWV0ZXJzLnNldCgndW5yZXNvbHZlZENvbW1lbnRzJywgPGFueT51bnJlc29sdmVkQ29tbWVudHMpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgbGV0IGhlYWRlcnMgPSB0aGlzLmRlZmF1bHRIZWFkZXJzO1xyXG5cclxuICAgICAgICAvLyB0byBkZXRlcm1pbmUgdGhlIEFjY2VwdCBoZWFkZXJcclxuICAgICAgICBsZXQgaHR0cEhlYWRlckFjY2VwdHM6IHN0cmluZ1tdID0gW1xyXG4gICAgICAgICAgICAnYXBwbGljYXRpb24vanNvbidcclxuICAgICAgICBdO1xyXG4gICAgICAgIGNvbnN0IGh0dHBIZWFkZXJBY2NlcHRTZWxlY3RlZDogc3RyaW5nIHwgdW5kZWZpbmVkID0gdGhpcy5jb25maWd1cmF0aW9uLnNlbGVjdEhlYWRlckFjY2VwdChodHRwSGVhZGVyQWNjZXB0cyk7XHJcbiAgICAgICAgaWYgKGh0dHBIZWFkZXJBY2NlcHRTZWxlY3RlZCAhPSB1bmRlZmluZWQpIHtcclxuICAgICAgICAgICAgaGVhZGVycyA9IGhlYWRlcnMuc2V0KCdBY2NlcHQnLCBodHRwSGVhZGVyQWNjZXB0U2VsZWN0ZWQpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLy8gdG8gZGV0ZXJtaW5lIHRoZSBDb250ZW50LVR5cGUgaGVhZGVyXHJcbiAgICAgICAgY29uc3QgY29uc3VtZXM6IHN0cmluZ1tdID0gW1xyXG4gICAgICAgIF07XHJcblxyXG4gICAgICAgIHJldHVybiB0aGlzLmh0dHBDbGllbnQucmVxdWVzdDxFeGFtcGxlT3V0cHV0PignZ2V0JyxgJHt0aGlzLmJhc2VQYXRofS9pbmJveC9xdWV1ZS9leGFtcGxlcy9pdGVtc2AsXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIHBhcmFtczogcXVlcnlQYXJhbWV0ZXJzLFxyXG4gICAgICAgICAgICAgICAgd2l0aENyZWRlbnRpYWxzOiB0aGlzLmNvbmZpZ3VyYXRpb24ud2l0aENyZWRlbnRpYWxzLFxyXG4gICAgICAgICAgICAgICAgaGVhZGVyczogaGVhZGVycyxcclxuICAgICAgICAgICAgICAgIG9ic2VydmU6IG9ic2VydmUsXHJcbiAgICAgICAgICAgICAgICByZXBvcnRQcm9ncmVzczogcmVwb3J0UHJvZ3Jlc3NcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICk7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBsaXN0IGFsbCBxdWV1ZXMgd2l0aCBwZW5kaW5nIGFuZCB0b3RhbCBjb3VudHNcclxuICAgICAqIFdpbGwgbGlzdCBhbGwgdGhlIHF1ZXVlcyB0aGF0IGFyZSBhdmFpbGFibGUgYW5kIHRoZSBjb3VudCBvZiBpdGVtcyBpbiB0aGVtXHJcbiAgICAgKiBAcGFyYW0gb2JzZXJ2ZSBzZXQgd2hldGhlciBvciBub3QgdG8gcmV0dXJuIHRoZSBkYXRhIE9ic2VydmFibGUgYXMgdGhlIGJvZHksIHJlc3BvbnNlIG9yIGV2ZW50cy4gZGVmYXVsdHMgdG8gcmV0dXJuaW5nIHRoZSBib2R5LlxyXG4gICAgICogQHBhcmFtIHJlcG9ydFByb2dyZXNzIGZsYWcgdG8gcmVwb3J0IHJlcXVlc3QgYW5kIHJlc3BvbnNlIHByb2dyZXNzLlxyXG4gICAgICovXHJcbiAgICBwdWJsaWMgZ2V0SW5ib3gob2JzZXJ2ZT86ICdib2R5JywgcmVwb3J0UHJvZ3Jlc3M/OiBib29sZWFuKTogT2JzZXJ2YWJsZTxBcnJheTxRdWV1ZT4+O1xyXG4gICAgcHVibGljIGdldEluYm94KG9ic2VydmU/OiAncmVzcG9uc2UnLCByZXBvcnRQcm9ncmVzcz86IGJvb2xlYW4pOiBPYnNlcnZhYmxlPEh0dHBSZXNwb25zZTxBcnJheTxRdWV1ZT4+PjtcclxuICAgIHB1YmxpYyBnZXRJbmJveChvYnNlcnZlPzogJ2V2ZW50cycsIHJlcG9ydFByb2dyZXNzPzogYm9vbGVhbik6IE9ic2VydmFibGU8SHR0cEV2ZW50PEFycmF5PFF1ZXVlPj4+O1xyXG4gICAgcHVibGljIGdldEluYm94KG9ic2VydmU6IGFueSA9ICdib2R5JywgcmVwb3J0UHJvZ3Jlc3M6IGJvb2xlYW4gPSBmYWxzZSApOiBPYnNlcnZhYmxlPGFueT4ge1xyXG5cclxuICAgICAgICBsZXQgaGVhZGVycyA9IHRoaXMuZGVmYXVsdEhlYWRlcnM7XHJcblxyXG4gICAgICAgIC8vIHRvIGRldGVybWluZSB0aGUgQWNjZXB0IGhlYWRlclxyXG4gICAgICAgIGxldCBodHRwSGVhZGVyQWNjZXB0czogc3RyaW5nW10gPSBbXHJcbiAgICAgICAgICAgICdhcHBsaWNhdGlvbi9qc29uJ1xyXG4gICAgICAgIF07XHJcbiAgICAgICAgY29uc3QgaHR0cEhlYWRlckFjY2VwdFNlbGVjdGVkOiBzdHJpbmcgfCB1bmRlZmluZWQgPSB0aGlzLmNvbmZpZ3VyYXRpb24uc2VsZWN0SGVhZGVyQWNjZXB0KGh0dHBIZWFkZXJBY2NlcHRzKTtcclxuICAgICAgICBpZiAoaHR0cEhlYWRlckFjY2VwdFNlbGVjdGVkICE9IHVuZGVmaW5lZCkge1xyXG4gICAgICAgICAgICBoZWFkZXJzID0gaGVhZGVycy5zZXQoJ0FjY2VwdCcsIGh0dHBIZWFkZXJBY2NlcHRTZWxlY3RlZCk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvLyB0byBkZXRlcm1pbmUgdGhlIENvbnRlbnQtVHlwZSBoZWFkZXJcclxuICAgICAgICBjb25zdCBjb25zdW1lczogc3RyaW5nW10gPSBbXHJcbiAgICAgICAgXTtcclxuXHJcbiAgICAgICAgcmV0dXJuIHRoaXMuaHR0cENsaWVudC5yZXF1ZXN0PEFycmF5PFF1ZXVlPj4oJ2dldCcsYCR7dGhpcy5iYXNlUGF0aH0vaW5ib3hgLFxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICB3aXRoQ3JlZGVudGlhbHM6IHRoaXMuY29uZmlndXJhdGlvbi53aXRoQ3JlZGVudGlhbHMsXHJcbiAgICAgICAgICAgICAgICBoZWFkZXJzOiBoZWFkZXJzLFxyXG4gICAgICAgICAgICAgICAgb2JzZXJ2ZTogb2JzZXJ2ZSxcclxuICAgICAgICAgICAgICAgIHJlcG9ydFByb2dyZXNzOiByZXBvcnRQcm9ncmVzc1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgKTtcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIEdldCB0aGUgY2hlY2tvdXQgZm9yIHRoaXMgaXRlbVxyXG4gICAgICogR2V0IHRoZSBjaGVja291dCBmb3IgdGhpcyBpdGVtXHJcbiAgICAgKiBAcGFyYW0gcXVldWVJZCBUaGUgdW5pcXVlIGlkZW50aWZpZXIgZm9yIHRoaXMgcXVldWVcclxuICAgICAqIEBwYXJhbSBjb250ZW50SWQgVGhlIHVuaXF1ZSBpZGVudGlmaWVyIGZvciB0aGUgY29udGVudFxyXG4gICAgICogQHBhcmFtIG9ic2VydmUgc2V0IHdoZXRoZXIgb3Igbm90IHRvIHJldHVybiB0aGUgZGF0YSBPYnNlcnZhYmxlIGFzIHRoZSBib2R5LCByZXNwb25zZSBvciBldmVudHMuIGRlZmF1bHRzIHRvIHJldHVybmluZyB0aGUgYm9keS5cclxuICAgICAqIEBwYXJhbSByZXBvcnRQcm9ncmVzcyBmbGFnIHRvIHJlcG9ydCByZXF1ZXN0IGFuZCByZXNwb25zZSBwcm9ncmVzcy5cclxuICAgICAqL1xyXG4gICAgcHVibGljIGdldEl0ZW1DaGVja291dChxdWV1ZUlkOiBzdHJpbmcsIGNvbnRlbnRJZDogc3RyaW5nLCBvYnNlcnZlPzogJ2JvZHknLCByZXBvcnRQcm9ncmVzcz86IGJvb2xlYW4pOiBPYnNlcnZhYmxlPENoZWNrb3V0PjtcclxuICAgIHB1YmxpYyBnZXRJdGVtQ2hlY2tvdXQocXVldWVJZDogc3RyaW5nLCBjb250ZW50SWQ6IHN0cmluZywgb2JzZXJ2ZT86ICdyZXNwb25zZScsIHJlcG9ydFByb2dyZXNzPzogYm9vbGVhbik6IE9ic2VydmFibGU8SHR0cFJlc3BvbnNlPENoZWNrb3V0Pj47XHJcbiAgICBwdWJsaWMgZ2V0SXRlbUNoZWNrb3V0KHF1ZXVlSWQ6IHN0cmluZywgY29udGVudElkOiBzdHJpbmcsIG9ic2VydmU/OiAnZXZlbnRzJywgcmVwb3J0UHJvZ3Jlc3M/OiBib29sZWFuKTogT2JzZXJ2YWJsZTxIdHRwRXZlbnQ8Q2hlY2tvdXQ+PjtcclxuICAgIHB1YmxpYyBnZXRJdGVtQ2hlY2tvdXQocXVldWVJZDogc3RyaW5nLCBjb250ZW50SWQ6IHN0cmluZywgb2JzZXJ2ZTogYW55ID0gJ2JvZHknLCByZXBvcnRQcm9ncmVzczogYm9vbGVhbiA9IGZhbHNlICk6IE9ic2VydmFibGU8YW55PiB7XHJcblxyXG4gICAgICAgIGlmIChxdWV1ZUlkID09PSBudWxsIHx8IHF1ZXVlSWQgPT09IHVuZGVmaW5lZCkge1xyXG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ1JlcXVpcmVkIHBhcmFtZXRlciBxdWV1ZUlkIHdhcyBudWxsIG9yIHVuZGVmaW5lZCB3aGVuIGNhbGxpbmcgZ2V0SXRlbUNoZWNrb3V0LicpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgaWYgKGNvbnRlbnRJZCA9PT0gbnVsbCB8fCBjb250ZW50SWQgPT09IHVuZGVmaW5lZCkge1xyXG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ1JlcXVpcmVkIHBhcmFtZXRlciBjb250ZW50SWQgd2FzIG51bGwgb3IgdW5kZWZpbmVkIHdoZW4gY2FsbGluZyBnZXRJdGVtQ2hlY2tvdXQuJyk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBsZXQgaGVhZGVycyA9IHRoaXMuZGVmYXVsdEhlYWRlcnM7XHJcblxyXG4gICAgICAgIC8vIHRvIGRldGVybWluZSB0aGUgQWNjZXB0IGhlYWRlclxyXG4gICAgICAgIGxldCBodHRwSGVhZGVyQWNjZXB0czogc3RyaW5nW10gPSBbXHJcbiAgICAgICAgICAgICdhcHBsaWNhdGlvbi9qc29uJ1xyXG4gICAgICAgIF07XHJcbiAgICAgICAgY29uc3QgaHR0cEhlYWRlckFjY2VwdFNlbGVjdGVkOiBzdHJpbmcgfCB1bmRlZmluZWQgPSB0aGlzLmNvbmZpZ3VyYXRpb24uc2VsZWN0SGVhZGVyQWNjZXB0KGh0dHBIZWFkZXJBY2NlcHRzKTtcclxuICAgICAgICBpZiAoaHR0cEhlYWRlckFjY2VwdFNlbGVjdGVkICE9IHVuZGVmaW5lZCkge1xyXG4gICAgICAgICAgICBoZWFkZXJzID0gaGVhZGVycy5zZXQoJ0FjY2VwdCcsIGh0dHBIZWFkZXJBY2NlcHRTZWxlY3RlZCk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvLyB0byBkZXRlcm1pbmUgdGhlIENvbnRlbnQtVHlwZSBoZWFkZXJcclxuICAgICAgICBjb25zdCBjb25zdW1lczogc3RyaW5nW10gPSBbXHJcbiAgICAgICAgXTtcclxuXHJcbiAgICAgICAgcmV0dXJuIHRoaXMuaHR0cENsaWVudC5yZXF1ZXN0PENoZWNrb3V0PignZ2V0JyxgJHt0aGlzLmJhc2VQYXRofS9pbmJveC9xdWV1ZS8ke2VuY29kZVVSSUNvbXBvbmVudChTdHJpbmcocXVldWVJZCkpfS9pdGVtcy8ke2VuY29kZVVSSUNvbXBvbmVudChTdHJpbmcoY29udGVudElkKSl9L2NoZWNrb3V0YCxcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgd2l0aENyZWRlbnRpYWxzOiB0aGlzLmNvbmZpZ3VyYXRpb24ud2l0aENyZWRlbnRpYWxzLFxyXG4gICAgICAgICAgICAgICAgaGVhZGVyczogaGVhZGVycyxcclxuICAgICAgICAgICAgICAgIG9ic2VydmU6IG9ic2VydmUsXHJcbiAgICAgICAgICAgICAgICByZXBvcnRQcm9ncmVzczogcmVwb3J0UHJvZ3Jlc3NcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICk7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBHZXQgdGhlIHF1ZXVlXHJcbiAgICAgKiBBIFF1ZXVlIGlzIGEgZ3JvdXAgb2Ygd29yayB0byBiZSBkb25lIGJ5IG1vZGVyYXRvcnMuICBUaGlzIHdpbGwgZ2V0IHRoZSBxdWV1ZSBhbmQgaXQmI3gyNztzIGluZm9ybWF0aW9uXHJcbiAgICAgKiBAcGFyYW0gcXVldWVJZCBUaGUgdW5pcXVlIGlkZW50aWZpZXIgZm9yIHRoaXMgcXVldWVcclxuICAgICAqIEBwYXJhbSBvYnNlcnZlIHNldCB3aGV0aGVyIG9yIG5vdCB0byByZXR1cm4gdGhlIGRhdGEgT2JzZXJ2YWJsZSBhcyB0aGUgYm9keSwgcmVzcG9uc2Ugb3IgZXZlbnRzLiBkZWZhdWx0cyB0byByZXR1cm5pbmcgdGhlIGJvZHkuXHJcbiAgICAgKiBAcGFyYW0gcmVwb3J0UHJvZ3Jlc3MgZmxhZyB0byByZXBvcnQgcmVxdWVzdCBhbmQgcmVzcG9uc2UgcHJvZ3Jlc3MuXHJcbiAgICAgKi9cclxuICAgIHB1YmxpYyBnZXRRdWV1ZShxdWV1ZUlkOiBzdHJpbmcsIG9ic2VydmU/OiAnYm9keScsIHJlcG9ydFByb2dyZXNzPzogYm9vbGVhbik6IE9ic2VydmFibGU8UXVldWU+O1xyXG4gICAgcHVibGljIGdldFF1ZXVlKHF1ZXVlSWQ6IHN0cmluZywgb2JzZXJ2ZT86ICdyZXNwb25zZScsIHJlcG9ydFByb2dyZXNzPzogYm9vbGVhbik6IE9ic2VydmFibGU8SHR0cFJlc3BvbnNlPFF1ZXVlPj47XHJcbiAgICBwdWJsaWMgZ2V0UXVldWUocXVldWVJZDogc3RyaW5nLCBvYnNlcnZlPzogJ2V2ZW50cycsIHJlcG9ydFByb2dyZXNzPzogYm9vbGVhbik6IE9ic2VydmFibGU8SHR0cEV2ZW50PFF1ZXVlPj47XHJcbiAgICBwdWJsaWMgZ2V0UXVldWUocXVldWVJZDogc3RyaW5nLCBvYnNlcnZlOiBhbnkgPSAnYm9keScsIHJlcG9ydFByb2dyZXNzOiBib29sZWFuID0gZmFsc2UgKTogT2JzZXJ2YWJsZTxhbnk+IHtcclxuXHJcbiAgICAgICAgaWYgKHF1ZXVlSWQgPT09IG51bGwgfHwgcXVldWVJZCA9PT0gdW5kZWZpbmVkKSB7XHJcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcignUmVxdWlyZWQgcGFyYW1ldGVyIHF1ZXVlSWQgd2FzIG51bGwgb3IgdW5kZWZpbmVkIHdoZW4gY2FsbGluZyBnZXRRdWV1ZS4nKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGxldCBoZWFkZXJzID0gdGhpcy5kZWZhdWx0SGVhZGVycztcclxuXHJcbiAgICAgICAgLy8gdG8gZGV0ZXJtaW5lIHRoZSBBY2NlcHQgaGVhZGVyXHJcbiAgICAgICAgbGV0IGh0dHBIZWFkZXJBY2NlcHRzOiBzdHJpbmdbXSA9IFtcclxuICAgICAgICAgICAgJ2FwcGxpY2F0aW9uL2pzb24nXHJcbiAgICAgICAgXTtcclxuICAgICAgICBjb25zdCBodHRwSGVhZGVyQWNjZXB0U2VsZWN0ZWQ6IHN0cmluZyB8IHVuZGVmaW5lZCA9IHRoaXMuY29uZmlndXJhdGlvbi5zZWxlY3RIZWFkZXJBY2NlcHQoaHR0cEhlYWRlckFjY2VwdHMpO1xyXG4gICAgICAgIGlmIChodHRwSGVhZGVyQWNjZXB0U2VsZWN0ZWQgIT0gdW5kZWZpbmVkKSB7XHJcbiAgICAgICAgICAgIGhlYWRlcnMgPSBoZWFkZXJzLnNldCgnQWNjZXB0JywgaHR0cEhlYWRlckFjY2VwdFNlbGVjdGVkKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8vIHRvIGRldGVybWluZSB0aGUgQ29udGVudC1UeXBlIGhlYWRlclxyXG4gICAgICAgIGNvbnN0IGNvbnN1bWVzOiBzdHJpbmdbXSA9IFtcclxuICAgICAgICBdO1xyXG5cclxuICAgICAgICByZXR1cm4gdGhpcy5odHRwQ2xpZW50LnJlcXVlc3Q8UXVldWU+KCdnZXQnLGAke3RoaXMuYmFzZVBhdGh9L2luYm94L3F1ZXVlLyR7ZW5jb2RlVVJJQ29tcG9uZW50KFN0cmluZyhxdWV1ZUlkKSl9YCxcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgd2l0aENyZWRlbnRpYWxzOiB0aGlzLmNvbmZpZ3VyYXRpb24ud2l0aENyZWRlbnRpYWxzLFxyXG4gICAgICAgICAgICAgICAgaGVhZGVyczogaGVhZGVycyxcclxuICAgICAgICAgICAgICAgIG9ic2VydmU6IG9ic2VydmUsXHJcbiAgICAgICAgICAgICAgICByZXBvcnRQcm9ncmVzczogcmVwb3J0UHJvZ3Jlc3NcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICk7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBTZWFyY2ggZm9yIGl0ZW1zIGluIHRoaXMgcXVldWVcclxuICAgICAqIExvb2t1cCBpdGVtcyBmb3IgdGhpcyBxdWV1ZVxyXG4gICAgICogQHBhcmFtIGxhbmd1YWdlIFNob3cgcmVzdWx0cyBmb3IgdGhlIGdpdmVuIGxhbmd1YWdlIG9ubHkuICAgVGhpcyBpcyB0aGUgbGFuZ3VhZ2UgdXNlZCwgY291bGQgaGF2ZSBiZWVuIHNldCBieSB0aGUgdXNlciBvciBkZXRlY3RlZCBieSBsYW5ndWFnZSBpZC5cclxuICAgICAqIEBwYXJhbSBhaSBTaG93IGl0ZW1zIHRoZSBBSSBwcmVkaWN0cyBhcyB1c2VmdWwgYmVjYXVzZSBtb2RlcmF0b3JzIGluIHRoZSBwYXN0IGhhdmUgdGFrZW4gYW4gYWN0aW9uIG9uIHRoaXMgaXRlbXMuICBQYXNzaW5nIGFuIGFycmF5IG9mIG9iamVjdHMgYXMgcGFyYW1zIGNhbiBiZSB0cmlja3kgYXQgZmlyc3Qgc28gaGVyZSBpcyBhbiBleGFtcGxlICZhbXA7YWlbMF1bbWluUHJlZGljdGlvbl0mI3gzRDswLjUwJmFtcDthaVswXVttb2RlbE5hbWVdJiN4M0Q7dG9waWNfdnVsZ2FyJmFtcDthaVswXVttYXhQcmVkaWN0aW9uXSYjeDNEOzAuOTUmYW1wO2FpWzFdW21pblByZWRpY3Rpb25dJiN4M0Q7MC4xMCZhbXA7YWlbMV1bbW9kZWxOYW1lXSYjeDNEO3RvcGljX2ZyYXVkJmFtcDthaVsxXVttYXhQcmVkaWN0aW9uXSYjeDNEOzAuODAgIEluIHVybGVuY29kZWQgZm9ybSB0aGF0IHdvdWxkIGJlICZhbXA7YWklNUIwJTVEJTVCbWluUHJlZGljdGlvbiU1RCYjeDNEOzAuNTAmYW1wO2FpJTVCMCU1RCU1Qm1vZGVsTmFtZSU1RCYjeDNEO3RvcGljX3Z1bGdhciZhbXA7YWklNUIwJTVEJTVCbWF4UHJlZGljdGlvbiU1RCYjeDNEOzAuOTUmYW1wO2FpJTVCMSU1RCU1Qm1pblByZWRpY3Rpb24lNUQmI3gzRDswLjEwJmFtcDthaSU1QjElNUQlNUJtb2RlbE5hbWUlNUQmI3gzRDt0b3BpY19mcmF1ZCZhbXA7YWklNUIxJTVEJTVCbWF4UHJlZGljdGlvbiU1RCYjeDNEOzAuODAgXHJcbiAgICAgKiBAcGFyYW0gY2hlY2tvdXQgQ2hlY2tvdXQgdGhpcyBpdGVtIGZvciByZXZpZXdcclxuICAgICAqIEBwYXJhbSBjbGllbnRJZHMgU2hvdyByZXN1bHRzIGZvciBhIGdpdmVuIGNsaWVudC4gIFR5cGljYWxseSB0aGlzIGlzIHNldCBmb3IgeW91IGJ5IHRoZSBpbnRlcm5hbCBzeXN0ZW0gYmFzZWQgb24gdGhlIEFQSV9LRVkgeW91IGFyZSB1c2luZy4gIEhvd2V2ZXIgc29tZSBjbGllbnRzIGFyZSBhbGxvd2VkIHRvIHZpZXcgb3RoZXIgY2xpZW50cyBzdWNoIGFzIHdoZW4gdGhleSBoYXZlIGEgc2FuZGJveCBvciB3aGVuIHRoZXkgYXJlIGEgbGFyZ2UgZW50ZXJwcmlzZSBhbmQgaGF2ZSBtdWx0aXBsZSBjbGllbnRzIHRoZXkgbWFuYWdlLiAgSXQgd2lsbCBvbmx5IGFsbG93IHlvdSB0byB2aWV3IGNsaWVudCBkYXRhIHlvdSBoYXZlIGFjY2VzcyB0by4gWW91IGNhbiBzZXQgdGhpcyB0byAtMSB0byBhcHBseSB0byBhbGwgY2xpZW50cyB5b3UgaGF2ZSBhY2Nlc3MgdG8uXHJcbiAgICAgKiBAcGFyYW0gY29udGVudElkcyBHZXQgdGhlc2Ugc3BlY2lmaWMgY29udGVudElkcy4gIEZyZXF1ZW50bHkgdXNlZCB3aGVuIHlvdSB1c2UgdGhlIFByZXZpb3VzIGJ1dHRvbi5cclxuICAgICAqIEBwYXJhbSBub3RDb250ZW50SWRzIEV4Y2x1ZGUgdGhlc2Ugc3BlY2lmaWMgY29udGVudElkcy4gIE9yaWdpbmFsbHkgZGVzaWduZWQgc28geW91IGNhbiBjYWxsIGNoZWNrb3V0IGFuZCBwYXNzIGluIHRoZSBpdGVtIHlvdSBhcmUgd29ya2luZyBvbiByaWdodCBub3cgYW5kIGl0IHdpbGwgZ2l2ZSB5b3UgYSBkaWZmZXJlbnQgb25lLiAgVGhlIGRlZmF1bHQgY2hlY2tvdXQgYmVoYXZpb3VyIHdpbGwgYXNzaWduIHRoZSBpdGVtcyB5b3UgYWxyZWFkeSBoYXZlIGNoZWNrZWQgb3V0ICAod2hpY2ggaXMgb24geW91ciBzY3JlZW4pLiBcclxuICAgICAqIEBwYXJhbSBlbmREYXRlIFNob3cgcmVzdWx0cyBvY2N1cnJpbmcgYmVmb3JlIHRoZSBnaXZlbiBkYXRlIGluIHVuaXh0aW1lc3RhbXAgKG1pbGxpc2Vjb25kcyBzaW5jZSBFcG9jaClcclxuICAgICAqIEBwYXJhbSBzdGFydERhdGUgU2hvdyByZXN1bHRzIG9jY3VycmluZyBhZnRlciB0aGUgZ2l2ZW4gZGF0ZSBpbiB1bml4dGltZXN0YW1wIChtaWxsaXNlY29uZHMgc2luY2UgRXBvY2gpXHJcbiAgICAgKiBAcGFyYW0gcmV2aWV3ZWRTdGFydERhdGUgU2hvdyByZXN1bHRzIHRoYXQgd2hlcmUgcmV2aWV3ZWQgYmV0d2VlbiBnaXZlbiBkYXRlIGluIHVuaXh0aW1lc3RhbXAgKG1pbGxpc2Vjb25kcyBzaW5jZSBFcG9jaClcclxuICAgICAqIEBwYXJhbSByZXZpZXdlZEVuZERhdGUgU2hvdyByZXN1bHRzIHRoYXQgd2hlcmUgcmV2aWV3ZWQgYmV0d2VlbiBnaXZlbiBkYXRlIGluIHVuaXh0aW1lc3RhbXAgKG1pbGxpc2Vjb25kcyBzaW5jZSBFcG9jaClcclxuICAgICAqIEBwYXJhbSBjaGVja291dEF2YWlsYWJsZSBPbmx5IHNob3cgaXRlbXMgd2hlcmUgdGhlIGl0ZW0gY291bGQgYmUgY2hlY2tlZCBvdXQgYnkgbWUuICBUaGlzIGlzIHRoZSBzYW1lIGFzIGNoZWNrb3V0JiN4M0Q7dHJ1ZSBidXQgaXQgZG9lcyBub3QgY2hlY2sgaXQgb3V0LlxyXG4gICAgICogQHBhcmFtIGRvbmVCeU1vZGVyYXRvcklkIE9ubHkgc2hvdyB3b3JrIGRvbmUgYnkgdGhpcyBtb2RlcmF0b3JJZFxyXG4gICAgICogQHBhcmFtIGxpbWl0IExpbWl0IHRoZSBudW1iZXIgb2YgcmVzdWx0c1xyXG4gICAgICogQHBhcmFtIG9mZnNldCBTdGFydCB0aGUgc2VhcmNoIGZyb20gb2Zmc2V0IDAuICBGb3IgaW5zdGFuY2UgaWYgeW91ciB1c2luZyBwYWdpbmF0aW9uIHBhZ2UgMiB3b3VsZCBiZSBvbiB0b3RhbEl0ZW1zUGVyUGFnZSpwYWdlTnVtLiBcclxuICAgICAqIEBwYXJhbSBzb3J0QnkgV2hhdCBkbyB5b3Ugd2FudCB0byBzb3J0IHRoZSByZXN1bHRzIGJ5ICAtIEZJRk8gfCBGaXJzdCBpbiBGaXJzdCBPdXQsIHRoZSBzYW1lIG9yZGVyIHRoZXkgY2FtZSBpbiAtIFJlY2VudCB8IEhhbmRsZSB0aGUgbW9zdCByZWNlbnQgaXRlbXMgZmlyc3QgLSBQcmlvcml0eSB8IEJ5IHByaW9yaXR5IChpZiBhcHBsaWNhYmxlKS4gIEZvciBxdWFsaXR5IGNvbnRyb2wgbGlrZSBzcGVsbGluZyBpdCBpcyB0aGUgdGltZXMgdXNlZCBzbyBpdCB3aWxsIHNob3cgdGhlIGl0ZW1zIG1pc3NwZWxsZWQgMTAwMCB0aW1lcyBiZWZvcmUgdGhlIG9uZXMgNTAwIHRpbWVzLiAgRm9yIHJlcG9ydGVkIHVzZXJzIGl0IHdpbGwgYmUgdGhlIG9uZXMgd2hlcmUgbXVsdGlwbGUgdXNlcnMgaGF2ZSByZXBvcnRlZCB0aGUgc2FtZSB1c2VyLiAtIEFJIHwgRGVhbCB3aXRoIHRoZSBoaWdlc3QgQUkgcHJlZGljdGlvbnMgZmlyc3QgdGhhdCBwcmVkaWN0IHRoaXMgc2hvdWxkIGJlIHJlbGV2YW50IGZvciBtZS4gIChOT1RFOiB0byBzZWFyY2ggYnkgQUkgeW91IG11c3QgYWxzbyBoYXZlIHNldCB0aGUgYWkubW9kZWxOYW1lIGluIHRoZSBmaXJzdCBpdGVtIG9mIHRoZSBwYXJhbWV0ZXIgYWkpIFxyXG4gICAgICogQHBhcmFtIHRhZ3MgT25seSBmaW5kIGl0ZW1zIG1hdGNoaW5nIGEgY2VydGFpbiB0YWdcclxuICAgICAqIEBwYXJhbSB0ZXh0IFRleHQgc2VhcmNoLiAgVGhpcyB1c2VzIGZ1enp5IG1hdGNoaW5nLlxyXG4gICAgICogQHBhcmFtIHRvcGljcyBPbmx5IHNob3cgaXRlbXMgZm9yIHRoZXNlIHRvcGljcyAodG9waWNJZCkgYmV0d2VlbiByaXNrIGxldmVsIG1pblJpc2sgYW5kIG1heFJpc2tcclxuICAgICAqIEBwYXJhbSB1bnJlc29sdmVkQ29tbWVudHMgV2lsbCBzZWUgaWYgdGhlcmUgYXJlIGFueSB1bnJlc29sdmVkIGNvbW1lbnRzIGZvciB5b3UgYW5kIHNob3cgb25seSB0aG9zZVxyXG4gICAgICogQHBhcmFtIG9ic2VydmUgc2V0IHdoZXRoZXIgb3Igbm90IHRvIHJldHVybiB0aGUgZGF0YSBPYnNlcnZhYmxlIGFzIHRoZSBib2R5LCByZXNwb25zZSBvciBldmVudHMuIGRlZmF1bHRzIHRvIHJldHVybmluZyB0aGUgYm9keS5cclxuICAgICAqIEBwYXJhbSByZXBvcnRQcm9ncmVzcyBmbGFnIHRvIHJlcG9ydCByZXF1ZXN0IGFuZCByZXNwb25zZSBwcm9ncmVzcy5cclxuICAgICAqL1xyXG4gICAgcHVibGljIGdldFJ1bGVBdWRpdEl0ZW1zKGxhbmd1YWdlOiBzdHJpbmcsIGFpPzogQXJyYXk8QWk+LCBjaGVja291dD86IGJvb2xlYW4sIGNsaWVudElkcz86IEFycmF5PG51bWJlcj4sIGNvbnRlbnRJZHM/OiBBcnJheTxzdHJpbmc+LCBub3RDb250ZW50SWRzPzogQXJyYXk8c3RyaW5nPiwgZW5kRGF0ZT86IG51bWJlciwgc3RhcnREYXRlPzogbnVtYmVyLCByZXZpZXdlZFN0YXJ0RGF0ZT86IG51bWJlciwgcmV2aWV3ZWRFbmREYXRlPzogbnVtYmVyLCBjaGVja291dEF2YWlsYWJsZT86IGJvb2xlYW4sIGRvbmVCeU1vZGVyYXRvcklkPzogTW9kZXJhdG9ySWQsIGxpbWl0PzogbnVtYmVyLCBvZmZzZXQ/OiBudW1iZXIsIHNvcnRCeT86IHN0cmluZywgdGFncz86IEFycmF5PHN0cmluZz4sIHRleHQ/OiBzdHJpbmcsIHRvcGljcz86IEFycmF5PFRvcGljcz4sIHVucmVzb2x2ZWRDb21tZW50cz86IGJvb2xlYW4sIG9ic2VydmU/OiAnYm9keScsIHJlcG9ydFByb2dyZXNzPzogYm9vbGVhbik6IE9ic2VydmFibGU8UnVsZUF1ZGl0T3V0cHV0PjtcclxuICAgIHB1YmxpYyBnZXRSdWxlQXVkaXRJdGVtcyhsYW5ndWFnZTogc3RyaW5nLCBhaT86IEFycmF5PEFpPiwgY2hlY2tvdXQ/OiBib29sZWFuLCBjbGllbnRJZHM/OiBBcnJheTxudW1iZXI+LCBjb250ZW50SWRzPzogQXJyYXk8c3RyaW5nPiwgbm90Q29udGVudElkcz86IEFycmF5PHN0cmluZz4sIGVuZERhdGU/OiBudW1iZXIsIHN0YXJ0RGF0ZT86IG51bWJlciwgcmV2aWV3ZWRTdGFydERhdGU/OiBudW1iZXIsIHJldmlld2VkRW5kRGF0ZT86IG51bWJlciwgY2hlY2tvdXRBdmFpbGFibGU/OiBib29sZWFuLCBkb25lQnlNb2RlcmF0b3JJZD86IE1vZGVyYXRvcklkLCBsaW1pdD86IG51bWJlciwgb2Zmc2V0PzogbnVtYmVyLCBzb3J0Qnk/OiBzdHJpbmcsIHRhZ3M/OiBBcnJheTxzdHJpbmc+LCB0ZXh0Pzogc3RyaW5nLCB0b3BpY3M/OiBBcnJheTxUb3BpY3M+LCB1bnJlc29sdmVkQ29tbWVudHM/OiBib29sZWFuLCBvYnNlcnZlPzogJ3Jlc3BvbnNlJywgcmVwb3J0UHJvZ3Jlc3M/OiBib29sZWFuKTogT2JzZXJ2YWJsZTxIdHRwUmVzcG9uc2U8UnVsZUF1ZGl0T3V0cHV0Pj47XHJcbiAgICBwdWJsaWMgZ2V0UnVsZUF1ZGl0SXRlbXMobGFuZ3VhZ2U6IHN0cmluZywgYWk/OiBBcnJheTxBaT4sIGNoZWNrb3V0PzogYm9vbGVhbiwgY2xpZW50SWRzPzogQXJyYXk8bnVtYmVyPiwgY29udGVudElkcz86IEFycmF5PHN0cmluZz4sIG5vdENvbnRlbnRJZHM/OiBBcnJheTxzdHJpbmc+LCBlbmREYXRlPzogbnVtYmVyLCBzdGFydERhdGU/OiBudW1iZXIsIHJldmlld2VkU3RhcnREYXRlPzogbnVtYmVyLCByZXZpZXdlZEVuZERhdGU/OiBudW1iZXIsIGNoZWNrb3V0QXZhaWxhYmxlPzogYm9vbGVhbiwgZG9uZUJ5TW9kZXJhdG9ySWQ/OiBNb2RlcmF0b3JJZCwgbGltaXQ/OiBudW1iZXIsIG9mZnNldD86IG51bWJlciwgc29ydEJ5Pzogc3RyaW5nLCB0YWdzPzogQXJyYXk8c3RyaW5nPiwgdGV4dD86IHN0cmluZywgdG9waWNzPzogQXJyYXk8VG9waWNzPiwgdW5yZXNvbHZlZENvbW1lbnRzPzogYm9vbGVhbiwgb2JzZXJ2ZT86ICdldmVudHMnLCByZXBvcnRQcm9ncmVzcz86IGJvb2xlYW4pOiBPYnNlcnZhYmxlPEh0dHBFdmVudDxSdWxlQXVkaXRPdXRwdXQ+PjtcclxuICAgIHB1YmxpYyBnZXRSdWxlQXVkaXRJdGVtcyhsYW5ndWFnZTogc3RyaW5nLCBhaT86IEFycmF5PEFpPiwgY2hlY2tvdXQ/OiBib29sZWFuLCBjbGllbnRJZHM/OiBBcnJheTxudW1iZXI+LCBjb250ZW50SWRzPzogQXJyYXk8c3RyaW5nPiwgbm90Q29udGVudElkcz86IEFycmF5PHN0cmluZz4sIGVuZERhdGU/OiBudW1iZXIsIHN0YXJ0RGF0ZT86IG51bWJlciwgcmV2aWV3ZWRTdGFydERhdGU/OiBudW1iZXIsIHJldmlld2VkRW5kRGF0ZT86IG51bWJlciwgY2hlY2tvdXRBdmFpbGFibGU/OiBib29sZWFuLCBkb25lQnlNb2RlcmF0b3JJZD86IE1vZGVyYXRvcklkLCBsaW1pdD86IG51bWJlciwgb2Zmc2V0PzogbnVtYmVyLCBzb3J0Qnk/OiBzdHJpbmcsIHRhZ3M/OiBBcnJheTxzdHJpbmc+LCB0ZXh0Pzogc3RyaW5nLCB0b3BpY3M/OiBBcnJheTxUb3BpY3M+LCB1bnJlc29sdmVkQ29tbWVudHM/OiBib29sZWFuLCBvYnNlcnZlOiBhbnkgPSAnYm9keScsIHJlcG9ydFByb2dyZXNzOiBib29sZWFuID0gZmFsc2UgKTogT2JzZXJ2YWJsZTxhbnk+IHtcclxuXHJcbiAgICAgICAgaWYgKGxhbmd1YWdlID09PSBudWxsIHx8IGxhbmd1YWdlID09PSB1bmRlZmluZWQpIHtcclxuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdSZXF1aXJlZCBwYXJhbWV0ZXIgbGFuZ3VhZ2Ugd2FzIG51bGwgb3IgdW5kZWZpbmVkIHdoZW4gY2FsbGluZyBnZXRSdWxlQXVkaXRJdGVtcy4nKTtcclxuICAgICAgICB9XHJcblxyXG5cclxuXHJcblxyXG5cclxuXHJcblxyXG5cclxuXHJcblxyXG5cclxuXHJcblxyXG5cclxuXHJcblxyXG5cclxuXHJcblxyXG4gICAgICAgIGxldCBxdWVyeVBhcmFtZXRlcnMgPSBuZXcgSHR0cFBhcmFtcyh7ZW5jb2RlcjogbmV3IEN1c3RvbUh0dHBVcmxFbmNvZGluZ0NvZGVjKCl9KTtcclxuICAgICAgICBpZiAoYWkpIHtcclxuICAgICAgICAgICAgYWkuZm9yRWFjaCgoZWxlbWVudCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgcXVlcnlQYXJhbWV0ZXJzID0gcXVlcnlQYXJhbWV0ZXJzLmFwcGVuZCgnYWknLCA8YW55PmVsZW1lbnQpO1xyXG4gICAgICAgICAgICB9KVxyXG4gICAgICAgIH1cclxuICAgICAgICBpZiAoY2hlY2tvdXQgIT09IHVuZGVmaW5lZCAmJiBjaGVja291dCAhPT0gbnVsbCkge1xyXG4gICAgICAgICAgICBxdWVyeVBhcmFtZXRlcnMgPSBxdWVyeVBhcmFtZXRlcnMuc2V0KCdjaGVja291dCcsIDxhbnk+Y2hlY2tvdXQpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpZiAoY2xpZW50SWRzKSB7XHJcbiAgICAgICAgICAgIHF1ZXJ5UGFyYW1ldGVycyA9IHF1ZXJ5UGFyYW1ldGVycy5zZXQoJ2NsaWVudElkcycsIGNsaWVudElkcy5qb2luKENPTExFQ1RJT05fRk9STUFUU1snY3N2J10pKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgaWYgKGNvbnRlbnRJZHMpIHtcclxuICAgICAgICAgICAgcXVlcnlQYXJhbWV0ZXJzID0gcXVlcnlQYXJhbWV0ZXJzLnNldCgnY29udGVudElkcycsIGNvbnRlbnRJZHMuam9pbihDT0xMRUNUSU9OX0ZPUk1BVFNbJ2NzdiddKSk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGlmIChub3RDb250ZW50SWRzKSB7XHJcbiAgICAgICAgICAgIHF1ZXJ5UGFyYW1ldGVycyA9IHF1ZXJ5UGFyYW1ldGVycy5zZXQoJ25vdENvbnRlbnRJZHMnLCBub3RDb250ZW50SWRzLmpvaW4oQ09MTEVDVElPTl9GT1JNQVRTWydjc3YnXSkpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpZiAoZW5kRGF0ZSAhPT0gdW5kZWZpbmVkICYmIGVuZERhdGUgIT09IG51bGwpIHtcclxuICAgICAgICAgICAgcXVlcnlQYXJhbWV0ZXJzID0gcXVlcnlQYXJhbWV0ZXJzLnNldCgnZW5kRGF0ZScsIDxhbnk+ZW5kRGF0ZSk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGlmIChzdGFydERhdGUgIT09IHVuZGVmaW5lZCAmJiBzdGFydERhdGUgIT09IG51bGwpIHtcclxuICAgICAgICAgICAgcXVlcnlQYXJhbWV0ZXJzID0gcXVlcnlQYXJhbWV0ZXJzLnNldCgnc3RhcnREYXRlJywgPGFueT5zdGFydERhdGUpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpZiAocmV2aWV3ZWRTdGFydERhdGUgIT09IHVuZGVmaW5lZCAmJiByZXZpZXdlZFN0YXJ0RGF0ZSAhPT0gbnVsbCkge1xyXG4gICAgICAgICAgICBxdWVyeVBhcmFtZXRlcnMgPSBxdWVyeVBhcmFtZXRlcnMuc2V0KCdyZXZpZXdlZFN0YXJ0RGF0ZScsIDxhbnk+cmV2aWV3ZWRTdGFydERhdGUpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpZiAocmV2aWV3ZWRFbmREYXRlICE9PSB1bmRlZmluZWQgJiYgcmV2aWV3ZWRFbmREYXRlICE9PSBudWxsKSB7XHJcbiAgICAgICAgICAgIHF1ZXJ5UGFyYW1ldGVycyA9IHF1ZXJ5UGFyYW1ldGVycy5zZXQoJ3Jldmlld2VkRW5kRGF0ZScsIDxhbnk+cmV2aWV3ZWRFbmREYXRlKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgaWYgKGNoZWNrb3V0QXZhaWxhYmxlICE9PSB1bmRlZmluZWQgJiYgY2hlY2tvdXRBdmFpbGFibGUgIT09IG51bGwpIHtcclxuICAgICAgICAgICAgcXVlcnlQYXJhbWV0ZXJzID0gcXVlcnlQYXJhbWV0ZXJzLnNldCgnY2hlY2tvdXRBdmFpbGFibGUnLCA8YW55PmNoZWNrb3V0QXZhaWxhYmxlKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgaWYgKGRvbmVCeU1vZGVyYXRvcklkICE9PSB1bmRlZmluZWQgJiYgZG9uZUJ5TW9kZXJhdG9ySWQgIT09IG51bGwpIHtcclxuICAgICAgICAgICAgcXVlcnlQYXJhbWV0ZXJzID0gcXVlcnlQYXJhbWV0ZXJzLnNldCgnZG9uZUJ5TW9kZXJhdG9ySWQnLCA8YW55PmRvbmVCeU1vZGVyYXRvcklkKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgaWYgKGxhbmd1YWdlICE9PSB1bmRlZmluZWQgJiYgbGFuZ3VhZ2UgIT09IG51bGwpIHtcclxuICAgICAgICAgICAgcXVlcnlQYXJhbWV0ZXJzID0gcXVlcnlQYXJhbWV0ZXJzLnNldCgnbGFuZ3VhZ2UnLCA8YW55Pmxhbmd1YWdlKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgaWYgKGxpbWl0ICE9PSB1bmRlZmluZWQgJiYgbGltaXQgIT09IG51bGwpIHtcclxuICAgICAgICAgICAgcXVlcnlQYXJhbWV0ZXJzID0gcXVlcnlQYXJhbWV0ZXJzLnNldCgnbGltaXQnLCA8YW55PmxpbWl0KTtcclxuICAgICAgICB9XHJcbiAgICAgICAgaWYgKG9mZnNldCAhPT0gdW5kZWZpbmVkICYmIG9mZnNldCAhPT0gbnVsbCkge1xyXG4gICAgICAgICAgICBxdWVyeVBhcmFtZXRlcnMgPSBxdWVyeVBhcmFtZXRlcnMuc2V0KCdvZmZzZXQnLCA8YW55Pm9mZnNldCk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGlmIChzb3J0QnkgIT09IHVuZGVmaW5lZCAmJiBzb3J0QnkgIT09IG51bGwpIHtcclxuICAgICAgICAgICAgcXVlcnlQYXJhbWV0ZXJzID0gcXVlcnlQYXJhbWV0ZXJzLnNldCgnc29ydEJ5JywgPGFueT5zb3J0QnkpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpZiAodGFncykge1xyXG4gICAgICAgICAgICBxdWVyeVBhcmFtZXRlcnMgPSBxdWVyeVBhcmFtZXRlcnMuc2V0KCd0YWdzJywgdGFncy5qb2luKENPTExFQ1RJT05fRk9STUFUU1snY3N2J10pKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgaWYgKHRleHQgIT09IHVuZGVmaW5lZCAmJiB0ZXh0ICE9PSBudWxsKSB7XHJcbiAgICAgICAgICAgIHF1ZXJ5UGFyYW1ldGVycyA9IHF1ZXJ5UGFyYW1ldGVycy5zZXQoJ3RleHQnLCA8YW55PnRleHQpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpZiAodG9waWNzKSB7XHJcbiAgICAgICAgICAgIHRvcGljcy5mb3JFYWNoKChlbGVtZW50KSA9PiB7XHJcbiAgICAgICAgICAgICAgICBxdWVyeVBhcmFtZXRlcnMgPSBxdWVyeVBhcmFtZXRlcnMuYXBwZW5kKCd0b3BpY3MnLCA8YW55PmVsZW1lbnQpO1xyXG4gICAgICAgICAgICB9KVxyXG4gICAgICAgIH1cclxuICAgICAgICBpZiAodW5yZXNvbHZlZENvbW1lbnRzICE9PSB1bmRlZmluZWQgJiYgdW5yZXNvbHZlZENvbW1lbnRzICE9PSBudWxsKSB7XHJcbiAgICAgICAgICAgIHF1ZXJ5UGFyYW1ldGVycyA9IHF1ZXJ5UGFyYW1ldGVycy5zZXQoJ3VucmVzb2x2ZWRDb21tZW50cycsIDxhbnk+dW5yZXNvbHZlZENvbW1lbnRzKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGxldCBoZWFkZXJzID0gdGhpcy5kZWZhdWx0SGVhZGVycztcclxuXHJcbiAgICAgICAgLy8gdG8gZGV0ZXJtaW5lIHRoZSBBY2NlcHQgaGVhZGVyXHJcbiAgICAgICAgbGV0IGh0dHBIZWFkZXJBY2NlcHRzOiBzdHJpbmdbXSA9IFtcclxuICAgICAgICAgICAgJ2FwcGxpY2F0aW9uL2pzb24nXHJcbiAgICAgICAgXTtcclxuICAgICAgICBjb25zdCBodHRwSGVhZGVyQWNjZXB0U2VsZWN0ZWQ6IHN0cmluZyB8IHVuZGVmaW5lZCA9IHRoaXMuY29uZmlndXJhdGlvbi5zZWxlY3RIZWFkZXJBY2NlcHQoaHR0cEhlYWRlckFjY2VwdHMpO1xyXG4gICAgICAgIGlmIChodHRwSGVhZGVyQWNjZXB0U2VsZWN0ZWQgIT0gdW5kZWZpbmVkKSB7XHJcbiAgICAgICAgICAgIGhlYWRlcnMgPSBoZWFkZXJzLnNldCgnQWNjZXB0JywgaHR0cEhlYWRlckFjY2VwdFNlbGVjdGVkKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8vIHRvIGRldGVybWluZSB0aGUgQ29udGVudC1UeXBlIGhlYWRlclxyXG4gICAgICAgIGNvbnN0IGNvbnN1bWVzOiBzdHJpbmdbXSA9IFtcclxuICAgICAgICBdO1xyXG5cclxuICAgICAgICByZXR1cm4gdGhpcy5odHRwQ2xpZW50LnJlcXVlc3Q8UnVsZUF1ZGl0T3V0cHV0PignZ2V0JyxgJHt0aGlzLmJhc2VQYXRofS9pbmJveC9xdWV1ZS9ydWxlc0F1ZGl0L2l0ZW1zYCxcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgcGFyYW1zOiBxdWVyeVBhcmFtZXRlcnMsXHJcbiAgICAgICAgICAgICAgICB3aXRoQ3JlZGVudGlhbHM6IHRoaXMuY29uZmlndXJhdGlvbi53aXRoQ3JlZGVudGlhbHMsXHJcbiAgICAgICAgICAgICAgICBoZWFkZXJzOiBoZWFkZXJzLFxyXG4gICAgICAgICAgICAgICAgb2JzZXJ2ZTogb2JzZXJ2ZSxcclxuICAgICAgICAgICAgICAgIHJlcG9ydFByb2dyZXNzOiByZXBvcnRQcm9ncmVzc1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgKTtcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIFNlYXJjaCBmb3Igb3IgY2hlY2tvdXQgaXRlbXMgaW4gdGhpcyBxdWV1ZVxyXG4gICAgICogTG9va3VwIGl0ZW1zIGZvciB0aGlzIHF1ZXVlXHJcbiAgICAgKiBAcGFyYW0gbGFuZ3VhZ2UgU2hvdyByZXN1bHRzIGZvciB0aGUgZ2l2ZW4gbGFuZ3VhZ2Ugb25seS4gICBUaGlzIGlzIHRoZSBsYW5ndWFnZSB1c2VkLCBjb3VsZCBoYXZlIGJlZW4gc2V0IGJ5IHRoZSB1c2VyIG9yIGRldGVjdGVkIGJ5IGxhbmd1YWdlIGlkLlxyXG4gICAgICogQHBhcmFtIGFpIFNob3cgaXRlbXMgdGhlIEFJIHByZWRpY3RzIGFzIHVzZWZ1bCBiZWNhdXNlIG1vZGVyYXRvcnMgaW4gdGhlIHBhc3QgaGF2ZSB0YWtlbiBhbiBhY3Rpb24gb24gdGhpcyBpdGVtcy4gIFBhc3NpbmcgYW4gYXJyYXkgb2Ygb2JqZWN0cyBhcyBwYXJhbXMgY2FuIGJlIHRyaWNreSBhdCBmaXJzdCBzbyBoZXJlIGlzIGFuIGV4YW1wbGUgJmFtcDthaVswXVttaW5QcmVkaWN0aW9uXSYjeDNEOzAuNTAmYW1wO2FpWzBdW21vZGVsTmFtZV0mI3gzRDt0b3BpY192dWxnYXImYW1wO2FpWzBdW21heFByZWRpY3Rpb25dJiN4M0Q7MC45NSZhbXA7YWlbMV1bbWluUHJlZGljdGlvbl0mI3gzRDswLjEwJmFtcDthaVsxXVttb2RlbE5hbWVdJiN4M0Q7dG9waWNfZnJhdWQmYW1wO2FpWzFdW21heFByZWRpY3Rpb25dJiN4M0Q7MC44MCAgSW4gdXJsZW5jb2RlZCBmb3JtIHRoYXQgd291bGQgYmUgJmFtcDthaSU1QjAlNUQlNUJtaW5QcmVkaWN0aW9uJTVEJiN4M0Q7MC41MCZhbXA7YWklNUIwJTVEJTVCbW9kZWxOYW1lJTVEJiN4M0Q7dG9waWNfdnVsZ2FyJmFtcDthaSU1QjAlNUQlNUJtYXhQcmVkaWN0aW9uJTVEJiN4M0Q7MC45NSZhbXA7YWklNUIxJTVEJTVCbWluUHJlZGljdGlvbiU1RCYjeDNEOzAuMTAmYW1wO2FpJTVCMSU1RCU1Qm1vZGVsTmFtZSU1RCYjeDNEO3RvcGljX2ZyYXVkJmFtcDthaSU1QjElNUQlNUJtYXhQcmVkaWN0aW9uJTVEJiN4M0Q7MC44MCBcclxuICAgICAqIEBwYXJhbSBjaGVja291dCBDaGVja291dCB0aGlzIGl0ZW0gZm9yIHJldmlld1xyXG4gICAgICogQHBhcmFtIGNsaWVudElkcyBTaG93IHJlc3VsdHMgZm9yIGEgZ2l2ZW4gY2xpZW50LiAgVHlwaWNhbGx5IHRoaXMgaXMgc2V0IGZvciB5b3UgYnkgdGhlIGludGVybmFsIHN5c3RlbSBiYXNlZCBvbiB0aGUgQVBJX0tFWSB5b3UgYXJlIHVzaW5nLiAgSG93ZXZlciBzb21lIGNsaWVudHMgYXJlIGFsbG93ZWQgdG8gdmlldyBvdGhlciBjbGllbnRzIHN1Y2ggYXMgd2hlbiB0aGV5IGhhdmUgYSBzYW5kYm94IG9yIHdoZW4gdGhleSBhcmUgYSBsYXJnZSBlbnRlcnByaXNlIGFuZCBoYXZlIG11bHRpcGxlIGNsaWVudHMgdGhleSBtYW5hZ2UuICBJdCB3aWxsIG9ubHkgYWxsb3cgeW91IHRvIHZpZXcgY2xpZW50IGRhdGEgeW91IGhhdmUgYWNjZXNzIHRvLiBZb3UgY2FuIHNldCB0aGlzIHRvIC0xIHRvIGFwcGx5IHRvIGFsbCBjbGllbnRzIHlvdSBoYXZlIGFjY2VzcyB0by5cclxuICAgICAqIEBwYXJhbSBjb250ZW50SWRzIEdldCB0aGVzZSBzcGVjaWZpYyBjb250ZW50SWRzLiAgRnJlcXVlbnRseSB1c2VkIHdoZW4geW91IHVzZSB0aGUgUHJldmlvdXMgYnV0dG9uLlxyXG4gICAgICogQHBhcmFtIG5vdENvbnRlbnRJZHMgRXhjbHVkZSB0aGVzZSBzcGVjaWZpYyBjb250ZW50SWRzLiAgT3JpZ2luYWxseSBkZXNpZ25lZCBzbyB5b3UgY2FuIGNhbGwgY2hlY2tvdXQgYW5kIHBhc3MgaW4gdGhlIGl0ZW0geW91IGFyZSB3b3JraW5nIG9uIHJpZ2h0IG5vdyBhbmQgaXQgd2lsbCBnaXZlIHlvdSBhIGRpZmZlcmVudCBvbmUuICBUaGUgZGVmYXVsdCBjaGVja291dCBiZWhhdmlvdXIgd2lsbCBhc3NpZ24gdGhlIGl0ZW1zIHlvdSBhbHJlYWR5IGhhdmUgY2hlY2tlZCBvdXQgICh3aGljaCBpcyBvbiB5b3VyIHNjcmVlbikuIFxyXG4gICAgICogQHBhcmFtIGVuZERhdGUgU2hvdyByZXN1bHRzIG9jY3VycmluZyBiZWZvcmUgdGhlIGdpdmVuIGRhdGUgaW4gdW5peHRpbWVzdGFtcCAobWlsbGlzZWNvbmRzIHNpbmNlIEVwb2NoKVxyXG4gICAgICogQHBhcmFtIHN0YXJ0RGF0ZSBTaG93IHJlc3VsdHMgb2NjdXJyaW5nIGFmdGVyIHRoZSBnaXZlbiBkYXRlIGluIHVuaXh0aW1lc3RhbXAgKG1pbGxpc2Vjb25kcyBzaW5jZSBFcG9jaClcclxuICAgICAqIEBwYXJhbSByZXZpZXdlZFN0YXJ0RGF0ZSBTaG93IHJlc3VsdHMgdGhhdCB3aGVyZSByZXZpZXdlZCBiZXR3ZWVuIGdpdmVuIGRhdGUgaW4gdW5peHRpbWVzdGFtcCAobWlsbGlzZWNvbmRzIHNpbmNlIEVwb2NoKVxyXG4gICAgICogQHBhcmFtIHJldmlld2VkRW5kRGF0ZSBTaG93IHJlc3VsdHMgdGhhdCB3aGVyZSByZXZpZXdlZCBiZXR3ZWVuIGdpdmVuIGRhdGUgaW4gdW5peHRpbWVzdGFtcCAobWlsbGlzZWNvbmRzIHNpbmNlIEVwb2NoKVxyXG4gICAgICogQHBhcmFtIGNoZWNrb3V0QXZhaWxhYmxlIE9ubHkgc2hvdyBpdGVtcyB3aGVyZSB0aGUgaXRlbSBjb3VsZCBiZSBjaGVja2VkIG91dCBieSBtZS4gIFRoaXMgaXMgdGhlIHNhbWUgYXMgY2hlY2tvdXQmI3gzRDt0cnVlIGJ1dCBpdCBkb2VzIG5vdCBjaGVjayBpdCBvdXQuXHJcbiAgICAgKiBAcGFyYW0gZG9uZUJ5TW9kZXJhdG9ySWQgT25seSBzaG93IHdvcmsgZG9uZSBieSB0aGlzIG1vZGVyYXRvcklkXHJcbiAgICAgKiBAcGFyYW0gbGltaXQgTGltaXQgdGhlIG51bWJlciBvZiByZXN1bHRzXHJcbiAgICAgKiBAcGFyYW0gb2Zmc2V0IFN0YXJ0IHRoZSBzZWFyY2ggZnJvbSBvZmZzZXQgMC4gIEZvciBpbnN0YW5jZSBpZiB5b3VyIHVzaW5nIHBhZ2luYXRpb24gcGFnZSAyIHdvdWxkIGJlIG9uIHRvdGFsSXRlbXNQZXJQYWdlKnBhZ2VOdW0uIFxyXG4gICAgICogQHBhcmFtIHNvcnRCeSBXaGF0IGRvIHlvdSB3YW50IHRvIHNvcnQgdGhlIHJlc3VsdHMgYnkgIC0gRklGTyB8IEZpcnN0IGluIEZpcnN0IE91dCwgdGhlIHNhbWUgb3JkZXIgdGhleSBjYW1lIGluIC0gUmVjZW50IHwgSGFuZGxlIHRoZSBtb3N0IHJlY2VudCBpdGVtcyBmaXJzdCAtIFByaW9yaXR5IHwgQnkgcHJpb3JpdHkgKGlmIGFwcGxpY2FibGUpLiAgRm9yIHF1YWxpdHkgY29udHJvbCBsaWtlIHNwZWxsaW5nIGl0IGlzIHRoZSB0aW1lcyB1c2VkIHNvIGl0IHdpbGwgc2hvdyB0aGUgaXRlbXMgbWlzc3BlbGxlZCAxMDAwIHRpbWVzIGJlZm9yZSB0aGUgb25lcyA1MDAgdGltZXMuICBGb3IgcmVwb3J0ZWQgdXNlcnMgaXQgd2lsbCBiZSB0aGUgb25lcyB3aGVyZSBtdWx0aXBsZSB1c2VycyBoYXZlIHJlcG9ydGVkIHRoZSBzYW1lIHVzZXIuIC0gQUkgfCBEZWFsIHdpdGggdGhlIGhpZ2VzdCBBSSBwcmVkaWN0aW9ucyBmaXJzdCB0aGF0IHByZWRpY3QgdGhpcyBzaG91bGQgYmUgcmVsZXZhbnQgZm9yIG1lLiAgKE5PVEU6IHRvIHNlYXJjaCBieSBBSSB5b3UgbXVzdCBhbHNvIGhhdmUgc2V0IHRoZSBhaS5tb2RlbE5hbWUgaW4gdGhlIGZpcnN0IGl0ZW0gb2YgdGhlIHBhcmFtZXRlciBhaSkgXHJcbiAgICAgKiBAcGFyYW0gdGFncyBPbmx5IGZpbmQgaXRlbXMgbWF0Y2hpbmcgYSBjZXJ0YWluIHRhZ1xyXG4gICAgICogQHBhcmFtIHRleHQgVGV4dCBzZWFyY2guICBUaGlzIHVzZXMgZnV6enkgbWF0Y2hpbmcuXHJcbiAgICAgKiBAcGFyYW0gdG9waWNzIE9ubHkgc2hvdyBpdGVtcyBmb3IgdGhlc2UgdG9waWNzICh0b3BpY0lkKSBiZXR3ZWVuIHJpc2sgbGV2ZWwgbWluUmlzayBhbmQgbWF4Umlza1xyXG4gICAgICogQHBhcmFtIHVucmVzb2x2ZWRDb21tZW50cyBXaWxsIHNlZSBpZiB0aGVyZSBhcmUgYW55IHVucmVzb2x2ZWQgY29tbWVudHMgZm9yIHlvdSBhbmQgc2hvdyBvbmx5IHRob3NlXHJcbiAgICAgKiBAcGFyYW0gb2JzZXJ2ZSBzZXQgd2hldGhlciBvciBub3QgdG8gcmV0dXJuIHRoZSBkYXRhIE9ic2VydmFibGUgYXMgdGhlIGJvZHksIHJlc3BvbnNlIG9yIGV2ZW50cy4gZGVmYXVsdHMgdG8gcmV0dXJuaW5nIHRoZSBib2R5LlxyXG4gICAgICogQHBhcmFtIHJlcG9ydFByb2dyZXNzIGZsYWcgdG8gcmVwb3J0IHJlcXVlc3QgYW5kIHJlc3BvbnNlIHByb2dyZXNzLlxyXG4gICAgICovXHJcbiAgICBwdWJsaWMgZ2V0U3BlbGxpbmcobGFuZ3VhZ2U6IHN0cmluZywgYWk/OiBBcnJheTxBaT4sIGNoZWNrb3V0PzogYm9vbGVhbiwgY2xpZW50SWRzPzogQXJyYXk8bnVtYmVyPiwgY29udGVudElkcz86IEFycmF5PHN0cmluZz4sIG5vdENvbnRlbnRJZHM/OiBBcnJheTxzdHJpbmc+LCBlbmREYXRlPzogbnVtYmVyLCBzdGFydERhdGU/OiBudW1iZXIsIHJldmlld2VkU3RhcnREYXRlPzogbnVtYmVyLCByZXZpZXdlZEVuZERhdGU/OiBudW1iZXIsIGNoZWNrb3V0QXZhaWxhYmxlPzogYm9vbGVhbiwgZG9uZUJ5TW9kZXJhdG9ySWQ/OiBNb2RlcmF0b3JJZCwgbGltaXQ/OiBudW1iZXIsIG9mZnNldD86IG51bWJlciwgc29ydEJ5Pzogc3RyaW5nLCB0YWdzPzogQXJyYXk8c3RyaW5nPiwgdGV4dD86IHN0cmluZywgdG9waWNzPzogQXJyYXk8VG9waWNzPiwgdW5yZXNvbHZlZENvbW1lbnRzPzogYm9vbGVhbiwgb2JzZXJ2ZT86ICdib2R5JywgcmVwb3J0UHJvZ3Jlc3M/OiBib29sZWFuKTogT2JzZXJ2YWJsZTxTcGVsbGluZ01pc3Rha2VPdXRwdXQ+O1xyXG4gICAgcHVibGljIGdldFNwZWxsaW5nKGxhbmd1YWdlOiBzdHJpbmcsIGFpPzogQXJyYXk8QWk+LCBjaGVja291dD86IGJvb2xlYW4sIGNsaWVudElkcz86IEFycmF5PG51bWJlcj4sIGNvbnRlbnRJZHM/OiBBcnJheTxzdHJpbmc+LCBub3RDb250ZW50SWRzPzogQXJyYXk8c3RyaW5nPiwgZW5kRGF0ZT86IG51bWJlciwgc3RhcnREYXRlPzogbnVtYmVyLCByZXZpZXdlZFN0YXJ0RGF0ZT86IG51bWJlciwgcmV2aWV3ZWRFbmREYXRlPzogbnVtYmVyLCBjaGVja291dEF2YWlsYWJsZT86IGJvb2xlYW4sIGRvbmVCeU1vZGVyYXRvcklkPzogTW9kZXJhdG9ySWQsIGxpbWl0PzogbnVtYmVyLCBvZmZzZXQ/OiBudW1iZXIsIHNvcnRCeT86IHN0cmluZywgdGFncz86IEFycmF5PHN0cmluZz4sIHRleHQ/OiBzdHJpbmcsIHRvcGljcz86IEFycmF5PFRvcGljcz4sIHVucmVzb2x2ZWRDb21tZW50cz86IGJvb2xlYW4sIG9ic2VydmU/OiAncmVzcG9uc2UnLCByZXBvcnRQcm9ncmVzcz86IGJvb2xlYW4pOiBPYnNlcnZhYmxlPEh0dHBSZXNwb25zZTxTcGVsbGluZ01pc3Rha2VPdXRwdXQ+PjtcclxuICAgIHB1YmxpYyBnZXRTcGVsbGluZyhsYW5ndWFnZTogc3RyaW5nLCBhaT86IEFycmF5PEFpPiwgY2hlY2tvdXQ/OiBib29sZWFuLCBjbGllbnRJZHM/OiBBcnJheTxudW1iZXI+LCBjb250ZW50SWRzPzogQXJyYXk8c3RyaW5nPiwgbm90Q29udGVudElkcz86IEFycmF5PHN0cmluZz4sIGVuZERhdGU/OiBudW1iZXIsIHN0YXJ0RGF0ZT86IG51bWJlciwgcmV2aWV3ZWRTdGFydERhdGU/OiBudW1iZXIsIHJldmlld2VkRW5kRGF0ZT86IG51bWJlciwgY2hlY2tvdXRBdmFpbGFibGU/OiBib29sZWFuLCBkb25lQnlNb2RlcmF0b3JJZD86IE1vZGVyYXRvcklkLCBsaW1pdD86IG51bWJlciwgb2Zmc2V0PzogbnVtYmVyLCBzb3J0Qnk/OiBzdHJpbmcsIHRhZ3M/OiBBcnJheTxzdHJpbmc+LCB0ZXh0Pzogc3RyaW5nLCB0b3BpY3M/OiBBcnJheTxUb3BpY3M+LCB1bnJlc29sdmVkQ29tbWVudHM/OiBib29sZWFuLCBvYnNlcnZlPzogJ2V2ZW50cycsIHJlcG9ydFByb2dyZXNzPzogYm9vbGVhbik6IE9ic2VydmFibGU8SHR0cEV2ZW50PFNwZWxsaW5nTWlzdGFrZU91dHB1dD4+O1xyXG4gICAgcHVibGljIGdldFNwZWxsaW5nKGxhbmd1YWdlOiBzdHJpbmcsIGFpPzogQXJyYXk8QWk+LCBjaGVja291dD86IGJvb2xlYW4sIGNsaWVudElkcz86IEFycmF5PG51bWJlcj4sIGNvbnRlbnRJZHM/OiBBcnJheTxzdHJpbmc+LCBub3RDb250ZW50SWRzPzogQXJyYXk8c3RyaW5nPiwgZW5kRGF0ZT86IG51bWJlciwgc3RhcnREYXRlPzogbnVtYmVyLCByZXZpZXdlZFN0YXJ0RGF0ZT86IG51bWJlciwgcmV2aWV3ZWRFbmREYXRlPzogbnVtYmVyLCBjaGVja291dEF2YWlsYWJsZT86IGJvb2xlYW4sIGRvbmVCeU1vZGVyYXRvcklkPzogTW9kZXJhdG9ySWQsIGxpbWl0PzogbnVtYmVyLCBvZmZzZXQ/OiBudW1iZXIsIHNvcnRCeT86IHN0cmluZywgdGFncz86IEFycmF5PHN0cmluZz4sIHRleHQ/OiBzdHJpbmcsIHRvcGljcz86IEFycmF5PFRvcGljcz4sIHVucmVzb2x2ZWRDb21tZW50cz86IGJvb2xlYW4sIG9ic2VydmU6IGFueSA9ICdib2R5JywgcmVwb3J0UHJvZ3Jlc3M6IGJvb2xlYW4gPSBmYWxzZSApOiBPYnNlcnZhYmxlPGFueT4ge1xyXG5cclxuICAgICAgICBpZiAobGFuZ3VhZ2UgPT09IG51bGwgfHwgbGFuZ3VhZ2UgPT09IHVuZGVmaW5lZCkge1xyXG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ1JlcXVpcmVkIHBhcmFtZXRlciBsYW5ndWFnZSB3YXMgbnVsbCBvciB1bmRlZmluZWQgd2hlbiBjYWxsaW5nIGdldFNwZWxsaW5nLicpO1xyXG4gICAgICAgIH1cclxuXHJcblxyXG5cclxuXHJcblxyXG5cclxuXHJcblxyXG5cclxuXHJcblxyXG5cclxuXHJcblxyXG5cclxuXHJcblxyXG5cclxuXHJcbiAgICAgICAgbGV0IHF1ZXJ5UGFyYW1ldGVycyA9IG5ldyBIdHRwUGFyYW1zKHtlbmNvZGVyOiBuZXcgQ3VzdG9tSHR0cFVybEVuY29kaW5nQ29kZWMoKX0pO1xyXG4gICAgICAgIGlmIChhaSkge1xyXG4gICAgICAgICAgICBhaS5mb3JFYWNoKChlbGVtZW50KSA9PiB7XHJcbiAgICAgICAgICAgICAgICBxdWVyeVBhcmFtZXRlcnMgPSBxdWVyeVBhcmFtZXRlcnMuYXBwZW5kKCdhaScsIDxhbnk+ZWxlbWVudCk7XHJcbiAgICAgICAgICAgIH0pXHJcbiAgICAgICAgfVxyXG4gICAgICAgIGlmIChjaGVja291dCAhPT0gdW5kZWZpbmVkICYmIGNoZWNrb3V0ICE9PSBudWxsKSB7XHJcbiAgICAgICAgICAgIHF1ZXJ5UGFyYW1ldGVycyA9IHF1ZXJ5UGFyYW1ldGVycy5zZXQoJ2NoZWNrb3V0JywgPGFueT5jaGVja291dCk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGlmIChjbGllbnRJZHMpIHtcclxuICAgICAgICAgICAgcXVlcnlQYXJhbWV0ZXJzID0gcXVlcnlQYXJhbWV0ZXJzLnNldCgnY2xpZW50SWRzJywgY2xpZW50SWRzLmpvaW4oQ09MTEVDVElPTl9GT1JNQVRTWydjc3YnXSkpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpZiAoY29udGVudElkcykge1xyXG4gICAgICAgICAgICBxdWVyeVBhcmFtZXRlcnMgPSBxdWVyeVBhcmFtZXRlcnMuc2V0KCdjb250ZW50SWRzJywgY29udGVudElkcy5qb2luKENPTExFQ1RJT05fRk9STUFUU1snY3N2J10pKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgaWYgKG5vdENvbnRlbnRJZHMpIHtcclxuICAgICAgICAgICAgcXVlcnlQYXJhbWV0ZXJzID0gcXVlcnlQYXJhbWV0ZXJzLnNldCgnbm90Q29udGVudElkcycsIG5vdENvbnRlbnRJZHMuam9pbihDT0xMRUNUSU9OX0ZPUk1BVFNbJ2NzdiddKSk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGlmIChlbmREYXRlICE9PSB1bmRlZmluZWQgJiYgZW5kRGF0ZSAhPT0gbnVsbCkge1xyXG4gICAgICAgICAgICBxdWVyeVBhcmFtZXRlcnMgPSBxdWVyeVBhcmFtZXRlcnMuc2V0KCdlbmREYXRlJywgPGFueT5lbmREYXRlKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgaWYgKHN0YXJ0RGF0ZSAhPT0gdW5kZWZpbmVkICYmIHN0YXJ0RGF0ZSAhPT0gbnVsbCkge1xyXG4gICAgICAgICAgICBxdWVyeVBhcmFtZXRlcnMgPSBxdWVyeVBhcmFtZXRlcnMuc2V0KCdzdGFydERhdGUnLCA8YW55PnN0YXJ0RGF0ZSk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGlmIChyZXZpZXdlZFN0YXJ0RGF0ZSAhPT0gdW5kZWZpbmVkICYmIHJldmlld2VkU3RhcnREYXRlICE9PSBudWxsKSB7XHJcbiAgICAgICAgICAgIHF1ZXJ5UGFyYW1ldGVycyA9IHF1ZXJ5UGFyYW1ldGVycy5zZXQoJ3Jldmlld2VkU3RhcnREYXRlJywgPGFueT5yZXZpZXdlZFN0YXJ0RGF0ZSk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGlmIChyZXZpZXdlZEVuZERhdGUgIT09IHVuZGVmaW5lZCAmJiByZXZpZXdlZEVuZERhdGUgIT09IG51bGwpIHtcclxuICAgICAgICAgICAgcXVlcnlQYXJhbWV0ZXJzID0gcXVlcnlQYXJhbWV0ZXJzLnNldCgncmV2aWV3ZWRFbmREYXRlJywgPGFueT5yZXZpZXdlZEVuZERhdGUpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpZiAoY2hlY2tvdXRBdmFpbGFibGUgIT09IHVuZGVmaW5lZCAmJiBjaGVja291dEF2YWlsYWJsZSAhPT0gbnVsbCkge1xyXG4gICAgICAgICAgICBxdWVyeVBhcmFtZXRlcnMgPSBxdWVyeVBhcmFtZXRlcnMuc2V0KCdjaGVja291dEF2YWlsYWJsZScsIDxhbnk+Y2hlY2tvdXRBdmFpbGFibGUpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpZiAoZG9uZUJ5TW9kZXJhdG9ySWQgIT09IHVuZGVmaW5lZCAmJiBkb25lQnlNb2RlcmF0b3JJZCAhPT0gbnVsbCkge1xyXG4gICAgICAgICAgICBxdWVyeVBhcmFtZXRlcnMgPSBxdWVyeVBhcmFtZXRlcnMuc2V0KCdkb25lQnlNb2RlcmF0b3JJZCcsIDxhbnk+ZG9uZUJ5TW9kZXJhdG9ySWQpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpZiAobGFuZ3VhZ2UgIT09IHVuZGVmaW5lZCAmJiBsYW5ndWFnZSAhPT0gbnVsbCkge1xyXG4gICAgICAgICAgICBxdWVyeVBhcmFtZXRlcnMgPSBxdWVyeVBhcmFtZXRlcnMuc2V0KCdsYW5ndWFnZScsIDxhbnk+bGFuZ3VhZ2UpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpZiAobGltaXQgIT09IHVuZGVmaW5lZCAmJiBsaW1pdCAhPT0gbnVsbCkge1xyXG4gICAgICAgICAgICBxdWVyeVBhcmFtZXRlcnMgPSBxdWVyeVBhcmFtZXRlcnMuc2V0KCdsaW1pdCcsIDxhbnk+bGltaXQpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpZiAob2Zmc2V0ICE9PSB1bmRlZmluZWQgJiYgb2Zmc2V0ICE9PSBudWxsKSB7XHJcbiAgICAgICAgICAgIHF1ZXJ5UGFyYW1ldGVycyA9IHF1ZXJ5UGFyYW1ldGVycy5zZXQoJ29mZnNldCcsIDxhbnk+b2Zmc2V0KTtcclxuICAgICAgICB9XHJcbiAgICAgICAgaWYgKHNvcnRCeSAhPT0gdW5kZWZpbmVkICYmIHNvcnRCeSAhPT0gbnVsbCkge1xyXG4gICAgICAgICAgICBxdWVyeVBhcmFtZXRlcnMgPSBxdWVyeVBhcmFtZXRlcnMuc2V0KCdzb3J0QnknLCA8YW55PnNvcnRCeSk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGlmICh0YWdzKSB7XHJcbiAgICAgICAgICAgIHF1ZXJ5UGFyYW1ldGVycyA9IHF1ZXJ5UGFyYW1ldGVycy5zZXQoJ3RhZ3MnLCB0YWdzLmpvaW4oQ09MTEVDVElPTl9GT1JNQVRTWydjc3YnXSkpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpZiAodGV4dCAhPT0gdW5kZWZpbmVkICYmIHRleHQgIT09IG51bGwpIHtcclxuICAgICAgICAgICAgcXVlcnlQYXJhbWV0ZXJzID0gcXVlcnlQYXJhbWV0ZXJzLnNldCgndGV4dCcsIDxhbnk+dGV4dCk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGlmICh0b3BpY3MpIHtcclxuICAgICAgICAgICAgdG9waWNzLmZvckVhY2goKGVsZW1lbnQpID0+IHtcclxuICAgICAgICAgICAgICAgIHF1ZXJ5UGFyYW1ldGVycyA9IHF1ZXJ5UGFyYW1ldGVycy5hcHBlbmQoJ3RvcGljcycsIDxhbnk+ZWxlbWVudCk7XHJcbiAgICAgICAgICAgIH0pXHJcbiAgICAgICAgfVxyXG4gICAgICAgIGlmICh1bnJlc29sdmVkQ29tbWVudHMgIT09IHVuZGVmaW5lZCAmJiB1bnJlc29sdmVkQ29tbWVudHMgIT09IG51bGwpIHtcclxuICAgICAgICAgICAgcXVlcnlQYXJhbWV0ZXJzID0gcXVlcnlQYXJhbWV0ZXJzLnNldCgndW5yZXNvbHZlZENvbW1lbnRzJywgPGFueT51bnJlc29sdmVkQ29tbWVudHMpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgbGV0IGhlYWRlcnMgPSB0aGlzLmRlZmF1bHRIZWFkZXJzO1xyXG5cclxuICAgICAgICAvLyB0byBkZXRlcm1pbmUgdGhlIEFjY2VwdCBoZWFkZXJcclxuICAgICAgICBsZXQgaHR0cEhlYWRlckFjY2VwdHM6IHN0cmluZ1tdID0gW1xyXG4gICAgICAgICAgICAnYXBwbGljYXRpb24vanNvbidcclxuICAgICAgICBdO1xyXG4gICAgICAgIGNvbnN0IGh0dHBIZWFkZXJBY2NlcHRTZWxlY3RlZDogc3RyaW5nIHwgdW5kZWZpbmVkID0gdGhpcy5jb25maWd1cmF0aW9uLnNlbGVjdEhlYWRlckFjY2VwdChodHRwSGVhZGVyQWNjZXB0cyk7XHJcbiAgICAgICAgaWYgKGh0dHBIZWFkZXJBY2NlcHRTZWxlY3RlZCAhPSB1bmRlZmluZWQpIHtcclxuICAgICAgICAgICAgaGVhZGVycyA9IGhlYWRlcnMuc2V0KCdBY2NlcHQnLCBodHRwSGVhZGVyQWNjZXB0U2VsZWN0ZWQpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLy8gdG8gZGV0ZXJtaW5lIHRoZSBDb250ZW50LVR5cGUgaGVhZGVyXHJcbiAgICAgICAgY29uc3QgY29uc3VtZXM6IHN0cmluZ1tdID0gW1xyXG4gICAgICAgIF07XHJcblxyXG4gICAgICAgIHJldHVybiB0aGlzLmh0dHBDbGllbnQucmVxdWVzdDxTcGVsbGluZ01pc3Rha2VPdXRwdXQ+KCdnZXQnLGAke3RoaXMuYmFzZVBhdGh9L2luYm94L3F1ZXVlL3NwZWxsaW5nL2l0ZW1zYCxcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgcGFyYW1zOiBxdWVyeVBhcmFtZXRlcnMsXHJcbiAgICAgICAgICAgICAgICB3aXRoQ3JlZGVudGlhbHM6IHRoaXMuY29uZmlndXJhdGlvbi53aXRoQ3JlZGVudGlhbHMsXHJcbiAgICAgICAgICAgICAgICBoZWFkZXJzOiBoZWFkZXJzLFxyXG4gICAgICAgICAgICAgICAgb2JzZXJ2ZTogb2JzZXJ2ZSxcclxuICAgICAgICAgICAgICAgIHJlcG9ydFByb2dyZXNzOiByZXBvcnRQcm9ncmVzc1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgKTtcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIFNlYXJjaCBmb3IgdGFza3MgaW4gdGhlIHF1ZXVlXHJcbiAgICAgKiBMb29rdXAgaXRlbXMgZm9yIHRoaXMgcXVldWVcclxuICAgICAqIEBwYXJhbSBsYW5ndWFnZSBTaG93IHJlc3VsdHMgZm9yIHRoZSBnaXZlbiBsYW5ndWFnZSBvbmx5LiAgIFRoaXMgaXMgdGhlIGxhbmd1YWdlIHVzZWQsIGNvdWxkIGhhdmUgYmVlbiBzZXQgYnkgdGhlIHVzZXIgb3IgZGV0ZWN0ZWQgYnkgbGFuZ3VhZ2UgaWQuXHJcbiAgICAgKiBAcGFyYW0gY2xpZW50SWRzIFNob3cgcmVzdWx0cyBmb3IgYSBnaXZlbiBjbGllbnQuICBUeXBpY2FsbHkgdGhpcyBpcyBzZXQgZm9yIHlvdSBieSB0aGUgaW50ZXJuYWwgc3lzdGVtIGJhc2VkIG9uIHRoZSBBUElfS0VZIHlvdSBhcmUgdXNpbmcuICBIb3dldmVyIHNvbWUgY2xpZW50cyBhcmUgYWxsb3dlZCB0byB2aWV3IG90aGVyIGNsaWVudHMgc3VjaCBhcyB3aGVuIHRoZXkgaGF2ZSBhIHNhbmRib3ggb3Igd2hlbiB0aGV5IGFyZSBhIGxhcmdlIGVudGVycHJpc2UgYW5kIGhhdmUgbXVsdGlwbGUgY2xpZW50cyB0aGV5IG1hbmFnZS4gIEl0IHdpbGwgb25seSBhbGxvdyB5b3UgdG8gdmlldyBjbGllbnQgZGF0YSB5b3UgaGF2ZSBhY2Nlc3MgdG8uIFlvdSBjYW4gc2V0IHRoaXMgdG8gLTEgdG8gYXBwbHkgdG8gYWxsIGNsaWVudHMgeW91IGhhdmUgYWNjZXNzIHRvLlxyXG4gICAgICogQHBhcmFtIGNvbnRlbnRJZHMgR2V0IHRoZXNlIHNwZWNpZmljIGNvbnRlbnRJZHMuICBGcmVxdWVudGx5IHVzZWQgd2hlbiB5b3UgdXNlIHRoZSBQcmV2aW91cyBidXR0b24uXHJcbiAgICAgKiBAcGFyYW0gbm90Q29udGVudElkcyBFeGNsdWRlIHRoZXNlIHNwZWNpZmljIGNvbnRlbnRJZHMuICBPcmlnaW5hbGx5IGRlc2lnbmVkIHNvIHlvdSBjYW4gY2FsbCBjaGVja291dCBhbmQgcGFzcyBpbiB0aGUgaXRlbSB5b3UgYXJlIHdvcmtpbmcgb24gcmlnaHQgbm93IGFuZCBpdCB3aWxsIGdpdmUgeW91IGEgZGlmZmVyZW50IG9uZS4gIFRoZSBkZWZhdWx0IGNoZWNrb3V0IGJlaGF2aW91ciB3aWxsIGFzc2lnbiB0aGUgaXRlbXMgeW91IGFscmVhZHkgaGF2ZSBjaGVja2VkIG91dCAgKHdoaWNoIGlzIG9uIHlvdXIgc2NyZWVuKS4gXHJcbiAgICAgKiBAcGFyYW0gZW5kRGF0ZSBTaG93IHJlc3VsdHMgb2NjdXJyaW5nIGJlZm9yZSB0aGUgZ2l2ZW4gZGF0ZSBpbiB1bml4dGltZXN0YW1wIChtaWxsaXNlY29uZHMgc2luY2UgRXBvY2gpXHJcbiAgICAgKiBAcGFyYW0gc3RhcnREYXRlIFNob3cgcmVzdWx0cyBvY2N1cnJpbmcgYWZ0ZXIgdGhlIGdpdmVuIGRhdGUgaW4gdW5peHRpbWVzdGFtcCAobWlsbGlzZWNvbmRzIHNpbmNlIEVwb2NoKVxyXG4gICAgICogQHBhcmFtIHJldmlld2VkU3RhcnREYXRlIFNob3cgcmVzdWx0cyB0aGF0IHdoZXJlIHJldmlld2VkIGJldHdlZW4gZ2l2ZW4gZGF0ZSBpbiB1bml4dGltZXN0YW1wIChtaWxsaXNlY29uZHMgc2luY2UgRXBvY2gpXHJcbiAgICAgKiBAcGFyYW0gcmV2aWV3ZWRFbmREYXRlIFNob3cgcmVzdWx0cyB0aGF0IHdoZXJlIHJldmlld2VkIGJldHdlZW4gZ2l2ZW4gZGF0ZSBpbiB1bml4dGltZXN0YW1wIChtaWxsaXNlY29uZHMgc2luY2UgRXBvY2gpXHJcbiAgICAgKiBAcGFyYW0gY2hlY2tvdXRBdmFpbGFibGUgT25seSBzaG93IGl0ZW1zIHdoZXJlIHRoZSBpdGVtIGNvdWxkIGJlIGNoZWNrZWQgb3V0IGJ5IG1lLiAgVGhpcyBpcyB0aGUgc2FtZSBhcyBjaGVja291dCYjeDNEO3RydWUgYnV0IGl0IGRvZXMgbm90IGNoZWNrIGl0IG91dC5cclxuICAgICAqIEBwYXJhbSBkb25lQnlNb2RlcmF0b3JJZCBPbmx5IHNob3cgd29yayBkb25lIGJ5IHRoaXMgbW9kZXJhdG9ySWRcclxuICAgICAqIEBwYXJhbSBhc3NpZ25lZFRvTW9kZXJhdG9ySWQgU2hvdyBpdGVtcyBhc3NpZ25lZCB0byB0aGlzIG1vZGVyYXRvclxyXG4gICAgICogQHBhcmFtIGxpbWl0IExpbWl0IHRoZSBudW1iZXIgb2YgcmVzdWx0c1xyXG4gICAgICogQHBhcmFtIG9mZnNldCBTdGFydCB0aGUgc2VhcmNoIGZyb20gb2Zmc2V0IDAuICBGb3IgaW5zdGFuY2UgaWYgeW91ciB1c2luZyBwYWdpbmF0aW9uIHBhZ2UgMiB3b3VsZCBiZSBvbiB0b3RhbEl0ZW1zUGVyUGFnZSpwYWdlTnVtLiBcclxuICAgICAqIEBwYXJhbSBzb3J0QnkgV2hhdCBkbyB5b3Ugd2FudCB0byBzb3J0IHRoZSByZXN1bHRzIGJ5ICAtIEZJRk8gfCBGaXJzdCBpbiBGaXJzdCBPdXQsIHRoZSBzYW1lIG9yZGVyIHRoZXkgY2FtZSBpbiAtIFJlY2VudCB8IEhhbmRsZSB0aGUgbW9zdCByZWNlbnQgaXRlbXMgZmlyc3QgLSBQcmlvcml0eSB8IEJ5IHByaW9yaXR5IChpZiBhcHBsaWNhYmxlKS4gIEZvciBxdWFsaXR5IGNvbnRyb2wgbGlrZSBzcGVsbGluZyBpdCBpcyB0aGUgdGltZXMgdXNlZCBzbyBpdCB3aWxsIHNob3cgdGhlIGl0ZW1zIG1pc3NwZWxsZWQgMTAwMCB0aW1lcyBiZWZvcmUgdGhlIG9uZXMgNTAwIHRpbWVzLiAgRm9yIHJlcG9ydGVkIHVzZXJzIGl0IHdpbGwgYmUgdGhlIG9uZXMgd2hlcmUgbXVsdGlwbGUgdXNlcnMgaGF2ZSByZXBvcnRlZCB0aGUgc2FtZSB1c2VyLiAtIEFJIHwgRGVhbCB3aXRoIHRoZSBoaWdlc3QgQUkgcHJlZGljdGlvbnMgZmlyc3QgdGhhdCBwcmVkaWN0IHRoaXMgc2hvdWxkIGJlIHJlbGV2YW50IGZvciBtZS4gIChOT1RFOiB0byBzZWFyY2ggYnkgQUkgeW91IG11c3QgYWxzbyBoYXZlIHNldCB0aGUgYWkubW9kZWxOYW1lIGluIHRoZSBmaXJzdCBpdGVtIG9mIHRoZSBwYXJhbWV0ZXIgYWkpIFxyXG4gICAgICogQHBhcmFtIHRhZ3MgT25seSBmaW5kIGl0ZW1zIG1hdGNoaW5nIGEgY2VydGFpbiB0YWdcclxuICAgICAqIEBwYXJhbSB0ZXh0IFRleHQgc2VhcmNoLiAgVGhpcyB1c2VzIGZ1enp5IG1hdGNoaW5nLlxyXG4gICAgICogQHBhcmFtIHVucmVzb2x2ZWRDb21tZW50cyBXaWxsIHNlZSBpZiB0aGVyZSBhcmUgYW55IHVucmVzb2x2ZWQgY29tbWVudHMgZm9yIHlvdSBhbmQgc2hvdyBvbmx5IHRob3NlXHJcbiAgICAgKiBAcGFyYW0gb2JzZXJ2ZSBzZXQgd2hldGhlciBvciBub3QgdG8gcmV0dXJuIHRoZSBkYXRhIE9ic2VydmFibGUgYXMgdGhlIGJvZHksIHJlc3BvbnNlIG9yIGV2ZW50cy4gZGVmYXVsdHMgdG8gcmV0dXJuaW5nIHRoZSBib2R5LlxyXG4gICAgICogQHBhcmFtIHJlcG9ydFByb2dyZXNzIGZsYWcgdG8gcmVwb3J0IHJlcXVlc3QgYW5kIHJlc3BvbnNlIHByb2dyZXNzLlxyXG4gICAgICovXHJcbiAgICBwdWJsaWMgZ2V0VGFza0l0ZW1zKGxhbmd1YWdlOiBzdHJpbmcsIGNsaWVudElkcz86IEFycmF5PG51bWJlcj4sIGNvbnRlbnRJZHM/OiBBcnJheTxzdHJpbmc+LCBub3RDb250ZW50SWRzPzogQXJyYXk8c3RyaW5nPiwgZW5kRGF0ZT86IG51bWJlciwgc3RhcnREYXRlPzogbnVtYmVyLCByZXZpZXdlZFN0YXJ0RGF0ZT86IG51bWJlciwgcmV2aWV3ZWRFbmREYXRlPzogbnVtYmVyLCBjaGVja291dEF2YWlsYWJsZT86IGJvb2xlYW4sIGRvbmVCeU1vZGVyYXRvcklkPzogTW9kZXJhdG9ySWQsIGFzc2lnbmVkVG9Nb2RlcmF0b3JJZD86IE1vZGVyYXRvcklkLCBsaW1pdD86IG51bWJlciwgb2Zmc2V0PzogbnVtYmVyLCBzb3J0Qnk/OiBzdHJpbmcsIHRhZ3M/OiBBcnJheTxzdHJpbmc+LCB0ZXh0Pzogc3RyaW5nLCB1bnJlc29sdmVkQ29tbWVudHM/OiBib29sZWFuLCBvYnNlcnZlPzogJ2JvZHknLCByZXBvcnRQcm9ncmVzcz86IGJvb2xlYW4pOiBPYnNlcnZhYmxlPFRhc2tPdXRwdXQ+O1xyXG4gICAgcHVibGljIGdldFRhc2tJdGVtcyhsYW5ndWFnZTogc3RyaW5nLCBjbGllbnRJZHM/OiBBcnJheTxudW1iZXI+LCBjb250ZW50SWRzPzogQXJyYXk8c3RyaW5nPiwgbm90Q29udGVudElkcz86IEFycmF5PHN0cmluZz4sIGVuZERhdGU/OiBudW1iZXIsIHN0YXJ0RGF0ZT86IG51bWJlciwgcmV2aWV3ZWRTdGFydERhdGU/OiBudW1iZXIsIHJldmlld2VkRW5kRGF0ZT86IG51bWJlciwgY2hlY2tvdXRBdmFpbGFibGU/OiBib29sZWFuLCBkb25lQnlNb2RlcmF0b3JJZD86IE1vZGVyYXRvcklkLCBhc3NpZ25lZFRvTW9kZXJhdG9ySWQ/OiBNb2RlcmF0b3JJZCwgbGltaXQ/OiBudW1iZXIsIG9mZnNldD86IG51bWJlciwgc29ydEJ5Pzogc3RyaW5nLCB0YWdzPzogQXJyYXk8c3RyaW5nPiwgdGV4dD86IHN0cmluZywgdW5yZXNvbHZlZENvbW1lbnRzPzogYm9vbGVhbiwgb2JzZXJ2ZT86ICdyZXNwb25zZScsIHJlcG9ydFByb2dyZXNzPzogYm9vbGVhbik6IE9ic2VydmFibGU8SHR0cFJlc3BvbnNlPFRhc2tPdXRwdXQ+PjtcclxuICAgIHB1YmxpYyBnZXRUYXNrSXRlbXMobGFuZ3VhZ2U6IHN0cmluZywgY2xpZW50SWRzPzogQXJyYXk8bnVtYmVyPiwgY29udGVudElkcz86IEFycmF5PHN0cmluZz4sIG5vdENvbnRlbnRJZHM/OiBBcnJheTxzdHJpbmc+LCBlbmREYXRlPzogbnVtYmVyLCBzdGFydERhdGU/OiBudW1iZXIsIHJldmlld2VkU3RhcnREYXRlPzogbnVtYmVyLCByZXZpZXdlZEVuZERhdGU/OiBudW1iZXIsIGNoZWNrb3V0QXZhaWxhYmxlPzogYm9vbGVhbiwgZG9uZUJ5TW9kZXJhdG9ySWQ/OiBNb2RlcmF0b3JJZCwgYXNzaWduZWRUb01vZGVyYXRvcklkPzogTW9kZXJhdG9ySWQsIGxpbWl0PzogbnVtYmVyLCBvZmZzZXQ/OiBudW1iZXIsIHNvcnRCeT86IHN0cmluZywgdGFncz86IEFycmF5PHN0cmluZz4sIHRleHQ/OiBzdHJpbmcsIHVucmVzb2x2ZWRDb21tZW50cz86IGJvb2xlYW4sIG9ic2VydmU/OiAnZXZlbnRzJywgcmVwb3J0UHJvZ3Jlc3M/OiBib29sZWFuKTogT2JzZXJ2YWJsZTxIdHRwRXZlbnQ8VGFza091dHB1dD4+O1xyXG4gICAgcHVibGljIGdldFRhc2tJdGVtcyhsYW5ndWFnZTogc3RyaW5nLCBjbGllbnRJZHM/OiBBcnJheTxudW1iZXI+LCBjb250ZW50SWRzPzogQXJyYXk8c3RyaW5nPiwgbm90Q29udGVudElkcz86IEFycmF5PHN0cmluZz4sIGVuZERhdGU/OiBudW1iZXIsIHN0YXJ0RGF0ZT86IG51bWJlciwgcmV2aWV3ZWRTdGFydERhdGU/OiBudW1iZXIsIHJldmlld2VkRW5kRGF0ZT86IG51bWJlciwgY2hlY2tvdXRBdmFpbGFibGU/OiBib29sZWFuLCBkb25lQnlNb2RlcmF0b3JJZD86IE1vZGVyYXRvcklkLCBhc3NpZ25lZFRvTW9kZXJhdG9ySWQ/OiBNb2RlcmF0b3JJZCwgbGltaXQ/OiBudW1iZXIsIG9mZnNldD86IG51bWJlciwgc29ydEJ5Pzogc3RyaW5nLCB0YWdzPzogQXJyYXk8c3RyaW5nPiwgdGV4dD86IHN0cmluZywgdW5yZXNvbHZlZENvbW1lbnRzPzogYm9vbGVhbiwgb2JzZXJ2ZTogYW55ID0gJ2JvZHknLCByZXBvcnRQcm9ncmVzczogYm9vbGVhbiA9IGZhbHNlICk6IE9ic2VydmFibGU8YW55PiB7XHJcblxyXG4gICAgICAgIGlmIChsYW5ndWFnZSA9PT0gbnVsbCB8fCBsYW5ndWFnZSA9PT0gdW5kZWZpbmVkKSB7XHJcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcignUmVxdWlyZWQgcGFyYW1ldGVyIGxhbmd1YWdlIHdhcyBudWxsIG9yIHVuZGVmaW5lZCB3aGVuIGNhbGxpbmcgZ2V0VGFza0l0ZW1zLicpO1xyXG4gICAgICAgIH1cclxuXHJcblxyXG5cclxuXHJcblxyXG5cclxuXHJcblxyXG5cclxuXHJcblxyXG5cclxuXHJcblxyXG5cclxuXHJcblxyXG4gICAgICAgIGxldCBxdWVyeVBhcmFtZXRlcnMgPSBuZXcgSHR0cFBhcmFtcyh7ZW5jb2RlcjogbmV3IEN1c3RvbUh0dHBVcmxFbmNvZGluZ0NvZGVjKCl9KTtcclxuICAgICAgICBpZiAoY2xpZW50SWRzKSB7XHJcbiAgICAgICAgICAgIHF1ZXJ5UGFyYW1ldGVycyA9IHF1ZXJ5UGFyYW1ldGVycy5zZXQoJ2NsaWVudElkcycsIGNsaWVudElkcy5qb2luKENPTExFQ1RJT05fRk9STUFUU1snY3N2J10pKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgaWYgKGNvbnRlbnRJZHMpIHtcclxuICAgICAgICAgICAgcXVlcnlQYXJhbWV0ZXJzID0gcXVlcnlQYXJhbWV0ZXJzLnNldCgnY29udGVudElkcycsIGNvbnRlbnRJZHMuam9pbihDT0xMRUNUSU9OX0ZPUk1BVFNbJ2NzdiddKSk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGlmIChub3RDb250ZW50SWRzKSB7XHJcbiAgICAgICAgICAgIHF1ZXJ5UGFyYW1ldGVycyA9IHF1ZXJ5UGFyYW1ldGVycy5zZXQoJ25vdENvbnRlbnRJZHMnLCBub3RDb250ZW50SWRzLmpvaW4oQ09MTEVDVElPTl9GT1JNQVRTWydjc3YnXSkpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpZiAoZW5kRGF0ZSAhPT0gdW5kZWZpbmVkICYmIGVuZERhdGUgIT09IG51bGwpIHtcclxuICAgICAgICAgICAgcXVlcnlQYXJhbWV0ZXJzID0gcXVlcnlQYXJhbWV0ZXJzLnNldCgnZW5kRGF0ZScsIDxhbnk+ZW5kRGF0ZSk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGlmIChzdGFydERhdGUgIT09IHVuZGVmaW5lZCAmJiBzdGFydERhdGUgIT09IG51bGwpIHtcclxuICAgICAgICAgICAgcXVlcnlQYXJhbWV0ZXJzID0gcXVlcnlQYXJhbWV0ZXJzLnNldCgnc3RhcnREYXRlJywgPGFueT5zdGFydERhdGUpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpZiAocmV2aWV3ZWRTdGFydERhdGUgIT09IHVuZGVmaW5lZCAmJiByZXZpZXdlZFN0YXJ0RGF0ZSAhPT0gbnVsbCkge1xyXG4gICAgICAgICAgICBxdWVyeVBhcmFtZXRlcnMgPSBxdWVyeVBhcmFtZXRlcnMuc2V0KCdyZXZpZXdlZFN0YXJ0RGF0ZScsIDxhbnk+cmV2aWV3ZWRTdGFydERhdGUpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpZiAocmV2aWV3ZWRFbmREYXRlICE9PSB1bmRlZmluZWQgJiYgcmV2aWV3ZWRFbmREYXRlICE9PSBudWxsKSB7XHJcbiAgICAgICAgICAgIHF1ZXJ5UGFyYW1ldGVycyA9IHF1ZXJ5UGFyYW1ldGVycy5zZXQoJ3Jldmlld2VkRW5kRGF0ZScsIDxhbnk+cmV2aWV3ZWRFbmREYXRlKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgaWYgKGNoZWNrb3V0QXZhaWxhYmxlICE9PSB1bmRlZmluZWQgJiYgY2hlY2tvdXRBdmFpbGFibGUgIT09IG51bGwpIHtcclxuICAgICAgICAgICAgcXVlcnlQYXJhbWV0ZXJzID0gcXVlcnlQYXJhbWV0ZXJzLnNldCgnY2hlY2tvdXRBdmFpbGFibGUnLCA8YW55PmNoZWNrb3V0QXZhaWxhYmxlKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgaWYgKGRvbmVCeU1vZGVyYXRvcklkICE9PSB1bmRlZmluZWQgJiYgZG9uZUJ5TW9kZXJhdG9ySWQgIT09IG51bGwpIHtcclxuICAgICAgICAgICAgcXVlcnlQYXJhbWV0ZXJzID0gcXVlcnlQYXJhbWV0ZXJzLnNldCgnZG9uZUJ5TW9kZXJhdG9ySWQnLCA8YW55PmRvbmVCeU1vZGVyYXRvcklkKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgaWYgKGFzc2lnbmVkVG9Nb2RlcmF0b3JJZCAhPT0gdW5kZWZpbmVkICYmIGFzc2lnbmVkVG9Nb2RlcmF0b3JJZCAhPT0gbnVsbCkge1xyXG4gICAgICAgICAgICBxdWVyeVBhcmFtZXRlcnMgPSBxdWVyeVBhcmFtZXRlcnMuc2V0KCdhc3NpZ25lZFRvTW9kZXJhdG9ySWQnLCA8YW55PmFzc2lnbmVkVG9Nb2RlcmF0b3JJZCk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGlmIChsYW5ndWFnZSAhPT0gdW5kZWZpbmVkICYmIGxhbmd1YWdlICE9PSBudWxsKSB7XHJcbiAgICAgICAgICAgIHF1ZXJ5UGFyYW1ldGVycyA9IHF1ZXJ5UGFyYW1ldGVycy5zZXQoJ2xhbmd1YWdlJywgPGFueT5sYW5ndWFnZSk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGlmIChsaW1pdCAhPT0gdW5kZWZpbmVkICYmIGxpbWl0ICE9PSBudWxsKSB7XHJcbiAgICAgICAgICAgIHF1ZXJ5UGFyYW1ldGVycyA9IHF1ZXJ5UGFyYW1ldGVycy5zZXQoJ2xpbWl0JywgPGFueT5saW1pdCk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGlmIChvZmZzZXQgIT09IHVuZGVmaW5lZCAmJiBvZmZzZXQgIT09IG51bGwpIHtcclxuICAgICAgICAgICAgcXVlcnlQYXJhbWV0ZXJzID0gcXVlcnlQYXJhbWV0ZXJzLnNldCgnb2Zmc2V0JywgPGFueT5vZmZzZXQpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpZiAoc29ydEJ5ICE9PSB1bmRlZmluZWQgJiYgc29ydEJ5ICE9PSBudWxsKSB7XHJcbiAgICAgICAgICAgIHF1ZXJ5UGFyYW1ldGVycyA9IHF1ZXJ5UGFyYW1ldGVycy5zZXQoJ3NvcnRCeScsIDxhbnk+c29ydEJ5KTtcclxuICAgICAgICB9XHJcbiAgICAgICAgaWYgKHRhZ3MpIHtcclxuICAgICAgICAgICAgcXVlcnlQYXJhbWV0ZXJzID0gcXVlcnlQYXJhbWV0ZXJzLnNldCgndGFncycsIHRhZ3Muam9pbihDT0xMRUNUSU9OX0ZPUk1BVFNbJ2NzdiddKSk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGlmICh0ZXh0ICE9PSB1bmRlZmluZWQgJiYgdGV4dCAhPT0gbnVsbCkge1xyXG4gICAgICAgICAgICBxdWVyeVBhcmFtZXRlcnMgPSBxdWVyeVBhcmFtZXRlcnMuc2V0KCd0ZXh0JywgPGFueT50ZXh0KTtcclxuICAgICAgICB9XHJcbiAgICAgICAgaWYgKHVucmVzb2x2ZWRDb21tZW50cyAhPT0gdW5kZWZpbmVkICYmIHVucmVzb2x2ZWRDb21tZW50cyAhPT0gbnVsbCkge1xyXG4gICAgICAgICAgICBxdWVyeVBhcmFtZXRlcnMgPSBxdWVyeVBhcmFtZXRlcnMuc2V0KCd1bnJlc29sdmVkQ29tbWVudHMnLCA8YW55PnVucmVzb2x2ZWRDb21tZW50cyk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBsZXQgaGVhZGVycyA9IHRoaXMuZGVmYXVsdEhlYWRlcnM7XHJcblxyXG4gICAgICAgIC8vIHRvIGRldGVybWluZSB0aGUgQWNjZXB0IGhlYWRlclxyXG4gICAgICAgIGxldCBodHRwSGVhZGVyQWNjZXB0czogc3RyaW5nW10gPSBbXHJcbiAgICAgICAgICAgICdhcHBsaWNhdGlvbi9qc29uJ1xyXG4gICAgICAgIF07XHJcbiAgICAgICAgY29uc3QgaHR0cEhlYWRlckFjY2VwdFNlbGVjdGVkOiBzdHJpbmcgfCB1bmRlZmluZWQgPSB0aGlzLmNvbmZpZ3VyYXRpb24uc2VsZWN0SGVhZGVyQWNjZXB0KGh0dHBIZWFkZXJBY2NlcHRzKTtcclxuICAgICAgICBpZiAoaHR0cEhlYWRlckFjY2VwdFNlbGVjdGVkICE9IHVuZGVmaW5lZCkge1xyXG4gICAgICAgICAgICBoZWFkZXJzID0gaGVhZGVycy5zZXQoJ0FjY2VwdCcsIGh0dHBIZWFkZXJBY2NlcHRTZWxlY3RlZCk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvLyB0byBkZXRlcm1pbmUgdGhlIENvbnRlbnQtVHlwZSBoZWFkZXJcclxuICAgICAgICBjb25zdCBjb25zdW1lczogc3RyaW5nW10gPSBbXHJcbiAgICAgICAgXTtcclxuXHJcbiAgICAgICAgcmV0dXJuIHRoaXMuaHR0cENsaWVudC5yZXF1ZXN0PFRhc2tPdXRwdXQ+KCdnZXQnLGAke3RoaXMuYmFzZVBhdGh9L2luYm94L3F1ZXVlL3Rhc2svaXRlbXNgLFxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICBwYXJhbXM6IHF1ZXJ5UGFyYW1ldGVycyxcclxuICAgICAgICAgICAgICAgIHdpdGhDcmVkZW50aWFsczogdGhpcy5jb25maWd1cmF0aW9uLndpdGhDcmVkZW50aWFscyxcclxuICAgICAgICAgICAgICAgIGhlYWRlcnM6IGhlYWRlcnMsXHJcbiAgICAgICAgICAgICAgICBvYnNlcnZlOiBvYnNlcnZlLFxyXG4gICAgICAgICAgICAgICAgcmVwb3J0UHJvZ3Jlc3M6IHJlcG9ydFByb2dyZXNzXHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICApO1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogR2V0IGEgdXNlcnMgZGF0YVxyXG4gICAgICogVGhpcyB3aWxsIHJldHJpZXZlIGFsbCBpbmZvcm1hdGlvbiBvbiBhIHVzZXIuICBUaGlzIGlzIHJlY29tbWVuZGVkIGZvciBHRFBSIGFyb3VuZCByaWdodCB0byBhY2Nlc3MuICBJdCBjYW4gYWxzbyBiZSB1c2VkIGlmIHlvdSBhcmUgZG93bmxvYWRpbmcgYSByZXBvcnQgdG8gc2VuZCBpbiB0byB0aGUgcG9saWNlIGFyb3VuZCBjcmltaW5hbCBhY3Rpdml0eS4gXHJcbiAgICAgKiBAcGFyYW0gdXNlcklkIFRoZSB1bmlxdWUgaWRlbnRpZmllciBmb3IgdGhpcyB1c2VyXHJcbiAgICAgKiBAcGFyYW0gb2JzZXJ2ZSBzZXQgd2hldGhlciBvciBub3QgdG8gcmV0dXJuIHRoZSBkYXRhIE9ic2VydmFibGUgYXMgdGhlIGJvZHksIHJlc3BvbnNlIG9yIGV2ZW50cy4gZGVmYXVsdHMgdG8gcmV0dXJuaW5nIHRoZSBib2R5LlxyXG4gICAgICogQHBhcmFtIHJlcG9ydFByb2dyZXNzIGZsYWcgdG8gcmVwb3J0IHJlcXVlc3QgYW5kIHJlc3BvbnNlIHByb2dyZXNzLlxyXG4gICAgICovXHJcbiAgICBwdWJsaWMgZ2V0VXNlckRhdGEodXNlcklkOiBzdHJpbmcsIG9ic2VydmU/OiAnYm9keScsIHJlcG9ydFByb2dyZXNzPzogYm9vbGVhbik6IE9ic2VydmFibGU8QXJyYXk8YW55Pj47XHJcbiAgICBwdWJsaWMgZ2V0VXNlckRhdGEodXNlcklkOiBzdHJpbmcsIG9ic2VydmU/OiAncmVzcG9uc2UnLCByZXBvcnRQcm9ncmVzcz86IGJvb2xlYW4pOiBPYnNlcnZhYmxlPEh0dHBSZXNwb25zZTxBcnJheTxhbnk+Pj47XHJcbiAgICBwdWJsaWMgZ2V0VXNlckRhdGEodXNlcklkOiBzdHJpbmcsIG9ic2VydmU/OiAnZXZlbnRzJywgcmVwb3J0UHJvZ3Jlc3M/OiBib29sZWFuKTogT2JzZXJ2YWJsZTxIdHRwRXZlbnQ8QXJyYXk8YW55Pj4+O1xyXG4gICAgcHVibGljIGdldFVzZXJEYXRhKHVzZXJJZDogc3RyaW5nLCBvYnNlcnZlOiBhbnkgPSAnYm9keScsIHJlcG9ydFByb2dyZXNzOiBib29sZWFuID0gZmFsc2UgKTogT2JzZXJ2YWJsZTxhbnk+IHtcclxuXHJcbiAgICAgICAgaWYgKHVzZXJJZCA9PT0gbnVsbCB8fCB1c2VySWQgPT09IHVuZGVmaW5lZCkge1xyXG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ1JlcXVpcmVkIHBhcmFtZXRlciB1c2VySWQgd2FzIG51bGwgb3IgdW5kZWZpbmVkIHdoZW4gY2FsbGluZyBnZXRVc2VyRGF0YS4nKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGxldCBoZWFkZXJzID0gdGhpcy5kZWZhdWx0SGVhZGVycztcclxuXHJcbiAgICAgICAgLy8gdG8gZGV0ZXJtaW5lIHRoZSBBY2NlcHQgaGVhZGVyXHJcbiAgICAgICAgbGV0IGh0dHBIZWFkZXJBY2NlcHRzOiBzdHJpbmdbXSA9IFtcclxuICAgICAgICAgICAgJ2FwcGxpY2F0aW9uL3gtbmRqc29uJyxcclxuICAgICAgICAgICAgJ2FwcGxpY2F0aW9uL2pzb24nXHJcbiAgICAgICAgXTtcclxuICAgICAgICBjb25zdCBodHRwSGVhZGVyQWNjZXB0U2VsZWN0ZWQ6IHN0cmluZyB8IHVuZGVmaW5lZCA9IHRoaXMuY29uZmlndXJhdGlvbi5zZWxlY3RIZWFkZXJBY2NlcHQoaHR0cEhlYWRlckFjY2VwdHMpO1xyXG4gICAgICAgIGlmIChodHRwSGVhZGVyQWNjZXB0U2VsZWN0ZWQgIT0gdW5kZWZpbmVkKSB7XHJcbiAgICAgICAgICAgIGhlYWRlcnMgPSBoZWFkZXJzLnNldCgnQWNjZXB0JywgaHR0cEhlYWRlckFjY2VwdFNlbGVjdGVkKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8vIHRvIGRldGVybWluZSB0aGUgQ29udGVudC1UeXBlIGhlYWRlclxyXG4gICAgICAgIGNvbnN0IGNvbnN1bWVzOiBzdHJpbmdbXSA9IFtcclxuICAgICAgICBdO1xyXG5cclxuICAgICAgICByZXR1cm4gdGhpcy5odHRwQ2xpZW50LnJlcXVlc3Q8QXJyYXk8YW55Pj4oJ2dldCcsYCR7dGhpcy5iYXNlUGF0aH0vaW5ib3gvdXNlci8ke2VuY29kZVVSSUNvbXBvbmVudChTdHJpbmcodXNlcklkKSl9YCxcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgd2l0aENyZWRlbnRpYWxzOiB0aGlzLmNvbmZpZ3VyYXRpb24ud2l0aENyZWRlbnRpYWxzLFxyXG4gICAgICAgICAgICAgICAgaGVhZGVyczogaGVhZGVycyxcclxuICAgICAgICAgICAgICAgIG9ic2VydmU6IG9ic2VydmUsXHJcbiAgICAgICAgICAgICAgICByZXBvcnRQcm9ncmVzczogcmVwb3J0UHJvZ3Jlc3NcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICk7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBTZWFyY2ggZm9yIG9yIGNoZWNrb3V0IGl0ZW1zIGluIHRoaXMgcXVldWVcclxuICAgICAqIExvb2t1cCBpdGVtcyBmb3IgdGhpcyBxdWV1ZVxyXG4gICAgICogQHBhcmFtIGxhbmd1YWdlIFNob3cgcmVzdWx0cyBmb3IgdGhlIGdpdmVuIGxhbmd1YWdlIG9ubHkuICAgVGhpcyBpcyB0aGUgbGFuZ3VhZ2UgdXNlZCwgY291bGQgaGF2ZSBiZWVuIHNldCBieSB0aGUgdXNlciBvciBkZXRlY3RlZCBieSBsYW5ndWFnZSBpZC5cclxuICAgICAqIEBwYXJhbSBhaSBTaG93IGl0ZW1zIHRoZSBBSSBwcmVkaWN0cyBhcyB1c2VmdWwgYmVjYXVzZSBtb2RlcmF0b3JzIGluIHRoZSBwYXN0IGhhdmUgdGFrZW4gYW4gYWN0aW9uIG9uIHRoaXMgaXRlbXMuICBQYXNzaW5nIGFuIGFycmF5IG9mIG9iamVjdHMgYXMgcGFyYW1zIGNhbiBiZSB0cmlja3kgYXQgZmlyc3Qgc28gaGVyZSBpcyBhbiBleGFtcGxlICZhbXA7YWlbMF1bbWluUHJlZGljdGlvbl0mI3gzRDswLjUwJmFtcDthaVswXVttb2RlbE5hbWVdJiN4M0Q7dG9waWNfdnVsZ2FyJmFtcDthaVswXVttYXhQcmVkaWN0aW9uXSYjeDNEOzAuOTUmYW1wO2FpWzFdW21pblByZWRpY3Rpb25dJiN4M0Q7MC4xMCZhbXA7YWlbMV1bbW9kZWxOYW1lXSYjeDNEO3RvcGljX2ZyYXVkJmFtcDthaVsxXVttYXhQcmVkaWN0aW9uXSYjeDNEOzAuODAgIEluIHVybGVuY29kZWQgZm9ybSB0aGF0IHdvdWxkIGJlICZhbXA7YWklNUIwJTVEJTVCbWluUHJlZGljdGlvbiU1RCYjeDNEOzAuNTAmYW1wO2FpJTVCMCU1RCU1Qm1vZGVsTmFtZSU1RCYjeDNEO3RvcGljX3Z1bGdhciZhbXA7YWklNUIwJTVEJTVCbWF4UHJlZGljdGlvbiU1RCYjeDNEOzAuOTUmYW1wO2FpJTVCMSU1RCU1Qm1pblByZWRpY3Rpb24lNUQmI3gzRDswLjEwJmFtcDthaSU1QjElNUQlNUJtb2RlbE5hbWUlNUQmI3gzRDt0b3BpY19mcmF1ZCZhbXA7YWklNUIxJTVEJTVCbWF4UHJlZGljdGlvbiU1RCYjeDNEOzAuODAgXHJcbiAgICAgKiBAcGFyYW0gY2hlY2tvdXQgQ2hlY2tvdXQgdGhpcyBpdGVtIGZvciByZXZpZXdcclxuICAgICAqIEBwYXJhbSBjbGllbnRJZHMgU2hvdyByZXN1bHRzIGZvciBhIGdpdmVuIGNsaWVudC4gIFR5cGljYWxseSB0aGlzIGlzIHNldCBmb3IgeW91IGJ5IHRoZSBpbnRlcm5hbCBzeXN0ZW0gYmFzZWQgb24gdGhlIEFQSV9LRVkgeW91IGFyZSB1c2luZy4gIEhvd2V2ZXIgc29tZSBjbGllbnRzIGFyZSBhbGxvd2VkIHRvIHZpZXcgb3RoZXIgY2xpZW50cyBzdWNoIGFzIHdoZW4gdGhleSBoYXZlIGEgc2FuZGJveCBvciB3aGVuIHRoZXkgYXJlIGEgbGFyZ2UgZW50ZXJwcmlzZSBhbmQgaGF2ZSBtdWx0aXBsZSBjbGllbnRzIHRoZXkgbWFuYWdlLiAgSXQgd2lsbCBvbmx5IGFsbG93IHlvdSB0byB2aWV3IGNsaWVudCBkYXRhIHlvdSBoYXZlIGFjY2VzcyB0by4gWW91IGNhbiBzZXQgdGhpcyB0byAtMSB0byBhcHBseSB0byBhbGwgY2xpZW50cyB5b3UgaGF2ZSBhY2Nlc3MgdG8uXHJcbiAgICAgKiBAcGFyYW0gY29udGVudElkcyBHZXQgdGhlc2Ugc3BlY2lmaWMgY29udGVudElkcy4gIEZyZXF1ZW50bHkgdXNlZCB3aGVuIHlvdSB1c2UgdGhlIFByZXZpb3VzIGJ1dHRvbi5cclxuICAgICAqIEBwYXJhbSBub3RDb250ZW50SWRzIEV4Y2x1ZGUgdGhlc2Ugc3BlY2lmaWMgY29udGVudElkcy4gIE9yaWdpbmFsbHkgZGVzaWduZWQgc28geW91IGNhbiBjYWxsIGNoZWNrb3V0IGFuZCBwYXNzIGluIHRoZSBpdGVtIHlvdSBhcmUgd29ya2luZyBvbiByaWdodCBub3cgYW5kIGl0IHdpbGwgZ2l2ZSB5b3UgYSBkaWZmZXJlbnQgb25lLiAgVGhlIGRlZmF1bHQgY2hlY2tvdXQgYmVoYXZpb3VyIHdpbGwgYXNzaWduIHRoZSBpdGVtcyB5b3UgYWxyZWFkeSBoYXZlIGNoZWNrZWQgb3V0ICAod2hpY2ggaXMgb24geW91ciBzY3JlZW4pLiBcclxuICAgICAqIEBwYXJhbSBlbmREYXRlIFNob3cgcmVzdWx0cyBvY2N1cnJpbmcgYmVmb3JlIHRoZSBnaXZlbiBkYXRlIGluIHVuaXh0aW1lc3RhbXAgKG1pbGxpc2Vjb25kcyBzaW5jZSBFcG9jaClcclxuICAgICAqIEBwYXJhbSBzdGFydERhdGUgU2hvdyByZXN1bHRzIG9jY3VycmluZyBhZnRlciB0aGUgZ2l2ZW4gZGF0ZSBpbiB1bml4dGltZXN0YW1wIChtaWxsaXNlY29uZHMgc2luY2UgRXBvY2gpXHJcbiAgICAgKiBAcGFyYW0gcmV2aWV3ZWRTdGFydERhdGUgU2hvdyByZXN1bHRzIHRoYXQgd2hlcmUgcmV2aWV3ZWQgYmV0d2VlbiBnaXZlbiBkYXRlIGluIHVuaXh0aW1lc3RhbXAgKG1pbGxpc2Vjb25kcyBzaW5jZSBFcG9jaClcclxuICAgICAqIEBwYXJhbSByZXZpZXdlZEVuZERhdGUgU2hvdyByZXN1bHRzIHRoYXQgd2hlcmUgcmV2aWV3ZWQgYmV0d2VlbiBnaXZlbiBkYXRlIGluIHVuaXh0aW1lc3RhbXAgKG1pbGxpc2Vjb25kcyBzaW5jZSBFcG9jaClcclxuICAgICAqIEBwYXJhbSBjaGVja291dEF2YWlsYWJsZSBPbmx5IHNob3cgaXRlbXMgd2hlcmUgdGhlIGl0ZW0gY291bGQgYmUgY2hlY2tlZCBvdXQgYnkgbWUuICBUaGlzIGlzIHRoZSBzYW1lIGFzIGNoZWNrb3V0JiN4M0Q7dHJ1ZSBidXQgaXQgZG9lcyBub3QgY2hlY2sgaXQgb3V0LlxyXG4gICAgICogQHBhcmFtIGRvbmVCeU1vZGVyYXRvcklkIE9ubHkgc2hvdyB3b3JrIGRvbmUgYnkgdGhpcyBtb2RlcmF0b3JJZFxyXG4gICAgICogQHBhcmFtIGxpbWl0IExpbWl0IHRoZSBudW1iZXIgb2YgcmVzdWx0c1xyXG4gICAgICogQHBhcmFtIG9mZnNldCBTdGFydCB0aGUgc2VhcmNoIGZyb20gb2Zmc2V0IDAuICBGb3IgaW5zdGFuY2UgaWYgeW91ciB1c2luZyBwYWdpbmF0aW9uIHBhZ2UgMiB3b3VsZCBiZSBvbiB0b3RhbEl0ZW1zUGVyUGFnZSpwYWdlTnVtLiBcclxuICAgICAqIEBwYXJhbSBzb3J0QnkgV2hhdCBkbyB5b3Ugd2FudCB0byBzb3J0IHRoZSByZXN1bHRzIGJ5ICAtIEZJRk8gfCBGaXJzdCBpbiBGaXJzdCBPdXQsIHRoZSBzYW1lIG9yZGVyIHRoZXkgY2FtZSBpbiAtIFJlY2VudCB8IEhhbmRsZSB0aGUgbW9zdCByZWNlbnQgaXRlbXMgZmlyc3QgLSBQcmlvcml0eSB8IEJ5IHByaW9yaXR5IChpZiBhcHBsaWNhYmxlKS4gIEZvciBxdWFsaXR5IGNvbnRyb2wgbGlrZSBzcGVsbGluZyBpdCBpcyB0aGUgdGltZXMgdXNlZCBzbyBpdCB3aWxsIHNob3cgdGhlIGl0ZW1zIG1pc3NwZWxsZWQgMTAwMCB0aW1lcyBiZWZvcmUgdGhlIG9uZXMgNTAwIHRpbWVzLiAgRm9yIHJlcG9ydGVkIHVzZXJzIGl0IHdpbGwgYmUgdGhlIG9uZXMgd2hlcmUgbXVsdGlwbGUgdXNlcnMgaGF2ZSByZXBvcnRlZCB0aGUgc2FtZSB1c2VyLiAtIEFJIHwgRGVhbCB3aXRoIHRoZSBoaWdlc3QgQUkgcHJlZGljdGlvbnMgZmlyc3QgdGhhdCBwcmVkaWN0IHRoaXMgc2hvdWxkIGJlIHJlbGV2YW50IGZvciBtZS4gIChOT1RFOiB0byBzZWFyY2ggYnkgQUkgeW91IG11c3QgYWxzbyBoYXZlIHNldCB0aGUgYWkubW9kZWxOYW1lIGluIHRoZSBmaXJzdCBpdGVtIG9mIHRoZSBwYXJhbWV0ZXIgYWkpIFxyXG4gICAgICogQHBhcmFtIHRhZ3MgT25seSBmaW5kIGl0ZW1zIG1hdGNoaW5nIGEgY2VydGFpbiB0YWdcclxuICAgICAqIEBwYXJhbSB0ZXh0IFRleHQgc2VhcmNoLiAgVGhpcyB1c2VzIGZ1enp5IG1hdGNoaW5nLlxyXG4gICAgICogQHBhcmFtIHRvcGljcyBPbmx5IHNob3cgaXRlbXMgZm9yIHRoZXNlIHRvcGljcyAodG9waWNJZCkgYmV0d2VlbiByaXNrIGxldmVsIG1pblJpc2sgYW5kIG1heFJpc2tcclxuICAgICAqIEBwYXJhbSB1bnJlc29sdmVkQ29tbWVudHMgV2lsbCBzZWUgaWYgdGhlcmUgYXJlIGFueSB1bnJlc29sdmVkIGNvbW1lbnRzIGZvciB5b3UgYW5kIHNob3cgb25seSB0aG9zZVxyXG4gICAgICogQHBhcmFtIG9ic2VydmUgc2V0IHdoZXRoZXIgb3Igbm90IHRvIHJldHVybiB0aGUgZGF0YSBPYnNlcnZhYmxlIGFzIHRoZSBib2R5LCByZXNwb25zZSBvciBldmVudHMuIGRlZmF1bHRzIHRvIHJldHVybmluZyB0aGUgYm9keS5cclxuICAgICAqIEBwYXJhbSByZXBvcnRQcm9ncmVzcyBmbGFnIHRvIHJlcG9ydCByZXF1ZXN0IGFuZCByZXNwb25zZSBwcm9ncmVzcy5cclxuICAgICAqL1xyXG4gICAgcHVibGljIGdldFVzZXJuYW1lcyhsYW5ndWFnZTogc3RyaW5nLCBhaT86IEFycmF5PEFpPiwgY2hlY2tvdXQ/OiBib29sZWFuLCBjbGllbnRJZHM/OiBBcnJheTxudW1iZXI+LCBjb250ZW50SWRzPzogQXJyYXk8c3RyaW5nPiwgbm90Q29udGVudElkcz86IEFycmF5PHN0cmluZz4sIGVuZERhdGU/OiBudW1iZXIsIHN0YXJ0RGF0ZT86IG51bWJlciwgcmV2aWV3ZWRTdGFydERhdGU/OiBudW1iZXIsIHJldmlld2VkRW5kRGF0ZT86IG51bWJlciwgY2hlY2tvdXRBdmFpbGFibGU/OiBib29sZWFuLCBkb25lQnlNb2RlcmF0b3JJZD86IE1vZGVyYXRvcklkLCBsaW1pdD86IG51bWJlciwgb2Zmc2V0PzogbnVtYmVyLCBzb3J0Qnk/OiBzdHJpbmcsIHRhZ3M/OiBBcnJheTxzdHJpbmc+LCB0ZXh0Pzogc3RyaW5nLCB0b3BpY3M/OiBBcnJheTxUb3BpY3M+LCB1bnJlc29sdmVkQ29tbWVudHM/OiBib29sZWFuLCBvYnNlcnZlPzogJ2JvZHknLCByZXBvcnRQcm9ncmVzcz86IGJvb2xlYW4pOiBPYnNlcnZhYmxlPFVzZXJuYW1lT3V0cHV0PjtcclxuICAgIHB1YmxpYyBnZXRVc2VybmFtZXMobGFuZ3VhZ2U6IHN0cmluZywgYWk/OiBBcnJheTxBaT4sIGNoZWNrb3V0PzogYm9vbGVhbiwgY2xpZW50SWRzPzogQXJyYXk8bnVtYmVyPiwgY29udGVudElkcz86IEFycmF5PHN0cmluZz4sIG5vdENvbnRlbnRJZHM/OiBBcnJheTxzdHJpbmc+LCBlbmREYXRlPzogbnVtYmVyLCBzdGFydERhdGU/OiBudW1iZXIsIHJldmlld2VkU3RhcnREYXRlPzogbnVtYmVyLCByZXZpZXdlZEVuZERhdGU/OiBudW1iZXIsIGNoZWNrb3V0QXZhaWxhYmxlPzogYm9vbGVhbiwgZG9uZUJ5TW9kZXJhdG9ySWQ/OiBNb2RlcmF0b3JJZCwgbGltaXQ/OiBudW1iZXIsIG9mZnNldD86IG51bWJlciwgc29ydEJ5Pzogc3RyaW5nLCB0YWdzPzogQXJyYXk8c3RyaW5nPiwgdGV4dD86IHN0cmluZywgdG9waWNzPzogQXJyYXk8VG9waWNzPiwgdW5yZXNvbHZlZENvbW1lbnRzPzogYm9vbGVhbiwgb2JzZXJ2ZT86ICdyZXNwb25zZScsIHJlcG9ydFByb2dyZXNzPzogYm9vbGVhbik6IE9ic2VydmFibGU8SHR0cFJlc3BvbnNlPFVzZXJuYW1lT3V0cHV0Pj47XHJcbiAgICBwdWJsaWMgZ2V0VXNlcm5hbWVzKGxhbmd1YWdlOiBzdHJpbmcsIGFpPzogQXJyYXk8QWk+LCBjaGVja291dD86IGJvb2xlYW4sIGNsaWVudElkcz86IEFycmF5PG51bWJlcj4sIGNvbnRlbnRJZHM/OiBBcnJheTxzdHJpbmc+LCBub3RDb250ZW50SWRzPzogQXJyYXk8c3RyaW5nPiwgZW5kRGF0ZT86IG51bWJlciwgc3RhcnREYXRlPzogbnVtYmVyLCByZXZpZXdlZFN0YXJ0RGF0ZT86IG51bWJlciwgcmV2aWV3ZWRFbmREYXRlPzogbnVtYmVyLCBjaGVja291dEF2YWlsYWJsZT86IGJvb2xlYW4sIGRvbmVCeU1vZGVyYXRvcklkPzogTW9kZXJhdG9ySWQsIGxpbWl0PzogbnVtYmVyLCBvZmZzZXQ/OiBudW1iZXIsIHNvcnRCeT86IHN0cmluZywgdGFncz86IEFycmF5PHN0cmluZz4sIHRleHQ/OiBzdHJpbmcsIHRvcGljcz86IEFycmF5PFRvcGljcz4sIHVucmVzb2x2ZWRDb21tZW50cz86IGJvb2xlYW4sIG9ic2VydmU/OiAnZXZlbnRzJywgcmVwb3J0UHJvZ3Jlc3M/OiBib29sZWFuKTogT2JzZXJ2YWJsZTxIdHRwRXZlbnQ8VXNlcm5hbWVPdXRwdXQ+PjtcclxuICAgIHB1YmxpYyBnZXRVc2VybmFtZXMobGFuZ3VhZ2U6IHN0cmluZywgYWk/OiBBcnJheTxBaT4sIGNoZWNrb3V0PzogYm9vbGVhbiwgY2xpZW50SWRzPzogQXJyYXk8bnVtYmVyPiwgY29udGVudElkcz86IEFycmF5PHN0cmluZz4sIG5vdENvbnRlbnRJZHM/OiBBcnJheTxzdHJpbmc+LCBlbmREYXRlPzogbnVtYmVyLCBzdGFydERhdGU/OiBudW1iZXIsIHJldmlld2VkU3RhcnREYXRlPzogbnVtYmVyLCByZXZpZXdlZEVuZERhdGU/OiBudW1iZXIsIGNoZWNrb3V0QXZhaWxhYmxlPzogYm9vbGVhbiwgZG9uZUJ5TW9kZXJhdG9ySWQ/OiBNb2RlcmF0b3JJZCwgbGltaXQ/OiBudW1iZXIsIG9mZnNldD86IG51bWJlciwgc29ydEJ5Pzogc3RyaW5nLCB0YWdzPzogQXJyYXk8c3RyaW5nPiwgdGV4dD86IHN0cmluZywgdG9waWNzPzogQXJyYXk8VG9waWNzPiwgdW5yZXNvbHZlZENvbW1lbnRzPzogYm9vbGVhbiwgb2JzZXJ2ZTogYW55ID0gJ2JvZHknLCByZXBvcnRQcm9ncmVzczogYm9vbGVhbiA9IGZhbHNlICk6IE9ic2VydmFibGU8YW55PiB7XHJcblxyXG4gICAgICAgIGlmIChsYW5ndWFnZSA9PT0gbnVsbCB8fCBsYW5ndWFnZSA9PT0gdW5kZWZpbmVkKSB7XHJcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcignUmVxdWlyZWQgcGFyYW1ldGVyIGxhbmd1YWdlIHdhcyBudWxsIG9yIHVuZGVmaW5lZCB3aGVuIGNhbGxpbmcgZ2V0VXNlcm5hbWVzLicpO1xyXG4gICAgICAgIH1cclxuXHJcblxyXG5cclxuXHJcblxyXG5cclxuXHJcblxyXG5cclxuXHJcblxyXG5cclxuXHJcblxyXG5cclxuXHJcblxyXG5cclxuXHJcbiAgICAgICAgbGV0IHF1ZXJ5UGFyYW1ldGVycyA9IG5ldyBIdHRwUGFyYW1zKHtlbmNvZGVyOiBuZXcgQ3VzdG9tSHR0cFVybEVuY29kaW5nQ29kZWMoKX0pO1xyXG4gICAgICAgIGlmIChhaSkge1xyXG4gICAgICAgICAgICBhaS5mb3JFYWNoKChlbGVtZW50KSA9PiB7XHJcbiAgICAgICAgICAgICAgICBxdWVyeVBhcmFtZXRlcnMgPSBxdWVyeVBhcmFtZXRlcnMuYXBwZW5kKCdhaScsIDxhbnk+ZWxlbWVudCk7XHJcbiAgICAgICAgICAgIH0pXHJcbiAgICAgICAgfVxyXG4gICAgICAgIGlmIChjaGVja291dCAhPT0gdW5kZWZpbmVkICYmIGNoZWNrb3V0ICE9PSBudWxsKSB7XHJcbiAgICAgICAgICAgIHF1ZXJ5UGFyYW1ldGVycyA9IHF1ZXJ5UGFyYW1ldGVycy5zZXQoJ2NoZWNrb3V0JywgPGFueT5jaGVja291dCk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGlmIChjbGllbnRJZHMpIHtcclxuICAgICAgICAgICAgcXVlcnlQYXJhbWV0ZXJzID0gcXVlcnlQYXJhbWV0ZXJzLnNldCgnY2xpZW50SWRzJywgY2xpZW50SWRzLmpvaW4oQ09MTEVDVElPTl9GT1JNQVRTWydjc3YnXSkpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpZiAoY29udGVudElkcykge1xyXG4gICAgICAgICAgICBxdWVyeVBhcmFtZXRlcnMgPSBxdWVyeVBhcmFtZXRlcnMuc2V0KCdjb250ZW50SWRzJywgY29udGVudElkcy5qb2luKENPTExFQ1RJT05fRk9STUFUU1snY3N2J10pKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgaWYgKG5vdENvbnRlbnRJZHMpIHtcclxuICAgICAgICAgICAgcXVlcnlQYXJhbWV0ZXJzID0gcXVlcnlQYXJhbWV0ZXJzLnNldCgnbm90Q29udGVudElkcycsIG5vdENvbnRlbnRJZHMuam9pbihDT0xMRUNUSU9OX0ZPUk1BVFNbJ2NzdiddKSk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGlmIChlbmREYXRlICE9PSB1bmRlZmluZWQgJiYgZW5kRGF0ZSAhPT0gbnVsbCkge1xyXG4gICAgICAgICAgICBxdWVyeVBhcmFtZXRlcnMgPSBxdWVyeVBhcmFtZXRlcnMuc2V0KCdlbmREYXRlJywgPGFueT5lbmREYXRlKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgaWYgKHN0YXJ0RGF0ZSAhPT0gdW5kZWZpbmVkICYmIHN0YXJ0RGF0ZSAhPT0gbnVsbCkge1xyXG4gICAgICAgICAgICBxdWVyeVBhcmFtZXRlcnMgPSBxdWVyeVBhcmFtZXRlcnMuc2V0KCdzdGFydERhdGUnLCA8YW55PnN0YXJ0RGF0ZSk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGlmIChyZXZpZXdlZFN0YXJ0RGF0ZSAhPT0gdW5kZWZpbmVkICYmIHJldmlld2VkU3RhcnREYXRlICE9PSBudWxsKSB7XHJcbiAgICAgICAgICAgIHF1ZXJ5UGFyYW1ldGVycyA9IHF1ZXJ5UGFyYW1ldGVycy5zZXQoJ3Jldmlld2VkU3RhcnREYXRlJywgPGFueT5yZXZpZXdlZFN0YXJ0RGF0ZSk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGlmIChyZXZpZXdlZEVuZERhdGUgIT09IHVuZGVmaW5lZCAmJiByZXZpZXdlZEVuZERhdGUgIT09IG51bGwpIHtcclxuICAgICAgICAgICAgcXVlcnlQYXJhbWV0ZXJzID0gcXVlcnlQYXJhbWV0ZXJzLnNldCgncmV2aWV3ZWRFbmREYXRlJywgPGFueT5yZXZpZXdlZEVuZERhdGUpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpZiAoY2hlY2tvdXRBdmFpbGFibGUgIT09IHVuZGVmaW5lZCAmJiBjaGVja291dEF2YWlsYWJsZSAhPT0gbnVsbCkge1xyXG4gICAgICAgICAgICBxdWVyeVBhcmFtZXRlcnMgPSBxdWVyeVBhcmFtZXRlcnMuc2V0KCdjaGVja291dEF2YWlsYWJsZScsIDxhbnk+Y2hlY2tvdXRBdmFpbGFibGUpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpZiAoZG9uZUJ5TW9kZXJhdG9ySWQgIT09IHVuZGVmaW5lZCAmJiBkb25lQnlNb2RlcmF0b3JJZCAhPT0gbnVsbCkge1xyXG4gICAgICAgICAgICBxdWVyeVBhcmFtZXRlcnMgPSBxdWVyeVBhcmFtZXRlcnMuc2V0KCdkb25lQnlNb2RlcmF0b3JJZCcsIDxhbnk+ZG9uZUJ5TW9kZXJhdG9ySWQpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpZiAobGFuZ3VhZ2UgIT09IHVuZGVmaW5lZCAmJiBsYW5ndWFnZSAhPT0gbnVsbCkge1xyXG4gICAgICAgICAgICBxdWVyeVBhcmFtZXRlcnMgPSBxdWVyeVBhcmFtZXRlcnMuc2V0KCdsYW5ndWFnZScsIDxhbnk+bGFuZ3VhZ2UpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpZiAobGltaXQgIT09IHVuZGVmaW5lZCAmJiBsaW1pdCAhPT0gbnVsbCkge1xyXG4gICAgICAgICAgICBxdWVyeVBhcmFtZXRlcnMgPSBxdWVyeVBhcmFtZXRlcnMuc2V0KCdsaW1pdCcsIDxhbnk+bGltaXQpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpZiAob2Zmc2V0ICE9PSB1bmRlZmluZWQgJiYgb2Zmc2V0ICE9PSBudWxsKSB7XHJcbiAgICAgICAgICAgIHF1ZXJ5UGFyYW1ldGVycyA9IHF1ZXJ5UGFyYW1ldGVycy5zZXQoJ29mZnNldCcsIDxhbnk+b2Zmc2V0KTtcclxuICAgICAgICB9XHJcbiAgICAgICAgaWYgKHNvcnRCeSAhPT0gdW5kZWZpbmVkICYmIHNvcnRCeSAhPT0gbnVsbCkge1xyXG4gICAgICAgICAgICBxdWVyeVBhcmFtZXRlcnMgPSBxdWVyeVBhcmFtZXRlcnMuc2V0KCdzb3J0QnknLCA8YW55PnNvcnRCeSk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGlmICh0YWdzKSB7XHJcbiAgICAgICAgICAgIHF1ZXJ5UGFyYW1ldGVycyA9IHF1ZXJ5UGFyYW1ldGVycy5zZXQoJ3RhZ3MnLCB0YWdzLmpvaW4oQ09MTEVDVElPTl9GT1JNQVRTWydjc3YnXSkpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpZiAodGV4dCAhPT0gdW5kZWZpbmVkICYmIHRleHQgIT09IG51bGwpIHtcclxuICAgICAgICAgICAgcXVlcnlQYXJhbWV0ZXJzID0gcXVlcnlQYXJhbWV0ZXJzLnNldCgndGV4dCcsIDxhbnk+dGV4dCk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGlmICh0b3BpY3MpIHtcclxuICAgICAgICAgICAgdG9waWNzLmZvckVhY2goKGVsZW1lbnQpID0+IHtcclxuICAgICAgICAgICAgICAgIHF1ZXJ5UGFyYW1ldGVycyA9IHF1ZXJ5UGFyYW1ldGVycy5hcHBlbmQoJ3RvcGljcycsIDxhbnk+ZWxlbWVudCk7XHJcbiAgICAgICAgICAgIH0pXHJcbiAgICAgICAgfVxyXG4gICAgICAgIGlmICh1bnJlc29sdmVkQ29tbWVudHMgIT09IHVuZGVmaW5lZCAmJiB1bnJlc29sdmVkQ29tbWVudHMgIT09IG51bGwpIHtcclxuICAgICAgICAgICAgcXVlcnlQYXJhbWV0ZXJzID0gcXVlcnlQYXJhbWV0ZXJzLnNldCgndW5yZXNvbHZlZENvbW1lbnRzJywgPGFueT51bnJlc29sdmVkQ29tbWVudHMpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgbGV0IGhlYWRlcnMgPSB0aGlzLmRlZmF1bHRIZWFkZXJzO1xyXG5cclxuICAgICAgICAvLyB0byBkZXRlcm1pbmUgdGhlIEFjY2VwdCBoZWFkZXJcclxuICAgICAgICBsZXQgaHR0cEhlYWRlckFjY2VwdHM6IHN0cmluZ1tdID0gW1xyXG4gICAgICAgICAgICAnYXBwbGljYXRpb24vanNvbidcclxuICAgICAgICBdO1xyXG4gICAgICAgIGNvbnN0IGh0dHBIZWFkZXJBY2NlcHRTZWxlY3RlZDogc3RyaW5nIHwgdW5kZWZpbmVkID0gdGhpcy5jb25maWd1cmF0aW9uLnNlbGVjdEhlYWRlckFjY2VwdChodHRwSGVhZGVyQWNjZXB0cyk7XHJcbiAgICAgICAgaWYgKGh0dHBIZWFkZXJBY2NlcHRTZWxlY3RlZCAhPSB1bmRlZmluZWQpIHtcclxuICAgICAgICAgICAgaGVhZGVycyA9IGhlYWRlcnMuc2V0KCdBY2NlcHQnLCBodHRwSGVhZGVyQWNjZXB0U2VsZWN0ZWQpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLy8gdG8gZGV0ZXJtaW5lIHRoZSBDb250ZW50LVR5cGUgaGVhZGVyXHJcbiAgICAgICAgY29uc3QgY29uc3VtZXM6IHN0cmluZ1tdID0gW1xyXG4gICAgICAgIF07XHJcblxyXG4gICAgICAgIHJldHVybiB0aGlzLmh0dHBDbGllbnQucmVxdWVzdDxVc2VybmFtZU91dHB1dD4oJ2dldCcsYCR7dGhpcy5iYXNlUGF0aH0vaW5ib3gvcXVldWUvdXNlcm5hbWVzL2l0ZW1zYCxcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgcGFyYW1zOiBxdWVyeVBhcmFtZXRlcnMsXHJcbiAgICAgICAgICAgICAgICB3aXRoQ3JlZGVudGlhbHM6IHRoaXMuY29uZmlndXJhdGlvbi53aXRoQ3JlZGVudGlhbHMsXHJcbiAgICAgICAgICAgICAgICBoZWFkZXJzOiBoZWFkZXJzLFxyXG4gICAgICAgICAgICAgICAgb2JzZXJ2ZTogb2JzZXJ2ZSxcclxuICAgICAgICAgICAgICAgIHJlcG9ydFByb2dyZXNzOiByZXBvcnRQcm9ncmVzc1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgKTtcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIEFkZCB5b3VyIGRlY2lzaW9uIHRvIHRoaXMgY29udGVudCBpdGVtXHJcbiAgICAgKiBUaGlzIHdpbGwgICAtIFJlbGVhc2UgeW91ciBjaGVja291dCBvbiB0aGUgaXRlbSAgLSBSZWNvcmQgaG93IGxvbmcgeW91IHNwZW50IG9uIGl0IChzaG91bGQgYmUgdG90YWwgaXRlbXMgb24gc2NyZWVuIC8gc2Vjb25kcyBzaW5jZSBzdGFydGVkIG1pbnVzIGFueSBwYXVzZXMpICAtIHJlY29yZCB3aGF0IHRoZSBjdXJyZW50IHJpc2sgaXMgd2hlbiByZXZpZXdlZCAoaWYgYXBwbGljYWJsZSkgIC0gcmVjb3JkIHdoYXQgdGFncyB5b3Ugc2V0IGl0IGFzIChpbmNsdWRpbmcgdGhlIGRlY2lzaW9uIHlvdSBtYWRlIHdoZXJlIGJhbiB1c2VyLCBhZ3JlZSwgZGlzYWdyZWUsIGRlbGV0ZSBjb250ZW50IGFyZSBhbGwgdGFncykgXHJcbiAgICAgKiBAcGFyYW0gcXVldWVJZCBUaGUgdW5pcXVlIGlkZW50aWZpZXIgZm9yIHRoaXMgcXVldWVcclxuICAgICAqIEBwYXJhbSBjb250ZW50SWQgVGhlIHVuaXF1ZSBpZGVudGlmaWVyIGZvciB0aGUgY29udGVudFxyXG4gICAgICogQHBhcmFtIGJvZHkgXHJcbiAgICAgKiBAcGFyYW0gb2JzZXJ2ZSBzZXQgd2hldGhlciBvciBub3QgdG8gcmV0dXJuIHRoZSBkYXRhIE9ic2VydmFibGUgYXMgdGhlIGJvZHksIHJlc3BvbnNlIG9yIGV2ZW50cy4gZGVmYXVsdHMgdG8gcmV0dXJuaW5nIHRoZSBib2R5LlxyXG4gICAgICogQHBhcmFtIHJlcG9ydFByb2dyZXNzIGZsYWcgdG8gcmVwb3J0IHJlcXVlc3QgYW5kIHJlc3BvbnNlIHByb2dyZXNzLlxyXG4gICAgICovXHJcbiAgICBwdWJsaWMgaXRlbURvbmUocXVldWVJZDogc3RyaW5nLCBjb250ZW50SWQ6IHN0cmluZywgYm9keT86IERlY2lzaW9uLCBvYnNlcnZlPzogJ2JvZHknLCByZXBvcnRQcm9ncmVzcz86IGJvb2xlYW4pOiBPYnNlcnZhYmxlPElubGluZVJlc3BvbnNlMjAxPjtcclxuICAgIHB1YmxpYyBpdGVtRG9uZShxdWV1ZUlkOiBzdHJpbmcsIGNvbnRlbnRJZDogc3RyaW5nLCBib2R5PzogRGVjaXNpb24sIG9ic2VydmU/OiAncmVzcG9uc2UnLCByZXBvcnRQcm9ncmVzcz86IGJvb2xlYW4pOiBPYnNlcnZhYmxlPEh0dHBSZXNwb25zZTxJbmxpbmVSZXNwb25zZTIwMT4+O1xyXG4gICAgcHVibGljIGl0ZW1Eb25lKHF1ZXVlSWQ6IHN0cmluZywgY29udGVudElkOiBzdHJpbmcsIGJvZHk/OiBEZWNpc2lvbiwgb2JzZXJ2ZT86ICdldmVudHMnLCByZXBvcnRQcm9ncmVzcz86IGJvb2xlYW4pOiBPYnNlcnZhYmxlPEh0dHBFdmVudDxJbmxpbmVSZXNwb25zZTIwMT4+O1xyXG4gICAgcHVibGljIGl0ZW1Eb25lKHF1ZXVlSWQ6IHN0cmluZywgY29udGVudElkOiBzdHJpbmcsIGJvZHk/OiBEZWNpc2lvbiwgb2JzZXJ2ZTogYW55ID0gJ2JvZHknLCByZXBvcnRQcm9ncmVzczogYm9vbGVhbiA9IGZhbHNlICk6IE9ic2VydmFibGU8YW55PiB7XHJcblxyXG4gICAgICAgIGlmIChxdWV1ZUlkID09PSBudWxsIHx8IHF1ZXVlSWQgPT09IHVuZGVmaW5lZCkge1xyXG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ1JlcXVpcmVkIHBhcmFtZXRlciBxdWV1ZUlkIHdhcyBudWxsIG9yIHVuZGVmaW5lZCB3aGVuIGNhbGxpbmcgaXRlbURvbmUuJyk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBpZiAoY29udGVudElkID09PSBudWxsIHx8IGNvbnRlbnRJZCA9PT0gdW5kZWZpbmVkKSB7XHJcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcignUmVxdWlyZWQgcGFyYW1ldGVyIGNvbnRlbnRJZCB3YXMgbnVsbCBvciB1bmRlZmluZWQgd2hlbiBjYWxsaW5nIGl0ZW1Eb25lLicpO1xyXG4gICAgICAgIH1cclxuXHJcblxyXG4gICAgICAgIGxldCBoZWFkZXJzID0gdGhpcy5kZWZhdWx0SGVhZGVycztcclxuXHJcbiAgICAgICAgLy8gdG8gZGV0ZXJtaW5lIHRoZSBBY2NlcHQgaGVhZGVyXHJcbiAgICAgICAgbGV0IGh0dHBIZWFkZXJBY2NlcHRzOiBzdHJpbmdbXSA9IFtcclxuICAgICAgICAgICAgJ2FwcGxpY2F0aW9uL2pzb24nXHJcbiAgICAgICAgXTtcclxuICAgICAgICBjb25zdCBodHRwSGVhZGVyQWNjZXB0U2VsZWN0ZWQ6IHN0cmluZyB8IHVuZGVmaW5lZCA9IHRoaXMuY29uZmlndXJhdGlvbi5zZWxlY3RIZWFkZXJBY2NlcHQoaHR0cEhlYWRlckFjY2VwdHMpO1xyXG4gICAgICAgIGlmIChodHRwSGVhZGVyQWNjZXB0U2VsZWN0ZWQgIT0gdW5kZWZpbmVkKSB7XHJcbiAgICAgICAgICAgIGhlYWRlcnMgPSBoZWFkZXJzLnNldCgnQWNjZXB0JywgaHR0cEhlYWRlckFjY2VwdFNlbGVjdGVkKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8vIHRvIGRldGVybWluZSB0aGUgQ29udGVudC1UeXBlIGhlYWRlclxyXG4gICAgICAgIGNvbnN0IGNvbnN1bWVzOiBzdHJpbmdbXSA9IFtcclxuICAgICAgICAgICAgJ2FwcGxpY2F0aW9uL2pzb24nXHJcbiAgICAgICAgXTtcclxuICAgICAgICBjb25zdCBodHRwQ29udGVudFR5cGVTZWxlY3RlZDogc3RyaW5nIHwgdW5kZWZpbmVkID0gdGhpcy5jb25maWd1cmF0aW9uLnNlbGVjdEhlYWRlckNvbnRlbnRUeXBlKGNvbnN1bWVzKTtcclxuICAgICAgICBpZiAoaHR0cENvbnRlbnRUeXBlU2VsZWN0ZWQgIT0gdW5kZWZpbmVkKSB7XHJcbiAgICAgICAgICAgIGhlYWRlcnMgPSBoZWFkZXJzLnNldCgnQ29udGVudC1UeXBlJywgaHR0cENvbnRlbnRUeXBlU2VsZWN0ZWQpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcmV0dXJuIHRoaXMuaHR0cENsaWVudC5yZXF1ZXN0PElubGluZVJlc3BvbnNlMjAxPigncG9zdCcsYCR7dGhpcy5iYXNlUGF0aH0vaW5ib3gvcXVldWUvJHtlbmNvZGVVUklDb21wb25lbnQoU3RyaW5nKHF1ZXVlSWQpKX0vaXRlbXMvJHtlbmNvZGVVUklDb21wb25lbnQoU3RyaW5nKGNvbnRlbnRJZCkpfS9kZWNpc2lvbmAsXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIGJvZHk6IGJvZHksXHJcbiAgICAgICAgICAgICAgICB3aXRoQ3JlZGVudGlhbHM6IHRoaXMuY29uZmlndXJhdGlvbi53aXRoQ3JlZGVudGlhbHMsXHJcbiAgICAgICAgICAgICAgICBoZWFkZXJzOiBoZWFkZXJzLFxyXG4gICAgICAgICAgICAgICAgb2JzZXJ2ZTogb2JzZXJ2ZSxcclxuICAgICAgICAgICAgICAgIHJlcG9ydFByb2dyZXNzOiByZXBvcnRQcm9ncmVzc1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgKTtcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIExpc3QgY29tbWVudHMgb24gdGhpcyBjb250ZW50IGl0ZW1cclxuICAgICAqIFxyXG4gICAgICogQHBhcmFtIHF1ZXVlSWQgVGhlIHVuaXF1ZSBpZGVudGlmaWVyIGZvciB0aGlzIHF1ZXVlXHJcbiAgICAgKiBAcGFyYW0gY29udGVudElkIFRoZSB1bmlxdWUgaWRlbnRpZmllciBmb3IgdGhlIGNvbnRlbnRcclxuICAgICAqIEBwYXJhbSBvYnNlcnZlIHNldCB3aGV0aGVyIG9yIG5vdCB0byByZXR1cm4gdGhlIGRhdGEgT2JzZXJ2YWJsZSBhcyB0aGUgYm9keSwgcmVzcG9uc2Ugb3IgZXZlbnRzLiBkZWZhdWx0cyB0byByZXR1cm5pbmcgdGhlIGJvZHkuXHJcbiAgICAgKiBAcGFyYW0gcmVwb3J0UHJvZ3Jlc3MgZmxhZyB0byByZXBvcnQgcmVxdWVzdCBhbmQgcmVzcG9uc2UgcHJvZ3Jlc3MuXHJcbiAgICAgKi9cclxuICAgIHB1YmxpYyBsaXN0Q29tbWVudHNGb3JDb250ZW50SWQocXVldWVJZDogc3RyaW5nLCBjb250ZW50SWQ6IHN0cmluZywgb2JzZXJ2ZT86ICdib2R5JywgcmVwb3J0UHJvZ3Jlc3M/OiBib29sZWFuKTogT2JzZXJ2YWJsZTxBcnJheTxDb21tZW50Pj47XHJcbiAgICBwdWJsaWMgbGlzdENvbW1lbnRzRm9yQ29udGVudElkKHF1ZXVlSWQ6IHN0cmluZywgY29udGVudElkOiBzdHJpbmcsIG9ic2VydmU/OiAncmVzcG9uc2UnLCByZXBvcnRQcm9ncmVzcz86IGJvb2xlYW4pOiBPYnNlcnZhYmxlPEh0dHBSZXNwb25zZTxBcnJheTxDb21tZW50Pj4+O1xyXG4gICAgcHVibGljIGxpc3RDb21tZW50c0ZvckNvbnRlbnRJZChxdWV1ZUlkOiBzdHJpbmcsIGNvbnRlbnRJZDogc3RyaW5nLCBvYnNlcnZlPzogJ2V2ZW50cycsIHJlcG9ydFByb2dyZXNzPzogYm9vbGVhbik6IE9ic2VydmFibGU8SHR0cEV2ZW50PEFycmF5PENvbW1lbnQ+Pj47XHJcbiAgICBwdWJsaWMgbGlzdENvbW1lbnRzRm9yQ29udGVudElkKHF1ZXVlSWQ6IHN0cmluZywgY29udGVudElkOiBzdHJpbmcsIG9ic2VydmU6IGFueSA9ICdib2R5JywgcmVwb3J0UHJvZ3Jlc3M6IGJvb2xlYW4gPSBmYWxzZSApOiBPYnNlcnZhYmxlPGFueT4ge1xyXG5cclxuICAgICAgICBpZiAocXVldWVJZCA9PT0gbnVsbCB8fCBxdWV1ZUlkID09PSB1bmRlZmluZWQpIHtcclxuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdSZXF1aXJlZCBwYXJhbWV0ZXIgcXVldWVJZCB3YXMgbnVsbCBvciB1bmRlZmluZWQgd2hlbiBjYWxsaW5nIGxpc3RDb21tZW50c0ZvckNvbnRlbnRJZC4nKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGlmIChjb250ZW50SWQgPT09IG51bGwgfHwgY29udGVudElkID09PSB1bmRlZmluZWQpIHtcclxuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdSZXF1aXJlZCBwYXJhbWV0ZXIgY29udGVudElkIHdhcyBudWxsIG9yIHVuZGVmaW5lZCB3aGVuIGNhbGxpbmcgbGlzdENvbW1lbnRzRm9yQ29udGVudElkLicpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgbGV0IGhlYWRlcnMgPSB0aGlzLmRlZmF1bHRIZWFkZXJzO1xyXG5cclxuICAgICAgICAvLyB0byBkZXRlcm1pbmUgdGhlIEFjY2VwdCBoZWFkZXJcclxuICAgICAgICBsZXQgaHR0cEhlYWRlckFjY2VwdHM6IHN0cmluZ1tdID0gW1xyXG4gICAgICAgICAgICAnYXBwbGljYXRpb24vanNvbidcclxuICAgICAgICBdO1xyXG4gICAgICAgIGNvbnN0IGh0dHBIZWFkZXJBY2NlcHRTZWxlY3RlZDogc3RyaW5nIHwgdW5kZWZpbmVkID0gdGhpcy5jb25maWd1cmF0aW9uLnNlbGVjdEhlYWRlckFjY2VwdChodHRwSGVhZGVyQWNjZXB0cyk7XHJcbiAgICAgICAgaWYgKGh0dHBIZWFkZXJBY2NlcHRTZWxlY3RlZCAhPSB1bmRlZmluZWQpIHtcclxuICAgICAgICAgICAgaGVhZGVycyA9IGhlYWRlcnMuc2V0KCdBY2NlcHQnLCBodHRwSGVhZGVyQWNjZXB0U2VsZWN0ZWQpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLy8gdG8gZGV0ZXJtaW5lIHRoZSBDb250ZW50LVR5cGUgaGVhZGVyXHJcbiAgICAgICAgY29uc3QgY29uc3VtZXM6IHN0cmluZ1tdID0gW1xyXG4gICAgICAgIF07XHJcblxyXG4gICAgICAgIHJldHVybiB0aGlzLmh0dHBDbGllbnQucmVxdWVzdDxBcnJheTxDb21tZW50Pj4oJ2dldCcsYCR7dGhpcy5iYXNlUGF0aH0vaW5ib3gvcXVldWUvJHtlbmNvZGVVUklDb21wb25lbnQoU3RyaW5nKHF1ZXVlSWQpKX0vaXRlbXMvJHtlbmNvZGVVUklDb21wb25lbnQoU3RyaW5nKGNvbnRlbnRJZCkpfS9jb21tZW50c2AsXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIHdpdGhDcmVkZW50aWFsczogdGhpcy5jb25maWd1cmF0aW9uLndpdGhDcmVkZW50aWFscyxcclxuICAgICAgICAgICAgICAgIGhlYWRlcnM6IGhlYWRlcnMsXHJcbiAgICAgICAgICAgICAgICBvYnNlcnZlOiBvYnNlcnZlLFxyXG4gICAgICAgICAgICAgICAgcmVwb3J0UHJvZ3Jlc3M6IHJlcG9ydFByb2dyZXNzXHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICApO1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogVXBkYXRlIHRoZSB0ZXh0IG9mIGFuIGl0ZW1cclxuICAgICAqIFVwZGF0ZSB0aGUgY29udGVudC4gIFR5cGljYWxseSB1c2VkIGZvciByZWRhY3RpbmcuICBJdCBpcyBsaW1pdGVkIGluIHdoYXQgeW91IGNhbiBkby4gXHJcbiAgICAgKiBAcGFyYW0gcXVldWVJZCBUaGUgdW5pcXVlIGlkZW50aWZpZXIgZm9yIHRoaXMgcXVldWVcclxuICAgICAqIEBwYXJhbSBjb250ZW50SWQgVGhlIHVuaXF1ZSBpZGVudGlmaWVyIGZvciB0aGUgY29udGVudFxyXG4gICAgICogQHBhcmFtIGJvZHkgXHJcbiAgICAgKiBAcGFyYW0gb2JzZXJ2ZSBzZXQgd2hldGhlciBvciBub3QgdG8gcmV0dXJuIHRoZSBkYXRhIE9ic2VydmFibGUgYXMgdGhlIGJvZHksIHJlc3BvbnNlIG9yIGV2ZW50cy4gZGVmYXVsdHMgdG8gcmV0dXJuaW5nIHRoZSBib2R5LlxyXG4gICAgICogQHBhcmFtIHJlcG9ydFByb2dyZXNzIGZsYWcgdG8gcmVwb3J0IHJlcXVlc3QgYW5kIHJlc3BvbnNlIHByb2dyZXNzLlxyXG4gICAgICovXHJcbiAgICBwdWJsaWMgcmVkYWN0SXRlbShxdWV1ZUlkOiBzdHJpbmcsIGNvbnRlbnRJZDogc3RyaW5nLCBib2R5PzogQm9keSwgb2JzZXJ2ZT86ICdib2R5JywgcmVwb3J0UHJvZ3Jlc3M/OiBib29sZWFuKTogT2JzZXJ2YWJsZTxJbmxpbmVSZXNwb25zZTIwMDE+O1xyXG4gICAgcHVibGljIHJlZGFjdEl0ZW0ocXVldWVJZDogc3RyaW5nLCBjb250ZW50SWQ6IHN0cmluZywgYm9keT86IEJvZHksIG9ic2VydmU/OiAncmVzcG9uc2UnLCByZXBvcnRQcm9ncmVzcz86IGJvb2xlYW4pOiBPYnNlcnZhYmxlPEh0dHBSZXNwb25zZTxJbmxpbmVSZXNwb25zZTIwMDE+PjtcclxuICAgIHB1YmxpYyByZWRhY3RJdGVtKHF1ZXVlSWQ6IHN0cmluZywgY29udGVudElkOiBzdHJpbmcsIGJvZHk/OiBCb2R5LCBvYnNlcnZlPzogJ2V2ZW50cycsIHJlcG9ydFByb2dyZXNzPzogYm9vbGVhbik6IE9ic2VydmFibGU8SHR0cEV2ZW50PElubGluZVJlc3BvbnNlMjAwMT4+O1xyXG4gICAgcHVibGljIHJlZGFjdEl0ZW0ocXVldWVJZDogc3RyaW5nLCBjb250ZW50SWQ6IHN0cmluZywgYm9keT86IEJvZHksIG9ic2VydmU6IGFueSA9ICdib2R5JywgcmVwb3J0UHJvZ3Jlc3M6IGJvb2xlYW4gPSBmYWxzZSApOiBPYnNlcnZhYmxlPGFueT4ge1xyXG5cclxuICAgICAgICBpZiAocXVldWVJZCA9PT0gbnVsbCB8fCBxdWV1ZUlkID09PSB1bmRlZmluZWQpIHtcclxuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdSZXF1aXJlZCBwYXJhbWV0ZXIgcXVldWVJZCB3YXMgbnVsbCBvciB1bmRlZmluZWQgd2hlbiBjYWxsaW5nIHJlZGFjdEl0ZW0uJyk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBpZiAoY29udGVudElkID09PSBudWxsIHx8IGNvbnRlbnRJZCA9PT0gdW5kZWZpbmVkKSB7XHJcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcignUmVxdWlyZWQgcGFyYW1ldGVyIGNvbnRlbnRJZCB3YXMgbnVsbCBvciB1bmRlZmluZWQgd2hlbiBjYWxsaW5nIHJlZGFjdEl0ZW0uJyk7XHJcbiAgICAgICAgfVxyXG5cclxuXHJcbiAgICAgICAgbGV0IGhlYWRlcnMgPSB0aGlzLmRlZmF1bHRIZWFkZXJzO1xyXG5cclxuICAgICAgICAvLyB0byBkZXRlcm1pbmUgdGhlIEFjY2VwdCBoZWFkZXJcclxuICAgICAgICBsZXQgaHR0cEhlYWRlckFjY2VwdHM6IHN0cmluZ1tdID0gW1xyXG4gICAgICAgICAgICAnYXBwbGljYXRpb24vanNvbidcclxuICAgICAgICBdO1xyXG4gICAgICAgIGNvbnN0IGh0dHBIZWFkZXJBY2NlcHRTZWxlY3RlZDogc3RyaW5nIHwgdW5kZWZpbmVkID0gdGhpcy5jb25maWd1cmF0aW9uLnNlbGVjdEhlYWRlckFjY2VwdChodHRwSGVhZGVyQWNjZXB0cyk7XHJcbiAgICAgICAgaWYgKGh0dHBIZWFkZXJBY2NlcHRTZWxlY3RlZCAhPSB1bmRlZmluZWQpIHtcclxuICAgICAgICAgICAgaGVhZGVycyA9IGhlYWRlcnMuc2V0KCdBY2NlcHQnLCBodHRwSGVhZGVyQWNjZXB0U2VsZWN0ZWQpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLy8gdG8gZGV0ZXJtaW5lIHRoZSBDb250ZW50LVR5cGUgaGVhZGVyXHJcbiAgICAgICAgY29uc3QgY29uc3VtZXM6IHN0cmluZ1tdID0gW1xyXG4gICAgICAgICAgICAnYXBwbGljYXRpb24vanNvbidcclxuICAgICAgICBdO1xyXG4gICAgICAgIGNvbnN0IGh0dHBDb250ZW50VHlwZVNlbGVjdGVkOiBzdHJpbmcgfCB1bmRlZmluZWQgPSB0aGlzLmNvbmZpZ3VyYXRpb24uc2VsZWN0SGVhZGVyQ29udGVudFR5cGUoY29uc3VtZXMpO1xyXG4gICAgICAgIGlmIChodHRwQ29udGVudFR5cGVTZWxlY3RlZCAhPSB1bmRlZmluZWQpIHtcclxuICAgICAgICAgICAgaGVhZGVycyA9IGhlYWRlcnMuc2V0KCdDb250ZW50LVR5cGUnLCBodHRwQ29udGVudFR5cGVTZWxlY3RlZCk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICByZXR1cm4gdGhpcy5odHRwQ2xpZW50LnJlcXVlc3Q8SW5saW5lUmVzcG9uc2UyMDAxPigncHV0JyxgJHt0aGlzLmJhc2VQYXRofS9pbmJveC9xdWV1ZS8ke2VuY29kZVVSSUNvbXBvbmVudChTdHJpbmcocXVldWVJZCkpfS9pdGVtcy8ke2VuY29kZVVSSUNvbXBvbmVudChTdHJpbmcoY29udGVudElkKSl9L3RleHRgLFxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICBib2R5OiBib2R5LFxyXG4gICAgICAgICAgICAgICAgd2l0aENyZWRlbnRpYWxzOiB0aGlzLmNvbmZpZ3VyYXRpb24ud2l0aENyZWRlbnRpYWxzLFxyXG4gICAgICAgICAgICAgICAgaGVhZGVyczogaGVhZGVycyxcclxuICAgICAgICAgICAgICAgIG9ic2VydmU6IG9ic2VydmUsXHJcbiAgICAgICAgICAgICAgICByZXBvcnRQcm9ncmVzczogcmVwb3J0UHJvZ3Jlc3NcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICk7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBSZWRhY3QgYSB1c2VycyBkYXRhXHJcbiAgICAgKiBUaGlzIHdpbGwgcmVkYWN0IGFuZCBwc2V1ZG9ueW1pemUgYWxsIGRhdGEgd2UgaGF2ZSBvbiBhIHVzZXIuIFRoaXMgaXMgcmVjb21tZW5kZWQgZm9yIEdEUFIgYW5kIENDUEEgY29tcGxpYW5jZSBhcm91bmQgdGVybXMgbGlrZSByaWdodCB0byBiZSBmb3JnZXR0ZW4uIFxyXG4gICAgICogQHBhcmFtIHVzZXJJZCBUaGUgdW5pcXVlIGlkZW50aWZpZXIgZm9yIHRoaXMgdXNlclxyXG4gICAgICogQHBhcmFtIG9ic2VydmUgc2V0IHdoZXRoZXIgb3Igbm90IHRvIHJldHVybiB0aGUgZGF0YSBPYnNlcnZhYmxlIGFzIHRoZSBib2R5LCByZXNwb25zZSBvciBldmVudHMuIGRlZmF1bHRzIHRvIHJldHVybmluZyB0aGUgYm9keS5cclxuICAgICAqIEBwYXJhbSByZXBvcnRQcm9ncmVzcyBmbGFnIHRvIHJlcG9ydCByZXF1ZXN0IGFuZCByZXNwb25zZSBwcm9ncmVzcy5cclxuICAgICAqL1xyXG4gICAgcHVibGljIHJlZGFjdFVzZXIodXNlcklkOiBzdHJpbmcsIG9ic2VydmU/OiAnYm9keScsIHJlcG9ydFByb2dyZXNzPzogYm9vbGVhbik6IE9ic2VydmFibGU8UXVldWU+O1xyXG4gICAgcHVibGljIHJlZGFjdFVzZXIodXNlcklkOiBzdHJpbmcsIG9ic2VydmU/OiAncmVzcG9uc2UnLCByZXBvcnRQcm9ncmVzcz86IGJvb2xlYW4pOiBPYnNlcnZhYmxlPEh0dHBSZXNwb25zZTxRdWV1ZT4+O1xyXG4gICAgcHVibGljIHJlZGFjdFVzZXIodXNlcklkOiBzdHJpbmcsIG9ic2VydmU/OiAnZXZlbnRzJywgcmVwb3J0UHJvZ3Jlc3M/OiBib29sZWFuKTogT2JzZXJ2YWJsZTxIdHRwRXZlbnQ8UXVldWU+PjtcclxuICAgIHB1YmxpYyByZWRhY3RVc2VyKHVzZXJJZDogc3RyaW5nLCBvYnNlcnZlOiBhbnkgPSAnYm9keScsIHJlcG9ydFByb2dyZXNzOiBib29sZWFuID0gZmFsc2UgKTogT2JzZXJ2YWJsZTxhbnk+IHtcclxuXHJcbiAgICAgICAgaWYgKHVzZXJJZCA9PT0gbnVsbCB8fCB1c2VySWQgPT09IHVuZGVmaW5lZCkge1xyXG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ1JlcXVpcmVkIHBhcmFtZXRlciB1c2VySWQgd2FzIG51bGwgb3IgdW5kZWZpbmVkIHdoZW4gY2FsbGluZyByZWRhY3RVc2VyLicpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgbGV0IGhlYWRlcnMgPSB0aGlzLmRlZmF1bHRIZWFkZXJzO1xyXG5cclxuICAgICAgICAvLyB0byBkZXRlcm1pbmUgdGhlIEFjY2VwdCBoZWFkZXJcclxuICAgICAgICBsZXQgaHR0cEhlYWRlckFjY2VwdHM6IHN0cmluZ1tdID0gW1xyXG4gICAgICAgICAgICAnYXBwbGljYXRpb24vanNvbidcclxuICAgICAgICBdO1xyXG4gICAgICAgIGNvbnN0IGh0dHBIZWFkZXJBY2NlcHRTZWxlY3RlZDogc3RyaW5nIHwgdW5kZWZpbmVkID0gdGhpcy5jb25maWd1cmF0aW9uLnNlbGVjdEhlYWRlckFjY2VwdChodHRwSGVhZGVyQWNjZXB0cyk7XHJcbiAgICAgICAgaWYgKGh0dHBIZWFkZXJBY2NlcHRTZWxlY3RlZCAhPSB1bmRlZmluZWQpIHtcclxuICAgICAgICAgICAgaGVhZGVycyA9IGhlYWRlcnMuc2V0KCdBY2NlcHQnLCBodHRwSGVhZGVyQWNjZXB0U2VsZWN0ZWQpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLy8gdG8gZGV0ZXJtaW5lIHRoZSBDb250ZW50LVR5cGUgaGVhZGVyXHJcbiAgICAgICAgY29uc3QgY29uc3VtZXM6IHN0cmluZ1tdID0gW1xyXG4gICAgICAgIF07XHJcblxyXG4gICAgICAgIHJldHVybiB0aGlzLmh0dHBDbGllbnQucmVxdWVzdDxRdWV1ZT4oJ3B1dCcsYCR7dGhpcy5iYXNlUGF0aH0vaW5ib3gvdXNlci8ke2VuY29kZVVSSUNvbXBvbmVudChTdHJpbmcodXNlcklkKSl9YCxcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgd2l0aENyZWRlbnRpYWxzOiB0aGlzLmNvbmZpZ3VyYXRpb24ud2l0aENyZWRlbnRpYWxzLFxyXG4gICAgICAgICAgICAgICAgaGVhZGVyczogaGVhZGVycyxcclxuICAgICAgICAgICAgICAgIG9ic2VydmU6IG9ic2VydmUsXHJcbiAgICAgICAgICAgICAgICByZXBvcnRQcm9ncmVzczogcmVwb3J0UHJvZ3Jlc3NcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICk7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBNYXJrIGEgY29tbWVudCBhcyByZXNvbHZlZCAob3IgcmVvcGVuKVxyXG4gICAgICogQ29tbWVudHMgY2FuIGJlIG1hcmtlZCBhcyBuZWVkaW5nIHRvIGJlIGFuc3dlcmVkLiBcclxuICAgICAqIEBwYXJhbSBxdWV1ZUlkIFRoZSB1bmlxdWUgaWRlbnRpZmllciBmb3IgdGhpcyBxdWV1ZVxyXG4gICAgICogQHBhcmFtIGNvbnRlbnRJZCBUaGUgdW5pcXVlIGlkZW50aWZpZXIgZm9yIHRoZSBjb250ZW50XHJcbiAgICAgKiBAcGFyYW0gY29tbWVudElkIFRoZSB1bmlxdWUgaWRlbnRpZmllciBmb3IgdGhlIGNvbW1lbnRcclxuICAgICAqIEBwYXJhbSBib2R5IFxyXG4gICAgICogQHBhcmFtIG9ic2VydmUgc2V0IHdoZXRoZXIgb3Igbm90IHRvIHJldHVybiB0aGUgZGF0YSBPYnNlcnZhYmxlIGFzIHRoZSBib2R5LCByZXNwb25zZSBvciBldmVudHMuIGRlZmF1bHRzIHRvIHJldHVybmluZyB0aGUgYm9keS5cclxuICAgICAqIEBwYXJhbSByZXBvcnRQcm9ncmVzcyBmbGFnIHRvIHJlcG9ydCByZXF1ZXN0IGFuZCByZXNwb25zZSBwcm9ncmVzcy5cclxuICAgICAqL1xyXG4gICAgcHVibGljIHJlc29sdmVDb21tZW50KHF1ZXVlSWQ6IHN0cmluZywgY29udGVudElkOiBzdHJpbmcsIGNvbW1lbnRJZDogc3RyaW5nLCBib2R5PzogQm9keTEsIG9ic2VydmU/OiAnYm9keScsIHJlcG9ydFByb2dyZXNzPzogYm9vbGVhbik6IE9ic2VydmFibGU8Q29tbWVudD47XHJcbiAgICBwdWJsaWMgcmVzb2x2ZUNvbW1lbnQocXVldWVJZDogc3RyaW5nLCBjb250ZW50SWQ6IHN0cmluZywgY29tbWVudElkOiBzdHJpbmcsIGJvZHk/OiBCb2R5MSwgb2JzZXJ2ZT86ICdyZXNwb25zZScsIHJlcG9ydFByb2dyZXNzPzogYm9vbGVhbik6IE9ic2VydmFibGU8SHR0cFJlc3BvbnNlPENvbW1lbnQ+PjtcclxuICAgIHB1YmxpYyByZXNvbHZlQ29tbWVudChxdWV1ZUlkOiBzdHJpbmcsIGNvbnRlbnRJZDogc3RyaW5nLCBjb21tZW50SWQ6IHN0cmluZywgYm9keT86IEJvZHkxLCBvYnNlcnZlPzogJ2V2ZW50cycsIHJlcG9ydFByb2dyZXNzPzogYm9vbGVhbik6IE9ic2VydmFibGU8SHR0cEV2ZW50PENvbW1lbnQ+PjtcclxuICAgIHB1YmxpYyByZXNvbHZlQ29tbWVudChxdWV1ZUlkOiBzdHJpbmcsIGNvbnRlbnRJZDogc3RyaW5nLCBjb21tZW50SWQ6IHN0cmluZywgYm9keT86IEJvZHkxLCBvYnNlcnZlOiBhbnkgPSAnYm9keScsIHJlcG9ydFByb2dyZXNzOiBib29sZWFuID0gZmFsc2UgKTogT2JzZXJ2YWJsZTxhbnk+IHtcclxuXHJcbiAgICAgICAgaWYgKHF1ZXVlSWQgPT09IG51bGwgfHwgcXVldWVJZCA9PT0gdW5kZWZpbmVkKSB7XHJcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcignUmVxdWlyZWQgcGFyYW1ldGVyIHF1ZXVlSWQgd2FzIG51bGwgb3IgdW5kZWZpbmVkIHdoZW4gY2FsbGluZyByZXNvbHZlQ29tbWVudC4nKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGlmIChjb250ZW50SWQgPT09IG51bGwgfHwgY29udGVudElkID09PSB1bmRlZmluZWQpIHtcclxuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdSZXF1aXJlZCBwYXJhbWV0ZXIgY29udGVudElkIHdhcyBudWxsIG9yIHVuZGVmaW5lZCB3aGVuIGNhbGxpbmcgcmVzb2x2ZUNvbW1lbnQuJyk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBpZiAoY29tbWVudElkID09PSBudWxsIHx8IGNvbW1lbnRJZCA9PT0gdW5kZWZpbmVkKSB7XHJcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcignUmVxdWlyZWQgcGFyYW1ldGVyIGNvbW1lbnRJZCB3YXMgbnVsbCBvciB1bmRlZmluZWQgd2hlbiBjYWxsaW5nIHJlc29sdmVDb21tZW50LicpO1xyXG4gICAgICAgIH1cclxuXHJcblxyXG4gICAgICAgIGxldCBoZWFkZXJzID0gdGhpcy5kZWZhdWx0SGVhZGVycztcclxuXHJcbiAgICAgICAgLy8gdG8gZGV0ZXJtaW5lIHRoZSBBY2NlcHQgaGVhZGVyXHJcbiAgICAgICAgbGV0IGh0dHBIZWFkZXJBY2NlcHRzOiBzdHJpbmdbXSA9IFtcclxuICAgICAgICAgICAgJ2FwcGxpY2F0aW9uL2pzb24nXHJcbiAgICAgICAgXTtcclxuICAgICAgICBjb25zdCBodHRwSGVhZGVyQWNjZXB0U2VsZWN0ZWQ6IHN0cmluZyB8IHVuZGVmaW5lZCA9IHRoaXMuY29uZmlndXJhdGlvbi5zZWxlY3RIZWFkZXJBY2NlcHQoaHR0cEhlYWRlckFjY2VwdHMpO1xyXG4gICAgICAgIGlmIChodHRwSGVhZGVyQWNjZXB0U2VsZWN0ZWQgIT0gdW5kZWZpbmVkKSB7XHJcbiAgICAgICAgICAgIGhlYWRlcnMgPSBoZWFkZXJzLnNldCgnQWNjZXB0JywgaHR0cEhlYWRlckFjY2VwdFNlbGVjdGVkKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8vIHRvIGRldGVybWluZSB0aGUgQ29udGVudC1UeXBlIGhlYWRlclxyXG4gICAgICAgIGNvbnN0IGNvbnN1bWVzOiBzdHJpbmdbXSA9IFtcclxuICAgICAgICAgICAgJ2FwcGxpY2F0aW9uL2pzb24nXHJcbiAgICAgICAgXTtcclxuICAgICAgICBjb25zdCBodHRwQ29udGVudFR5cGVTZWxlY3RlZDogc3RyaW5nIHwgdW5kZWZpbmVkID0gdGhpcy5jb25maWd1cmF0aW9uLnNlbGVjdEhlYWRlckNvbnRlbnRUeXBlKGNvbnN1bWVzKTtcclxuICAgICAgICBpZiAoaHR0cENvbnRlbnRUeXBlU2VsZWN0ZWQgIT0gdW5kZWZpbmVkKSB7XHJcbiAgICAgICAgICAgIGhlYWRlcnMgPSBoZWFkZXJzLnNldCgnQ29udGVudC1UeXBlJywgaHR0cENvbnRlbnRUeXBlU2VsZWN0ZWQpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcmV0dXJuIHRoaXMuaHR0cENsaWVudC5yZXF1ZXN0PENvbW1lbnQ+KCdwdXQnLGAke3RoaXMuYmFzZVBhdGh9L2luYm94L3F1ZXVlLyR7ZW5jb2RlVVJJQ29tcG9uZW50KFN0cmluZyhxdWV1ZUlkKSl9L2l0ZW1zLyR7ZW5jb2RlVVJJQ29tcG9uZW50KFN0cmluZyhjb250ZW50SWQpKX0vY29tbWVudHMvJHtlbmNvZGVVUklDb21wb25lbnQoU3RyaW5nKGNvbW1lbnRJZCkpfS9yZXNvbHZlZGAsXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIGJvZHk6IGJvZHksXHJcbiAgICAgICAgICAgICAgICB3aXRoQ3JlZGVudGlhbHM6IHRoaXMuY29uZmlndXJhdGlvbi53aXRoQ3JlZGVudGlhbHMsXHJcbiAgICAgICAgICAgICAgICBoZWFkZXJzOiBoZWFkZXJzLFxyXG4gICAgICAgICAgICAgICAgb2JzZXJ2ZTogb2JzZXJ2ZSxcclxuICAgICAgICAgICAgICAgIHJlcG9ydFByb2dyZXNzOiByZXBvcnRQcm9ncmVzc1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgKTtcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIFVwZGF0ZSBhIGNvbW1lbnRcclxuICAgICAqIENvbW1lbnRzIGFyZSB3YXlzIHRvIGxlYXZlIGEgbm90ZSB0byBzYXkgd2h5IGEgcGVyc29uIG1hZGUgdGhlIGRlY2lzaW9uIHRoZXkgZGlkLiAgT3IgaXQgY291bGQgYmUgYSBxdWVzdGlvbiBvciBhbnN3ZXIgdHJ5aW5nIHRvIGdldCBoZWxwIG9uIGFuIGl0ZW0uIFxyXG4gICAgICogQHBhcmFtIHF1ZXVlSWQgVGhlIHVuaXF1ZSBpZGVudGlmaWVyIGZvciB0aGlzIHF1ZXVlXHJcbiAgICAgKiBAcGFyYW0gY29udGVudElkIFRoZSB1bmlxdWUgaWRlbnRpZmllciBmb3IgdGhlIGNvbnRlbnRcclxuICAgICAqIEBwYXJhbSBjb21tZW50SWQgVGhlIHVuaXF1ZSBpZGVudGlmaWVyIGZvciB0aGUgY29tbWVudFxyXG4gICAgICogQHBhcmFtIGJvZHkgXHJcbiAgICAgKiBAcGFyYW0gb2JzZXJ2ZSBzZXQgd2hldGhlciBvciBub3QgdG8gcmV0dXJuIHRoZSBkYXRhIE9ic2VydmFibGUgYXMgdGhlIGJvZHksIHJlc3BvbnNlIG9yIGV2ZW50cy4gZGVmYXVsdHMgdG8gcmV0dXJuaW5nIHRoZSBib2R5LlxyXG4gICAgICogQHBhcmFtIHJlcG9ydFByb2dyZXNzIGZsYWcgdG8gcmVwb3J0IHJlcXVlc3QgYW5kIHJlc3BvbnNlIHByb2dyZXNzLlxyXG4gICAgICovXHJcbiAgICBwdWJsaWMgdXBkYXRlQ29tbWVudChxdWV1ZUlkOiBzdHJpbmcsIGNvbnRlbnRJZDogc3RyaW5nLCBjb21tZW50SWQ6IHN0cmluZywgYm9keT86IENvbW1lbnQsIG9ic2VydmU/OiAnYm9keScsIHJlcG9ydFByb2dyZXNzPzogYm9vbGVhbik6IE9ic2VydmFibGU8Q29tbWVudD47XHJcbiAgICBwdWJsaWMgdXBkYXRlQ29tbWVudChxdWV1ZUlkOiBzdHJpbmcsIGNvbnRlbnRJZDogc3RyaW5nLCBjb21tZW50SWQ6IHN0cmluZywgYm9keT86IENvbW1lbnQsIG9ic2VydmU/OiAncmVzcG9uc2UnLCByZXBvcnRQcm9ncmVzcz86IGJvb2xlYW4pOiBPYnNlcnZhYmxlPEh0dHBSZXNwb25zZTxDb21tZW50Pj47XHJcbiAgICBwdWJsaWMgdXBkYXRlQ29tbWVudChxdWV1ZUlkOiBzdHJpbmcsIGNvbnRlbnRJZDogc3RyaW5nLCBjb21tZW50SWQ6IHN0cmluZywgYm9keT86IENvbW1lbnQsIG9ic2VydmU/OiAnZXZlbnRzJywgcmVwb3J0UHJvZ3Jlc3M/OiBib29sZWFuKTogT2JzZXJ2YWJsZTxIdHRwRXZlbnQ8Q29tbWVudD4+O1xyXG4gICAgcHVibGljIHVwZGF0ZUNvbW1lbnQocXVldWVJZDogc3RyaW5nLCBjb250ZW50SWQ6IHN0cmluZywgY29tbWVudElkOiBzdHJpbmcsIGJvZHk/OiBDb21tZW50LCBvYnNlcnZlOiBhbnkgPSAnYm9keScsIHJlcG9ydFByb2dyZXNzOiBib29sZWFuID0gZmFsc2UgKTogT2JzZXJ2YWJsZTxhbnk+IHtcclxuXHJcbiAgICAgICAgaWYgKHF1ZXVlSWQgPT09IG51bGwgfHwgcXVldWVJZCA9PT0gdW5kZWZpbmVkKSB7XHJcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcignUmVxdWlyZWQgcGFyYW1ldGVyIHF1ZXVlSWQgd2FzIG51bGwgb3IgdW5kZWZpbmVkIHdoZW4gY2FsbGluZyB1cGRhdGVDb21tZW50LicpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgaWYgKGNvbnRlbnRJZCA9PT0gbnVsbCB8fCBjb250ZW50SWQgPT09IHVuZGVmaW5lZCkge1xyXG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ1JlcXVpcmVkIHBhcmFtZXRlciBjb250ZW50SWQgd2FzIG51bGwgb3IgdW5kZWZpbmVkIHdoZW4gY2FsbGluZyB1cGRhdGVDb21tZW50LicpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgaWYgKGNvbW1lbnRJZCA9PT0gbnVsbCB8fCBjb21tZW50SWQgPT09IHVuZGVmaW5lZCkge1xyXG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ1JlcXVpcmVkIHBhcmFtZXRlciBjb21tZW50SWQgd2FzIG51bGwgb3IgdW5kZWZpbmVkIHdoZW4gY2FsbGluZyB1cGRhdGVDb21tZW50LicpO1xyXG4gICAgICAgIH1cclxuXHJcblxyXG4gICAgICAgIGxldCBoZWFkZXJzID0gdGhpcy5kZWZhdWx0SGVhZGVycztcclxuXHJcbiAgICAgICAgLy8gdG8gZGV0ZXJtaW5lIHRoZSBBY2NlcHQgaGVhZGVyXHJcbiAgICAgICAgbGV0IGh0dHBIZWFkZXJBY2NlcHRzOiBzdHJpbmdbXSA9IFtcclxuICAgICAgICAgICAgJ2FwcGxpY2F0aW9uL2pzb24nXHJcbiAgICAgICAgXTtcclxuICAgICAgICBjb25zdCBodHRwSGVhZGVyQWNjZXB0U2VsZWN0ZWQ6IHN0cmluZyB8IHVuZGVmaW5lZCA9IHRoaXMuY29uZmlndXJhdGlvbi5zZWxlY3RIZWFkZXJBY2NlcHQoaHR0cEhlYWRlckFjY2VwdHMpO1xyXG4gICAgICAgIGlmIChodHRwSGVhZGVyQWNjZXB0U2VsZWN0ZWQgIT0gdW5kZWZpbmVkKSB7XHJcbiAgICAgICAgICAgIGhlYWRlcnMgPSBoZWFkZXJzLnNldCgnQWNjZXB0JywgaHR0cEhlYWRlckFjY2VwdFNlbGVjdGVkKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8vIHRvIGRldGVybWluZSB0aGUgQ29udGVudC1UeXBlIGhlYWRlclxyXG4gICAgICAgIGNvbnN0IGNvbnN1bWVzOiBzdHJpbmdbXSA9IFtcclxuICAgICAgICAgICAgJ2FwcGxpY2F0aW9uL2pzb24nXHJcbiAgICAgICAgXTtcclxuICAgICAgICBjb25zdCBodHRwQ29udGVudFR5cGVTZWxlY3RlZDogc3RyaW5nIHwgdW5kZWZpbmVkID0gdGhpcy5jb25maWd1cmF0aW9uLnNlbGVjdEhlYWRlckNvbnRlbnRUeXBlKGNvbnN1bWVzKTtcclxuICAgICAgICBpZiAoaHR0cENvbnRlbnRUeXBlU2VsZWN0ZWQgIT0gdW5kZWZpbmVkKSB7XHJcbiAgICAgICAgICAgIGhlYWRlcnMgPSBoZWFkZXJzLnNldCgnQ29udGVudC1UeXBlJywgaHR0cENvbnRlbnRUeXBlU2VsZWN0ZWQpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcmV0dXJuIHRoaXMuaHR0cENsaWVudC5yZXF1ZXN0PENvbW1lbnQ+KCdwdXQnLGAke3RoaXMuYmFzZVBhdGh9L2luYm94L3F1ZXVlLyR7ZW5jb2RlVVJJQ29tcG9uZW50KFN0cmluZyhxdWV1ZUlkKSl9L2l0ZW1zLyR7ZW5jb2RlVVJJQ29tcG9uZW50KFN0cmluZyhjb250ZW50SWQpKX0vY29tbWVudHMvJHtlbmNvZGVVUklDb21wb25lbnQoU3RyaW5nKGNvbW1lbnRJZCkpfWAsXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIGJvZHk6IGJvZHksXHJcbiAgICAgICAgICAgICAgICB3aXRoQ3JlZGVudGlhbHM6IHRoaXMuY29uZmlndXJhdGlvbi53aXRoQ3JlZGVudGlhbHMsXHJcbiAgICAgICAgICAgICAgICBoZWFkZXJzOiBoZWFkZXJzLFxyXG4gICAgICAgICAgICAgICAgb2JzZXJ2ZTogb2JzZXJ2ZSxcclxuICAgICAgICAgICAgICAgIHJlcG9ydFByb2dyZXNzOiByZXBvcnRQcm9ncmVzc1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgKTtcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIFJlbmV3IGEgY2hlY2tvdXQgb24gYW4gaXRlbVxyXG4gICAgICogV2hlbiB5b3UgZmlyc3QgZ2V0IGFuIGl0ZW0gaWYgY2hlY2tvdXQmI3gzRDtUcnVlIHlvdSB3aWxsIGhhdmUgY2hlY2tlZCBpdCBvdXQuICBZb3Ugc2hvdWxkIGJlIHNob3dpbmcgYSB3YXJuaW5nIHdoZW4gdGhlIGNoZWNrb3V0IGlzIGFsbW9zdCBleHBpcmVkLiAgQ2FsbGluZyB0aGlzIEFQSSB3aWxsIGFsbG93IHlvdSB0byByZW5ldyBpdC4gXHJcbiAgICAgKiBAcGFyYW0gcXVldWVJZCBUaGUgdW5pcXVlIGlkZW50aWZpZXIgZm9yIHRoaXMgcXVldWVcclxuICAgICAqIEBwYXJhbSBjb250ZW50SWQgVGhlIHVuaXF1ZSBpZGVudGlmaWVyIGZvciB0aGUgY29udGVudFxyXG4gICAgICogQHBhcmFtIGJvZHkgXHJcbiAgICAgKiBAcGFyYW0gb2JzZXJ2ZSBzZXQgd2hldGhlciBvciBub3QgdG8gcmV0dXJuIHRoZSBkYXRhIE9ic2VydmFibGUgYXMgdGhlIGJvZHksIHJlc3BvbnNlIG9yIGV2ZW50cy4gZGVmYXVsdHMgdG8gcmV0dXJuaW5nIHRoZSBib2R5LlxyXG4gICAgICogQHBhcmFtIHJlcG9ydFByb2dyZXNzIGZsYWcgdG8gcmVwb3J0IHJlcXVlc3QgYW5kIHJlc3BvbnNlIHByb2dyZXNzLlxyXG4gICAgICovXHJcbiAgICBwdWJsaWMgdXBkYXRlSXRlbUNoZWNrb3V0KHF1ZXVlSWQ6IHN0cmluZywgY29udGVudElkOiBzdHJpbmcsIGJvZHk/OiBDaGVja291dCwgb2JzZXJ2ZT86ICdib2R5JywgcmVwb3J0UHJvZ3Jlc3M/OiBib29sZWFuKTogT2JzZXJ2YWJsZTxJbmxpbmVSZXNwb25zZTIwMDE+O1xyXG4gICAgcHVibGljIHVwZGF0ZUl0ZW1DaGVja291dChxdWV1ZUlkOiBzdHJpbmcsIGNvbnRlbnRJZDogc3RyaW5nLCBib2R5PzogQ2hlY2tvdXQsIG9ic2VydmU/OiAncmVzcG9uc2UnLCByZXBvcnRQcm9ncmVzcz86IGJvb2xlYW4pOiBPYnNlcnZhYmxlPEh0dHBSZXNwb25zZTxJbmxpbmVSZXNwb25zZTIwMDE+PjtcclxuICAgIHB1YmxpYyB1cGRhdGVJdGVtQ2hlY2tvdXQocXVldWVJZDogc3RyaW5nLCBjb250ZW50SWQ6IHN0cmluZywgYm9keT86IENoZWNrb3V0LCBvYnNlcnZlPzogJ2V2ZW50cycsIHJlcG9ydFByb2dyZXNzPzogYm9vbGVhbik6IE9ic2VydmFibGU8SHR0cEV2ZW50PElubGluZVJlc3BvbnNlMjAwMT4+O1xyXG4gICAgcHVibGljIHVwZGF0ZUl0ZW1DaGVja291dChxdWV1ZUlkOiBzdHJpbmcsIGNvbnRlbnRJZDogc3RyaW5nLCBib2R5PzogQ2hlY2tvdXQsIG9ic2VydmU6IGFueSA9ICdib2R5JywgcmVwb3J0UHJvZ3Jlc3M6IGJvb2xlYW4gPSBmYWxzZSApOiBPYnNlcnZhYmxlPGFueT4ge1xyXG5cclxuICAgICAgICBpZiAocXVldWVJZCA9PT0gbnVsbCB8fCBxdWV1ZUlkID09PSB1bmRlZmluZWQpIHtcclxuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdSZXF1aXJlZCBwYXJhbWV0ZXIgcXVldWVJZCB3YXMgbnVsbCBvciB1bmRlZmluZWQgd2hlbiBjYWxsaW5nIHVwZGF0ZUl0ZW1DaGVja291dC4nKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGlmIChjb250ZW50SWQgPT09IG51bGwgfHwgY29udGVudElkID09PSB1bmRlZmluZWQpIHtcclxuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdSZXF1aXJlZCBwYXJhbWV0ZXIgY29udGVudElkIHdhcyBudWxsIG9yIHVuZGVmaW5lZCB3aGVuIGNhbGxpbmcgdXBkYXRlSXRlbUNoZWNrb3V0LicpO1xyXG4gICAgICAgIH1cclxuXHJcblxyXG4gICAgICAgIGxldCBoZWFkZXJzID0gdGhpcy5kZWZhdWx0SGVhZGVycztcclxuXHJcbiAgICAgICAgLy8gdG8gZGV0ZXJtaW5lIHRoZSBBY2NlcHQgaGVhZGVyXHJcbiAgICAgICAgbGV0IGh0dHBIZWFkZXJBY2NlcHRzOiBzdHJpbmdbXSA9IFtcclxuICAgICAgICAgICAgJ2FwcGxpY2F0aW9uL2pzb24nXHJcbiAgICAgICAgXTtcclxuICAgICAgICBjb25zdCBodHRwSGVhZGVyQWNjZXB0U2VsZWN0ZWQ6IHN0cmluZyB8IHVuZGVmaW5lZCA9IHRoaXMuY29uZmlndXJhdGlvbi5zZWxlY3RIZWFkZXJBY2NlcHQoaHR0cEhlYWRlckFjY2VwdHMpO1xyXG4gICAgICAgIGlmIChodHRwSGVhZGVyQWNjZXB0U2VsZWN0ZWQgIT0gdW5kZWZpbmVkKSB7XHJcbiAgICAgICAgICAgIGhlYWRlcnMgPSBoZWFkZXJzLnNldCgnQWNjZXB0JywgaHR0cEhlYWRlckFjY2VwdFNlbGVjdGVkKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8vIHRvIGRldGVybWluZSB0aGUgQ29udGVudC1UeXBlIGhlYWRlclxyXG4gICAgICAgIGNvbnN0IGNvbnN1bWVzOiBzdHJpbmdbXSA9IFtcclxuICAgICAgICAgICAgJ2FwcGxpY2F0aW9uL2pzb24nXHJcbiAgICAgICAgXTtcclxuICAgICAgICBjb25zdCBodHRwQ29udGVudFR5cGVTZWxlY3RlZDogc3RyaW5nIHwgdW5kZWZpbmVkID0gdGhpcy5jb25maWd1cmF0aW9uLnNlbGVjdEhlYWRlckNvbnRlbnRUeXBlKGNvbnN1bWVzKTtcclxuICAgICAgICBpZiAoaHR0cENvbnRlbnRUeXBlU2VsZWN0ZWQgIT0gdW5kZWZpbmVkKSB7XHJcbiAgICAgICAgICAgIGhlYWRlcnMgPSBoZWFkZXJzLnNldCgnQ29udGVudC1UeXBlJywgaHR0cENvbnRlbnRUeXBlU2VsZWN0ZWQpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcmV0dXJuIHRoaXMuaHR0cENsaWVudC5yZXF1ZXN0PElubGluZVJlc3BvbnNlMjAwMT4oJ3B1dCcsYCR7dGhpcy5iYXNlUGF0aH0vaW5ib3gvcXVldWUvJHtlbmNvZGVVUklDb21wb25lbnQoU3RyaW5nKHF1ZXVlSWQpKX0vaXRlbXMvJHtlbmNvZGVVUklDb21wb25lbnQoU3RyaW5nKGNvbnRlbnRJZCkpfS9jaGVja291dGAsXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIGJvZHk6IGJvZHksXHJcbiAgICAgICAgICAgICAgICB3aXRoQ3JlZGVudGlhbHM6IHRoaXMuY29uZmlndXJhdGlvbi53aXRoQ3JlZGVudGlhbHMsXHJcbiAgICAgICAgICAgICAgICBoZWFkZXJzOiBoZWFkZXJzLFxyXG4gICAgICAgICAgICAgICAgb2JzZXJ2ZTogb2JzZXJ2ZSxcclxuICAgICAgICAgICAgICAgIHJlcG9ydFByb2dyZXNzOiByZXBvcnRQcm9ncmVzc1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgKTtcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIEFkZCBhIGN1c3RvbSBwYXJhbVxyXG4gICAgICogWW91IGNhbiBjdXN0b21pemUgc29tZSBmaWVsZHMuICBUbyBnZXQgYWxsIHRoZSBwYXJhbXMgdXNlIEdFVCAvaW5ib3gvcXVldWUve3F1ZXVlSWR9IFxyXG4gICAgICogQHBhcmFtIHF1ZXVlSWQgVGhlIHVuaXF1ZSBpZGVudGlmaWVyIGZvciB0aGlzIHF1ZXVlXHJcbiAgICAgKiBAcGFyYW0gcGFyYW1JZCBBIGN1c3RvbSBjb25maWd1cmF0aW9uIGZvciBhIGNsaWVudFxyXG4gICAgICogQHBhcmFtIGJvZHkgXHJcbiAgICAgKiBAcGFyYW0gb2JzZXJ2ZSBzZXQgd2hldGhlciBvciBub3QgdG8gcmV0dXJuIHRoZSBkYXRhIE9ic2VydmFibGUgYXMgdGhlIGJvZHksIHJlc3BvbnNlIG9yIGV2ZW50cy4gZGVmYXVsdHMgdG8gcmV0dXJuaW5nIHRoZSBib2R5LlxyXG4gICAgICogQHBhcmFtIHJlcG9ydFByb2dyZXNzIGZsYWcgdG8gcmVwb3J0IHJlcXVlc3QgYW5kIHJlc3BvbnNlIHByb2dyZXNzLlxyXG4gICAgICovXHJcbiAgICBwdWJsaWMgdXBkYXRlUGFyYW0ocXVldWVJZDogc3RyaW5nLCBwYXJhbUlkOiBzdHJpbmcsIGJvZHk/OiBCb2R5Miwgb2JzZXJ2ZT86ICdib2R5JywgcmVwb3J0UHJvZ3Jlc3M/OiBib29sZWFuKTogT2JzZXJ2YWJsZTxhbnk+O1xyXG4gICAgcHVibGljIHVwZGF0ZVBhcmFtKHF1ZXVlSWQ6IHN0cmluZywgcGFyYW1JZDogc3RyaW5nLCBib2R5PzogQm9keTIsIG9ic2VydmU/OiAncmVzcG9uc2UnLCByZXBvcnRQcm9ncmVzcz86IGJvb2xlYW4pOiBPYnNlcnZhYmxlPEh0dHBSZXNwb25zZTxhbnk+PjtcclxuICAgIHB1YmxpYyB1cGRhdGVQYXJhbShxdWV1ZUlkOiBzdHJpbmcsIHBhcmFtSWQ6IHN0cmluZywgYm9keT86IEJvZHkyLCBvYnNlcnZlPzogJ2V2ZW50cycsIHJlcG9ydFByb2dyZXNzPzogYm9vbGVhbik6IE9ic2VydmFibGU8SHR0cEV2ZW50PGFueT4+O1xyXG4gICAgcHVibGljIHVwZGF0ZVBhcmFtKHF1ZXVlSWQ6IHN0cmluZywgcGFyYW1JZDogc3RyaW5nLCBib2R5PzogQm9keTIsIG9ic2VydmU6IGFueSA9ICdib2R5JywgcmVwb3J0UHJvZ3Jlc3M6IGJvb2xlYW4gPSBmYWxzZSApOiBPYnNlcnZhYmxlPGFueT4ge1xyXG5cclxuICAgICAgICBpZiAocXVldWVJZCA9PT0gbnVsbCB8fCBxdWV1ZUlkID09PSB1bmRlZmluZWQpIHtcclxuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdSZXF1aXJlZCBwYXJhbWV0ZXIgcXVldWVJZCB3YXMgbnVsbCBvciB1bmRlZmluZWQgd2hlbiBjYWxsaW5nIHVwZGF0ZVBhcmFtLicpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgaWYgKHBhcmFtSWQgPT09IG51bGwgfHwgcGFyYW1JZCA9PT0gdW5kZWZpbmVkKSB7XHJcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcignUmVxdWlyZWQgcGFyYW1ldGVyIHBhcmFtSWQgd2FzIG51bGwgb3IgdW5kZWZpbmVkIHdoZW4gY2FsbGluZyB1cGRhdGVQYXJhbS4nKTtcclxuICAgICAgICB9XHJcblxyXG5cclxuICAgICAgICBsZXQgaGVhZGVycyA9IHRoaXMuZGVmYXVsdEhlYWRlcnM7XHJcblxyXG4gICAgICAgIC8vIHRvIGRldGVybWluZSB0aGUgQWNjZXB0IGhlYWRlclxyXG4gICAgICAgIGxldCBodHRwSGVhZGVyQWNjZXB0czogc3RyaW5nW10gPSBbXHJcbiAgICAgICAgICAgICdhcHBsaWNhdGlvbi9qc29uJ1xyXG4gICAgICAgIF07XHJcbiAgICAgICAgY29uc3QgaHR0cEhlYWRlckFjY2VwdFNlbGVjdGVkOiBzdHJpbmcgfCB1bmRlZmluZWQgPSB0aGlzLmNvbmZpZ3VyYXRpb24uc2VsZWN0SGVhZGVyQWNjZXB0KGh0dHBIZWFkZXJBY2NlcHRzKTtcclxuICAgICAgICBpZiAoaHR0cEhlYWRlckFjY2VwdFNlbGVjdGVkICE9IHVuZGVmaW5lZCkge1xyXG4gICAgICAgICAgICBoZWFkZXJzID0gaGVhZGVycy5zZXQoJ0FjY2VwdCcsIGh0dHBIZWFkZXJBY2NlcHRTZWxlY3RlZCk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvLyB0byBkZXRlcm1pbmUgdGhlIENvbnRlbnQtVHlwZSBoZWFkZXJcclxuICAgICAgICBjb25zdCBjb25zdW1lczogc3RyaW5nW10gPSBbXHJcbiAgICAgICAgICAgICdhcHBsaWNhdGlvbi9qc29uJ1xyXG4gICAgICAgIF07XHJcbiAgICAgICAgY29uc3QgaHR0cENvbnRlbnRUeXBlU2VsZWN0ZWQ6IHN0cmluZyB8IHVuZGVmaW5lZCA9IHRoaXMuY29uZmlndXJhdGlvbi5zZWxlY3RIZWFkZXJDb250ZW50VHlwZShjb25zdW1lcyk7XHJcbiAgICAgICAgaWYgKGh0dHBDb250ZW50VHlwZVNlbGVjdGVkICE9IHVuZGVmaW5lZCkge1xyXG4gICAgICAgICAgICBoZWFkZXJzID0gaGVhZGVycy5zZXQoJ0NvbnRlbnQtVHlwZScsIGh0dHBDb250ZW50VHlwZVNlbGVjdGVkKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHJldHVybiB0aGlzLmh0dHBDbGllbnQucmVxdWVzdDxhbnk+KCdwdXQnLGAke3RoaXMuYmFzZVBhdGh9L2luYm94L3F1ZXVlLyR7ZW5jb2RlVVJJQ29tcG9uZW50KFN0cmluZyhxdWV1ZUlkKSl9L3BhcmFtLyR7ZW5jb2RlVVJJQ29tcG9uZW50KFN0cmluZyhwYXJhbUlkKSl9YCxcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgYm9keTogYm9keSxcclxuICAgICAgICAgICAgICAgIHdpdGhDcmVkZW50aWFsczogdGhpcy5jb25maWd1cmF0aW9uLndpdGhDcmVkZW50aWFscyxcclxuICAgICAgICAgICAgICAgIGhlYWRlcnM6IGhlYWRlcnMsXHJcbiAgICAgICAgICAgICAgICBvYnNlcnZlOiBvYnNlcnZlLFxyXG4gICAgICAgICAgICAgICAgcmVwb3J0UHJvZ3Jlc3M6IHJlcG9ydFByb2dyZXNzXHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICApO1xyXG4gICAgfVxyXG5cclxufVxyXG4iXX0=