import { __values } from "tslib";
/**
 * Inbox API
 * Manage work for human moderators by adding, checking out and completing work items. Store User Generated Content to the database.  This will store it twice, once in short-term storage in it's exact form amd again in long term storage in it's redacted and pseudonymized form
 *
 * OpenAPI spec version: 2.1.1
 * Contact: support@twohat.com
 *
 * NOTE: This class is auto generated by the swagger code generator program.
 * https://github.com/swagger-api/swagger-codegen.git
 * Do not edit the class manually.
 */ /* tslint:disable:no-unused-variable member-ordering */
import { Inject, Injectable, Optional } from '@angular/core';
import { HttpHeaders, HttpParams } from '@angular/common/http';
import { CustomHttpUrlEncodingCodec } from '../encoder';
import { BASE_PATH, COLLECTION_FORMATS } from '../variables';
import { Configuration } from '../configuration';
import * as i0 from "@angular/core";
import * as i1 from "@angular/common/http";
import * as i2 from "../configuration";
var DefaultService = /** @class */ (function () {
    function DefaultService(httpClient, basePath, configuration) {
        this.httpClient = httpClient;
        this.basePath = 'https://virtserver.swaggerhub.com/twohat/inbox/2.1.1';
        this.defaultHeaders = new HttpHeaders();
        this.configuration = new Configuration();
        if (basePath) {
            this.basePath = basePath;
        }
        if (configuration) {
            this.configuration = configuration;
            this.basePath = basePath || configuration.basePath || this.basePath;
        }
    }
    /**
     * @param consumes string[] mime-types
     * @return true: consumes contains 'multipart/form-data', false: otherwise
     */
    DefaultService.prototype.canConsumeForm = function (consumes) {
        var e_1, _a;
        var form = 'multipart/form-data';
        try {
            for (var consumes_1 = __values(consumes), consumes_1_1 = consumes_1.next(); !consumes_1_1.done; consumes_1_1 = consumes_1.next()) {
                var consume = consumes_1_1.value;
                if (form === consume) {
                    return true;
                }
            }
        }
        catch (e_1_1) { e_1 = { error: e_1_1 }; }
        finally {
            try {
                if (consumes_1_1 && !consumes_1_1.done && (_a = consumes_1.return)) _a.call(consumes_1);
            }
            finally { if (e_1) throw e_1.error; }
        }
        return false;
    };
    DefaultService.prototype.addComment = function (queueId, contentId, body, observe, reportProgress) {
        if (observe === void 0) { observe = 'body'; }
        if (reportProgress === void 0) { reportProgress = false; }
        if (queueId === null || queueId === undefined) {
            throw new Error('Required parameter queueId was null or undefined when calling addComment.');
        }
        if (contentId === null || contentId === undefined) {
            throw new Error('Required parameter contentId was null or undefined when calling addComment.');
        }
        var headers = this.defaultHeaders;
        // to determine the Accept header
        var httpHeaderAccepts = [
            'application/json'
        ];
        var httpHeaderAcceptSelected = this.configuration.selectHeaderAccept(httpHeaderAccepts);
        if (httpHeaderAcceptSelected != undefined) {
            headers = headers.set('Accept', httpHeaderAcceptSelected);
        }
        // to determine the Content-Type header
        var consumes = [
            'application/json'
        ];
        var httpContentTypeSelected = this.configuration.selectHeaderContentType(consumes);
        if (httpContentTypeSelected != undefined) {
            headers = headers.set('Content-Type', httpContentTypeSelected);
        }
        return this.httpClient.request('post', this.basePath + "/inbox/queue/" + encodeURIComponent(String(queueId)) + "/items/" + encodeURIComponent(String(contentId)) + "/comments", {
            body: body,
            withCredentials: this.configuration.withCredentials,
            headers: headers,
            observe: observe,
            reportProgress: reportProgress
        });
    };
    DefaultService.prototype.addExamples = function (body, updateData, observe, reportProgress) {
        if (observe === void 0) { observe = 'body'; }
        if (reportProgress === void 0) { reportProgress = false; }
        var queryParameters = new HttpParams({ encoder: new CustomHttpUrlEncodingCodec() });
        if (updateData !== undefined && updateData !== null) {
            queryParameters = queryParameters.set('updateData', updateData);
        }
        var headers = this.defaultHeaders;
        // to determine the Accept header
        var httpHeaderAccepts = [
            'application/json'
        ];
        var httpHeaderAcceptSelected = this.configuration.selectHeaderAccept(httpHeaderAccepts);
        if (httpHeaderAcceptSelected != undefined) {
            headers = headers.set('Accept', httpHeaderAcceptSelected);
        }
        // to determine the Content-Type header
        var consumes = [
            'application/json'
        ];
        var httpContentTypeSelected = this.configuration.selectHeaderContentType(consumes);
        if (httpContentTypeSelected != undefined) {
            headers = headers.set('Content-Type', httpContentTypeSelected);
        }
        return this.httpClient.request('post', this.basePath + "/inbox/queue/examples/items", {
            body: body,
            params: queryParameters,
            withCredentials: this.configuration.withCredentials,
            headers: headers,
            observe: observe,
            reportProgress: reportProgress
        });
    };
    DefaultService.prototype.addRuleAuditItems = function (body, updateData, observe, reportProgress) {
        if (observe === void 0) { observe = 'body'; }
        if (reportProgress === void 0) { reportProgress = false; }
        var queryParameters = new HttpParams({ encoder: new CustomHttpUrlEncodingCodec() });
        if (updateData !== undefined && updateData !== null) {
            queryParameters = queryParameters.set('updateData', updateData);
        }
        var headers = this.defaultHeaders;
        // to determine the Accept header
        var httpHeaderAccepts = [
            'application/json'
        ];
        var httpHeaderAcceptSelected = this.configuration.selectHeaderAccept(httpHeaderAccepts);
        if (httpHeaderAcceptSelected != undefined) {
            headers = headers.set('Accept', httpHeaderAcceptSelected);
        }
        // to determine the Content-Type header
        var consumes = [
            'application/json'
        ];
        var httpContentTypeSelected = this.configuration.selectHeaderContentType(consumes);
        if (httpContentTypeSelected != undefined) {
            headers = headers.set('Content-Type', httpContentTypeSelected);
        }
        return this.httpClient.request('post', this.basePath + "/inbox/queue/rulesAudit/items", {
            body: body,
            params: queryParameters,
            withCredentials: this.configuration.withCredentials,
            headers: headers,
            observe: observe,
            reportProgress: reportProgress
        });
    };
    DefaultService.prototype.addSpelling = function (body, updateData, observe, reportProgress) {
        if (observe === void 0) { observe = 'body'; }
        if (reportProgress === void 0) { reportProgress = false; }
        var queryParameters = new HttpParams({ encoder: new CustomHttpUrlEncodingCodec() });
        if (updateData !== undefined && updateData !== null) {
            queryParameters = queryParameters.set('updateData', updateData);
        }
        var headers = this.defaultHeaders;
        // to determine the Accept header
        var httpHeaderAccepts = [
            'application/json'
        ];
        var httpHeaderAcceptSelected = this.configuration.selectHeaderAccept(httpHeaderAccepts);
        if (httpHeaderAcceptSelected != undefined) {
            headers = headers.set('Accept', httpHeaderAcceptSelected);
        }
        // to determine the Content-Type header
        var consumes = [
            'application/json'
        ];
        var httpContentTypeSelected = this.configuration.selectHeaderContentType(consumes);
        if (httpContentTypeSelected != undefined) {
            headers = headers.set('Content-Type', httpContentTypeSelected);
        }
        return this.httpClient.request('post', this.basePath + "/inbox/queue/spelling/items", {
            body: body,
            params: queryParameters,
            withCredentials: this.configuration.withCredentials,
            headers: headers,
            observe: observe,
            reportProgress: reportProgress
        });
    };
    DefaultService.prototype.addTaskItems = function (body, updateData, observe, reportProgress) {
        if (observe === void 0) { observe = 'body'; }
        if (reportProgress === void 0) { reportProgress = false; }
        var queryParameters = new HttpParams({ encoder: new CustomHttpUrlEncodingCodec() });
        if (updateData !== undefined && updateData !== null) {
            queryParameters = queryParameters.set('updateData', updateData);
        }
        var headers = this.defaultHeaders;
        // to determine the Accept header
        var httpHeaderAccepts = [
            'application/json'
        ];
        var httpHeaderAcceptSelected = this.configuration.selectHeaderAccept(httpHeaderAccepts);
        if (httpHeaderAcceptSelected != undefined) {
            headers = headers.set('Accept', httpHeaderAcceptSelected);
        }
        // to determine the Content-Type header
        var consumes = [
            'application/json'
        ];
        var httpContentTypeSelected = this.configuration.selectHeaderContentType(consumes);
        if (httpContentTypeSelected != undefined) {
            headers = headers.set('Content-Type', httpContentTypeSelected);
        }
        return this.httpClient.request('post', this.basePath + "/inbox/queue/task/items", {
            body: body,
            params: queryParameters,
            withCredentials: this.configuration.withCredentials,
            headers: headers,
            observe: observe,
            reportProgress: reportProgress
        });
    };
    DefaultService.prototype.addUseranmes = function (body, updateData, observe, reportProgress) {
        if (observe === void 0) { observe = 'body'; }
        if (reportProgress === void 0) { reportProgress = false; }
        var queryParameters = new HttpParams({ encoder: new CustomHttpUrlEncodingCodec() });
        if (updateData !== undefined && updateData !== null) {
            queryParameters = queryParameters.set('updateData', updateData);
        }
        var headers = this.defaultHeaders;
        // to determine the Accept header
        var httpHeaderAccepts = [
            'application/json'
        ];
        var httpHeaderAcceptSelected = this.configuration.selectHeaderAccept(httpHeaderAccepts);
        if (httpHeaderAcceptSelected != undefined) {
            headers = headers.set('Accept', httpHeaderAcceptSelected);
        }
        // to determine the Content-Type header
        var consumes = [
            'application/json'
        ];
        var httpContentTypeSelected = this.configuration.selectHeaderContentType(consumes);
        if (httpContentTypeSelected != undefined) {
            headers = headers.set('Content-Type', httpContentTypeSelected);
        }
        return this.httpClient.request('post', this.basePath + "/inbox/queue/usernames/items", {
            body: body,
            params: queryParameters,
            withCredentials: this.configuration.withCredentials,
            headers: headers,
            observe: observe,
            reportProgress: reportProgress
        });
    };
    DefaultService.prototype.deletExampleItems = function (clientId, languages, observe, reportProgress) {
        if (observe === void 0) { observe = 'body'; }
        if (reportProgress === void 0) { reportProgress = false; }
        var queryParameters = new HttpParams({ encoder: new CustomHttpUrlEncodingCodec() });
        if (clientId !== undefined && clientId !== null) {
            queryParameters = queryParameters.set('clientId', clientId);
        }
        if (languages) {
            languages.forEach(function (element) {
                queryParameters = queryParameters.append('languages', element);
            });
        }
        var headers = this.defaultHeaders;
        // to determine the Accept header
        var httpHeaderAccepts = [
            'application/json'
        ];
        var httpHeaderAcceptSelected = this.configuration.selectHeaderAccept(httpHeaderAccepts);
        if (httpHeaderAcceptSelected != undefined) {
            headers = headers.set('Accept', httpHeaderAcceptSelected);
        }
        // to determine the Content-Type header
        var consumes = [];
        return this.httpClient.request('delete', this.basePath + "/inbox/queue/examples/items", {
            params: queryParameters,
            withCredentials: this.configuration.withCredentials,
            headers: headers,
            observe: observe,
            reportProgress: reportProgress
        });
    };
    DefaultService.prototype.deleteAllCheckouts = function (queueId, clientId, languages, observe, reportProgress) {
        if (observe === void 0) { observe = 'body'; }
        if (reportProgress === void 0) { reportProgress = false; }
        if (queueId === null || queueId === undefined) {
            throw new Error('Required parameter queueId was null or undefined when calling deleteAllCheckouts.');
        }
        var queryParameters = new HttpParams({ encoder: new CustomHttpUrlEncodingCodec() });
        if (clientId !== undefined && clientId !== null) {
            queryParameters = queryParameters.set('clientId', clientId);
        }
        if (languages) {
            languages.forEach(function (element) {
                queryParameters = queryParameters.append('languages', element);
            });
        }
        var headers = this.defaultHeaders;
        // to determine the Accept header
        var httpHeaderAccepts = [
            'application/json'
        ];
        var httpHeaderAcceptSelected = this.configuration.selectHeaderAccept(httpHeaderAccepts);
        if (httpHeaderAcceptSelected != undefined) {
            headers = headers.set('Accept', httpHeaderAcceptSelected);
        }
        // to determine the Content-Type header
        var consumes = [];
        return this.httpClient.request('delete', this.basePath + "/inbox/queue/" + encodeURIComponent(String(queueId)) + "/items/checkout", {
            params: queryParameters,
            withCredentials: this.configuration.withCredentials,
            headers: headers,
            observe: observe,
            reportProgress: reportProgress
        });
    };
    DefaultService.prototype.deleteComment = function (queueId, contentId, commentId, observe, reportProgress) {
        if (observe === void 0) { observe = 'body'; }
        if (reportProgress === void 0) { reportProgress = false; }
        if (queueId === null || queueId === undefined) {
            throw new Error('Required parameter queueId was null or undefined when calling deleteComment.');
        }
        if (contentId === null || contentId === undefined) {
            throw new Error('Required parameter contentId was null or undefined when calling deleteComment.');
        }
        if (commentId === null || commentId === undefined) {
            throw new Error('Required parameter commentId was null or undefined when calling deleteComment.');
        }
        var headers = this.defaultHeaders;
        // to determine the Accept header
        var httpHeaderAccepts = [
            'application/json'
        ];
        var httpHeaderAcceptSelected = this.configuration.selectHeaderAccept(httpHeaderAccepts);
        if (httpHeaderAcceptSelected != undefined) {
            headers = headers.set('Accept', httpHeaderAcceptSelected);
        }
        // to determine the Content-Type header
        var consumes = [];
        return this.httpClient.request('delete', this.basePath + "/inbox/queue/" + encodeURIComponent(String(queueId)) + "/items/" + encodeURIComponent(String(contentId)) + "/comments/" + encodeURIComponent(String(commentId)), {
            withCredentials: this.configuration.withCredentials,
            headers: headers,
            observe: observe,
            reportProgress: reportProgress
        });
    };
    DefaultService.prototype.deleteItemCheckout = function (queueId, contentId, observe, reportProgress) {
        if (observe === void 0) { observe = 'body'; }
        if (reportProgress === void 0) { reportProgress = false; }
        if (queueId === null || queueId === undefined) {
            throw new Error('Required parameter queueId was null or undefined when calling deleteItemCheckout.');
        }
        if (contentId === null || contentId === undefined) {
            throw new Error('Required parameter contentId was null or undefined when calling deleteItemCheckout.');
        }
        var headers = this.defaultHeaders;
        // to determine the Accept header
        var httpHeaderAccepts = [
            'application/json'
        ];
        var httpHeaderAcceptSelected = this.configuration.selectHeaderAccept(httpHeaderAccepts);
        if (httpHeaderAcceptSelected != undefined) {
            headers = headers.set('Accept', httpHeaderAcceptSelected);
        }
        // to determine the Content-Type header
        var consumes = [];
        return this.httpClient.request('delete', this.basePath + "/inbox/queue/" + encodeURIComponent(String(queueId)) + "/items/" + encodeURIComponent(String(contentId)) + "/checkout", {
            withCredentials: this.configuration.withCredentials,
            headers: headers,
            observe: observe,
            reportProgress: reportProgress
        });
    };
    DefaultService.prototype.deleteItems = function (queueId, clientId, languages, observe, reportProgress) {
        if (observe === void 0) { observe = 'body'; }
        if (reportProgress === void 0) { reportProgress = false; }
        if (queueId === null || queueId === undefined) {
            throw new Error('Required parameter queueId was null or undefined when calling deleteItems.');
        }
        var queryParameters = new HttpParams({ encoder: new CustomHttpUrlEncodingCodec() });
        if (clientId !== undefined && clientId !== null) {
            queryParameters = queryParameters.set('clientId', clientId);
        }
        if (languages) {
            languages.forEach(function (element) {
                queryParameters = queryParameters.append('languages', element);
            });
        }
        var headers = this.defaultHeaders;
        // to determine the Accept header
        var httpHeaderAccepts = [
            'application/json'
        ];
        var httpHeaderAcceptSelected = this.configuration.selectHeaderAccept(httpHeaderAccepts);
        if (httpHeaderAcceptSelected != undefined) {
            headers = headers.set('Accept', httpHeaderAcceptSelected);
        }
        // to determine the Content-Type header
        var consumes = [];
        return this.httpClient.request('delete', this.basePath + "/inbox/queue/" + encodeURIComponent(String(queueId)) + "/items", {
            params: queryParameters,
            withCredentials: this.configuration.withCredentials,
            headers: headers,
            observe: observe,
            reportProgress: reportProgress
        });
    };
    DefaultService.prototype.deleteParam = function (queueId, paramId, observe, reportProgress) {
        if (observe === void 0) { observe = 'body'; }
        if (reportProgress === void 0) { reportProgress = false; }
        if (queueId === null || queueId === undefined) {
            throw new Error('Required parameter queueId was null or undefined when calling deleteParam.');
        }
        if (paramId === null || paramId === undefined) {
            throw new Error('Required parameter paramId was null or undefined when calling deleteParam.');
        }
        var headers = this.defaultHeaders;
        // to determine the Accept header
        var httpHeaderAccepts = [
            'application/json'
        ];
        var httpHeaderAcceptSelected = this.configuration.selectHeaderAccept(httpHeaderAccepts);
        if (httpHeaderAcceptSelected != undefined) {
            headers = headers.set('Accept', httpHeaderAcceptSelected);
        }
        // to determine the Content-Type header
        var consumes = [];
        return this.httpClient.request('delete', this.basePath + "/inbox/queue/" + encodeURIComponent(String(queueId)) + "/param/" + encodeURIComponent(String(paramId)), {
            withCredentials: this.configuration.withCredentials,
            headers: headers,
            observe: observe,
            reportProgress: reportProgress
        });
    };
    DefaultService.prototype.deleteRuleAuditItems = function (clientId, languages, observe, reportProgress) {
        if (observe === void 0) { observe = 'body'; }
        if (reportProgress === void 0) { reportProgress = false; }
        var queryParameters = new HttpParams({ encoder: new CustomHttpUrlEncodingCodec() });
        if (clientId !== undefined && clientId !== null) {
            queryParameters = queryParameters.set('clientId', clientId);
        }
        if (languages) {
            languages.forEach(function (element) {
                queryParameters = queryParameters.append('languages', element);
            });
        }
        var headers = this.defaultHeaders;
        // to determine the Accept header
        var httpHeaderAccepts = [
            'application/json'
        ];
        var httpHeaderAcceptSelected = this.configuration.selectHeaderAccept(httpHeaderAccepts);
        if (httpHeaderAcceptSelected != undefined) {
            headers = headers.set('Accept', httpHeaderAcceptSelected);
        }
        // to determine the Content-Type header
        var consumes = [];
        return this.httpClient.request('delete', this.basePath + "/inbox/queue/rulesAudit/items", {
            params: queryParameters,
            withCredentials: this.configuration.withCredentials,
            headers: headers,
            observe: observe,
            reportProgress: reportProgress
        });
    };
    DefaultService.prototype.deleteSpellingItems = function (clientId, languages, observe, reportProgress) {
        if (observe === void 0) { observe = 'body'; }
        if (reportProgress === void 0) { reportProgress = false; }
        var queryParameters = new HttpParams({ encoder: new CustomHttpUrlEncodingCodec() });
        if (clientId !== undefined && clientId !== null) {
            queryParameters = queryParameters.set('clientId', clientId);
        }
        if (languages) {
            languages.forEach(function (element) {
                queryParameters = queryParameters.append('languages', element);
            });
        }
        var headers = this.defaultHeaders;
        // to determine the Accept header
        var httpHeaderAccepts = [
            'application/json'
        ];
        var httpHeaderAcceptSelected = this.configuration.selectHeaderAccept(httpHeaderAccepts);
        if (httpHeaderAcceptSelected != undefined) {
            headers = headers.set('Accept', httpHeaderAcceptSelected);
        }
        // to determine the Content-Type header
        var consumes = [];
        return this.httpClient.request('delete', this.basePath + "/inbox/queue/spelling/items", {
            params: queryParameters,
            withCredentials: this.configuration.withCredentials,
            headers: headers,
            observe: observe,
            reportProgress: reportProgress
        });
    };
    DefaultService.prototype.deleteTaskItems = function (clientId, languages, observe, reportProgress) {
        if (observe === void 0) { observe = 'body'; }
        if (reportProgress === void 0) { reportProgress = false; }
        var queryParameters = new HttpParams({ encoder: new CustomHttpUrlEncodingCodec() });
        if (clientId !== undefined && clientId !== null) {
            queryParameters = queryParameters.set('clientId', clientId);
        }
        if (languages) {
            languages.forEach(function (element) {
                queryParameters = queryParameters.append('languages', element);
            });
        }
        var headers = this.defaultHeaders;
        // to determine the Accept header
        var httpHeaderAccepts = [
            'application/json'
        ];
        var httpHeaderAcceptSelected = this.configuration.selectHeaderAccept(httpHeaderAccepts);
        if (httpHeaderAcceptSelected != undefined) {
            headers = headers.set('Accept', httpHeaderAcceptSelected);
        }
        // to determine the Content-Type header
        var consumes = [];
        return this.httpClient.request('delete', this.basePath + "/inbox/queue/task/items", {
            params: queryParameters,
            withCredentials: this.configuration.withCredentials,
            headers: headers,
            observe: observe,
            reportProgress: reportProgress
        });
    };
    DefaultService.prototype.deleteUser = function (userId, observe, reportProgress) {
        if (observe === void 0) { observe = 'body'; }
        if (reportProgress === void 0) { reportProgress = false; }
        if (userId === null || userId === undefined) {
            throw new Error('Required parameter userId was null or undefined when calling deleteUser.');
        }
        var headers = this.defaultHeaders;
        // to determine the Accept header
        var httpHeaderAccepts = [
            'application/json'
        ];
        var httpHeaderAcceptSelected = this.configuration.selectHeaderAccept(httpHeaderAccepts);
        if (httpHeaderAcceptSelected != undefined) {
            headers = headers.set('Accept', httpHeaderAcceptSelected);
        }
        // to determine the Content-Type header
        var consumes = [];
        return this.httpClient.request('delete', this.basePath + "/inbox/user/" + encodeURIComponent(String(userId)), {
            withCredentials: this.configuration.withCredentials,
            headers: headers,
            observe: observe,
            reportProgress: reportProgress
        });
    };
    DefaultService.prototype.deleteUsernameItems = function (clientId, languages, observe, reportProgress) {
        if (observe === void 0) { observe = 'body'; }
        if (reportProgress === void 0) { reportProgress = false; }
        var queryParameters = new HttpParams({ encoder: new CustomHttpUrlEncodingCodec() });
        if (clientId !== undefined && clientId !== null) {
            queryParameters = queryParameters.set('clientId', clientId);
        }
        if (languages) {
            languages.forEach(function (element) {
                queryParameters = queryParameters.append('languages', element);
            });
        }
        var headers = this.defaultHeaders;
        // to determine the Accept header
        var httpHeaderAccepts = [
            'application/json'
        ];
        var httpHeaderAcceptSelected = this.configuration.selectHeaderAccept(httpHeaderAccepts);
        if (httpHeaderAcceptSelected != undefined) {
            headers = headers.set('Accept', httpHeaderAcceptSelected);
        }
        // to determine the Content-Type header
        var consumes = [];
        return this.httpClient.request('delete', this.basePath + "/inbox/queue/usernames/items", {
            params: queryParameters,
            withCredentials: this.configuration.withCredentials,
            headers: headers,
            observe: observe,
            reportProgress: reportProgress
        });
    };
    DefaultService.prototype.getComments = function (queueId, contentId, observe, reportProgress) {
        if (observe === void 0) { observe = 'body'; }
        if (reportProgress === void 0) { reportProgress = false; }
        if (queueId === null || queueId === undefined) {
            throw new Error('Required parameter queueId was null or undefined when calling getComment.');
        }
        if (contentId === null || contentId === undefined) {
            throw new Error('Required parameter contentId was null or undefined when calling getComment.');
        }
        var headers = this.defaultHeaders;
        // to determine the Accept header
        var httpHeaderAccepts = [
            'application/json'
        ];
        var httpHeaderAcceptSelected = this.configuration.selectHeaderAccept(httpHeaderAccepts);
        if (httpHeaderAcceptSelected != undefined) {
            headers = headers.set('Accept', httpHeaderAcceptSelected);
        }
        // to determine the Content-Type header
        var consumes = [];
        return this.httpClient.request('get', this.basePath + "/inbox/queue/" + encodeURIComponent(String(queueId)) + "/items/" + encodeURIComponent(String(contentId)) + "/comments", {
            withCredentials: this.configuration.withCredentials,
            headers: headers,
            observe: observe,
            reportProgress: reportProgress
        });
    };
    DefaultService.prototype.getComment = function (queueId, contentId, commentId, observe, reportProgress) {
        if (observe === void 0) { observe = 'body'; }
        if (reportProgress === void 0) { reportProgress = false; }
        if (queueId === null || queueId === undefined) {
            throw new Error('Required parameter queueId was null or undefined when calling getComment.');
        }
        if (contentId === null || contentId === undefined) {
            throw new Error('Required parameter contentId was null or undefined when calling getComment.');
        }
        if (commentId === null || commentId === undefined) {
            throw new Error('Required parameter commentId was null or undefined when calling getComment.');
        }
        var headers = this.defaultHeaders;
        // to determine the Accept header
        var httpHeaderAccepts = [
            'application/json'
        ];
        var httpHeaderAcceptSelected = this.configuration.selectHeaderAccept(httpHeaderAccepts);
        if (httpHeaderAcceptSelected != undefined) {
            headers = headers.set('Accept', httpHeaderAcceptSelected);
        }
        // to determine the Content-Type header
        var consumes = [];
        return this.httpClient.request('get', this.basePath + "/inbox/queue/" + encodeURIComponent(String(queueId)) + "/items/" + encodeURIComponent(String(contentId)) + "/comments/" + encodeURIComponent(String(commentId)), {
            withCredentials: this.configuration.withCredentials,
            headers: headers,
            observe: observe,
            reportProgress: reportProgress
        });
    };
    DefaultService.prototype.getExamples = function (language, ai, checkout, clientIds, contentIds, notContentIds, endDate, startDate, reviewedStartDate, reviewedEndDate, checkoutAvailable, doneByModeratorId, limit, offset, sortBy, tags, text, topics, unresolvedComments, observe, reportProgress) {
        if (observe === void 0) { observe = 'body'; }
        if (reportProgress === void 0) { reportProgress = false; }
        if (language === null || language === undefined) {
            throw new Error('Required parameter language was null or undefined when calling getExamples.');
        }
        var queryParameters = new HttpParams({ encoder: new CustomHttpUrlEncodingCodec() });
        if (ai) {
            ai.forEach(function (element) {
                queryParameters = queryParameters.append('ai', element);
            });
        }
        if (checkout !== undefined && checkout !== null) {
            queryParameters = queryParameters.set('checkout', checkout);
        }
        if (clientIds) {
            queryParameters = queryParameters.set('clientIds', clientIds.join(COLLECTION_FORMATS['csv']));
        }
        if (contentIds) {
            queryParameters = queryParameters.set('contentIds', contentIds.join(COLLECTION_FORMATS['csv']));
        }
        if (notContentIds) {
            queryParameters = queryParameters.set('notContentIds', notContentIds.join(COLLECTION_FORMATS['csv']));
        }
        if (endDate !== undefined && endDate !== null) {
            queryParameters = queryParameters.set('endDate', endDate);
        }
        if (startDate !== undefined && startDate !== null) {
            queryParameters = queryParameters.set('startDate', startDate);
        }
        if (reviewedStartDate !== undefined && reviewedStartDate !== null) {
            queryParameters = queryParameters.set('reviewedStartDate', reviewedStartDate);
        }
        if (reviewedEndDate !== undefined && reviewedEndDate !== null) {
            queryParameters = queryParameters.set('reviewedEndDate', reviewedEndDate);
        }
        if (checkoutAvailable !== undefined && checkoutAvailable !== null) {
            queryParameters = queryParameters.set('checkoutAvailable', checkoutAvailable);
        }
        if (doneByModeratorId !== undefined && doneByModeratorId !== null) {
            queryParameters = queryParameters.set('doneByModeratorId', doneByModeratorId);
        }
        if (language !== undefined && language !== null) {
            queryParameters = queryParameters.set('language', language);
        }
        if (limit !== undefined && limit !== null) {
            queryParameters = queryParameters.set('limit', limit);
        }
        if (offset !== undefined && offset !== null) {
            queryParameters = queryParameters.set('offset', offset);
        }
        if (sortBy !== undefined && sortBy !== null) {
            queryParameters = queryParameters.set('sortBy', sortBy);
        }
        if (tags) {
            queryParameters = queryParameters.set('tags', tags.join(COLLECTION_FORMATS['csv']));
        }
        if (text !== undefined && text !== null) {
            queryParameters = queryParameters.set('text', text);
        }
        if (topics) {
            topics.forEach(function (element) {
                queryParameters = queryParameters.append('topics', element);
            });
        }
        if (unresolvedComments !== undefined && unresolvedComments !== null) {
            queryParameters = queryParameters.set('unresolvedComments', unresolvedComments);
        }
        var headers = this.defaultHeaders;
        // to determine the Accept header
        var httpHeaderAccepts = [
            'application/json'
        ];
        var httpHeaderAcceptSelected = this.configuration.selectHeaderAccept(httpHeaderAccepts);
        if (httpHeaderAcceptSelected != undefined) {
            headers = headers.set('Accept', httpHeaderAcceptSelected);
        }
        // to determine the Content-Type header
        var consumes = [];
        return this.httpClient.request('get', this.basePath + "/inbox/queue/examples/items", {
            params: queryParameters,
            withCredentials: this.configuration.withCredentials,
            headers: headers,
            observe: observe,
            reportProgress: reportProgress
        });
    };
    DefaultService.prototype.getInbox = function (observe, reportProgress) {
        if (observe === void 0) { observe = 'body'; }
        if (reportProgress === void 0) { reportProgress = false; }
        var headers = this.defaultHeaders;
        // to determine the Accept header
        var httpHeaderAccepts = [
            'application/json'
        ];
        var httpHeaderAcceptSelected = this.configuration.selectHeaderAccept(httpHeaderAccepts);
        if (httpHeaderAcceptSelected != undefined) {
            headers = headers.set('Accept', httpHeaderAcceptSelected);
        }
        // to determine the Content-Type header
        var consumes = [];
        return this.httpClient.request('get', this.basePath + "/inbox", {
            withCredentials: this.configuration.withCredentials,
            headers: headers,
            observe: observe,
            reportProgress: reportProgress
        });
    };
    DefaultService.prototype.getItemCheckout = function (queueId, contentId, observe, reportProgress) {
        if (observe === void 0) { observe = 'body'; }
        if (reportProgress === void 0) { reportProgress = false; }
        if (queueId === null || queueId === undefined) {
            throw new Error('Required parameter queueId was null or undefined when calling getItemCheckout.');
        }
        if (contentId === null || contentId === undefined) {
            throw new Error('Required parameter contentId was null or undefined when calling getItemCheckout.');
        }
        var headers = this.defaultHeaders;
        // to determine the Accept header
        var httpHeaderAccepts = [
            'application/json'
        ];
        var httpHeaderAcceptSelected = this.configuration.selectHeaderAccept(httpHeaderAccepts);
        if (httpHeaderAcceptSelected != undefined) {
            headers = headers.set('Accept', httpHeaderAcceptSelected);
        }
        // to determine the Content-Type header
        var consumes = [];
        return this.httpClient.request('get', this.basePath + "/inbox/queue/" + encodeURIComponent(String(queueId)) + "/items/" + encodeURIComponent(String(contentId)) + "/checkout", {
            withCredentials: this.configuration.withCredentials,
            headers: headers,
            observe: observe,
            reportProgress: reportProgress
        });
    };
    DefaultService.prototype.getQueue = function (queueId, observe, reportProgress) {
        if (observe === void 0) { observe = 'body'; }
        if (reportProgress === void 0) { reportProgress = false; }
        if (queueId === null || queueId === undefined) {
            throw new Error('Required parameter queueId was null or undefined when calling getQueue.');
        }
        var headers = this.defaultHeaders;
        // to determine the Accept header
        var httpHeaderAccepts = [
            'application/json'
        ];
        var httpHeaderAcceptSelected = this.configuration.selectHeaderAccept(httpHeaderAccepts);
        if (httpHeaderAcceptSelected != undefined) {
            headers = headers.set('Accept', httpHeaderAcceptSelected);
        }
        // to determine the Content-Type header
        var consumes = [];
        return this.httpClient.request('get', this.basePath + "/inbox/queue/" + encodeURIComponent(String(queueId)), {
            withCredentials: this.configuration.withCredentials,
            headers: headers,
            observe: observe,
            reportProgress: reportProgress
        });
    };
    DefaultService.prototype.getRuleAuditItems = function (language, ai, checkout, clientIds, contentIds, notContentIds, endDate, startDate, reviewedStartDate, reviewedEndDate, checkoutAvailable, doneByModeratorId, limit, offset, sortBy, tags, text, topics, unresolvedComments, observe, reportProgress) {
        if (observe === void 0) { observe = 'body'; }
        if (reportProgress === void 0) { reportProgress = false; }
        if (language === null || language === undefined) {
            throw new Error('Required parameter language was null or undefined when calling getRuleAuditItems.');
        }
        var queryParameters = new HttpParams({ encoder: new CustomHttpUrlEncodingCodec() });
        if (ai) {
            ai.forEach(function (element) {
                queryParameters = queryParameters.append('ai', element);
            });
        }
        if (checkout !== undefined && checkout !== null) {
            queryParameters = queryParameters.set('checkout', checkout);
        }
        if (clientIds) {
            queryParameters = queryParameters.set('clientIds', clientIds.join(COLLECTION_FORMATS['csv']));
        }
        if (contentIds) {
            queryParameters = queryParameters.set('contentIds', contentIds.join(COLLECTION_FORMATS['csv']));
        }
        if (notContentIds) {
            queryParameters = queryParameters.set('notContentIds', notContentIds.join(COLLECTION_FORMATS['csv']));
        }
        if (endDate !== undefined && endDate !== null) {
            queryParameters = queryParameters.set('endDate', endDate);
        }
        if (startDate !== undefined && startDate !== null) {
            queryParameters = queryParameters.set('startDate', startDate);
        }
        if (reviewedStartDate !== undefined && reviewedStartDate !== null) {
            queryParameters = queryParameters.set('reviewedStartDate', reviewedStartDate);
        }
        if (reviewedEndDate !== undefined && reviewedEndDate !== null) {
            queryParameters = queryParameters.set('reviewedEndDate', reviewedEndDate);
        }
        if (checkoutAvailable !== undefined && checkoutAvailable !== null) {
            queryParameters = queryParameters.set('checkoutAvailable', checkoutAvailable);
        }
        if (doneByModeratorId !== undefined && doneByModeratorId !== null) {
            queryParameters = queryParameters.set('doneByModeratorId', doneByModeratorId);
        }
        if (language !== undefined && language !== null) {
            queryParameters = queryParameters.set('language', language);
        }
        if (limit !== undefined && limit !== null) {
            queryParameters = queryParameters.set('limit', limit);
        }
        if (offset !== undefined && offset !== null) {
            queryParameters = queryParameters.set('offset', offset);
        }
        if (sortBy !== undefined && sortBy !== null) {
            queryParameters = queryParameters.set('sortBy', sortBy);
        }
        if (tags) {
            queryParameters = queryParameters.set('tags', tags.join(COLLECTION_FORMATS['csv']));
        }
        if (text !== undefined && text !== null) {
            queryParameters = queryParameters.set('text', text);
        }
        if (topics) {
            topics.forEach(function (element) {
                queryParameters = queryParameters.append('topics', element);
            });
        }
        if (unresolvedComments !== undefined && unresolvedComments !== null) {
            queryParameters = queryParameters.set('unresolvedComments', unresolvedComments);
        }
        var headers = this.defaultHeaders;
        // to determine the Accept header
        var httpHeaderAccepts = [
            'application/json'
        ];
        var httpHeaderAcceptSelected = this.configuration.selectHeaderAccept(httpHeaderAccepts);
        if (httpHeaderAcceptSelected != undefined) {
            headers = headers.set('Accept', httpHeaderAcceptSelected);
        }
        // to determine the Content-Type header
        var consumes = [];
        return this.httpClient.request('get', this.basePath + "/inbox/queue/rulesAudit/items", {
            params: queryParameters,
            withCredentials: this.configuration.withCredentials,
            headers: headers,
            observe: observe,
            reportProgress: reportProgress
        });
    };
    DefaultService.prototype.getSpelling = function (language, ai, checkout, clientIds, contentIds, notContentIds, endDate, startDate, reviewedStartDate, reviewedEndDate, checkoutAvailable, doneByModeratorId, limit, offset, sortBy, tags, text, topics, unresolvedComments, observe, reportProgress) {
        if (observe === void 0) { observe = 'body'; }
        if (reportProgress === void 0) { reportProgress = false; }
        if (language === null || language === undefined) {
            throw new Error('Required parameter language was null or undefined when calling getSpelling.');
        }
        var queryParameters = new HttpParams({ encoder: new CustomHttpUrlEncodingCodec() });
        if (ai) {
            ai.forEach(function (element) {
                queryParameters = queryParameters.append('ai', element);
            });
        }
        if (checkout !== undefined && checkout !== null) {
            queryParameters = queryParameters.set('checkout', checkout);
        }
        if (clientIds) {
            queryParameters = queryParameters.set('clientIds', clientIds.join(COLLECTION_FORMATS['csv']));
        }
        if (contentIds) {
            queryParameters = queryParameters.set('contentIds', contentIds.join(COLLECTION_FORMATS['csv']));
        }
        if (notContentIds) {
            queryParameters = queryParameters.set('notContentIds', notContentIds.join(COLLECTION_FORMATS['csv']));
        }
        if (endDate !== undefined && endDate !== null) {
            queryParameters = queryParameters.set('endDate', endDate);
        }
        if (startDate !== undefined && startDate !== null) {
            queryParameters = queryParameters.set('startDate', startDate);
        }
        if (reviewedStartDate !== undefined && reviewedStartDate !== null) {
            queryParameters = queryParameters.set('reviewedStartDate', reviewedStartDate);
        }
        if (reviewedEndDate !== undefined && reviewedEndDate !== null) {
            queryParameters = queryParameters.set('reviewedEndDate', reviewedEndDate);
        }
        if (checkoutAvailable !== undefined && checkoutAvailable !== null) {
            queryParameters = queryParameters.set('checkoutAvailable', checkoutAvailable);
        }
        if (doneByModeratorId !== undefined && doneByModeratorId !== null) {
            queryParameters = queryParameters.set('doneByModeratorId', doneByModeratorId);
        }
        if (language !== undefined && language !== null) {
            queryParameters = queryParameters.set('language', language);
        }
        if (limit !== undefined && limit !== null) {
            queryParameters = queryParameters.set('limit', limit);
        }
        if (offset !== undefined && offset !== null) {
            queryParameters = queryParameters.set('offset', offset);
        }
        if (sortBy !== undefined && sortBy !== null) {
            queryParameters = queryParameters.set('sortBy', sortBy);
        }
        if (tags) {
            queryParameters = queryParameters.set('tags', tags.join(COLLECTION_FORMATS['csv']));
        }
        if (text !== undefined && text !== null) {
            queryParameters = queryParameters.set('text', text);
        }
        if (topics) {
            topics.forEach(function (element) {
                queryParameters = queryParameters.append('topics', element);
            });
        }
        if (unresolvedComments !== undefined && unresolvedComments !== null) {
            queryParameters = queryParameters.set('unresolvedComments', unresolvedComments);
        }
        var headers = this.defaultHeaders;
        // to determine the Accept header
        var httpHeaderAccepts = [
            'application/json'
        ];
        var httpHeaderAcceptSelected = this.configuration.selectHeaderAccept(httpHeaderAccepts);
        if (httpHeaderAcceptSelected != undefined) {
            headers = headers.set('Accept', httpHeaderAcceptSelected);
        }
        // to determine the Content-Type header
        var consumes = [];
        return this.httpClient.request('get', this.basePath + "/inbox/queue/spelling/items", {
            params: queryParameters,
            withCredentials: this.configuration.withCredentials,
            headers: headers,
            observe: observe,
            reportProgress: reportProgress
        });
    };
    DefaultService.prototype.getTaskItems = function (language, clientIds, contentIds, notContentIds, endDate, startDate, reviewedStartDate, reviewedEndDate, checkoutAvailable, doneByModeratorId, assignedToModeratorId, limit, offset, sortBy, tags, text, unresolvedComments, observe, reportProgress) {
        if (observe === void 0) { observe = 'body'; }
        if (reportProgress === void 0) { reportProgress = false; }
        if (language === null || language === undefined) {
            throw new Error('Required parameter language was null or undefined when calling getTaskItems.');
        }
        var queryParameters = new HttpParams({ encoder: new CustomHttpUrlEncodingCodec() });
        if (clientIds) {
            queryParameters = queryParameters.set('clientIds', clientIds.join(COLLECTION_FORMATS['csv']));
        }
        if (contentIds) {
            queryParameters = queryParameters.set('contentIds', contentIds.join(COLLECTION_FORMATS['csv']));
        }
        if (notContentIds) {
            queryParameters = queryParameters.set('notContentIds', notContentIds.join(COLLECTION_FORMATS['csv']));
        }
        if (endDate !== undefined && endDate !== null) {
            queryParameters = queryParameters.set('endDate', endDate);
        }
        if (startDate !== undefined && startDate !== null) {
            queryParameters = queryParameters.set('startDate', startDate);
        }
        if (reviewedStartDate !== undefined && reviewedStartDate !== null) {
            queryParameters = queryParameters.set('reviewedStartDate', reviewedStartDate);
        }
        if (reviewedEndDate !== undefined && reviewedEndDate !== null) {
            queryParameters = queryParameters.set('reviewedEndDate', reviewedEndDate);
        }
        if (checkoutAvailable !== undefined && checkoutAvailable !== null) {
            queryParameters = queryParameters.set('checkoutAvailable', checkoutAvailable);
        }
        if (doneByModeratorId !== undefined && doneByModeratorId !== null) {
            queryParameters = queryParameters.set('doneByModeratorId', doneByModeratorId);
        }
        if (assignedToModeratorId !== undefined && assignedToModeratorId !== null) {
            queryParameters = queryParameters.set('assignedToModeratorId', assignedToModeratorId);
        }
        if (language !== undefined && language !== null) {
            queryParameters = queryParameters.set('language', language);
        }
        if (limit !== undefined && limit !== null) {
            queryParameters = queryParameters.set('limit', limit);
        }
        if (offset !== undefined && offset !== null) {
            queryParameters = queryParameters.set('offset', offset);
        }
        if (sortBy !== undefined && sortBy !== null) {
            queryParameters = queryParameters.set('sortBy', sortBy);
        }
        if (tags) {
            queryParameters = queryParameters.set('tags', tags.join(COLLECTION_FORMATS['csv']));
        }
        if (text !== undefined && text !== null) {
            queryParameters = queryParameters.set('text', text);
        }
        if (unresolvedComments !== undefined && unresolvedComments !== null) {
            queryParameters = queryParameters.set('unresolvedComments', unresolvedComments);
        }
        var headers = this.defaultHeaders;
        // to determine the Accept header
        var httpHeaderAccepts = [
            'application/json'
        ];
        var httpHeaderAcceptSelected = this.configuration.selectHeaderAccept(httpHeaderAccepts);
        if (httpHeaderAcceptSelected != undefined) {
            headers = headers.set('Accept', httpHeaderAcceptSelected);
        }
        // to determine the Content-Type header
        var consumes = [];
        return this.httpClient.request('get', this.basePath + "/inbox/queue/task/items", {
            params: queryParameters,
            withCredentials: this.configuration.withCredentials,
            headers: headers,
            observe: observe,
            reportProgress: reportProgress
        });
    };
    DefaultService.prototype.getUserData = function (userId, observe, reportProgress) {
        if (observe === void 0) { observe = 'body'; }
        if (reportProgress === void 0) { reportProgress = false; }
        if (userId === null || userId === undefined) {
            throw new Error('Required parameter userId was null or undefined when calling getUserData.');
        }
        var headers = this.defaultHeaders;
        // to determine the Accept header
        var httpHeaderAccepts = [
            'application/x-ndjson',
            'application/json'
        ];
        var httpHeaderAcceptSelected = this.configuration.selectHeaderAccept(httpHeaderAccepts);
        if (httpHeaderAcceptSelected != undefined) {
            headers = headers.set('Accept', httpHeaderAcceptSelected);
        }
        // to determine the Content-Type header
        var consumes = [];
        return this.httpClient.request('get', this.basePath + "/inbox/user/" + encodeURIComponent(String(userId)), {
            withCredentials: this.configuration.withCredentials,
            headers: headers,
            observe: observe,
            reportProgress: reportProgress
        });
    };
    DefaultService.prototype.getUsernames = function (language, ai, checkout, clientIds, contentIds, notContentIds, endDate, startDate, reviewedStartDate, reviewedEndDate, checkoutAvailable, doneByModeratorId, limit, offset, sortBy, tags, text, topics, unresolvedComments, observe, reportProgress) {
        if (observe === void 0) { observe = 'body'; }
        if (reportProgress === void 0) { reportProgress = false; }
        if (language === null || language === undefined) {
            throw new Error('Required parameter language was null or undefined when calling getUsernames.');
        }
        var queryParameters = new HttpParams({ encoder: new CustomHttpUrlEncodingCodec() });
        if (ai) {
            ai.forEach(function (element) {
                queryParameters = queryParameters.append('ai', element);
            });
        }
        if (checkout !== undefined && checkout !== null) {
            queryParameters = queryParameters.set('checkout', checkout);
        }
        if (clientIds) {
            queryParameters = queryParameters.set('clientIds', clientIds.join(COLLECTION_FORMATS['csv']));
        }
        if (contentIds) {
            queryParameters = queryParameters.set('contentIds', contentIds.join(COLLECTION_FORMATS['csv']));
        }
        if (notContentIds) {
            queryParameters = queryParameters.set('notContentIds', notContentIds.join(COLLECTION_FORMATS['csv']));
        }
        if (endDate !== undefined && endDate !== null) {
            queryParameters = queryParameters.set('endDate', endDate);
        }
        if (startDate !== undefined && startDate !== null) {
            queryParameters = queryParameters.set('startDate', startDate);
        }
        if (reviewedStartDate !== undefined && reviewedStartDate !== null) {
            queryParameters = queryParameters.set('reviewedStartDate', reviewedStartDate);
        }
        if (reviewedEndDate !== undefined && reviewedEndDate !== null) {
            queryParameters = queryParameters.set('reviewedEndDate', reviewedEndDate);
        }
        if (checkoutAvailable !== undefined && checkoutAvailable !== null) {
            queryParameters = queryParameters.set('checkoutAvailable', checkoutAvailable);
        }
        if (doneByModeratorId !== undefined && doneByModeratorId !== null) {
            queryParameters = queryParameters.set('doneByModeratorId', doneByModeratorId);
        }
        if (language !== undefined && language !== null) {
            queryParameters = queryParameters.set('language', language);
        }
        if (limit !== undefined && limit !== null) {
            queryParameters = queryParameters.set('limit', limit);
        }
        if (offset !== undefined && offset !== null) {
            queryParameters = queryParameters.set('offset', offset);
        }
        if (sortBy !== undefined && sortBy !== null) {
            queryParameters = queryParameters.set('sortBy', sortBy);
        }
        if (tags) {
            queryParameters = queryParameters.set('tags', tags.join(COLLECTION_FORMATS['csv']));
        }
        if (text !== undefined && text !== null) {
            queryParameters = queryParameters.set('text', text);
        }
        if (topics) {
            topics.forEach(function (element) {
                queryParameters = queryParameters.append('topics', element);
            });
        }
        if (unresolvedComments !== undefined && unresolvedComments !== null) {
            queryParameters = queryParameters.set('unresolvedComments', unresolvedComments);
        }
        var headers = this.defaultHeaders;
        // to determine the Accept header
        var httpHeaderAccepts = [
            'application/json'
        ];
        var httpHeaderAcceptSelected = this.configuration.selectHeaderAccept(httpHeaderAccepts);
        if (httpHeaderAcceptSelected != undefined) {
            headers = headers.set('Accept', httpHeaderAcceptSelected);
        }
        // to determine the Content-Type header
        var consumes = [];
        return this.httpClient.request('get', this.basePath + "/inbox/queue/usernames/items", {
            params: queryParameters,
            withCredentials: this.configuration.withCredentials,
            headers: headers,
            observe: observe,
            reportProgress: reportProgress
        });
    };
    DefaultService.prototype.itemDone = function (queueId, contentId, body, observe, reportProgress) {
        if (observe === void 0) { observe = 'body'; }
        if (reportProgress === void 0) { reportProgress = false; }
        if (queueId === null || queueId === undefined) {
            throw new Error('Required parameter queueId was null or undefined when calling itemDone.');
        }
        if (contentId === null || contentId === undefined) {
            throw new Error('Required parameter contentId was null or undefined when calling itemDone.');
        }
        var headers = this.defaultHeaders;
        // to determine the Accept header
        var httpHeaderAccepts = [
            'application/json'
        ];
        var httpHeaderAcceptSelected = this.configuration.selectHeaderAccept(httpHeaderAccepts);
        if (httpHeaderAcceptSelected != undefined) {
            headers = headers.set('Accept', httpHeaderAcceptSelected);
        }
        // to determine the Content-Type header
        var consumes = [
            'application/json'
        ];
        var httpContentTypeSelected = this.configuration.selectHeaderContentType(consumes);
        if (httpContentTypeSelected != undefined) {
            headers = headers.set('Content-Type', httpContentTypeSelected);
        }
        return this.httpClient.request('post', this.basePath + "/inbox/queue/" + encodeURIComponent(String(queueId)) + "/items/" + encodeURIComponent(String(contentId)) + "/decision", {
            body: body,
            withCredentials: this.configuration.withCredentials,
            headers: headers,
            observe: observe,
            reportProgress: reportProgress
        });
    };
    DefaultService.prototype.listCommentsForContentId = function (queueId, contentId, observe, reportProgress) {
        if (observe === void 0) { observe = 'body'; }
        if (reportProgress === void 0) { reportProgress = false; }
        if (queueId === null || queueId === undefined) {
            throw new Error('Required parameter queueId was null or undefined when calling listCommentsForContentId.');
        }
        if (contentId === null || contentId === undefined) {
            throw new Error('Required parameter contentId was null or undefined when calling listCommentsForContentId.');
        }
        var headers = this.defaultHeaders;
        // to determine the Accept header
        var httpHeaderAccepts = [
            'application/json'
        ];
        var httpHeaderAcceptSelected = this.configuration.selectHeaderAccept(httpHeaderAccepts);
        if (httpHeaderAcceptSelected != undefined) {
            headers = headers.set('Accept', httpHeaderAcceptSelected);
        }
        // to determine the Content-Type header
        var consumes = [];
        return this.httpClient.request('get', this.basePath + "/inbox/queue/" + encodeURIComponent(String(queueId)) + "/items/" + encodeURIComponent(String(contentId)) + "/comments", {
            withCredentials: this.configuration.withCredentials,
            headers: headers,
            observe: observe,
            reportProgress: reportProgress
        });
    };
    DefaultService.prototype.redactItem = function (queueId, contentId, body, observe, reportProgress) {
        if (observe === void 0) { observe = 'body'; }
        if (reportProgress === void 0) { reportProgress = false; }
        if (queueId === null || queueId === undefined) {
            throw new Error('Required parameter queueId was null or undefined when calling redactItem.');
        }
        if (contentId === null || contentId === undefined) {
            throw new Error('Required parameter contentId was null or undefined when calling redactItem.');
        }
        var headers = this.defaultHeaders;
        // to determine the Accept header
        var httpHeaderAccepts = [
            'application/json'
        ];
        var httpHeaderAcceptSelected = this.configuration.selectHeaderAccept(httpHeaderAccepts);
        if (httpHeaderAcceptSelected != undefined) {
            headers = headers.set('Accept', httpHeaderAcceptSelected);
        }
        // to determine the Content-Type header
        var consumes = [
            'application/json'
        ];
        var httpContentTypeSelected = this.configuration.selectHeaderContentType(consumes);
        if (httpContentTypeSelected != undefined) {
            headers = headers.set('Content-Type', httpContentTypeSelected);
        }
        return this.httpClient.request('put', this.basePath + "/inbox/queue/" + encodeURIComponent(String(queueId)) + "/items/" + encodeURIComponent(String(contentId)) + "/text", {
            body: body,
            withCredentials: this.configuration.withCredentials,
            headers: headers,
            observe: observe,
            reportProgress: reportProgress
        });
    };
    DefaultService.prototype.redactUser = function (userId, observe, reportProgress) {
        if (observe === void 0) { observe = 'body'; }
        if (reportProgress === void 0) { reportProgress = false; }
        if (userId === null || userId === undefined) {
            throw new Error('Required parameter userId was null or undefined when calling redactUser.');
        }
        var headers = this.defaultHeaders;
        // to determine the Accept header
        var httpHeaderAccepts = [
            'application/json'
        ];
        var httpHeaderAcceptSelected = this.configuration.selectHeaderAccept(httpHeaderAccepts);
        if (httpHeaderAcceptSelected != undefined) {
            headers = headers.set('Accept', httpHeaderAcceptSelected);
        }
        // to determine the Content-Type header
        var consumes = [];
        return this.httpClient.request('put', this.basePath + "/inbox/user/" + encodeURIComponent(String(userId)), {
            withCredentials: this.configuration.withCredentials,
            headers: headers,
            observe: observe,
            reportProgress: reportProgress
        });
    };
    DefaultService.prototype.resolveComment = function (queueId, contentId, commentId, body, observe, reportProgress) {
        if (observe === void 0) { observe = 'body'; }
        if (reportProgress === void 0) { reportProgress = false; }
        if (queueId === null || queueId === undefined) {
            throw new Error('Required parameter queueId was null or undefined when calling resolveComment.');
        }
        if (contentId === null || contentId === undefined) {
            throw new Error('Required parameter contentId was null or undefined when calling resolveComment.');
        }
        if (commentId === null || commentId === undefined) {
            throw new Error('Required parameter commentId was null or undefined when calling resolveComment.');
        }
        var headers = this.defaultHeaders;
        // to determine the Accept header
        var httpHeaderAccepts = [
            'application/json'
        ];
        var httpHeaderAcceptSelected = this.configuration.selectHeaderAccept(httpHeaderAccepts);
        if (httpHeaderAcceptSelected != undefined) {
            headers = headers.set('Accept', httpHeaderAcceptSelected);
        }
        // to determine the Content-Type header
        var consumes = [
            'application/json'
        ];
        var httpContentTypeSelected = this.configuration.selectHeaderContentType(consumes);
        if (httpContentTypeSelected != undefined) {
            headers = headers.set('Content-Type', httpContentTypeSelected);
        }
        return this.httpClient.request('put', this.basePath + "/inbox/queue/" + encodeURIComponent(String(queueId)) + "/items/" + encodeURIComponent(String(contentId)) + "/comments/" + encodeURIComponent(String(commentId)) + "/resolved", {
            body: body,
            withCredentials: this.configuration.withCredentials,
            headers: headers,
            observe: observe,
            reportProgress: reportProgress
        });
    };
    DefaultService.prototype.updateComment = function (queueId, contentId, commentId, body, observe, reportProgress) {
        if (observe === void 0) { observe = 'body'; }
        if (reportProgress === void 0) { reportProgress = false; }
        if (queueId === null || queueId === undefined) {
            throw new Error('Required parameter queueId was null or undefined when calling updateComment.');
        }
        if (contentId === null || contentId === undefined) {
            throw new Error('Required parameter contentId was null or undefined when calling updateComment.');
        }
        if (commentId === null || commentId === undefined) {
            throw new Error('Required parameter commentId was null or undefined when calling updateComment.');
        }
        var headers = this.defaultHeaders;
        // to determine the Accept header
        var httpHeaderAccepts = [
            'application/json'
        ];
        var httpHeaderAcceptSelected = this.configuration.selectHeaderAccept(httpHeaderAccepts);
        if (httpHeaderAcceptSelected != undefined) {
            headers = headers.set('Accept', httpHeaderAcceptSelected);
        }
        // to determine the Content-Type header
        var consumes = [
            'application/json'
        ];
        var httpContentTypeSelected = this.configuration.selectHeaderContentType(consumes);
        if (httpContentTypeSelected != undefined) {
            headers = headers.set('Content-Type', httpContentTypeSelected);
        }
        return this.httpClient.request('put', this.basePath + "/inbox/queue/" + encodeURIComponent(String(queueId)) + "/items/" + encodeURIComponent(String(contentId)) + "/comments/" + encodeURIComponent(String(commentId)), {
            body: body,
            withCredentials: this.configuration.withCredentials,
            headers: headers,
            observe: observe,
            reportProgress: reportProgress
        });
    };
    DefaultService.prototype.updateItemCheckout = function (queueId, contentId, body, observe, reportProgress) {
        if (observe === void 0) { observe = 'body'; }
        if (reportProgress === void 0) { reportProgress = false; }
        if (queueId === null || queueId === undefined) {
            throw new Error('Required parameter queueId was null or undefined when calling updateItemCheckout.');
        }
        if (contentId === null || contentId === undefined) {
            throw new Error('Required parameter contentId was null or undefined when calling updateItemCheckout.');
        }
        var headers = this.defaultHeaders;
        // to determine the Accept header
        var httpHeaderAccepts = [
            'application/json'
        ];
        var httpHeaderAcceptSelected = this.configuration.selectHeaderAccept(httpHeaderAccepts);
        if (httpHeaderAcceptSelected != undefined) {
            headers = headers.set('Accept', httpHeaderAcceptSelected);
        }
        // to determine the Content-Type header
        var consumes = [
            'application/json'
        ];
        var httpContentTypeSelected = this.configuration.selectHeaderContentType(consumes);
        if (httpContentTypeSelected != undefined) {
            headers = headers.set('Content-Type', httpContentTypeSelected);
        }
        return this.httpClient.request('put', this.basePath + "/inbox/queue/" + encodeURIComponent(String(queueId)) + "/items/" + encodeURIComponent(String(contentId)) + "/checkout", {
            body: body,
            withCredentials: this.configuration.withCredentials,
            headers: headers,
            observe: observe,
            reportProgress: reportProgress
        });
    };
    DefaultService.prototype.updateParam = function (queueId, paramId, body, observe, reportProgress) {
        if (observe === void 0) { observe = 'body'; }
        if (reportProgress === void 0) { reportProgress = false; }
        if (queueId === null || queueId === undefined) {
            throw new Error('Required parameter queueId was null or undefined when calling updateParam.');
        }
        if (paramId === null || paramId === undefined) {
            throw new Error('Required parameter paramId was null or undefined when calling updateParam.');
        }
        var headers = this.defaultHeaders;
        // to determine the Accept header
        var httpHeaderAccepts = [
            'application/json'
        ];
        var httpHeaderAcceptSelected = this.configuration.selectHeaderAccept(httpHeaderAccepts);
        if (httpHeaderAcceptSelected != undefined) {
            headers = headers.set('Accept', httpHeaderAcceptSelected);
        }
        // to determine the Content-Type header
        var consumes = [
            'application/json'
        ];
        var httpContentTypeSelected = this.configuration.selectHeaderContentType(consumes);
        if (httpContentTypeSelected != undefined) {
            headers = headers.set('Content-Type', httpContentTypeSelected);
        }
        return this.httpClient.request('put', this.basePath + "/inbox/queue/" + encodeURIComponent(String(queueId)) + "/param/" + encodeURIComponent(String(paramId)), {
            body: body,
            withCredentials: this.configuration.withCredentials,
            headers: headers,
            observe: observe,
            reportProgress: reportProgress
        });
    };
    DefaultService.ɵfac = function DefaultService_Factory(t) { return new (t || DefaultService)(i0.ɵɵinject(i1.HttpClient), i0.ɵɵinject(BASE_PATH, 8), i0.ɵɵinject(i2.Configuration, 8)); };
    DefaultService.ɵprov = i0.ɵɵdefineInjectable({ token: DefaultService, factory: DefaultService.ɵfac, providedIn: 'root' });
    return DefaultService;
}());
export { DefaultService };
/*@__PURE__*/ (function () { i0.ɵsetClassMetadata(DefaultService, [{
        type: Injectable,
        args: [{
                providedIn: 'root'
            }]
    }], function () { return [{ type: i1.HttpClient }, { type: undefined, decorators: [{
                type: Optional
            }, {
                type: Inject,
                args: [BASE_PATH]
            }] }, { type: i2.Configuration, decorators: [{
                type: Optional
            }] }]; }, null); })();
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiZGVmYXVsdC5zZXJ2aWNlLmpzIiwic291cmNlUm9vdCI6Im5nOi8vbGFuZ3VhZ2UtdGFza3Mtc3dhZ2dlci1jbGllbnQvIiwic291cmNlcyI6WyJhcGkvZGVmYXVsdC5zZXJ2aWNlLnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7QUFBQTs7Ozs7Ozs7OztHQVVHLENBQUEsdURBQXVEO0FBRTFELE9BQU8sRUFBRSxNQUFNLEVBQUUsVUFBVSxFQUFFLFFBQVEsRUFBRSxNQUEyQixlQUFlLENBQUM7QUFDbEYsT0FBTyxFQUFjLFdBQVcsRUFBRSxVQUFVLEVBQ1YsTUFBZ0Msc0JBQXNCLENBQUM7QUFDekYsT0FBTyxFQUFFLDBCQUEwQixFQUFFLE1BQTZCLFlBQVksQ0FBQztBQTZCL0UsT0FBTyxFQUFFLFNBQVMsRUFBRSxrQkFBa0IsRUFBRSxNQUEwQixjQUFjLENBQUM7QUFDakYsT0FBTyxFQUFFLGFBQWEsRUFBRSxNQUEwQyxrQkFBa0IsQ0FBQzs7OztBQUlyRjtJQVNJLHdCQUFzQixVQUFzQixFQUFnQyxRQUFnQixFQUFjLGFBQTRCO1FBQWhILGVBQVUsR0FBVixVQUFVLENBQVk7UUFKbEMsYUFBUSxHQUFHLHNEQUFzRCxDQUFDO1FBQ3JFLG1CQUFjLEdBQUcsSUFBSSxXQUFXLEVBQUUsQ0FBQztRQUNuQyxrQkFBYSxHQUFHLElBQUksYUFBYSxFQUFFLENBQUM7UUFHdkMsSUFBSSxRQUFRLEVBQUU7WUFDVixJQUFJLENBQUMsUUFBUSxHQUFHLFFBQVEsQ0FBQztTQUM1QjtRQUNELElBQUksYUFBYSxFQUFFO1lBQ2YsSUFBSSxDQUFDLGFBQWEsR0FBRyxhQUFhLENBQUM7WUFDbkMsSUFBSSxDQUFDLFFBQVEsR0FBRyxRQUFRLElBQUksYUFBYSxDQUFDLFFBQVEsSUFBSSxJQUFJLENBQUMsUUFBUSxDQUFDO1NBQ3ZFO0lBQ0wsQ0FBQztJQUVEOzs7T0FHRztJQUNLLHVDQUFjLEdBQXRCLFVBQXVCLFFBQWtCOztRQUNyQyxJQUFNLElBQUksR0FBRyxxQkFBcUIs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LENBQU0sS0FBSyxFQUFJLElBQUksQ0FBQyxRQUFRLHFCQUFnQixrQkFBa0IsQ0FBQyxNQUFNLENBQUMsT0FBTyxDQUFDLENBQUMsZUFBVSxrQkFBa0IsQ0FBQyxNQUFNLENBQUMsT0FBTyxDQUFDLENBQUcsRUFDeEo7WUFDSSxJQUFJLEVBQUUsSUFBSTtZQUNWLGVBQWUsRUFBRSxJQUFJLENBQUMsYUFBYSxDQUFDLGVBQWU7WUFDbkQsT0FBTyxFQUFFLE9BQU87WUFDaEIsT0FBTyxFQUFFLE9BQU87WUFDaEIsY0FBYyxFQUFFLGNBQWM7U0FDakMsQ0FDSixDQUFDO0lBQ04sQ0FBQztnRkEzdEVRLGNBQWMsMENBTTBDLFNBQVM7MERBTmpFLGNBQWMsV0FBZCxjQUFjLG1CQUZYLE1BQU07eUJBbER0QjtDQWl4RUMsQUFodUVELElBZ3VFQztTQTd0RVksY0FBYztrREFBZCxjQUFjO2NBSDFCLFVBQVU7ZUFBQztnQkFDUixVQUFVLEVBQUUsTUFBTTthQUNyQjs7c0JBT2tELFFBQVE7O3NCQUFHLE1BQU07dUJBQUMsU0FBUzs7c0JBQXFCLFFBQVEiLCJzb3VyY2VzQ29udGVudCI6WyIvKipcclxuICogSW5ib3ggQVBJXHJcbiAqIE1hbmFnZSB3b3JrIGZvciBodW1hbiBtb2RlcmF0b3JzIGJ5IGFkZGluZywgY2hlY2tpbmcgb3V0IGFuZCBjb21wbGV0aW5nIHdvcmsgaXRlbXMuIFN0b3JlIFVzZXIgR2VuZXJhdGVkIENvbnRlbnQgdG8gdGhlIGRhdGFiYXNlLiAgVGhpcyB3aWxsIHN0b3JlIGl0IHR3aWNlLCBvbmNlIGluIHNob3J0LXRlcm0gc3RvcmFnZSBpbiBpdCdzIGV4YWN0IGZvcm0gYW1kIGFnYWluIGluIGxvbmcgdGVybSBzdG9yYWdlIGluIGl0J3MgcmVkYWN0ZWQgYW5kIHBzZXVkb255bWl6ZWQgZm9ybSBcclxuICpcclxuICogT3BlbkFQSSBzcGVjIHZlcnNpb246IDIuMS4xXHJcbiAqIENvbnRhY3Q6IHN1cHBvcnRAdHdvaGF0LmNvbVxyXG4gKlxyXG4gKiBOT1RFOiBUaGlzIGNsYXNzIGlzIGF1dG8gZ2VuZXJhdGVkIGJ5IHRoZSBzd2FnZ2VyIGNvZGUgZ2VuZXJhdG9yIHByb2dyYW0uXHJcbiAqIGh0dHBzOi8vZ2l0aHViLmNvbS9zd2FnZ2VyLWFwaS9zd2FnZ2VyLWNvZGVnZW4uZ2l0XHJcbiAqIERvIG5vdCBlZGl0IHRoZSBjbGFzcyBtYW51YWxseS5cclxuICovLyogdHNsaW50OmRpc2FibGU6bm8tdW51c2VkLXZhcmlhYmxlIG1lbWJlci1vcmRlcmluZyAqL1xyXG5cclxuaW1wb3J0IHsgSW5qZWN0LCBJbmplY3RhYmxlLCBPcHRpb25hbCB9ICAgICAgICAgICAgICAgICAgICAgIGZyb20gJ0Bhbmd1bGFyL2NvcmUnO1xyXG5pbXBvcnQgeyBIdHRwQ2xpZW50LCBIdHRwSGVhZGVycywgSHR0cFBhcmFtcyxcclxuICAgICAgICAgSHR0cFJlc3BvbnNlLCBIdHRwRXZlbnQgfSAgICAgICAgICAgICAgICAgICAgICAgICAgIGZyb20gJ0Bhbmd1bGFyL2NvbW1vbi9odHRwJztcclxuaW1wb3J0IHsgQ3VzdG9tSHR0cFVybEVuY29kaW5nQ29kZWMgfSAgICAgICAgICAgICAgICAgICAgICAgIGZyb20gJy4uL2VuY29kZXInO1xyXG5cclxuaW1wb3J0IHsgT2JzZXJ2YWJsZSB9ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZyb20gJ3J4anMnO1xyXG5cclxuaW1wb3J0IHsgQWkgfSBmcm9tICcuLi9tb2RlbC9haSc7XHJcbmltcG9ydCB7IEJvZHkgfSBmcm9tICcuLi9tb2RlbC9ib2R5JztcclxuaW1wb3J0IHsgQm9keTEgfSBmcm9tICcuLi9tb2RlbC9ib2R5MSc7XHJcbmltcG9ydCB7IEJvZHkyIH0gZnJvbSAnLi4vbW9kZWwvYm9keTInO1xyXG5pbXBvcnQgeyBDaGVja291dCB9IGZyb20gJy4uL21vZGVsL2NoZWNrb3V0JztcclxuaW1wb3J0IHsgQ29tbWVudCB9IGZyb20gJy4uL21vZGVsL2NvbW1lbnQnO1xyXG5pbXBvcnQgeyBDb21tZW50SW5wdXQgfSBmcm9tICcuLi9tb2RlbC9jb21tZW50SW5wdXQnO1xyXG5pbXBvcnQgeyBEZWNpc2lvbiB9IGZyb20gJy4uL21vZGVsL2RlY2lzaW9uJztcclxuaW1wb3J0IHsgRXhhbXBsZUlucHV0IH0gZnJvbSAnLi4vbW9kZWwvZXhhbXBsZUlucHV0JztcclxuaW1wb3J0IHsgRXhhbXBsZU91dHB1dCB9IGZyb20gJy4uL21vZGVsL2V4YW1wbGVPdXRwdXQnO1xyXG5pbXBvcnQgeyBJbmxpbmVSZXNwb25zZTIwMCB9IGZyb20gJy4uL21vZGVsL2lubGluZVJlc3BvbnNlMjAwJztcclxuaW1wb3J0IHsgSW5saW5lUmVzcG9uc2UyMDAxIH0gZnJvbSAnLi4vbW9kZWwvaW5saW5lUmVzcG9uc2UyMDAxJztcclxuaW1wb3J0IHsgSW5saW5lUmVzcG9uc2UyMDEgfSBmcm9tICcuLi9tb2RlbC9pbmxpbmVSZXNwb25zZTIwMSc7XHJcbmltcG9ydCB7IE1vZGVyYXRvcklkIH0gZnJvbSAnLi4vbW9kZWwvbW9kZXJhdG9ySWQnO1xyXG5pbXBvcnQgeyBRdWV1ZSB9IGZyb20gJy4uL21vZGVsL3F1ZXVlJztcclxuaW1wb3J0IHsgUnVsZUF1ZGl0SW5wdXQgfSBmcm9tICcuLi9tb2RlbC9ydWxlQXVkaXRJbnB1dCc7XHJcbmltcG9ydCB7IFJ1bGVBdWRpdE91dHB1dCB9IGZyb20gJy4uL21vZGVsL3J1bGVBdWRpdE91dHB1dCc7XHJcbmltcG9ydCB7IFNwZWxsaW5nTWlzdGFrZUlucHV0IH0gZnJvbSAnLi4vbW9kZWwvc3BlbGxpbmdNaXN0YWtlSW5wdXQnO1xyXG5pbXBvcnQgeyBTcGVsbGluZ01pc3Rha2VPdXRwdXQgfSBmcm9tICcuLi9tb2RlbC9zcGVsbGluZ01pc3Rha2VPdXRwdXQnO1xyXG5pbXBvcnQgeyBUYXNrSW5wdXQgfSBmcm9tICcuLi9tb2RlbC90YXNrSW5wdXQnO1xyXG5pbXBvcnQgeyBUYXNrT3V0cHV0IH0gZnJvbSAnLi4vbW9kZWwvdGFza091dHB1dCc7XHJcbmltcG9ydCB7IFRvcGljcyB9IGZyb20gJy4uL21vZGVsL3RvcGljcyc7XHJcbmltcG9ydCB7IFVzZXJuYW1lSW5wdXQgfSBmcm9tICcuLi9tb2RlbC91c2VybmFtZUlucHV0JztcclxuaW1wb3J0IHsgVXNlcm5hbWVPdXRwdXQgfSBmcm9tICcuLi9tb2RlbC91c2VybmFtZU91dHB1dCc7XHJcblxyXG5pbXBvcnQgeyBCQVNFX1BBVEgsIENPTExFQ1RJT05fRk9STUFUUyB9ICAgICAgICAgICAgICAgICAgICAgZnJvbSAnLi4vdmFyaWFibGVzJztcclxuaW1wb3J0IHsgQ29uZmlndXJhdGlvbiB9ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZyb20gJy4uL2NvbmZpZ3VyYXRpb24nO1xyXG5pbXBvcnQgeyBEZWZhdWx0U2VydmljZUludGVyZmFjZSB9ICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZyb20gJy4vZGVmYXVsdC5zZXJ2aWNlSW50ZXJmYWNlJztcclxuXHJcblxyXG5ASW5qZWN0YWJsZSh7XHJcbiAgICBwcm92aWRlZEluOiAncm9vdCdcclxufSlcclxuZXhwb3J0IGNsYXNzIERlZmF1bHRTZXJ2aWNlIGltcGxlbWVudHMgRGVmYXVsdFNlcnZpY2VJbnRlcmZhY2Uge1xyXG5cclxuICAgIHByb3RlY3RlZCBiYXNlUGF0aCA9ICdodHRwczovL3ZpcnRzZXJ2ZXIuc3dhZ2dlcmh1Yi5jb20vdHdvaGF0L2luYm94LzIuMS4xJztcclxuICAgIHB1YmxpYyBkZWZhdWx0SGVhZGVycyA9IG5ldyBIdHRwSGVhZGVycygpO1xyXG4gICAgcHVibGljIGNvbmZpZ3VyYXRpb24gPSBuZXcgQ29uZmlndXJhdGlvbigpO1xyXG5cclxuICAgIGNvbnN0cnVjdG9yKHByb3RlY3RlZCBodHRwQ2xpZW50OiBIdHRwQ2xpZW50LCBAT3B0aW9uYWwoKUBJbmplY3QoQkFTRV9QQVRIKSBiYXNlUGF0aDogc3RyaW5nLCBAT3B0aW9uYWwoKSBjb25maWd1cmF0aW9uOiBDb25maWd1cmF0aW9uKSB7XHJcbiAgICAgICAgaWYgKGJhc2VQYXRoKSB7XHJcbiAgICAgICAgICAgIHRoaXMuYmFzZVBhdGggPSBiYXNlUGF0aDtcclxuICAgICAgICB9XHJcbiAgICAgICAgaWYgKGNvbmZpZ3VyYXRpb24pIHtcclxuICAgICAgICAgICAgdGhpcy5jb25maWd1cmF0aW9uID0gY29uZmlndXJhdGlvbjtcclxuICAgICAgICAgICAgdGhpcy5iYXNlUGF0aCA9IGJhc2VQYXRoIHx8IGNvbmZpZ3VyYXRpb24uYmFzZVBhdGggfHwgdGhpcy5iYXNlUGF0aDtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBAcGFyYW0gY29uc3VtZXMgc3RyaW5nW10gbWltZS10eXBlc1xyXG4gICAgICogQHJldHVybiB0cnVlOiBjb25zdW1lcyBjb250YWlucyAnbXVsdGlwYXJ0L2Zvcm0tZGF0YScsIGZhbHNlOiBvdGhlcndpc2VcclxuICAgICAqL1xyXG4gICAgcHJpdmF0ZSBjYW5Db25zdW1lRm9ybShjb25zdW1lczogc3RyaW5nW10pOiBib29sZWFuIHtcclxuICAgICAgICBjb25zdCBmb3JtID0gJ211bHRpcGFydC9mb3JtLWRhdGEnO1xyXG4gICAgICAgIGZvciAoY29uc3QgY29uc3VtZSBvZiBjb25zdW1lcykge1xyXG4gICAgICAgICAgICBpZiAoZm9ybSA9PT0gY29uc3VtZSkge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIHRydWU7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgfVxyXG5cclxuXHJcbiAgICAvKipcclxuICAgICAqIEFkZCBhIGNvbW1lbnQgdG8gdGhpcyBjb250ZW50IGl0ZW1cclxuICAgICAqIENvbW1lbnRzIGFyZSB3YXlzIHRvIGxlYXZlIGEgbm90ZSB0byBzYXkgd2h5IGEgcGVyc29uIG1hZGUgdGhlIGRlY2lzaW9uIHRoZXkgZGlkLiAgT3IgaXQgY291bGQgYmUgYSBxdWVzdGlvbiBvciBhbnN3ZXIgdHJ5aW5nIHRvIGdldCBoZWxwIG9uIGFuIGl0ZW0uIFxyXG4gICAgICogQHBhcmFtIHF1ZXVlSWQgVGhlIHVuaXF1ZSBpZGVudGlmaWVyIGZvciB0aGlzIHF1ZXVlXHJcbiAgICAgKiBAcGFyYW0gY29udGVudElkIFRoZSB1bmlxdWUgaWRlbnRpZmllciBmb3IgdGhlIGNvbnRlbnRcclxuICAgICAqIEBwYXJhbSBib2R5IFxyXG4gICAgICogQHBhcmFtIG9ic2VydmUgc2V0IHdoZXRoZXIgb3Igbm90IHRvIHJldHVybiB0aGUgZGF0YSBPYnNlcnZhYmxlIGFzIHRoZSBib2R5LCByZXNwb25zZSBvciBldmVudHMuIGRlZmF1bHRzIHRvIHJldHVybmluZyB0aGUgYm9keS5cclxuICAgICAqIEBwYXJhbSByZXBvcnRQcm9ncmVzcyBmbGFnIHRvIHJlcG9ydCByZXF1ZXN0IGFuZCByZXNwb25zZSBwcm9ncmVzcy5cclxuICAgICAqL1xyXG4gICAgcHVibGljIGFkZENvbW1lbnQocXVldWVJZDogc3RyaW5nLCBjb250ZW50SWQ6IHN0cmluZywgYm9keT86IENvbW1lbnRJbnB1dCwgb2JzZXJ2ZT86ICdib2R5JywgcmVwb3J0UHJvZ3Jlc3M/OiBib29sZWFuKTogT2JzZXJ2YWJsZTxDb21tZW50PjtcclxuICAgIHB1YmxpYyBhZGRDb21tZW50KHF1ZXVlSWQ6IHN0cmluZywgY29udGVudElkOiBzdHJpbmcsIGJvZHk/OiBDb21tZW50SW5wdXQsIG9ic2VydmU/OiAncmVzcG9uc2UnLCByZXBvcnRQcm9ncmVzcz86IGJvb2xlYW4pOiBPYnNlcnZhYmxlPEh0dHBSZXNwb25zZTxDb21tZW50Pj47XHJcbiAgICBwdWJsaWMgYWRkQ29tbWVudChxdWV1ZUlkOiBzdHJpbmcsIGNvbnRlbnRJZDogc3RyaW5nLCBib2R5PzogQ29tbWVudElucHV0LCBvYnNlcnZlPzogJ2V2ZW50cycsIHJlcG9ydFByb2dyZXNzPzogYm9vbGVhbik6IE9ic2VydmFibGU8SHR0cEV2ZW50PENvbW1lbnQ+PjtcclxuICAgIHB1YmxpYyBhZGRDb21tZW50KHF1ZXVlSWQ6IHN0cmluZywgY29udGVudElkOiBzdHJpbmcsIGJvZHk/OiBDb21tZW50SW5wdXQsIG9ic2VydmU6IGFueSA9ICdib2R5JywgcmVwb3J0UHJvZ3Jlc3M6IGJvb2xlYW4gPSBmYWxzZSApOiBPYnNlcnZhYmxlPGFueT4ge1xyXG5cclxuICAgICAgICBpZiAocXVldWVJZCA9PT0gbnVsbCB8fCBxdWV1ZUlkID09PSB1bmRlZmluZWQpIHtcclxuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdSZXF1aXJlZCBwYXJhbWV0ZXIgcXVldWVJZCB3YXMgbnVsbCBvciB1bmRlZmluZWQgd2hlbiBjYWxsaW5nIGFkZENvbW1lbnQuJyk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBpZiAoY29udGVudElkID09PSBudWxsIHx8IGNvbnRlbnRJZCA9PT0gdW5kZWZpbmVkKSB7XHJcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcignUmVxdWlyZWQgcGFyYW1ldGVyIGNvbnRlbnRJZCB3YXMgbnVsbCBvciB1bmRlZmluZWQgd2hlbiBjYWxsaW5nIGFkZENvbW1lbnQuJyk7XHJcbiAgICAgICAgfVxyXG5cclxuXHJcbiAgICAgICAgbGV0IGhlYWRlcnMgPSB0aGlzLmRlZmF1bHRIZWFkZXJzO1xyXG5cclxuICAgICAgICAvLyB0byBkZXRlcm1pbmUgdGhlIEFjY2VwdCBoZWFkZXJcclxuICAgICAgICBsZXQgaHR0cEhlYWRlckFjY2VwdHM6IHN0cmluZ1tdID0gW1xyXG4gICAgICAgICAgICAnYXBwbGljYXRpb24vanNvbidcclxuICAgICAgICBdO1xyXG4gICAgICAgIGNvbnN0IGh0dHBIZWFkZXJBY2NlcHRTZWxlY3RlZDogc3RyaW5nIHwgdW5kZWZpbmVkID0gdGhpcy5jb25maWd1cmF0aW9uLnNlbGVjdEhlYWRlckFjY2VwdChodHRwSGVhZGVyQWNjZXB0cyk7XHJcbiAgICAgICAgaWYgKGh0dHBIZWFkZXJBY2NlcHRTZWxlY3RlZCAhPSB1bmRlZmluZWQpIHtcclxuICAgICAgICAgICAgaGVhZGVycyA9IGhlYWRlcnMuc2V0KCdBY2NlcHQnLCBodHRwSGVhZGVyQWNjZXB0U2VsZWN0ZWQpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLy8gdG8gZGV0ZXJtaW5lIHRoZSBDb250ZW50LVR5cGUgaGVhZGVyXHJcbiAgICAgICAgY29uc3QgY29uc3VtZXM6IHN0cmluZ1tdID0gW1xyXG4gICAgICAgICAgICAnYXBwbGljYXRpb24vanNvbidcclxuICAgICAgICBdO1xyXG4gICAgICAgIGNvbnN0IGh0dHBDb250ZW50VHlwZVNlbGVjdGVkOiBzdHJpbmcgfCB1bmRlZmluZWQgPSB0aGlzLmNvbmZpZ3VyYXRpb24uc2VsZWN0SGVhZGVyQ29udGVudFR5cGUoY29uc3VtZXMpO1xyXG4gICAgICAgIGlmIChodHRwQ29udGVudFR5cGVTZWxlY3RlZCAhPSB1bmRlZmluZWQpIHtcclxuICAgICAgICAgICAgaGVhZGVycyA9IGhlYWRlcnMuc2V0KCdDb250ZW50LVR5cGUnLCBodHRwQ29udGVudFR5cGVTZWxlY3RlZCk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICByZXR1cm4gdGhpcy5odHRwQ2xpZW50LnJlcXVlc3Q8Q29tbWVudD4oJ3Bvc3QnLGAke3RoaXMuYmFzZVBhdGh9L2luYm94L3F1ZXVlLyR7ZW5jb2RlVVJJQ29tcG9uZW50KFN0cmluZyhxdWV1ZUlkKSl9L2l0ZW1zLyR7ZW5jb2RlVVJJQ29tcG9uZW50KFN0cmluZyhjb250ZW50SWQpKX0vY29tbWVudHNgLFxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICBib2R5OiBib2R5LFxyXG4gICAgICAgICAgICAgICAgd2l0aENyZWRlbnRpYWxzOiB0aGlzLmNvbmZpZ3VyYXRpb24ud2l0aENyZWRlbnRpYWxzLFxyXG4gICAgICAgICAgICAgICAgaGVhZGVyczogaGVhZGVycyxcclxuICAgICAgICAgICAgICAgIG9ic2VydmU6IG9ic2VydmUsXHJcbiAgICAgICAgICAgICAgICByZXBvcnRQcm9ncmVzczogcmVwb3J0UHJvZ3Jlc3NcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICk7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBBZGQgZXhhbXBsZXMgb2YgdGV4dCB0byBiZSByZXZpZXdlZFxyXG4gICAgICogQWRkIGFuIGV4YW1wbGUgb2Ygc2hvcnQgdGV4dCBmb3IgUXVhbGl0eSBDb250cm9sLiAgVGhpcyB3aWxsIGxhdGVyIGJlIHVzZWQgZm9yICAtIFJlZ3Jlc3Npb24gVGVzdHMgfCBPbmNlIHlvdSBtYXJrIGFuIGl0ZW0gYXMgd3JvbmcgYW5kIGl0IGlzIGZpeGVkIHlvdSB3aWxsIHdhbnQgdG8gYmUgYWJsZSB0byBydW4gaXQgdGhyb3VnaCB0aGUgZmlsdGVyIGFnYWluIHRvIGVuc3VyZSB0aGUgZXJyb3JzIGFyZSBub3QgcmVwcm9kdWNlZCBieSBjcmVhdGluZyBmdXR1cmUgcnVsZXMuIC0gRXhhbXBsZXMgfCBXaGVuIHJldmlld2luZyB0aGluZ3MgbGlrZSBzcGVsbGluZyBtaXN0YWtlcyBvciBydWxlcyBpdCBtYWtlcyBhIGh1Z2UgZGlmZmVyZW5jZSB0byBsb29rIGF0IGhvdyB3b3JkcyBhcmUgcmVhbGx5IHVzZWQuICBGb3IgaW5zdGFuY2Ugb25lIG1pZ2h0IHRoaW5rIHRoYXQgXFwmcXVvdDttYWRlIG91dFxcJnF1b3Q7IGlzIHNleHVhbCB0aWxsIHRoZXkgc2VlIHRoZSBleGFtcGxlIFxcJnF1b3Q7bWFkZSBvdXQgb2YgcGxhc3RpY1xcJnF1b3Q7IC0gVHJhaW5pbmcgQUkgfCBXZSBjYW4gaW1wcm92ZSB0aGUgZmlsdGVyIGluIHRoZSBmdXR1cmUgYnkgdHJhaW5pbmcgQUkgdG8gcHJlZGljdCB0aGUgcmlza3MgYW5kIGxhYmVscyB5b3UgcHJvdmlkZSBhbmQgaW4gc28gZG9pbmcgY29tYmluZSBhIHJ1bGVzIGJhc2VkIGFwcHJvYWNoIHlvdSBjYW4gY29udHJvbCB3aXRoIHRoZSBmdXp6eSBtYXRjaGluZyBvZiBBSSB0byBmaW5kIHNpbWlsYXIgdGhpbmdzLiBcclxuICAgICAqIEBwYXJhbSBib2R5IFxyXG4gICAgICogQHBhcmFtIHVwZGF0ZURhdGEgSWYgdGhlIGl0ZW0gYWxyZWFkeSBleGlzdHMgc2hvdWxkIHdlIHVwZGF0ZSB0aGUgdmFsdWVzIG9mIHRoZSBib2R5IGVsZW1lbnRcclxuICAgICAqIEBwYXJhbSBvYnNlcnZlIHNldCB3aGV0aGVyIG9yIG5vdCB0byByZXR1cm4gdGhlIGRhdGEgT2JzZXJ2YWJsZSBhcyB0aGUgYm9keSwgcmVzcG9uc2Ugb3IgZXZlbnRzLiBkZWZhdWx0cyB0byByZXR1cm5pbmcgdGhlIGJvZHkuXHJcbiAgICAgKiBAcGFyYW0gcmVwb3J0UHJvZ3Jlc3MgZmxhZyB0byByZXBvcnQgcmVxdWVzdCBhbmQgcmVzcG9uc2UgcHJvZ3Jlc3MuXHJcbiAgICAgKi9cclxuICAgIHB1YmxpYyBhZGRFeGFtcGxlcyhib2R5PzogQXJyYXk8RXhhbXBsZUlucHV0PiwgdXBkYXRlRGF0YT86IGJvb2xlYW4sIG9ic2VydmU/OiAnYm9keScsIHJlcG9ydFByb2dyZXNzPzogYm9vbGVhbik6IE9ic2VydmFibGU8SW5saW5lUmVzcG9uc2UyMDE+O1xyXG4gICAgcHVibGljIGFkZEV4YW1wbGVzKGJvZHk/OiBBcnJheTxFeGFtcGxlSW5wdXQ+LCB1cGRhdGVEYXRhPzogYm9vbGVhbiwgb2JzZXJ2ZT86ICdyZXNwb25zZScsIHJlcG9ydFByb2dyZXNzPzogYm9vbGVhbik6IE9ic2VydmFibGU8SHR0cFJlc3BvbnNlPElubGluZVJlc3BvbnNlMjAxPj47XHJcbiAgICBwdWJsaWMgYWRkRXhhbXBsZXMoYm9keT86IEFycmF5PEV4YW1wbGVJbnB1dD4sIHVwZGF0ZURhdGE/OiBib29sZWFuLCBvYnNlcnZlPzogJ2V2ZW50cycsIHJlcG9ydFByb2dyZXNzPzogYm9vbGVhbik6IE9ic2VydmFibGU8SHR0cEV2ZW50PElubGluZVJlc3BvbnNlMjAxPj47XHJcbiAgICBwdWJsaWMgYWRkRXhhbXBsZXMoYm9keT86IEFycmF5PEV4YW1wbGVJbnB1dD4sIHVwZGF0ZURhdGE/OiBib29sZWFuLCBvYnNlcnZlOiBhbnkgPSAnYm9keScsIHJlcG9ydFByb2dyZXNzOiBib29sZWFuID0gZmFsc2UgKTogT2JzZXJ2YWJsZTxhbnk+IHtcclxuXHJcblxyXG5cclxuICAgICAgICBsZXQgcXVlcnlQYXJhbWV0ZXJzID0gbmV3IEh0dHBQYXJhbXMoe2VuY29kZXI6IG5ldyBDdXN0b21IdHRwVXJsRW5jb2RpbmdDb2RlYygpfSk7XHJcbiAgICAgICAgaWYgKHVwZGF0ZURhdGEgIT09IHVuZGVmaW5lZCAmJiB1cGRhdGVEYXRhICE9PSBudWxsKSB7XHJcbiAgICAgICAgICAgIHF1ZXJ5UGFyYW1ldGVycyA9IHF1ZXJ5UGFyYW1ldGVycy5zZXQoJ3VwZGF0ZURhdGEnLCA8YW55PnVwZGF0ZURhdGEpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgbGV0IGhlYWRlcnMgPSB0aGlzLmRlZmF1bHRIZWFkZXJzO1xyXG5cclxuICAgICAgICAvLyB0byBkZXRlcm1pbmUgdGhlIEFjY2VwdCBoZWFkZXJcclxuICAgICAgICBsZXQgaHR0cEhlYWRlckFjY2VwdHM6IHN0cmluZ1tdID0gW1xyXG4gICAgICAgICAgICAnYXBwbGljYXRpb24vanNvbidcclxuICAgICAgICBdO1xyXG4gICAgICAgIGNvbnN0IGh0dHBIZWFkZXJBY2NlcHRTZWxlY3RlZDogc3RyaW5nIHwgdW5kZWZpbmVkID0gdGhpcy5jb25maWd1cmF0aW9uLnNlbGVjdEhlYWRlckFjY2VwdChodHRwSGVhZGVyQWNjZXB0cyk7XHJcbiAgICAgICAgaWYgKGh0dHBIZWFkZXJBY2NlcHRTZWxlY3RlZCAhPSB1bmRlZmluZWQpIHtcclxuICAgICAgICAgICAgaGVhZGVycyA9IGhlYWRlcnMuc2V0KCdBY2NlcHQnLCBodHRwSGVhZGVyQWNjZXB0U2VsZWN0ZWQpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLy8gdG8gZGV0ZXJtaW5lIHRoZSBDb250ZW50LVR5cGUgaGVhZGVyXHJcbiAgICAgICAgY29uc3QgY29uc3VtZXM6IHN0cmluZ1tdID0gW1xyXG4gICAgICAgICAgICAnYXBwbGljYXRpb24vanNvbidcclxuICAgICAgICBdO1xyXG4gICAgICAgIGNvbnN0IGh0dHBDb250ZW50VHlwZVNlbGVjdGVkOiBzdHJpbmcgfCB1bmRlZmluZWQgPSB0aGlzLmNvbmZpZ3VyYXRpb24uc2VsZWN0SGVhZGVyQ29udGVudFR5cGUoY29uc3VtZXMpO1xyXG4gICAgICAgIGlmIChodHRwQ29udGVudFR5cGVTZWxlY3RlZCAhPSB1bmRlZmluZWQpIHtcclxuICAgICAgICAgICAgaGVhZGVycyA9IGhlYWRlcnMuc2V0KCdDb250ZW50LVR5cGUnLCBodHRwQ29udGVudFR5cGVTZWxlY3RlZCk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICByZXR1cm4gdGhpcy5odHRwQ2xpZW50LnJlcXVlc3Q8SW5saW5lUmVzcG9uc2UyMDE+KCdwb3N0JyxgJHt0aGlzLmJhc2VQYXRofS9pbmJveC9xdWV1ZS9leGFtcGxlcy9pdGVtc2AsXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIGJvZHk6IGJvZHksXHJcbiAgICAgICAgICAgICAgICBwYXJhbXM6IHF1ZXJ5UGFyYW1ldGVycyxcclxuICAgICAgICAgICAgICAgIHdpdGhDcmVkZW50aWFsczogdGhpcy5jb25maWd1cmF0aW9uLndpdGhDcmVkZW50aWFscyxcclxuICAgICAgICAgICAgICAgIGhlYWRlcnM6IGhlYWRlcnMsXHJcbiAgICAgICAgICAgICAgICBvYnNlcnZlOiBvYnNlcnZlLFxyXG4gICAgICAgICAgICAgICAgcmVwb3J0UHJvZ3Jlc3M6IHJlcG9ydFByb2dyZXNzXHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICApO1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogQWRkIHJ1bGVzIHRvIGJlIGF1ZGl0ZWRcclxuICAgICAqIE91ciBwcmltYXJ5IHB1cnBvc2UgaXMgYXMgYSBjb250ZW50IGZpbHRlci4gIFRvIGFjaGlldmUgdGhpcyB5b3UgY2FuIG1hbnVhbGx5IGFkZCB3b3JkIHBhdHRlcm5zIHRvIHRoZSBzeXN0ZW0uICBCdXQgaG93IGRvIHlvdSBrbm93IGlmIGl0IGlzIGNyZWF0aW5nIGVycm9ycyBsaWtlIGZhbHNlIHBvc2l0aXZlcyAgVG8gaGFuZGxlIHRoYXQgd2UgY291bnQgaG93IG1hbnkgdGltZXMgdGhhdCBydWxlIGlzIHVzZWQgaW4geW91ciBuZXcgY29udGVudCBhbmQgb24ga2V5IHBvaW50cyBsaWtlIHdoZW4gaXQgaXMgc2FpZCAxMDAgdGltZXMgd2UgYnJpbmcgaXQgdXAgaGVyZSBmb3IgcmV2aWV3LiAgSW4gdGhpcyB3YXkgeW91IGtub3cgeW91IGFyZSB3b3JraW5nIG9uIHRoZSBtb3N0IGltcGFjdGZ1bCB0aGluZ3MgZmlyc3QuICBJZiB0aGUgcnVsZSBoYXMgYWxyZWFkeSBiZWVuIGFkZGVkIGl0IHdpbGwgaW5jcmVhc2UgaXQmI3gyNztzIHByaW9yaXR5LiAgTm90ZSB0aGF0IHRoZSByZXF1ZXN0IGFjY2VwdHMgYW4gYXJyYXkgb2YgbWluaW11bSAxIHRvIG1heGltdW0gMTAwIGl0ZW1zIHNvIHlvdSBjYW4gZG8gYSBidWxrIGluc2VydC4gXHJcbiAgICAgKiBAcGFyYW0gYm9keSBcclxuICAgICAqIEBwYXJhbSB1cGRhdGVEYXRhIElmIHRoZSBpdGVtIGFscmVhZHkgZXhpc3RzIHNob3VsZCB3ZSB1cGRhdGUgdGhlIHZhbHVlcyBvZiB0aGUgYm9keSBlbGVtZW50XHJcbiAgICAgKiBAcGFyYW0gb2JzZXJ2ZSBzZXQgd2hldGhlciBvciBub3QgdG8gcmV0dXJuIHRoZSBkYXRhIE9ic2VydmFibGUgYXMgdGhlIGJvZHksIHJlc3BvbnNlIG9yIGV2ZW50cy4gZGVmYXVsdHMgdG8gcmV0dXJuaW5nIHRoZSBib2R5LlxyXG4gICAgICogQHBhcmFtIHJlcG9ydFByb2dyZXNzIGZsYWcgdG8gcmVwb3J0IHJlcXVlc3QgYW5kIHJlc3BvbnNlIHByb2dyZXNzLlxyXG4gICAgICovXHJcbiAgICBwdWJsaWMgYWRkUnVsZUF1ZGl0SXRlbXMoYm9keT86IEFycmF5PFJ1bGVBdWRpdElucHV0PiwgdXBkYXRlRGF0YT86IGJvb2xlYW4sIG9ic2VydmU/OiAnYm9keScsIHJlcG9ydFByb2dyZXNzPzogYm9vbGVhbik6IE9ic2VydmFibGU8SW5saW5lUmVzcG9uc2UyMDE+O1xyXG4gICAgcHVibGljIGFkZFJ1bGVBdWRpdEl0ZW1zKGJvZHk/OiBBcnJheTxSdWxlQXVkaXRJbnB1dD4sIHVwZGF0ZURhdGE/OiBib29sZWFuLCBvYnNlcnZlPzogJ3Jlc3BvbnNlJywgcmVwb3J0UHJvZ3Jlc3M/OiBib29sZWFuKTogT2JzZXJ2YWJsZTxIdHRwUmVzcG9uc2U8SW5saW5lUmVzcG9uc2UyMDE+PjtcclxuICAgIHB1YmxpYyBhZGRSdWxlQXVkaXRJdGVtcyhib2R5PzogQXJyYXk8UnVsZUF1ZGl0SW5wdXQ+LCB1cGRhdGVEYXRhPzogYm9vbGVhbiwgb2JzZXJ2ZT86ICdldmVudHMnLCByZXBvcnRQcm9ncmVzcz86IGJvb2xlYW4pOiBPYnNlcnZhYmxlPEh0dHBFdmVudDxJbmxpbmVSZXNwb25zZTIwMT4+O1xyXG4gICAgcHVibGljIGFkZFJ1bGVBdWRpdEl0ZW1zKGJvZHk/OiBBcnJheTxSdWxlQXVkaXRJbnB1dD4sIHVwZGF0ZURhdGE/OiBib29sZWFuLCBvYnNlcnZlOiBhbnkgPSAnYm9keScsIHJlcG9ydFByb2dyZXNzOiBib29sZWFuID0gZmFsc2UgKTogT2JzZXJ2YWJsZTxhbnk+IHtcclxuXHJcblxyXG5cclxuICAgICAgICBsZXQgcXVlcnlQYXJhbWV0ZXJzID0gbmV3IEh0dHBQYXJhbXMoe2VuY29kZXI6IG5ldyBDdXN0b21IdHRwVXJsRW5jb2RpbmdDb2RlYygpfSk7XHJcbiAgICAgICAgaWYgKHVwZGF0ZURhdGEgIT09IHVuZGVmaW5lZCAmJiB1cGRhdGVEYXRhICE9PSBudWxsKSB7XHJcbiAgICAgICAgICAgIHF1ZXJ5UGFyYW1ldGVycyA9IHF1ZXJ5UGFyYW1ldGVycy5zZXQoJ3VwZGF0ZURhdGEnLCA8YW55PnVwZGF0ZURhdGEpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgbGV0IGhlYWRlcnMgPSB0aGlzLmRlZmF1bHRIZWFkZXJzO1xyXG5cclxuICAgICAgICAvLyB0byBkZXRlcm1pbmUgdGhlIEFjY2VwdCBoZWFkZXJcclxuICAgICAgICBsZXQgaHR0cEhlYWRlckFjY2VwdHM6IHN0cmluZ1tdID0gW1xyXG4gICAgICAgICAgICAnYXBwbGljYXRpb24vanNvbidcclxuICAgICAgICBdO1xyXG4gICAgICAgIGNvbnN0IGh0dHBIZWFkZXJBY2NlcHRTZWxlY3RlZDogc3RyaW5nIHwgdW5kZWZpbmVkID0gdGhpcy5jb25maWd1cmF0aW9uLnNlbGVjdEhlYWRlckFjY2VwdChodHRwSGVhZGVyQWNjZXB0cyk7XHJcbiAgICAgICAgaWYgKGh0dHBIZWFkZXJBY2NlcHRTZWxlY3RlZCAhPSB1bmRlZmluZWQpIHtcclxuICAgICAgICAgICAgaGVhZGVycyA9IGhlYWRlcnMuc2V0KCdBY2NlcHQnLCBodHRwSGVhZGVyQWNjZXB0U2VsZWN0ZWQpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLy8gdG8gZGV0ZXJtaW5lIHRoZSBDb250ZW50LVR5cGUgaGVhZGVyXHJcbiAgICAgICAgY29uc3QgY29uc3VtZXM6IHN0cmluZ1tdID0gW1xyXG4gICAgICAgICAgICAnYXBwbGljYXRpb24vanNvbidcclxuICAgICAgICBdO1xyXG4gICAgICAgIGNvbnN0IGh0dHBDb250ZW50VHlwZVNlbGVjdGVkOiBzdHJpbmcgfCB1bmRlZmluZWQgPSB0aGlzLmNvbmZpZ3VyYXRpb24uc2VsZWN0SGVhZGVyQ29udGVudFR5cGUoY29uc3VtZXMpO1xyXG4gICAgICAgIGlmIChodHRwQ29udGVudFR5cGVTZWxlY3RlZCAhPSB1bmRlZmluZWQpIHtcclxuICAgICAgICAgICAgaGVhZGVycyA9IGhlYWRlcnMuc2V0KCdDb250ZW50LVR5cGUnLCBodHRwQ29udGVudFR5cGVTZWxlY3RlZCk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICByZXR1cm4gdGhpcy5odHRwQ2xpZW50LnJlcXVlc3Q8SW5saW5lUmVzcG9uc2UyMDE+KCdwb3N0JyxgJHt0aGlzLmJhc2VQYXRofS9pbmJveC9xdWV1ZS9ydWxlc0F1ZGl0L2l0ZW1zYCxcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgYm9keTogYm9keSxcclxuICAgICAgICAgICAgICAgIHBhcmFtczogcXVlcnlQYXJhbWV0ZXJzLFxyXG4gICAgICAgICAgICAgICAgd2l0aENyZWRlbnRpYWxzOiB0aGlzLmNvbmZpZ3VyYXRpb24ud2l0aENyZWRlbnRpYWxzLFxyXG4gICAgICAgICAgICAgICAgaGVhZGVyczogaGVhZGVycyxcclxuICAgICAgICAgICAgICAgIG9ic2VydmU6IG9ic2VydmUsXHJcbiAgICAgICAgICAgICAgICByZXBvcnRQcm9ncmVzczogcmVwb3J0UHJvZ3Jlc3NcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICk7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBBZGQgYSBjb21tb24gc3BlbGxpbmcgbWlzdGFrZSBmb3IgcmV2aWV3XHJcbiAgICAgKiBPbmUgb2YgdGhlIGdyZWF0ZXN0IGltcGFjdHMgZWFybHkgb24gd2hlbiB5b3UgdXNlIHRoZSBzeXN0ZW0gaXMgc3BlbGxpbmcgbWlzdGFrZXMsIG1vc3Qgb2Z0ZW4gd29yZHMgdW5pcXVlIHRvIHlvdXIgcHJvZHVjdC4gIFdlIGF1dG9tYXRpY2FsbHkgY291bnQgd2hpY2ggd29yZHMgYXJlIHVzZWQgYW5kIGhvdyBvZnRlbi4gIElmIGl0IGlzIGZyZXF1ZW50bHkgbWlzc3BlbGxlZCB3ZSB3aWxsIGVzY2FsYXRlIGl0IGhlcmUuIFxyXG4gICAgICogQHBhcmFtIGJvZHkgXHJcbiAgICAgKiBAcGFyYW0gdXBkYXRlRGF0YSBJZiB0aGUgaXRlbSBhbHJlYWR5IGV4aXN0cyBzaG91bGQgd2UgdXBkYXRlIHRoZSB2YWx1ZXMgb2YgdGhlIGJvZHkgZWxlbWVudFxyXG4gICAgICogQHBhcmFtIG9ic2VydmUgc2V0IHdoZXRoZXIgb3Igbm90IHRvIHJldHVybiB0aGUgZGF0YSBPYnNlcnZhYmxlIGFzIHRoZSBib2R5LCByZXNwb25zZSBvciBldmVudHMuIGRlZmF1bHRzIHRvIHJldHVybmluZyB0aGUgYm9keS5cclxuICAgICAqIEBwYXJhbSByZXBvcnRQcm9ncmVzcyBmbGFnIHRvIHJlcG9ydCByZXF1ZXN0IGFuZCByZXNwb25zZSBwcm9ncmVzcy5cclxuICAgICAqL1xyXG4gICAgcHVibGljIGFkZFNwZWxsaW5nKGJvZHk/OiBBcnJheTxTcGVsbGluZ01pc3Rha2VJbnB1dD4sIHVwZGF0ZURhdGE/OiBib29sZWFuLCBvYnNlcnZlPzogJ2JvZHknLCByZXBvcnRQcm9ncmVzcz86IGJvb2xlYW4pOiBPYnNlcnZhYmxlPElubGluZVJlc3BvbnNlMjAxPjtcclxuICAgIHB1YmxpYyBhZGRTcGVsbGluZyhib2R5PzogQXJyYXk8U3BlbGxpbmdNaXN0YWtlSW5wdXQ+LCB1cGRhdGVEYXRhPzogYm9vbGVhbiwgb2JzZXJ2ZT86ICdyZXNwb25zZScsIHJlcG9ydFByb2dyZXNzPzogYm9vbGVhbik6IE9ic2VydmFibGU8SHR0cFJlc3BvbnNlPElubGluZVJlc3BvbnNlMjAxPj47XHJcbiAgICBwdWJsaWMgYWRkU3BlbGxpbmcoYm9keT86IEFycmF5PFNwZWxsaW5nTWlzdGFrZUlucHV0PiwgdXBkYXRlRGF0YT86IGJvb2xlYW4sIG9ic2VydmU/OiAnZXZlbnRzJywgcmVwb3J0UHJvZ3Jlc3M/OiBib29sZWFuKTogT2JzZXJ2YWJsZTxIdHRwRXZlbnQ8SW5saW5lUmVzcG9uc2UyMDE+PjtcclxuICAgIHB1YmxpYyBhZGRTcGVsbGluZyhib2R5PzogQXJyYXk8U3BlbGxpbmdNaXN0YWtlSW5wdXQ+LCB1cGRhdGVEYXRhPzogYm9vbGVhbiwgb2JzZXJ2ZTogYW55ID0gJ2JvZHknLCByZXBvcnRQcm9ncmVzczogYm9vbGVhbiA9IGZhbHNlICk6IE9ic2VydmFibGU8YW55PiB7XHJcblxyXG5cclxuXHJcbiAgICAgICAgbGV0IHF1ZXJ5UGFyYW1ldGVycyA9IG5ldyBIdHRwUGFyYW1zKHtlbmNvZGVyOiBuZXcgQ3VzdG9tSHR0cFVybEVuY29kaW5nQ29kZWMoKX0pO1xyXG4gICAgICAgIGlmICh1cGRhdGVEYXRhICE9PSB1bmRlZmluZWQgJiYgdXBkYXRlRGF0YSAhPT0gbnVsbCkge1xyXG4gICAgICAgICAgICBxdWVyeVBhcmFtZXRlcnMgPSBxdWVyeVBhcmFtZXRlcnMuc2V0KCd1cGRhdGVEYXRhJywgPGFueT51cGRhdGVEYXRhKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGxldCBoZWFkZXJzID0gdGhpcy5kZWZhdWx0SGVhZGVycztcclxuXHJcbiAgICAgICAgLy8gdG8gZGV0ZXJtaW5lIHRoZSBBY2NlcHQgaGVhZGVyXHJcbiAgICAgICAgbGV0IGh0dHBIZWFkZXJBY2NlcHRzOiBzdHJpbmdbXSA9IFtcclxuICAgICAgICAgICAgJ2FwcGxpY2F0aW9uL2pzb24nXHJcbiAgICAgICAgXTtcclxuICAgICAgICBjb25zdCBodHRwSGVhZGVyQWNjZXB0U2VsZWN0ZWQ6IHN0cmluZyB8IHVuZGVmaW5lZCA9IHRoaXMuY29uZmlndXJhdGlvbi5zZWxlY3RIZWFkZXJBY2NlcHQoaHR0cEhlYWRlckFjY2VwdHMpO1xyXG4gICAgICAgIGlmIChodHRwSGVhZGVyQWNjZXB0U2VsZWN0ZWQgIT0gdW5kZWZpbmVkKSB7XHJcbiAgICAgICAgICAgIGhlYWRlcnMgPSBoZWFkZXJzLnNldCgnQWNjZXB0JywgaHR0cEhlYWRlckFjY2VwdFNlbGVjdGVkKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8vIHRvIGRldGVybWluZSB0aGUgQ29udGVudC1UeXBlIGhlYWRlclxyXG4gICAgICAgIGNvbnN0IGNvbnN1bWVzOiBzdHJpbmdbXSA9IFtcclxuICAgICAgICAgICAgJ2FwcGxpY2F0aW9uL2pzb24nXHJcbiAgICAgICAgXTtcclxuICAgICAgICBjb25zdCBodHRwQ29udGVudFR5cGVTZWxlY3RlZDogc3RyaW5nIHwgdW5kZWZpbmVkID0gdGhpcy5jb25maWd1cmF0aW9uLnNlbGVjdEhlYWRlckNvbnRlbnRUeXBlKGNvbnN1bWVzKTtcclxuICAgICAgICBpZiAoaHR0cENvbnRlbnRUeXBlU2VsZWN0ZWQgIT0gdW5kZWZpbmVkKSB7XHJcbiAgICAgICAgICAgIGhlYWRlcnMgPSBoZWFkZXJzLnNldCgnQ29udGVudC1UeXBlJywgaHR0cENvbnRlbnRUeXBlU2VsZWN0ZWQpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcmV0dXJuIHRoaXMuaHR0cENsaWVudC5yZXF1ZXN0PElubGluZVJlc3BvbnNlMjAxPigncG9zdCcsYCR7dGhpcy5iYXNlUGF0aH0vaW5ib3gvcXVldWUvc3BlbGxpbmcvaXRlbXNgLFxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICBib2R5OiBib2R5LFxyXG4gICAgICAgICAgICAgICAgcGFyYW1zOiBxdWVyeVBhcmFtZXRlcnMsXHJcbiAgICAgICAgICAgICAgICB3aXRoQ3JlZGVudGlhbHM6IHRoaXMuY29uZmlndXJhdGlvbi53aXRoQ3JlZGVudGlhbHMsXHJcbiAgICAgICAgICAgICAgICBoZWFkZXJzOiBoZWFkZXJzLFxyXG4gICAgICAgICAgICAgICAgb2JzZXJ2ZTogb2JzZXJ2ZSxcclxuICAgICAgICAgICAgICAgIHJlcG9ydFByb2dyZXNzOiByZXBvcnRQcm9ncmVzc1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgKTtcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIEFkZCBhIHRhc2sgZm9yIHRoZSB0ZWFtIHRvIGRvIHdvcmsgb25cclxuICAgICAqIFlvdSBjYW4gY3JlYXRlIGEgdGFzayB0byB3b3JrIG9uLiAgRm9yIGV4YW1wbGUgc3BsaXQgYWxsIHRoZSBzZXh0aW5nIHdvcmRzIGludG8gc2V4dWFsIGJvZHkgcGFydHMgYW5kIHNleHVhbCBhY3Rpdml0eS4gXHJcbiAgICAgKiBAcGFyYW0gYm9keSBcclxuICAgICAqIEBwYXJhbSB1cGRhdGVEYXRhIElmIHRoZSBpdGVtIGFscmVhZHkgZXhpc3RzIHNob3VsZCB3ZSB1cGRhdGUgdGhlIHZhbHVlcyBvZiB0aGUgYm9keSBlbGVtZW50XHJcbiAgICAgKiBAcGFyYW0gb2JzZXJ2ZSBzZXQgd2hldGhlciBvciBub3QgdG8gcmV0dXJuIHRoZSBkYXRhIE9ic2VydmFibGUgYXMgdGhlIGJvZHksIHJlc3BvbnNlIG9yIGV2ZW50cy4gZGVmYXVsdHMgdG8gcmV0dXJuaW5nIHRoZSBib2R5LlxyXG4gICAgICogQHBhcmFtIHJlcG9ydFByb2dyZXNzIGZsYWcgdG8gcmVwb3J0IHJlcXVlc3QgYW5kIHJlc3BvbnNlIHByb2dyZXNzLlxyXG4gICAgICovXHJcbiAgICBwdWJsaWMgYWRkVGFza0l0ZW1zKGJvZHk/OiBBcnJheTxUYXNrSW5wdXQ+LCB1cGRhdGVEYXRhPzogYm9vbGVhbiwgb2JzZXJ2ZT86ICdib2R5JywgcmVwb3J0UHJvZ3Jlc3M/OiBib29sZWFuKTogT2JzZXJ2YWJsZTxJbmxpbmVSZXNwb25zZTIwMT47XHJcbiAgICBwdWJsaWMgYWRkVGFza0l0ZW1zKGJvZHk/OiBBcnJheTxUYXNrSW5wdXQ+LCB1cGRhdGVEYXRhPzogYm9vbGVhbiwgb2JzZXJ2ZT86ICdyZXNwb25zZScsIHJlcG9ydFByb2dyZXNzPzogYm9vbGVhbik6IE9ic2VydmFibGU8SHR0cFJlc3BvbnNlPElubGluZVJlc3BvbnNlMjAxPj47XHJcbiAgICBwdWJsaWMgYWRkVGFza0l0ZW1zKGJvZHk/OiBBcnJheTxUYXNrSW5wdXQ+LCB1cGRhdGVEYXRhPzogYm9vbGVhbiwgb2JzZXJ2ZT86ICdldmVudHMnLCByZXBvcnRQcm9ncmVzcz86IGJvb2xlYW4pOiBPYnNlcnZhYmxlPEh0dHBFdmVudDxJbmxpbmVSZXNwb25zZTIwMT4+O1xyXG4gICAgcHVibGljIGFkZFRhc2tJdGVtcyhib2R5PzogQXJyYXk8VGFza0lucHV0PiwgdXBkYXRlRGF0YT86IGJvb2xlYW4sIG9ic2VydmU6IGFueSA9ICdib2R5JywgcmVwb3J0UHJvZ3Jlc3M6IGJvb2xlYW4gPSBmYWxzZSApOiBPYnNlcnZhYmxlPGFueT4ge1xyXG5cclxuXHJcblxyXG4gICAgICAgIGxldCBxdWVyeVBhcmFtZXRlcnMgPSBuZXcgSHR0cFBhcmFtcyh7ZW5jb2RlcjogbmV3IEN1c3RvbUh0dHBVcmxFbmNvZGluZ0NvZGVjKCl9KTtcclxuICAgICAgICBpZiAodXBkYXRlRGF0YSAhPT0gdW5kZWZpbmVkICYmIHVwZGF0ZURhdGEgIT09IG51bGwpIHtcclxuICAgICAgICAgICAgcXVlcnlQYXJhbWV0ZXJzID0gcXVlcnlQYXJhbWV0ZXJzLnNldCgndXBkYXRlRGF0YScsIDxhbnk+dXBkYXRlRGF0YSk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBsZXQgaGVhZGVycyA9IHRoaXMuZGVmYXVsdEhlYWRlcnM7XHJcblxyXG4gICAgICAgIC8vIHRvIGRldGVybWluZSB0aGUgQWNjZXB0IGhlYWRlclxyXG4gICAgICAgIGxldCBodHRwSGVhZGVyQWNjZXB0czogc3RyaW5nW10gPSBbXHJcbiAgICAgICAgICAgICdhcHBsaWNhdGlvbi9qc29uJ1xyXG4gICAgICAgIF07XHJcbiAgICAgICAgY29uc3QgaHR0cEhlYWRlckFjY2VwdFNlbGVjdGVkOiBzdHJpbmcgfCB1bmRlZmluZWQgPSB0aGlzLmNvbmZpZ3VyYXRpb24uc2VsZWN0SGVhZGVyQWNjZXB0KGh0dHBIZWFkZXJBY2NlcHRzKTtcclxuICAgICAgICBpZiAoaHR0cEhlYWRlckFjY2VwdFNlbGVjdGVkICE9IHVuZGVmaW5lZCkge1xyXG4gICAgICAgICAgICBoZWFkZXJzID0gaGVhZGVycy5zZXQoJ0FjY2VwdCcsIGh0dHBIZWFkZXJBY2NlcHRTZWxlY3RlZCk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvLyB0byBkZXRlcm1pbmUgdGhlIENvbnRlbnQtVHlwZSBoZWFkZXJcclxuICAgICAgICBjb25zdCBjb25zdW1lczogc3RyaW5nW10gPSBbXHJcbiAgICAgICAgICAgICdhcHBsaWNhdGlvbi9qc29uJ1xyXG4gICAgICAgIF07XHJcbiAgICAgICAgY29uc3QgaHR0cENvbnRlbnRUeXBlU2VsZWN0ZWQ6IHN0cmluZyB8IHVuZGVmaW5lZCA9IHRoaXMuY29uZmlndXJhdGlvbi5zZWxlY3RIZWFkZXJDb250ZW50VHlwZShjb25zdW1lcyk7XHJcbiAgICAgICAgaWYgKGh0dHBDb250ZW50VHlwZVNlbGVjdGVkICE9IHVuZGVmaW5lZCkge1xyXG4gICAgICAgICAgICBoZWFkZXJzID0gaGVhZGVycy5zZXQoJ0NvbnRlbnQtVHlwZScsIGh0dHBDb250ZW50VHlwZVNlbGVjdGVkKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHJldHVybiB0aGlzLmh0dHBDbGllbnQucmVxdWVzdDxJbmxpbmVSZXNwb25zZTIwMT4oJ3Bvc3QnLGAke3RoaXMuYmFzZVBhdGh9L2luYm94L3F1ZXVlL3Rhc2svaXRlbXNgLFxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICBib2R5OiBib2R5LFxyXG4gICAgICAgICAgICAgICAgcGFyYW1zOiBxdWVyeVBhcmFtZXRlcnMsXHJcbiAgICAgICAgICAgICAgICB3aXRoQ3JlZGVudGlhbHM6IHRoaXMuY29uZmlndXJhdGlvbi53aXRoQ3JlZGVudGlhbHMsXHJcbiAgICAgICAgICAgICAgICBoZWFkZXJzOiBoZWFkZXJzLFxyXG4gICAgICAgICAgICAgICAgb2JzZXJ2ZTogb2JzZXJ2ZSxcclxuICAgICAgICAgICAgICAgIHJlcG9ydFByb2dyZXNzOiByZXBvcnRQcm9ncmVzc1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgKTtcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIEFkZCB1c2VybmFtZXMgdG8gYmUgcmV2aWV3ZWRcclxuICAgICAqIEFkZCBhbiBleGFtcGxlIG9mIGEgdXNlcm5hbWUgZm9yIFF1YWxpdHkgQ29udHJvbC4gIFRoaXMgd2lsbCBsYXRlciBiZSB1c2VkIGZvciAgLSBSZWdyZXNzaW9uIFRlc3RzIHwgT25jZSB5b3UgbWFyayBhbiBpdGVtIGFzIHdyb25nIGFuZCBpdCBpcyBmaXhlZCB5b3Ugd2lsbCB3YW50IHRvIGJlIGFibGUgdG8gcnVuIGl0IHRocm91Z2ggdGhlIGZpbHRlciBhZ2FpbiB0byBlbnN1cmUgdGhlIGVycm9ycyBhcmUgbm90IHJlcHJvZHVjZWQgYnkgY3JlYXRpbmcgZnV0dXJlIHJ1bGVzLiAtIFRyYWluaW5nIEFJIHwgV2UgY2FuIGltcHJvdmUgdGhlIGZpbHRlciBpbiB0aGUgZnV0dXJlIGJ5IHRyYWluaW5nIEFJIHRvIHByZWRpY3QgdGhlIHJpc2tzIGFuZCBsYWJlbHMgeW91IHByb3ZpZGUgYW5kIGluIHNvIGRvaW5nIGNvbWJpbmUgYSBydWxlcyBiYXNlZCBhcHByb2FjaCB5b3UgY2FuIGNvbnRyb2wgd2l0aCB0aGUgZnV6enkgbWF0Y2hpbmcgb2YgQUkgdG8gZmluZCBzaW1pbGFyIHRoaW5ncy4gXHJcbiAgICAgKiBAcGFyYW0gYm9keSBcclxuICAgICAqIEBwYXJhbSB1cGRhdGVEYXRhIElmIHRoZSBpdGVtIGFscmVhZHkgZXhpc3RzIHNob3VsZCB3ZSB1cGRhdGUgdGhlIHZhbHVlcyBvZiB0aGUgYm9keSBlbGVtZW50XHJcbiAgICAgKiBAcGFyYW0gb2JzZXJ2ZSBzZXQgd2hldGhlciBvciBub3QgdG8gcmV0dXJuIHRoZSBkYXRhIE9ic2VydmFibGUgYXMgdGhlIGJvZHksIHJlc3BvbnNlIG9yIGV2ZW50cy4gZGVmYXVsdHMgdG8gcmV0dXJuaW5nIHRoZSBib2R5LlxyXG4gICAgICogQHBhcmFtIHJlcG9ydFByb2dyZXNzIGZsYWcgdG8gcmVwb3J0IHJlcXVlc3QgYW5kIHJlc3BvbnNlIHByb2dyZXNzLlxyXG4gICAgICovXHJcbiAgICBwdWJsaWMgYWRkVXNlcmFubWVzKGJvZHk/OiBBcnJheTxVc2VybmFtZUlucHV0PiwgdXBkYXRlRGF0YT86IGJvb2xlYW4sIG9ic2VydmU/OiAnYm9keScsIHJlcG9ydFByb2dyZXNzPzogYm9vbGVhbik6IE9ic2VydmFibGU8SW5saW5lUmVzcG9uc2UyMDE+O1xyXG4gICAgcHVibGljIGFkZFVzZXJhbm1lcyhib2R5PzogQXJyYXk8VXNlcm5hbWVJbnB1dD4sIHVwZGF0ZURhdGE/OiBib29sZWFuLCBvYnNlcnZlPzogJ3Jlc3BvbnNlJywgcmVwb3J0UHJvZ3Jlc3M/OiBib29sZWFuKTogT2JzZXJ2YWJsZTxIdHRwUmVzcG9uc2U8SW5saW5lUmVzcG9uc2UyMDE+PjtcclxuICAgIHB1YmxpYyBhZGRVc2VyYW5tZXMoYm9keT86IEFycmF5PFVzZXJuYW1lSW5wdXQ+LCB1cGRhdGVEYXRhPzogYm9vbGVhbiwgb2JzZXJ2ZT86ICdldmVudHMnLCByZXBvcnRQcm9ncmVzcz86IGJvb2xlYW4pOiBPYnNlcnZhYmxlPEh0dHBFdmVudDxJbmxpbmVSZXNwb25zZTIwMT4+O1xyXG4gICAgcHVibGljIGFkZFVzZXJhbm1lcyhib2R5PzogQXJyYXk8VXNlcm5hbWVJbnB1dD4sIHVwZGF0ZURhdGE/OiBib29sZWFuLCBvYnNlcnZlOiBhbnkgPSAnYm9keScsIHJlcG9ydFByb2dyZXNzOiBib29sZWFuID0gZmFsc2UgKTogT2JzZXJ2YWJsZTxhbnk+IHtcclxuXHJcblxyXG5cclxuICAgICAgICBsZXQgcXVlcnlQYXJhbWV0ZXJzID0gbmV3IEh0dHBQYXJhbXMoe2VuY29kZXI6IG5ldyBDdXN0b21IdHRwVXJsRW5jb2RpbmdDb2RlYygpfSk7XHJcbiAgICAgICAgaWYgKHVwZGF0ZURhdGEgIT09IHVuZGVmaW5lZCAmJiB1cGRhdGVEYXRhICE9PSBudWxsKSB7XHJcbiAgICAgICAgICAgIHF1ZXJ5UGFyYW1ldGVycyA9IHF1ZXJ5UGFyYW1ldGVycy5zZXQoJ3VwZGF0ZURhdGEnLCA8YW55PnVwZGF0ZURhdGEpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgbGV0IGhlYWRlcnMgPSB0aGlzLmRlZmF1bHRIZWFkZXJzO1xyXG5cclxuICAgICAgICAvLyB0byBkZXRlcm1pbmUgdGhlIEFjY2VwdCBoZWFkZXJcclxuICAgICAgICBsZXQgaHR0cEhlYWRlckFjY2VwdHM6IHN0cmluZ1tdID0gW1xyXG4gICAgICAgICAgICAnYXBwbGljYXRpb24vanNvbidcclxuICAgICAgICBdO1xyXG4gICAgICAgIGNvbnN0IGh0dHBIZWFkZXJBY2NlcHRTZWxlY3RlZDogc3RyaW5nIHwgdW5kZWZpbmVkID0gdGhpcy5jb25maWd1cmF0aW9uLnNlbGVjdEhlYWRlckFjY2VwdChodHRwSGVhZGVyQWNjZXB0cyk7XHJcbiAgICAgICAgaWYgKGh0dHBIZWFkZXJBY2NlcHRTZWxlY3RlZCAhPSB1bmRlZmluZWQpIHtcclxuICAgICAgICAgICAgaGVhZGVycyA9IGhlYWRlcnMuc2V0KCdBY2NlcHQnLCBodHRwSGVhZGVyQWNjZXB0U2VsZWN0ZWQpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLy8gdG8gZGV0ZXJtaW5lIHRoZSBDb250ZW50LVR5cGUgaGVhZGVyXHJcbiAgICAgICAgY29uc3QgY29uc3VtZXM6IHN0cmluZ1tdID0gW1xyXG4gICAgICAgICAgICAnYXBwbGljYXRpb24vanNvbidcclxuICAgICAgICBdO1xyXG4gICAgICAgIGNvbnN0IGh0dHBDb250ZW50VHlwZVNlbGVjdGVkOiBzdHJpbmcgfCB1bmRlZmluZWQgPSB0aGlzLmNvbmZpZ3VyYXRpb24uc2VsZWN0SGVhZGVyQ29udGVudFR5cGUoY29uc3VtZXMpO1xyXG4gICAgICAgIGlmIChodHRwQ29udGVudFR5cGVTZWxlY3RlZCAhPSB1bmRlZmluZWQpIHtcclxuICAgICAgICAgICAgaGVhZGVycyA9IGhlYWRlcnMuc2V0KCdDb250ZW50LVR5cGUnLCBodHRwQ29udGVudFR5cGVTZWxlY3RlZCk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICByZXR1cm4gdGhpcy5odHRwQ2xpZW50LnJlcXVlc3Q8SW5saW5lUmVzcG9uc2UyMDE+KCdwb3N0JyxgJHt0aGlzLmJhc2VQYXRofS9pbmJveC9xdWV1ZS91c2VybmFtZXMvaXRlbXNgLFxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICBib2R5OiBib2R5LFxyXG4gICAgICAgICAgICAgICAgcGFyYW1zOiBxdWVyeVBhcmFtZXRlcnMsXHJcbiAgICAgICAgICAgICAgICB3aXRoQ3JlZGVudGlhbHM6IHRoaXMuY29uZmlndXJhdGlvbi53aXRoQ3JlZGVudGlhbHMsXHJcbiAgICAgICAgICAgICAgICBoZWFkZXJzOiBoZWFkZXJzLFxyXG4gICAgICAgICAgICAgICAgb2JzZXJ2ZTogb2JzZXJ2ZSxcclxuICAgICAgICAgICAgICAgIHJlcG9ydFByb2dyZXNzOiByZXBvcnRQcm9ncmVzc1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgKTtcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIERlbGV0ZSBhbGwgaXRlbXMgaW4gdGhpcyBxdWV1ZVxyXG4gICAgICogQXMgdGhpcyBtYXkgdGFrZSBzb21lIHRpbWUgYW5kIHRoaXMgc2VydmVyIG1heSBiZSBzY2FsZWQgb3V0IHdlIHdpbGwgc2V0dXAgYSBsb25nIHJ1bm5pbmcgdGFzayB0byBhY2NvbXBsaXNoIHRoaXMgYW5kIHRoYXQgd2lsbCByZXN0YXJ0IGlmIGRvZXNuJiN4Mjc7dCBmaW5pc2guXHJcbiAgICAgKiBAcGFyYW0gY2xpZW50SWQgU2hvdyByZXN1bHRzIGZvciBhIGdpdmVuIGNsaWVudC4gIFR5cGljYWxseSB0aGlzIGlzIHNldCBmb3IgeW91IGJ5IHRoZSBpbnRlcm5hbCBzeXN0ZW0gYmFzZWQgb24gdGhlIEFQSV9LRVkgeW91IGFyZSB1c2luZy4gIEhvd2V2ZXIgc29tZSBjbGllbnRzIGFyZSBhbGxvd2VkIHRvIHZpZXcgb3RoZXIgY2xpZW50cyBzdWNoIGFzIHdoZW4gdGhleSBoYXZlIGEgc2FuZGJveCBvciB3aGVuIHRoZXkgYXJlIGEgbGFyZ2UgZW50ZXJwcmlzZSBhbmQgaGF2ZSBtdWx0aXBsZSBjbGllbnRzIHRoZXkgbWFuYWdlLiAgSXQgd2lsbCBvbmx5IGFsbG93IHlvdSB0byB2aWV3IGNsaWVudCBkYXRhIHlvdSBoYXZlIGFjY2VzcyB0by5cclxuICAgICAqIEBwYXJhbSBsYW5ndWFnZXMgV2hpY2ggbGFuZ3VhZ2VzIGRvZXMgdGhpcyBhcHBseSB0b1xyXG4gICAgICogQHBhcmFtIG9ic2VydmUgc2V0IHdoZXRoZXIgb3Igbm90IHRvIHJldHVybiB0aGUgZGF0YSBPYnNlcnZhYmxlIGFzIHRoZSBib2R5LCByZXNwb25zZSBvciBldmVudHMuIGRlZmF1bHRzIHRvIHJldHVybmluZyB0aGUgYm9keS5cclxuICAgICAqIEBwYXJhbSByZXBvcnRQcm9ncmVzcyBmbGFnIHRvIHJlcG9ydCByZXF1ZXN0IGFuZCByZXNwb25zZSBwcm9ncmVzcy5cclxuICAgICAqL1xyXG4gICAgcHVibGljIGRlbGV0RXhhbXBsZUl0ZW1zKGNsaWVudElkPzogbnVtYmVyLCBsYW5ndWFnZXM/OiBBcnJheTxzdHJpbmc+LCBvYnNlcnZlPzogJ2JvZHknLCByZXBvcnRQcm9ncmVzcz86IGJvb2xlYW4pOiBPYnNlcnZhYmxlPGFueT47XHJcbiAgICBwdWJsaWMgZGVsZXRFeGFtcGxlSXRlbXMoY2xpZW50SWQ/OiBudW1iZXIsIGxhbmd1YWdlcz86IEFycmF5PHN0cmluZz4sIG9ic2VydmU/OiAncmVzcG9uc2UnLCByZXBvcnRQcm9ncmVzcz86IGJvb2xlYW4pOiBPYnNlcnZhYmxlPEh0dHBSZXNwb25zZTxhbnk+PjtcclxuICAgIHB1YmxpYyBkZWxldEV4YW1wbGVJdGVtcyhjbGllbnRJZD86IG51bWJlciwgbGFuZ3VhZ2VzPzogQXJyYXk8c3RyaW5nPiwgb2JzZXJ2ZT86ICdldmVudHMnLCByZXBvcnRQcm9ncmVzcz86IGJvb2xlYW4pOiBPYnNlcnZhYmxlPEh0dHBFdmVudDxhbnk+PjtcclxuICAgIHB1YmxpYyBkZWxldEV4YW1wbGVJdGVtcyhjbGllbnRJZD86IG51bWJlciwgbGFuZ3VhZ2VzPzogQXJyYXk8c3RyaW5nPiwgb2JzZXJ2ZTogYW55ID0gJ2JvZHknLCByZXBvcnRQcm9ncmVzczogYm9vbGVhbiA9IGZhbHNlICk6IE9ic2VydmFibGU8YW55PiB7XHJcblxyXG5cclxuXHJcbiAgICAgICAgbGV0IHF1ZXJ5UGFyYW1ldGVycyA9IG5ldyBIdHRwUGFyYW1zKHtlbmNvZGVyOiBuZXcgQ3VzdG9tSHR0cFVybEVuY29kaW5nQ29kZWMoKX0pO1xyXG4gICAgICAgIGlmIChjbGllbnRJZCAhPT0gdW5kZWZpbmVkICYmIGNsaWVudElkICE9PSBudWxsKSB7XHJcbiAgICAgICAgICAgIHF1ZXJ5UGFyYW1ldGVycyA9IHF1ZXJ5UGFyYW1ldGVycy5zZXQoJ2NsaWVudElkJywgPGFueT5jbGllbnRJZCk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGlmIChsYW5ndWFnZXMpIHtcclxuICAgICAgICAgICAgbGFuZ3VhZ2VzLmZvckVhY2goKGVsZW1lbnQpID0+IHtcclxuICAgICAgICAgICAgICAgIHF1ZXJ5UGFyYW1ldGVycyA9IHF1ZXJ5UGFyYW1ldGVycy5hcHBlbmQoJ2xhbmd1YWdlcycsIDxhbnk+ZWxlbWVudCk7XHJcbiAgICAgICAgICAgIH0pXHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBsZXQgaGVhZGVycyA9IHRoaXMuZGVmYXVsdEhlYWRlcnM7XHJcblxyXG4gICAgICAgIC8vIHRvIGRldGVybWluZSB0aGUgQWNjZXB0IGhlYWRlclxyXG4gICAgICAgIGxldCBodHRwSGVhZGVyQWNjZXB0czogc3RyaW5nW10gPSBbXHJcbiAgICAgICAgICAgICdhcHBsaWNhdGlvbi9qc29uJ1xyXG4gICAgICAgIF07XHJcbiAgICAgICAgY29uc3QgaHR0cEhlYWRlckFjY2VwdFNlbGVjdGVkOiBzdHJpbmcgfCB1bmRlZmluZWQgPSB0aGlzLmNvbmZpZ3VyYXRpb24uc2VsZWN0SGVhZGVyQWNjZXB0KGh0dHBIZWFkZXJBY2NlcHRzKTtcclxuICAgICAgICBpZiAoaHR0cEhlYWRlckFjY2VwdFNlbGVjdGVkICE9IHVuZGVmaW5lZCkge1xyXG4gICAgICAgICAgICBoZWFkZXJzID0gaGVhZGVycy5zZXQoJ0FjY2VwdCcsIGh0dHBIZWFkZXJBY2NlcHRTZWxlY3RlZCk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvLyB0byBkZXRlcm1pbmUgdGhlIENvbnRlbnQtVHlwZSBoZWFkZXJcclxuICAgICAgICBjb25zdCBjb25zdW1lczogc3RyaW5nW10gPSBbXHJcbiAgICAgICAgXTtcclxuXHJcbiAgICAgICAgcmV0dXJuIHRoaXMuaHR0cENsaWVudC5yZXF1ZXN0PGFueT4oJ2RlbGV0ZScsYCR7dGhpcy5iYXNlUGF0aH0vaW5ib3gvcXVldWUvZXhhbXBsZXMvaXRlbXNgLFxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICBwYXJhbXM6IHF1ZXJ5UGFyYW1ldGVycyxcclxuICAgICAgICAgICAgICAgIHdpdGhDcmVkZW50aWFsczogdGhpcy5jb25maWd1cmF0aW9uLndpdGhDcmVkZW50aWFscyxcclxuICAgICAgICAgICAgICAgIGhlYWRlcnM6IGhlYWRlcnMsXHJcbiAgICAgICAgICAgICAgICBvYnNlcnZlOiBvYnNlcnZlLFxyXG4gICAgICAgICAgICAgICAgcmVwb3J0UHJvZ3Jlc3M6IHJlcG9ydFByb2dyZXNzXHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICApO1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogUmVsZWFzZSBhbGwgY2hlY2tvdXRzIG9uIGEgcXVldWVcclxuICAgICAqIFNvbWV0aW1lcyBwZW9wbGUgZ28gZm9yIGNvZmZlZSBhbmQgc3RpbGwgaGF2ZSBpdGVtcyBjaGVja2VkIG91dC4gIFdoZW4geW91IGdldCBkb3duIHRvIGEgZmV3IGl0ZW1zIGxlZnQgdGhpcyBjYW4gYmUgYSBwcm9ibGVtLiAgVGhpcyB3aWxsIGZyZWUgdXAgYWxsIG5vbi1leHBpcmluZyBjaGVja291dHMuIFxyXG4gICAgICogQHBhcmFtIHF1ZXVlSWQgVGhlIHVuaXF1ZSBpZGVudGlmaWVyIGZvciB0aGlzIHF1ZXVlXHJcbiAgICAgKiBAcGFyYW0gY2xpZW50SWQgU2hvdyByZXN1bHRzIGZvciBhIGdpdmVuIGNsaWVudC4gIFR5cGljYWxseSB0aGlzIGlzIHNldCBmb3IgeW91IGJ5IHRoZSBpbnRlcm5hbCBzeXN0ZW0gYmFzZWQgb24gdGhlIEFQSV9LRVkgeW91IGFyZSB1c2luZy4gIEhvd2V2ZXIgc29tZSBjbGllbnRzIGFyZSBhbGxvd2VkIHRvIHZpZXcgb3RoZXIgY2xpZW50cyBzdWNoIGFzIHdoZW4gdGhleSBoYXZlIGEgc2FuZGJveCBvciB3aGVuIHRoZXkgYXJlIGEgbGFyZ2UgZW50ZXJwcmlzZSBhbmQgaGF2ZSBtdWx0aXBsZSBjbGllbnRzIHRoZXkgbWFuYWdlLiAgSXQgd2lsbCBvbmx5IGFsbG93IHlvdSB0byB2aWV3IGNsaWVudCBkYXRhIHlvdSBoYXZlIGFjY2VzcyB0by5cclxuICAgICAqIEBwYXJhbSBsYW5ndWFnZXMgV2hpY2ggbGFuZ3VhZ2VzIGRvZXMgdGhpcyBhcHBseSB0b1xyXG4gICAgICogQHBhcmFtIG9ic2VydmUgc2V0IHdoZXRoZXIgb3Igbm90IHRvIHJldHVybiB0aGUgZGF0YSBPYnNlcnZhYmxlIGFzIHRoZSBib2R5LCByZXNwb25zZSBvciBldmVudHMuIGRlZmF1bHRzIHRvIHJldHVybmluZyB0aGUgYm9keS5cclxuICAgICAqIEBwYXJhbSByZXBvcnRQcm9ncmVzcyBmbGFnIHRvIHJlcG9ydCByZXF1ZXN0IGFuZCByZXNwb25zZSBwcm9ncmVzcy5cclxuICAgICAqL1xyXG4gICAgcHVibGljIGRlbGV0ZUFsbENoZWNrb3V0cyhxdWV1ZUlkOiBzdHJpbmcsIGNsaWVudElkPzogbnVtYmVyLCBsYW5ndWFnZXM/OiBBcnJheTxzdHJpbmc+LCBvYnNlcnZlPzogJ2JvZHknLCByZXBvcnRQcm9ncmVzcz86IGJvb2xlYW4pOiBPYnNlcnZhYmxlPElubGluZVJlc3BvbnNlMjAwMT47XHJcbiAgICBwdWJsaWMgZGVsZXRlQWxsQ2hlY2tvdXRzKHF1ZXVlSWQ6IHN0cmluZywgY2xpZW50SWQ/OiBudW1iZXIsIGxhbmd1YWdlcz86IEFycmF5PHN0cmluZz4sIG9ic2VydmU/OiAncmVzcG9uc2UnLCByZXBvcnRQcm9ncmVzcz86IGJvb2xlYW4pOiBPYnNlcnZhYmxlPEh0dHBSZXNwb25zZTxJbmxpbmVSZXNwb25zZTIwMDE+PjtcclxuICAgIHB1YmxpYyBkZWxldGVBbGxDaGVja291dHMocXVldWVJZDogc3RyaW5nLCBjbGllbnRJZD86IG51bWJlciwgbGFuZ3VhZ2VzPzogQXJyYXk8c3RyaW5nPiwgb2JzZXJ2ZT86ICdldmVudHMnLCByZXBvcnRQcm9ncmVzcz86IGJvb2xlYW4pOiBPYnNlcnZhYmxlPEh0dHBFdmVudDxJbmxpbmVSZXNwb25zZTIwMDE+PjtcclxuICAgIHB1YmxpYyBkZWxldGVBbGxDaGVja291dHMocXVldWVJZDogc3RyaW5nLCBjbGllbnRJZD86IG51bWJlciwgbGFuZ3VhZ2VzPzogQXJyYXk8c3RyaW5nPiwgb2JzZXJ2ZTogYW55ID0gJ2JvZHknLCByZXBvcnRQcm9ncmVzczogYm9vbGVhbiA9IGZhbHNlICk6IE9ic2VydmFibGU8YW55PiB7XHJcblxyXG4gICAgICAgIGlmIChxdWV1ZUlkID09PSBudWxsIHx8IHF1ZXVlSWQgPT09IHVuZGVmaW5lZCkge1xyXG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ1JlcXVpcmVkIHBhcmFtZXRlciBxdWV1ZUlkIHdhcyBudWxsIG9yIHVuZGVmaW5lZCB3aGVuIGNhbGxpbmcgZGVsZXRlQWxsQ2hlY2tvdXRzLicpO1xyXG4gICAgICAgIH1cclxuXHJcblxyXG5cclxuICAgICAgICBsZXQgcXVlcnlQYXJhbWV0ZXJzID0gbmV3IEh0dHBQYXJhbXMoe2VuY29kZXI6IG5ldyBDdXN0b21IdHRwVXJsRW5jb2RpbmdDb2RlYygpfSk7XHJcbiAgICAgICAgaWYgKGNsaWVudElkICE9PSB1bmRlZmluZWQgJiYgY2xpZW50SWQgIT09IG51bGwpIHtcclxuICAgICAgICAgICAgcXVlcnlQYXJhbWV0ZXJzID0gcXVlcnlQYXJhbWV0ZXJzLnNldCgnY2xpZW50SWQnLCA8YW55PmNsaWVudElkKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgaWYgKGxhbmd1YWdlcykge1xyXG4gICAgICAgICAgICBsYW5ndWFnZXMuZm9yRWFjaCgoZWxlbWVudCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgcXVlcnlQYXJhbWV0ZXJzID0gcXVlcnlQYXJhbWV0ZXJzLmFwcGVuZCgnbGFuZ3VhZ2VzJywgPGFueT5lbGVtZW50KTtcclxuICAgICAgICAgICAgfSlcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGxldCBoZWFkZXJzID0gdGhpcy5kZWZhdWx0SGVhZGVycztcclxuXHJcbiAgICAgICAgLy8gdG8gZGV0ZXJtaW5lIHRoZSBBY2NlcHQgaGVhZGVyXHJcbiAgICAgICAgbGV0IGh0dHBIZWFkZXJBY2NlcHRzOiBzdHJpbmdbXSA9IFtcclxuICAgICAgICAgICAgJ2FwcGxpY2F0aW9uL2pzb24nXHJcbiAgICAgICAgXTtcclxuICAgICAgICBjb25zdCBodHRwSGVhZGVyQWNjZXB0U2VsZWN0ZWQ6IHN0cmluZyB8IHVuZGVmaW5lZCA9IHRoaXMuY29uZmlndXJhdGlvbi5zZWxlY3RIZWFkZXJBY2NlcHQoaHR0cEhlYWRlckFjY2VwdHMpO1xyXG4gICAgICAgIGlmIChodHRwSGVhZGVyQWNjZXB0U2VsZWN0ZWQgIT0gdW5kZWZpbmVkKSB7XHJcbiAgICAgICAgICAgIGhlYWRlcnMgPSBoZWFkZXJzLnNldCgnQWNjZXB0JywgaHR0cEhlYWRlckFjY2VwdFNlbGVjdGVkKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8vIHRvIGRldGVybWluZSB0aGUgQ29udGVudC1UeXBlIGhlYWRlclxyXG4gICAgICAgIGNvbnN0IGNvbnN1bWVzOiBzdHJpbmdbXSA9IFtcclxuICAgICAgICBdO1xyXG5cclxuICAgICAgICByZXR1cm4gdGhpcy5odHRwQ2xpZW50LnJlcXVlc3Q8SW5saW5lUmVzcG9uc2UyMDAxPignZGVsZXRlJyxgJHt0aGlzLmJhc2VQYXRofS9pbmJveC9xdWV1ZS8ke2VuY29kZVVSSUNvbXBvbmVudChTdHJpbmcocXVldWVJZCkpfS9pdGVtcy9jaGVja291dGAsXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIHBhcmFtczogcXVlcnlQYXJhbWV0ZXJzLFxyXG4gICAgICAgICAgICAgICAgd2l0aENyZWRlbnRpYWxzOiB0aGlzLmNvbmZpZ3VyYXRpb24ud2l0aENyZWRlbnRpYWxzLFxyXG4gICAgICAgICAgICAgICAgaGVhZGVyczogaGVhZGVycyxcclxuICAgICAgICAgICAgICAgIG9ic2VydmU6IG9ic2VydmUsXHJcbiAgICAgICAgICAgICAgICByZXBvcnRQcm9ncmVzczogcmVwb3J0UHJvZ3Jlc3NcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICk7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBEZWxldGUgYSBjb21tZW50XHJcbiAgICAgKiBSZW1vdmUgYSBjb21tZW50XHJcbiAgICAgKiBAcGFyYW0gcXVldWVJZCBUaGUgdW5pcXVlIGlkZW50aWZpZXIgZm9yIHRoaXMgcXVldWVcclxuICAgICAqIEBwYXJhbSBjb250ZW50SWQgVGhlIHVuaXF1ZSBpZGVudGlmaWVyIGZvciB0aGUgY29udGVudFxyXG4gICAgICogQHBhcmFtIGNvbW1lbnRJZCBUaGUgdW5pcXVlIGlkZW50aWZpZXIgZm9yIHRoZSBjb21tZW50XHJcbiAgICAgKiBAcGFyYW0gb2JzZXJ2ZSBzZXQgd2hldGhlciBvciBub3QgdG8gcmV0dXJuIHRoZSBkYXRhIE9ic2VydmFibGUgYXMgdGhlIGJvZHksIHJlc3BvbnNlIG9yIGV2ZW50cy4gZGVmYXVsdHMgdG8gcmV0dXJuaW5nIHRoZSBib2R5LlxyXG4gICAgICogQHBhcmFtIHJlcG9ydFByb2dyZXNzIGZsYWcgdG8gcmVwb3J0IHJlcXVlc3QgYW5kIHJlc3BvbnNlIHByb2dyZXNzLlxyXG4gICAgICovXHJcbiAgICBwdWJsaWMgZGVsZXRlQ29tbWVudChxdWV1ZUlkOiBzdHJpbmcsIGNvbnRlbnRJZDogc3RyaW5nLCBjb21tZW50SWQ6IHN0cmluZywgb2JzZXJ2ZT86ICdib2R5JywgcmVwb3J0UHJvZ3Jlc3M/OiBib29sZWFuKTogT2JzZXJ2YWJsZTxJbmxpbmVSZXNwb25zZTIwMDE+O1xyXG4gICAgcHVibGljIGRlbGV0ZUNvbW1lbnQocXVldWVJZDogc3RyaW5nLCBjb250ZW50SWQ6IHN0cmluZywgY29tbWVudElkOiBzdHJpbmcsIG9ic2VydmU/OiAncmVzcG9uc2UnLCByZXBvcnRQcm9ncmVzcz86IGJvb2xlYW4pOiBPYnNlcnZhYmxlPEh0dHBSZXNwb25zZTxJbmxpbmVSZXNwb25zZTIwMDE+PjtcclxuICAgIHB1YmxpYyBkZWxldGVDb21tZW50KHF1ZXVlSWQ6IHN0cmluZywgY29udGVudElkOiBzdHJpbmcsIGNvbW1lbnRJZDogc3RyaW5nLCBvYnNlcnZlPzogJ2V2ZW50cycsIHJlcG9ydFByb2dyZXNzPzogYm9vbGVhbik6IE9ic2VydmFibGU8SHR0cEV2ZW50PElubGluZVJlc3BvbnNlMjAwMT4+O1xyXG4gICAgcHVibGljIGRlbGV0ZUNvbW1lbnQocXVldWVJZDogc3RyaW5nLCBjb250ZW50SWQ6IHN0cmluZywgY29tbWVudElkOiBzdHJpbmcsIG9ic2VydmU6IGFueSA9ICdib2R5JywgcmVwb3J0UHJvZ3Jlc3M6IGJvb2xlYW4gPSBmYWxzZSApOiBPYnNlcnZhYmxlPGFueT4ge1xyXG5cclxuICAgICAgICBpZiAocXVldWVJZCA9PT0gbnVsbCB8fCBxdWV1ZUlkID09PSB1bmRlZmluZWQpIHtcclxuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdSZXF1aXJlZCBwYXJhbWV0ZXIgcXVldWVJZCB3YXMgbnVsbCBvciB1bmRlZmluZWQgd2hlbiBjYWxsaW5nIGRlbGV0ZUNvbW1lbnQuJyk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBpZiAoY29udGVudElkID09PSBudWxsIHx8IGNvbnRlbnRJZCA9PT0gdW5kZWZpbmVkKSB7XHJcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcignUmVxdWlyZWQgcGFyYW1ldGVyIGNvbnRlbnRJZCB3YXMgbnVsbCBvciB1bmRlZmluZWQgd2hlbiBjYWxsaW5nIGRlbGV0ZUNvbW1lbnQuJyk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBpZiAoY29tbWVudElkID09PSBudWxsIHx8IGNvbW1lbnRJZCA9PT0gdW5kZWZpbmVkKSB7XHJcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcignUmVxdWlyZWQgcGFyYW1ldGVyIGNvbW1lbnRJZCB3YXMgbnVsbCBvciB1bmRlZmluZWQgd2hlbiBjYWxsaW5nIGRlbGV0ZUNvbW1lbnQuJyk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBsZXQgaGVhZGVycyA9IHRoaXMuZGVmYXVsdEhlYWRlcnM7XHJcblxyXG4gICAgICAgIC8vIHRvIGRldGVybWluZSB0aGUgQWNjZXB0IGhlYWRlclxyXG4gICAgICAgIGxldCBodHRwSGVhZGVyQWNjZXB0czogc3RyaW5nW10gPSBbXHJcbiAgICAgICAgICAgICdhcHBsaWNhdGlvbi9qc29uJ1xyXG4gICAgICAgIF07XHJcbiAgICAgICAgY29uc3QgaHR0cEhlYWRlckFjY2VwdFNlbGVjdGVkOiBzdHJpbmcgfCB1bmRlZmluZWQgPSB0aGlzLmNvbmZpZ3VyYXRpb24uc2VsZWN0SGVhZGVyQWNjZXB0KGh0dHBIZWFkZXJBY2NlcHRzKTtcclxuICAgICAgICBpZiAoaHR0cEhlYWRlckFjY2VwdFNlbGVjdGVkICE9IHVuZGVmaW5lZCkge1xyXG4gICAgICAgICAgICBoZWFkZXJzID0gaGVhZGVycy5zZXQoJ0FjY2VwdCcsIGh0dHBIZWFkZXJBY2NlcHRTZWxlY3RlZCk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvLyB0byBkZXRlcm1pbmUgdGhlIENvbnRlbnQtVHlwZSBoZWFkZXJcclxuICAgICAgICBjb25zdCBjb25zdW1lczogc3RyaW5nW10gPSBbXHJcbiAgICAgICAgXTtcclxuXHJcbiAgICAgICAgcmV0dXJuIHRoaXMuaHR0cENsaWVudC5yZXF1ZXN0PElubGluZVJlc3BvbnNlMjAwMT4oJ2RlbGV0ZScsYCR7dGhpcy5iYXNlUGF0aH0vaW5ib3gvcXVldWUvJHtlbmNvZGVVUklDb21wb25lbnQoU3RyaW5nKHF1ZXVlSWQpKX0vaXRlbXMvJHtlbmNvZGVVUklDb21wb25lbnQoU3RyaW5nKGNvbnRlbnRJZCkpfS9jb21tZW50cy8ke2VuY29kZVVSSUNvbXBvbmVudChTdHJpbmcoY29tbWVudElkKSl9YCxcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgd2l0aENyZWRlbnRpYWxzOiB0aGlzLmNvbmZpZ3VyYXRpb24ud2l0aENyZWRlbnRpYWxzLFxyXG4gICAgICAgICAgICAgICAgaGVhZGVyczogaGVhZGVycyxcclxuICAgICAgICAgICAgICAgIG9ic2VydmU6IG9ic2VydmUsXHJcbiAgICAgICAgICAgICAgICByZXBvcnRQcm9ncmVzczogcmVwb3J0UHJvZ3Jlc3NcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICk7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBBYmFuZG9uIGEgY2hlY2tvdXRcclxuICAgICAqIFJlbW92ZSBhIGNoZWNrb3V0IGFzc2lnbmVkIHRvIHlvdSB3aXRob3V0IGRvaW5nIGFueSB3b3JrLlxyXG4gICAgICogQHBhcmFtIHF1ZXVlSWQgVGhlIHVuaXF1ZSBpZGVudGlmaWVyIGZvciB0aGlzIHF1ZXVlXHJcbiAgICAgKiBAcGFyYW0gY29udGVudElkIFRoZSB1bmlxdWUgaWRlbnRpZmllciBmb3IgdGhlIGNvbnRlbnRcclxuICAgICAqIEBwYXJhbSBvYnNlcnZlIHNldCB3aGV0aGVyIG9yIG5vdCB0byByZXR1cm4gdGhlIGRhdGEgT2JzZXJ2YWJsZSBhcyB0aGUgYm9keSwgcmVzcG9uc2Ugb3IgZXZlbnRzLiBkZWZhdWx0cyB0byByZXR1cm5pbmcgdGhlIGJvZHkuXHJcbiAgICAgKiBAcGFyYW0gcmVwb3J0UHJvZ3Jlc3MgZmxhZyB0byByZXBvcnQgcmVxdWVzdCBhbmQgcmVzcG9uc2UgcHJvZ3Jlc3MuXHJcbiAgICAgKi9cclxuICAgIHB1YmxpYyBkZWxldGVJdGVtQ2hlY2tvdXQocXVldWVJZDogc3RyaW5nLCBjb250ZW50SWQ6IHN0cmluZywgb2JzZXJ2ZT86ICdib2R5JywgcmVwb3J0UHJvZ3Jlc3M/OiBib29sZWFuKTogT2JzZXJ2YWJsZTxJbmxpbmVSZXNwb25zZTIwMDE+O1xyXG4gICAgcHVibGljIGRlbGV0ZUl0ZW1DaGVja291dChxdWV1ZUlkOiBzdHJpbmcsIGNvbnRlbnRJZDogc3RyaW5nLCBvYnNlcnZlPzogJ3Jlc3BvbnNlJywgcmVwb3J0UHJvZ3Jlc3M/OiBib29sZWFuKTogT2JzZXJ2YWJsZTxIdHRwUmVzcG9uc2U8SW5saW5lUmVzcG9uc2UyMDAxPj47XHJcbiAgICBwdWJsaWMgZGVsZXRlSXRlbUNoZWNrb3V0KHF1ZXVlSWQ6IHN0cmluZywgY29udGVudElkOiBzdHJpbmcsIG9ic2VydmU/OiAnZXZlbnRzJywgcmVwb3J0UHJvZ3Jlc3M/OiBib29sZWFuKTogT2JzZXJ2YWJsZTxIdHRwRXZlbnQ8SW5saW5lUmVzcG9uc2UyMDAxPj47XHJcbiAgICBwdWJsaWMgZGVsZXRlSXRlbUNoZWNrb3V0KHF1ZXVlSWQ6IHN0cmluZywgY29udGVudElkOiBzdHJpbmcsIG9ic2VydmU6IGFueSA9ICdib2R5JywgcmVwb3J0UHJvZ3Jlc3M6IGJvb2xlYW4gPSBmYWxzZSApOiBPYnNlcnZhYmxlPGFueT4ge1xyXG5cclxuICAgICAgICBpZiAocXVldWVJZCA9PT0gbnVsbCB8fCBxdWV1ZUlkID09PSB1bmRlZmluZWQpIHtcclxuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdSZXF1aXJlZCBwYXJhbWV0ZXIgcXVldWVJZCB3YXMgbnVsbCBvciB1bmRlZmluZWQgd2hlbiBjYWxsaW5nIGRlbGV0ZUl0ZW1DaGVja291dC4nKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGlmIChjb250ZW50SWQgPT09IG51bGwgfHwgY29udGVudElkID09PSB1bmRlZmluZWQpIHtcclxuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdSZXF1aXJlZCBwYXJhbWV0ZXIgY29udGVudElkIHdhcyBudWxsIG9yIHVuZGVmaW5lZCB3aGVuIGNhbGxpbmcgZGVsZXRlSXRlbUNoZWNrb3V0LicpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgbGV0IGhlYWRlcnMgPSB0aGlzLmRlZmF1bHRIZWFkZXJzO1xyXG5cclxuICAgICAgICAvLyB0byBkZXRlcm1pbmUgdGhlIEFjY2VwdCBoZWFkZXJcclxuICAgICAgICBsZXQgaHR0cEhlYWRlckFjY2VwdHM6IHN0cmluZ1tdID0gW1xyXG4gICAgICAgICAgICAnYXBwbGljYXRpb24vanNvbidcclxuICAgICAgICBdO1xyXG4gICAgICAgIGNvbnN0IGh0dHBIZWFkZXJBY2NlcHRTZWxlY3RlZDogc3RyaW5nIHwgdW5kZWZpbmVkID0gdGhpcy5jb25maWd1cmF0aW9uLnNlbGVjdEhlYWRlckFjY2VwdChodHRwSGVhZGVyQWNjZXB0cyk7XHJcbiAgICAgICAgaWYgKGh0dHBIZWFkZXJBY2NlcHRTZWxlY3RlZCAhPSB1bmRlZmluZWQpIHtcclxuICAgICAgICAgICAgaGVhZGVycyA9IGhlYWRlcnMuc2V0KCdBY2NlcHQnLCBodHRwSGVhZGVyQWNjZXB0U2VsZWN0ZWQpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLy8gdG8gZGV0ZXJtaW5lIHRoZSBDb250ZW50LVR5cGUgaGVhZGVyXHJcbiAgICAgICAgY29uc3QgY29uc3VtZXM6IHN0cmluZ1tdID0gW1xyXG4gICAgICAgIF07XHJcblxyXG4gICAgICAgIHJldHVybiB0aGlzLmh0dHBDbGllbnQucmVxdWVzdDxJbmxpbmVSZXNwb25zZTIwMDE+KCdkZWxldGUnLGAke3RoaXMuYmFzZVBhdGh9L2luYm94L3F1ZXVlLyR7ZW5jb2RlVVJJQ29tcG9uZW50KFN0cmluZyhxdWV1ZUlkKSl9L2l0ZW1zLyR7ZW5jb2RlVVJJQ29tcG9uZW50KFN0cmluZyhjb250ZW50SWQpKX0vY2hlY2tvdXRgLFxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICB3aXRoQ3JlZGVudGlhbHM6IHRoaXMuY29uZmlndXJhdGlvbi53aXRoQ3JlZGVudGlhbHMsXHJcbiAgICAgICAgICAgICAgICBoZWFkZXJzOiBoZWFkZXJzLFxyXG4gICAgICAgICAgICAgICAgb2JzZXJ2ZTogb2JzZXJ2ZSxcclxuICAgICAgICAgICAgICAgIHJlcG9ydFByb2dyZXNzOiByZXBvcnRQcm9ncmVzc1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgKTtcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIERlbGV0ZSBhbGwgaXRlbXMgaW4gdGhpcyBxdWV1ZVxyXG4gICAgICogQXMgdGhpcyBtYXkgdGFrZSBzb21lIHRpbWUgYW5kIHRoaXMgc2VydmVyIG1heSBiZSBzY2FsZWQgb3V0IHdlIHdpbGwgc2V0dXAgYSBsb25nIHJ1bm5pbmcgdGFzayB0byBhY2NvbXBsaXNoIHRoaXMgYW5kIHRoYXQgd2lsbCByZXN0YXJ0IGlmIGRvZXNuJiN4Mjc7dCBmaW5pc2guXHJcbiAgICAgKiBAcGFyYW0gcXVldWVJZCBUaGUgdW5pcXVlIGlkZW50aWZpZXIgZm9yIHRoaXMgcXVldWVcclxuICAgICAqIEBwYXJhbSBjbGllbnRJZCBTaG93IHJlc3VsdHMgZm9yIGEgZ2l2ZW4gY2xpZW50LiAgVHlwaWNhbGx5IHRoaXMgaXMgc2V0IGZvciB5b3UgYnkgdGhlIGludGVybmFsIHN5c3RlbSBiYXNlZCBvbiB0aGUgQVBJX0tFWSB5b3UgYXJlIHVzaW5nLiAgSG93ZXZlciBzb21lIGNsaWVudHMgYXJlIGFsbG93ZWQgdG8gdmlldyBvdGhlciBjbGllbnRzIHN1Y2ggYXMgd2hlbiB0aGV5IGhhdmUgYSBzYW5kYm94IG9yIHdoZW4gdGhleSBhcmUgYSBsYXJnZSBlbnRlcnByaXNlIGFuZCBoYXZlIG11bHRpcGxlIGNsaWVudHMgdGhleSBtYW5hZ2UuICBJdCB3aWxsIG9ubHkgYWxsb3cgeW91IHRvIHZpZXcgY2xpZW50IGRhdGEgeW91IGhhdmUgYWNjZXNzIHRvLlxyXG4gICAgICogQHBhcmFtIGxhbmd1YWdlcyBXaGljaCBsYW5ndWFnZXMgZG9lcyB0aGlzIGFwcGx5IHRvXHJcbiAgICAgKiBAcGFyYW0gb2JzZXJ2ZSBzZXQgd2hldGhlciBvciBub3QgdG8gcmV0dXJuIHRoZSBkYXRhIE9ic2VydmFibGUgYXMgdGhlIGJvZHksIHJlc3BvbnNlIG9yIGV2ZW50cy4gZGVmYXVsdHMgdG8gcmV0dXJuaW5nIHRoZSBib2R5LlxyXG4gICAgICogQHBhcmFtIHJlcG9ydFByb2dyZXNzIGZsYWcgdG8gcmVwb3J0IHJlcXVlc3QgYW5kIHJlc3BvbnNlIHByb2dyZXNzLlxyXG4gICAgICovXHJcbiAgICBwdWJsaWMgZGVsZXRlSXRlbXMocXVldWVJZDogc3RyaW5nLCBjbGllbnRJZD86IG51bWJlciwgbGFuZ3VhZ2VzPzogQXJyYXk8c3RyaW5nPiwgb2JzZXJ2ZT86ICdib2R5JywgcmVwb3J0UHJvZ3Jlc3M/OiBib29sZWFuKTogT2JzZXJ2YWJsZTxJbmxpbmVSZXNwb25zZTIwMD47XHJcbiAgICBwdWJsaWMgZGVsZXRlSXRlbXMocXVldWVJZDogc3RyaW5nLCBjbGllbnRJZD86IG51bWJlciwgbGFuZ3VhZ2VzPzogQXJyYXk8c3RyaW5nPiwgb2JzZXJ2ZT86ICdyZXNwb25zZScsIHJlcG9ydFByb2dyZXNzPzogYm9vbGVhbik6IE9ic2VydmFibGU8SHR0cFJlc3BvbnNlPElubGluZVJlc3BvbnNlMjAwPj47XHJcbiAgICBwdWJsaWMgZGVsZXRlSXRlbXMocXVldWVJZDogc3RyaW5nLCBjbGllbnRJZD86IG51bWJlciwgbGFuZ3VhZ2VzPzogQXJyYXk8c3RyaW5nPiwgb2JzZXJ2ZT86ICdldmVudHMnLCByZXBvcnRQcm9ncmVzcz86IGJvb2xlYW4pOiBPYnNlcnZhYmxlPEh0dHBFdmVudDxJbmxpbmVSZXNwb25zZTIwMD4+O1xyXG4gICAgcHVibGljIGRlbGV0ZUl0ZW1zKHF1ZXVlSWQ6IHN0cmluZywgY2xpZW50SWQ/OiBudW1iZXIsIGxhbmd1YWdlcz86IEFycmF5PHN0cmluZz4sIG9ic2VydmU6IGFueSA9ICdib2R5JywgcmVwb3J0UHJvZ3Jlc3M6IGJvb2xlYW4gPSBmYWxzZSApOiBPYnNlcnZhYmxlPGFueT4ge1xyXG5cclxuICAgICAgICBpZiAocXVldWVJZCA9PT0gbnVsbCB8fCBxdWV1ZUlkID09PSB1bmRlZmluZWQpIHtcclxuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdSZXF1aXJlZCBwYXJhbWV0ZXIgcXVldWVJZCB3YXMgbnVsbCBvciB1bmRlZmluZWQgd2hlbiBjYWxsaW5nIGRlbGV0ZUl0ZW1zLicpO1xyXG4gICAgICAgIH1cclxuXHJcblxyXG5cclxuICAgICAgICBsZXQgcXVlcnlQYXJhbWV0ZXJzID0gbmV3IEh0dHBQYXJhbXMoe2VuY29kZXI6IG5ldyBDdXN0b21IdHRwVXJsRW5jb2RpbmdDb2RlYygpfSk7XHJcbiAgICAgICAgaWYgKGNsaWVudElkICE9PSB1bmRlZmluZWQgJiYgY2xpZW50SWQgIT09IG51bGwpIHtcclxuICAgICAgICAgICAgcXVlcnlQYXJhbWV0ZXJzID0gcXVlcnlQYXJhbWV0ZXJzLnNldCgnY2xpZW50SWQnLCA8YW55PmNsaWVudElkKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgaWYgKGxhbmd1YWdlcykge1xyXG4gICAgICAgICAgICBsYW5ndWFnZXMuZm9yRWFjaCgoZWxlbWVudCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgcXVlcnlQYXJhbWV0ZXJzID0gcXVlcnlQYXJhbWV0ZXJzLmFwcGVuZCgnbGFuZ3VhZ2VzJywgPGFueT5lbGVtZW50KTtcclxuICAgICAgICAgICAgfSlcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGxldCBoZWFkZXJzID0gdGhpcy5kZWZhdWx0SGVhZGVycztcclxuXHJcbiAgICAgICAgLy8gdG8gZGV0ZXJtaW5lIHRoZSBBY2NlcHQgaGVhZGVyXHJcbiAgICAgICAgbGV0IGh0dHBIZWFkZXJBY2NlcHRzOiBzdHJpbmdbXSA9IFtcclxuICAgICAgICAgICAgJ2FwcGxpY2F0aW9uL2pzb24nXHJcbiAgICAgICAgXTtcclxuICAgICAgICBjb25zdCBodHRwSGVhZGVyQWNjZXB0U2VsZWN0ZWQ6IHN0cmluZyB8IHVuZGVmaW5lZCA9IHRoaXMuY29uZmlndXJhdGlvbi5zZWxlY3RIZWFkZXJBY2NlcHQoaHR0cEhlYWRlckFjY2VwdHMpO1xyXG4gICAgICAgIGlmIChodHRwSGVhZGVyQWNjZXB0U2VsZWN0ZWQgIT0gdW5kZWZpbmVkKSB7XHJcbiAgICAgICAgICAgIGhlYWRlcnMgPSBoZWFkZXJzLnNldCgnQWNjZXB0JywgaHR0cEhlYWRlckFjY2VwdFNlbGVjdGVkKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8vIHRvIGRldGVybWluZSB0aGUgQ29udGVudC1UeXBlIGhlYWRlclxyXG4gICAgICAgIGNvbnN0IGNvbnN1bWVzOiBzdHJpbmdbXSA9IFtcclxuICAgICAgICBdO1xyXG5cclxuICAgICAgICByZXR1cm4gdGhpcy5odHRwQ2xpZW50LnJlcXVlc3Q8SW5saW5lUmVzcG9uc2UyMDA+KCdkZWxldGUnLGAke3RoaXMuYmFzZVBhdGh9L2luYm94L3F1ZXVlLyR7ZW5jb2RlVVJJQ29tcG9uZW50KFN0cmluZyhxdWV1ZUlkKSl9L2l0ZW1zYCxcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgcGFyYW1zOiBxdWVyeVBhcmFtZXRlcnMsXHJcbiAgICAgICAgICAgICAgICB3aXRoQ3JlZGVudGlhbHM6IHRoaXMuY29uZmlndXJhdGlvbi53aXRoQ3JlZGVudGlhbHMsXHJcbiAgICAgICAgICAgICAgICBoZWFkZXJzOiBoZWFkZXJzLFxyXG4gICAgICAgICAgICAgICAgb2JzZXJ2ZTogb2JzZXJ2ZSxcclxuICAgICAgICAgICAgICAgIHJlcG9ydFByb2dyZXNzOiByZXBvcnRQcm9ncmVzc1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgKTtcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIERlbGV0ZSBhIHBhcmFtXHJcbiAgICAgKiBEZWxldGUgYSBwYXJhbSBhbmQgdXNlIHRoZSBkZWZhdWx0IGluc3RlYWRcclxuICAgICAqIEBwYXJhbSBxdWV1ZUlkIFRoZSB1bmlxdWUgaWRlbnRpZmllciBmb3IgdGhpcyBxdWV1ZVxyXG4gICAgICogQHBhcmFtIHBhcmFtSWQgQSBjdXN0b20gY29uZmlndXJhdGlvbiBmb3IgYSBjbGllbnRcclxuICAgICAqIEBwYXJhbSBvYnNlcnZlIHNldCB3aGV0aGVyIG9yIG5vdCB0byByZXR1cm4gdGhlIGRhdGEgT2JzZXJ2YWJsZSBhcyB0aGUgYm9keSwgcmVzcG9uc2Ugb3IgZXZlbnRzLiBkZWZhdWx0cyB0byByZXR1cm5pbmcgdGhlIGJvZHkuXHJcbiAgICAgKiBAcGFyYW0gcmVwb3J0UHJvZ3Jlc3MgZmxhZyB0byByZXBvcnQgcmVxdWVzdCBhbmQgcmVzcG9uc2UgcHJvZ3Jlc3MuXHJcbiAgICAgKi9cclxuICAgIHB1YmxpYyBkZWxldGVQYXJhbShxdWV1ZUlkOiBzdHJpbmcsIHBhcmFtSWQ6IHN0cmluZywgb2JzZXJ2ZT86ICdib2R5JywgcmVwb3J0UHJvZ3Jlc3M/OiBib29sZWFuKTogT2JzZXJ2YWJsZTxhbnk+O1xyXG4gICAgcHVibGljIGRlbGV0ZVBhcmFtKHF1ZXVlSWQ6IHN0cmluZywgcGFyYW1JZDogc3RyaW5nLCBvYnNlcnZlPzogJ3Jlc3BvbnNlJywgcmVwb3J0UHJvZ3Jlc3M/OiBib29sZWFuKTogT2JzZXJ2YWJsZTxIdHRwUmVzcG9uc2U8YW55Pj47XHJcbiAgICBwdWJsaWMgZGVsZXRlUGFyYW0ocXVldWVJZDogc3RyaW5nLCBwYXJhbUlkOiBzdHJpbmcsIG9ic2VydmU/OiAnZXZlbnRzJywgcmVwb3J0UHJvZ3Jlc3M/OiBib29sZWFuKTogT2JzZXJ2YWJsZTxIdHRwRXZlbnQ8YW55Pj47XHJcbiAgICBwdWJsaWMgZGVsZXRlUGFyYW0ocXVldWVJZDogc3RyaW5nLCBwYXJhbUlkOiBzdHJpbmcsIG9ic2VydmU6IGFueSA9ICdib2R5JywgcmVwb3J0UHJvZ3Jlc3M6IGJvb2xlYW4gPSBmYWxzZSApOiBPYnNlcnZhYmxlPGFueT4ge1xyXG5cclxuICAgICAgICBpZiAocXVldWVJZCA9PT0gbnVsbCB8fCBxdWV1ZUlkID09PSB1bmRlZmluZWQpIHtcclxuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdSZXF1aXJlZCBwYXJhbWV0ZXIgcXVldWVJZCB3YXMgbnVsbCBvciB1bmRlZmluZWQgd2hlbiBjYWxsaW5nIGRlbGV0ZVBhcmFtLicpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgaWYgKHBhcmFtSWQgPT09IG51bGwgfHwgcGFyYW1JZCA9PT0gdW5kZWZpbmVkKSB7XHJcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcignUmVxdWlyZWQgcGFyYW1ldGVyIHBhcmFtSWQgd2FzIG51bGwgb3IgdW5kZWZpbmVkIHdoZW4gY2FsbGluZyBkZWxldGVQYXJhbS4nKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGxldCBoZWFkZXJzID0gdGhpcy5kZWZhdWx0SGVhZGVycztcclxuXHJcbiAgICAgICAgLy8gdG8gZGV0ZXJtaW5lIHRoZSBBY2NlcHQgaGVhZGVyXHJcbiAgICAgICAgbGV0IGh0dHBIZWFkZXJBY2NlcHRzOiBzdHJpbmdbXSA9IFtcclxuICAgICAgICAgICAgJ2FwcGxpY2F0aW9uL2pzb24nXHJcbiAgICAgICAgXTtcclxuICAgICAgICBjb25zdCBodHRwSGVhZGVyQWNjZXB0U2VsZWN0ZWQ6IHN0cmluZyB8IHVuZGVmaW5lZCA9IHRoaXMuY29uZmlndXJhdGlvbi5zZWxlY3RIZWFkZXJBY2NlcHQoaHR0cEhlYWRlckFjY2VwdHMpO1xyXG4gICAgICAgIGlmIChodHRwSGVhZGVyQWNjZXB0U2VsZWN0ZWQgIT0gdW5kZWZpbmVkKSB7XHJcbiAgICAgICAgICAgIGhlYWRlcnMgPSBoZWFkZXJzLnNldCgnQWNjZXB0JywgaHR0cEhlYWRlckFjY2VwdFNlbGVjdGVkKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8vIHRvIGRldGVybWluZSB0aGUgQ29udGVudC1UeXBlIGhlYWRlclxyXG4gICAgICAgIGNvbnN0IGNvbnN1bWVzOiBzdHJpbmdbXSA9IFtcclxuICAgICAgICBdO1xyXG5cclxuICAgICAgICByZXR1cm4gdGhpcy5odHRwQ2xpZW50LnJlcXVlc3Q8YW55PignZGVsZXRlJyxgJHt0aGlzLmJhc2VQYXRofS9pbmJveC9xdWV1ZS8ke2VuY29kZVVSSUNvbXBvbmVudChTdHJpbmcocXVldWVJZCkpfS9wYXJhbS8ke2VuY29kZVVSSUNvbXBvbmVudChTdHJpbmcocGFyYW1JZCkpfWAsXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIHdpdGhDcmVkZW50aWFsczogdGhpcy5jb25maWd1cmF0aW9uLndpdGhDcmVkZW50aWFscyxcclxuICAgICAgICAgICAgICAgIGhlYWRlcnM6IGhlYWRlcnMsXHJcbiAgICAgICAgICAgICAgICBvYnNlcnZlOiBvYnNlcnZlLFxyXG4gICAgICAgICAgICAgICAgcmVwb3J0UHJvZ3Jlc3M6IHJlcG9ydFByb2dyZXNzXHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICApO1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogRGVsZXRlIGFsbCBpdGVtcyBpbiB0aGlzIHF1ZXVlXHJcbiAgICAgKiBBcyB0aGlzIG1heSB0YWtlIHNvbWUgdGltZSBhbmQgdGhpcyBzZXJ2ZXIgbWF5IGJlIHNjYWxlZCBvdXQgd2Ugd2lsbCBzZXR1cCBhIGxvbmcgcnVubmluZyB0YXNrIHRvIGFjY29tcGxpc2ggdGhpcyBhbmQgdGhhdCB3aWxsIHJlc3RhcnQgaWYgZG9lc24mI3gyNzt0IGZpbmlzaC5cclxuICAgICAqIEBwYXJhbSBjbGllbnRJZCBTaG93IHJlc3VsdHMgZm9yIGEgZ2l2ZW4gY2xpZW50LiAgVHlwaWNhbGx5IHRoaXMgaXMgc2V0IGZvciB5b3UgYnkgdGhlIGludGVybmFsIHN5c3RlbSBiYXNlZCBvbiB0aGUgQVBJX0tFWSB5b3UgYXJlIHVzaW5nLiAgSG93ZXZlciBzb21lIGNsaWVudHMgYXJlIGFsbG93ZWQgdG8gdmlldyBvdGhlciBjbGllbnRzIHN1Y2ggYXMgd2hlbiB0aGV5IGhhdmUgYSBzYW5kYm94IG9yIHdoZW4gdGhleSBhcmUgYSBsYXJnZSBlbnRlcnByaXNlIGFuZCBoYXZlIG11bHRpcGxlIGNsaWVudHMgdGhleSBtYW5hZ2UuICBJdCB3aWxsIG9ubHkgYWxsb3cgeW91IHRvIHZpZXcgY2xpZW50IGRhdGEgeW91IGhhdmUgYWNjZXNzIHRvLlxyXG4gICAgICogQHBhcmFtIGxhbmd1YWdlcyBXaGljaCBsYW5ndWFnZXMgZG9lcyB0aGlzIGFwcGx5IHRvXHJcbiAgICAgKiBAcGFyYW0gb2JzZXJ2ZSBzZXQgd2hldGhlciBvciBub3QgdG8gcmV0dXJuIHRoZSBkYXRhIE9ic2VydmFibGUgYXMgdGhlIGJvZHksIHJlc3BvbnNlIG9yIGV2ZW50cy4gZGVmYXVsdHMgdG8gcmV0dXJuaW5nIHRoZSBib2R5LlxyXG4gICAgICogQHBhcmFtIHJlcG9ydFByb2dyZXNzIGZsYWcgdG8gcmVwb3J0IHJlcXVlc3QgYW5kIHJlc3BvbnNlIHByb2dyZXNzLlxyXG4gICAgICovXHJcbiAgICBwdWJsaWMgZGVsZXRlUnVsZUF1ZGl0SXRlbXMoY2xpZW50SWQ/OiBudW1iZXIsIGxhbmd1YWdlcz86IEFycmF5PHN0cmluZz4sIG9ic2VydmU/OiAnYm9keScsIHJlcG9ydFByb2dyZXNzPzogYm9vbGVhbik6IE9ic2VydmFibGU8YW55PjtcclxuICAgIHB1YmxpYyBkZWxldGVSdWxlQXVkaXRJdGVtcyhjbGllbnRJZD86IG51bWJlciwgbGFuZ3VhZ2VzPzogQXJyYXk8c3RyaW5nPiwgb2JzZXJ2ZT86ICdyZXNwb25zZScsIHJlcG9ydFByb2dyZXNzPzogYm9vbGVhbik6IE9ic2VydmFibGU8SHR0cFJlc3BvbnNlPGFueT4+O1xyXG4gICAgcHVibGljIGRlbGV0ZVJ1bGVBdWRpdEl0ZW1zKGNsaWVudElkPzogbnVtYmVyLCBsYW5ndWFnZXM/OiBBcnJheTxzdHJpbmc+LCBvYnNlcnZlPzogJ2V2ZW50cycsIHJlcG9ydFByb2dyZXNzPzogYm9vbGVhbik6IE9ic2VydmFibGU8SHR0cEV2ZW50PGFueT4+O1xyXG4gICAgcHVibGljIGRlbGV0ZVJ1bGVBdWRpdEl0ZW1zKGNsaWVudElkPzogbnVtYmVyLCBsYW5ndWFnZXM/OiBBcnJheTxzdHJpbmc+LCBvYnNlcnZlOiBhbnkgPSAnYm9keScsIHJlcG9ydFByb2dyZXNzOiBib29sZWFuID0gZmFsc2UgKTogT2JzZXJ2YWJsZTxhbnk+IHtcclxuXHJcblxyXG5cclxuICAgICAgICBsZXQgcXVlcnlQYXJhbWV0ZXJzID0gbmV3IEh0dHBQYXJhbXMoe2VuY29kZXI6IG5ldyBDdXN0b21IdHRwVXJsRW5jb2RpbmdDb2RlYygpfSk7XHJcbiAgICAgICAgaWYgKGNsaWVudElkICE9PSB1bmRlZmluZWQgJiYgY2xpZW50SWQgIT09IG51bGwpIHtcclxuICAgICAgICAgICAgcXVlcnlQYXJhbWV0ZXJzID0gcXVlcnlQYXJhbWV0ZXJzLnNldCgnY2xpZW50SWQnLCA8YW55PmNsaWVudElkKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgaWYgKGxhbmd1YWdlcykge1xyXG4gICAgICAgICAgICBsYW5ndWFnZXMuZm9yRWFjaCgoZWxlbWVudCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgcXVlcnlQYXJhbWV0ZXJzID0gcXVlcnlQYXJhbWV0ZXJzLmFwcGVuZCgnbGFuZ3VhZ2VzJywgPGFueT5lbGVtZW50KTtcclxuICAgICAgICAgICAgfSlcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGxldCBoZWFkZXJzID0gdGhpcy5kZWZhdWx0SGVhZGVycztcclxuXHJcbiAgICAgICAgLy8gdG8gZGV0ZXJtaW5lIHRoZSBBY2NlcHQgaGVhZGVyXHJcbiAgICAgICAgbGV0IGh0dHBIZWFkZXJBY2NlcHRzOiBzdHJpbmdbXSA9IFtcclxuICAgICAgICAgICAgJ2FwcGxpY2F0aW9uL2pzb24nXHJcbiAgICAgICAgXTtcclxuICAgICAgICBjb25zdCBodHRwSGVhZGVyQWNjZXB0U2VsZWN0ZWQ6IHN0cmluZyB8IHVuZGVmaW5lZCA9IHRoaXMuY29uZmlndXJhdGlvbi5zZWxlY3RIZWFkZXJBY2NlcHQoaHR0cEhlYWRlckFjY2VwdHMpO1xyXG4gICAgICAgIGlmIChodHRwSGVhZGVyQWNjZXB0U2VsZWN0ZWQgIT0gdW5kZWZpbmVkKSB7XHJcbiAgICAgICAgICAgIGhlYWRlcnMgPSBoZWFkZXJzLnNldCgnQWNjZXB0JywgaHR0cEhlYWRlckFjY2VwdFNlbGVjdGVkKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8vIHRvIGRldGVybWluZSB0aGUgQ29udGVudC1UeXBlIGhlYWRlclxyXG4gICAgICAgIGNvbnN0IGNvbnN1bWVzOiBzdHJpbmdbXSA9IFtcclxuICAgICAgICBdO1xyXG5cclxuICAgICAgICByZXR1cm4gdGhpcy5odHRwQ2xpZW50LnJlcXVlc3Q8YW55PignZGVsZXRlJyxgJHt0aGlzLmJhc2VQYXRofS9pbmJveC9xdWV1ZS9ydWxlc0F1ZGl0L2l0ZW1zYCxcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgcGFyYW1zOiBxdWVyeVBhcmFtZXRlcnMsXHJcbiAgICAgICAgICAgICAgICB3aXRoQ3JlZGVudGlhbHM6IHRoaXMuY29uZmlndXJhdGlvbi53aXRoQ3JlZGVudGlhbHMsXHJcbiAgICAgICAgICAgICAgICBoZWFkZXJzOiBoZWFkZXJzLFxyXG4gICAgICAgICAgICAgICAgb2JzZXJ2ZTogb2JzZXJ2ZSxcclxuICAgICAgICAgICAgICAgIHJlcG9ydFByb2dyZXNzOiByZXBvcnRQcm9ncmVzc1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgKTtcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIERlbGV0ZSBhbGwgaXRlbXMgaW4gdGhpcyBxdWV1ZVxyXG4gICAgICogQXMgdGhpcyBtYXkgdGFrZSBzb21lIHRpbWUgYW5kIHRoaXMgc2VydmVyIG1heSBiZSBzY2FsZWQgb3V0IHdlIHdpbGwgc2V0dXAgYSBsb25nIHJ1bm5pbmcgdGFzayB0byBhY2NvbXBsaXNoIHRoaXMgYW5kIHRoYXQgd2lsbCByZXN0YXJ0IGlmIGRvZXNuJiN4Mjc7dCBmaW5pc2guXHJcbiAgICAgKiBAcGFyYW0gY2xpZW50SWQgU2hvdyByZXN1bHRzIGZvciBhIGdpdmVuIGNsaWVudC4gIFR5cGljYWxseSB0aGlzIGlzIHNldCBmb3IgeW91IGJ5IHRoZSBpbnRlcm5hbCBzeXN0ZW0gYmFzZWQgb24gdGhlIEFQSV9LRVkgeW91IGFyZSB1c2luZy4gIEhvd2V2ZXIgc29tZSBjbGllbnRzIGFyZSBhbGxvd2VkIHRvIHZpZXcgb3RoZXIgY2xpZW50cyBzdWNoIGFzIHdoZW4gdGhleSBoYXZlIGEgc2FuZGJveCBvciB3aGVuIHRoZXkgYXJlIGEgbGFyZ2UgZW50ZXJwcmlzZSBhbmQgaGF2ZSBtdWx0aXBsZSBjbGllbnRzIHRoZXkgbWFuYWdlLiAgSXQgd2lsbCBvbmx5IGFsbG93IHlvdSB0byB2aWV3IGNsaWVudCBkYXRhIHlvdSBoYXZlIGFjY2VzcyB0by5cclxuICAgICAqIEBwYXJhbSBsYW5ndWFnZXMgV2hpY2ggbGFuZ3VhZ2VzIGRvZXMgdGhpcyBhcHBseSB0b1xyXG4gICAgICogQHBhcmFtIG9ic2VydmUgc2V0IHdoZXRoZXIgb3Igbm90IHRvIHJldHVybiB0aGUgZGF0YSBPYnNlcnZhYmxlIGFzIHRoZSBib2R5LCByZXNwb25zZSBvciBldmVudHMuIGRlZmF1bHRzIHRvIHJldHVybmluZyB0aGUgYm9keS5cclxuICAgICAqIEBwYXJhbSByZXBvcnRQcm9ncmVzcyBmbGFnIHRvIHJlcG9ydCByZXF1ZXN0IGFuZCByZXNwb25zZSBwcm9ncmVzcy5cclxuICAgICAqL1xyXG4gICAgcHVibGljIGRlbGV0ZVNwZWxsaW5nSXRlbXMoY2xpZW50SWQ/OiBudW1iZXIsIGxhbmd1YWdlcz86IEFycmF5PHN0cmluZz4sIG9ic2VydmU/OiAnYm9keScsIHJlcG9ydFByb2dyZXNzPzogYm9vbGVhbik6IE9ic2VydmFibGU8YW55PjtcclxuICAgIHB1YmxpYyBkZWxldGVTcGVsbGluZ0l0ZW1zKGNsaWVudElkPzogbnVtYmVyLCBsYW5ndWFnZXM/OiBBcnJheTxzdHJpbmc+LCBvYnNlcnZlPzogJ3Jlc3BvbnNlJywgcmVwb3J0UHJvZ3Jlc3M/OiBib29sZWFuKTogT2JzZXJ2YWJsZTxIdHRwUmVzcG9uc2U8YW55Pj47XHJcbiAgICBwdWJsaWMgZGVsZXRlU3BlbGxpbmdJdGVtcyhjbGllbnRJZD86IG51bWJlciwgbGFuZ3VhZ2VzPzogQXJyYXk8c3RyaW5nPiwgb2JzZXJ2ZT86ICdldmVudHMnLCByZXBvcnRQcm9ncmVzcz86IGJvb2xlYW4pOiBPYnNlcnZhYmxlPEh0dHBFdmVudDxhbnk+PjtcclxuICAgIHB1YmxpYyBkZWxldGVTcGVsbGluZ0l0ZW1zKGNsaWVudElkPzogbnVtYmVyLCBsYW5ndWFnZXM/OiBBcnJheTxzdHJpbmc+LCBvYnNlcnZlOiBhbnkgPSAnYm9keScsIHJlcG9ydFByb2dyZXNzOiBib29sZWFuID0gZmFsc2UgKTogT2JzZXJ2YWJsZTxhbnk+IHtcclxuXHJcblxyXG5cclxuICAgICAgICBsZXQgcXVlcnlQYXJhbWV0ZXJzID0gbmV3IEh0dHBQYXJhbXMoe2VuY29kZXI6IG5ldyBDdXN0b21IdHRwVXJsRW5jb2RpbmdDb2RlYygpfSk7XHJcbiAgICAgICAgaWYgKGNsaWVudElkICE9PSB1bmRlZmluZWQgJiYgY2xpZW50SWQgIT09IG51bGwpIHtcclxuICAgICAgICAgICAgcXVlcnlQYXJhbWV0ZXJzID0gcXVlcnlQYXJhbWV0ZXJzLnNldCgnY2xpZW50SWQnLCA8YW55PmNsaWVudElkKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgaWYgKGxhbmd1YWdlcykge1xyXG4gICAgICAgICAgICBsYW5ndWFnZXMuZm9yRWFjaCgoZWxlbWVudCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgcXVlcnlQYXJhbWV0ZXJzID0gcXVlcnlQYXJhbWV0ZXJzLmFwcGVuZCgnbGFuZ3VhZ2VzJywgPGFueT5lbGVtZW50KTtcclxuICAgICAgICAgICAgfSlcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGxldCBoZWFkZXJzID0gdGhpcy5kZWZhdWx0SGVhZGVycztcclxuXHJcbiAgICAgICAgLy8gdG8gZGV0ZXJtaW5lIHRoZSBBY2NlcHQgaGVhZGVyXHJcbiAgICAgICAgbGV0IGh0dHBIZWFkZXJBY2NlcHRzOiBzdHJpbmdbXSA9IFtcclxuICAgICAgICAgICAgJ2FwcGxpY2F0aW9uL2pzb24nXHJcbiAgICAgICAgXTtcclxuICAgICAgICBjb25zdCBodHRwSGVhZGVyQWNjZXB0U2VsZWN0ZWQ6IHN0cmluZyB8IHVuZGVmaW5lZCA9IHRoaXMuY29uZmlndXJhdGlvbi5zZWxlY3RIZWFkZXJBY2NlcHQoaHR0cEhlYWRlckFjY2VwdHMpO1xyXG4gICAgICAgIGlmIChodHRwSGVhZGVyQWNjZXB0U2VsZWN0ZWQgIT0gdW5kZWZpbmVkKSB7XHJcbiAgICAgICAgICAgIGhlYWRlcnMgPSBoZWFkZXJzLnNldCgnQWNjZXB0JywgaHR0cEhlYWRlckFjY2VwdFNlbGVjdGVkKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8vIHRvIGRldGVybWluZSB0aGUgQ29udGVudC1UeXBlIGhlYWRlclxyXG4gICAgICAgIGNvbnN0IGNvbnN1bWVzOiBzdHJpbmdbXSA9IFtcclxuICAgICAgICBdO1xyXG5cclxuICAgICAgICByZXR1cm4gdGhpcy5odHRwQ2xpZW50LnJlcXVlc3Q8YW55PignZGVsZXRlJyxgJHt0aGlzLmJhc2VQYXRofS9pbmJveC9xdWV1ZS9zcGVsbGluZy9pdGVtc2AsXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIHBhcmFtczogcXVlcnlQYXJhbWV0ZXJzLFxyXG4gICAgICAgICAgICAgICAgd2l0aENyZWRlbnRpYWxzOiB0aGlzLmNvbmZpZ3VyYXRpb24ud2l0aENyZWRlbnRpYWxzLFxyXG4gICAgICAgICAgICAgICAgaGVhZGVyczogaGVhZGVycyxcclxuICAgICAgICAgICAgICAgIG9ic2VydmU6IG9ic2VydmUsXHJcbiAgICAgICAgICAgICAgICByZXBvcnRQcm9ncmVzczogcmVwb3J0UHJvZ3Jlc3NcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICk7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBEZWxldGUgYWxsIGl0ZW1zIGluIHRoaXMgcXVldWVcclxuICAgICAqIEFzIHRoaXMgbWF5IHRha2Ugc29tZSB0aW1lIGFuZCB0aGlzIHNlcnZlciBtYXkgYmUgc2NhbGVkIG91dCB3ZSB3aWxsIHNldHVwIGEgbG9uZyBydW5uaW5nIHRhc2sgdG8gYWNjb21wbGlzaCB0aGlzIGFuZCB0aGF0IHdpbGwgcmVzdGFydCBpZiBkb2VzbiYjeDI3O3QgZmluaXNoLlxyXG4gICAgICogQHBhcmFtIGNsaWVudElkIFNob3cgcmVzdWx0cyBmb3IgYSBnaXZlbiBjbGllbnQuICBUeXBpY2FsbHkgdGhpcyBpcyBzZXQgZm9yIHlvdSBieSB0aGUgaW50ZXJuYWwgc3lzdGVtIGJhc2VkIG9uIHRoZSBBUElfS0VZIHlvdSBhcmUgdXNpbmcuICBIb3dldmVyIHNvbWUgY2xpZW50cyBhcmUgYWxsb3dlZCB0byB2aWV3IG90aGVyIGNsaWVudHMgc3VjaCBhcyB3aGVuIHRoZXkgaGF2ZSBhIHNhbmRib3ggb3Igd2hlbiB0aGV5IGFyZSBhIGxhcmdlIGVudGVycHJpc2UgYW5kIGhhdmUgbXVsdGlwbGUgY2xpZW50cyB0aGV5IG1hbmFnZS4gIEl0IHdpbGwgb25seSBhbGxvdyB5b3UgdG8gdmlldyBjbGllbnQgZGF0YSB5b3UgaGF2ZSBhY2Nlc3MgdG8uXHJcbiAgICAgKiBAcGFyYW0gbGFuZ3VhZ2VzIFdoaWNoIGxhbmd1YWdlcyBkb2VzIHRoaXMgYXBwbHkgdG9cclxuICAgICAqIEBwYXJhbSBvYnNlcnZlIHNldCB3aGV0aGVyIG9yIG5vdCB0byByZXR1cm4gdGhlIGRhdGEgT2JzZXJ2YWJsZSBhcyB0aGUgYm9keSwgcmVzcG9uc2Ugb3IgZXZlbnRzLiBkZWZhdWx0cyB0byByZXR1cm5pbmcgdGhlIGJvZHkuXHJcbiAgICAgKiBAcGFyYW0gcmVwb3J0UHJvZ3Jlc3MgZmxhZyB0byByZXBvcnQgcmVxdWVzdCBhbmQgcmVzcG9uc2UgcHJvZ3Jlc3MuXHJcbiAgICAgKi9cclxuICAgIHB1YmxpYyBkZWxldGVUYXNrSXRlbXMoY2xpZW50SWQ/OiBudW1iZXIsIGxhbmd1YWdlcz86IEFycmF5PHN0cmluZz4sIG9ic2VydmU/OiAnYm9keScsIHJlcG9ydFByb2dyZXNzPzogYm9vbGVhbik6IE9ic2VydmFibGU8YW55PjtcclxuICAgIHB1YmxpYyBkZWxldGVUYXNrSXRlbXMoY2xpZW50SWQ/OiBudW1iZXIsIGxhbmd1YWdlcz86IEFycmF5PHN0cmluZz4sIG9ic2VydmU/OiAncmVzcG9uc2UnLCByZXBvcnRQcm9ncmVzcz86IGJvb2xlYW4pOiBPYnNlcnZhYmxlPEh0dHBSZXNwb25zZTxhbnk+PjtcclxuICAgIHB1YmxpYyBkZWxldGVUYXNrSXRlbXMoY2xpZW50SWQ/OiBudW1iZXIsIGxhbmd1YWdlcz86IEFycmF5PHN0cmluZz4sIG9ic2VydmU/OiAnZXZlbnRzJywgcmVwb3J0UHJvZ3Jlc3M/OiBib29sZWFuKTogT2JzZXJ2YWJsZTxIdHRwRXZlbnQ8YW55Pj47XHJcbiAgICBwdWJsaWMgZGVsZXRlVGFza0l0ZW1zKGNsaWVudElkPzogbnVtYmVyLCBsYW5ndWFnZXM/OiBBcnJheTxzdHJpbmc+LCBvYnNlcnZlOiBhbnkgPSAnYm9keScsIHJlcG9ydFByb2dyZXNzOiBib29sZWFuID0gZmFsc2UgKTogT2JzZXJ2YWJsZTxhbnk+IHtcclxuXHJcblxyXG5cclxuICAgICAgICBsZXQgcXVlcnlQYXJhbWV0ZXJzID0gbmV3IEh0dHBQYXJhbXMoe2VuY29kZXI6IG5ldyBDdXN0b21IdHRwVXJsRW5jb2RpbmdDb2RlYygpfSk7XHJcbiAgICAgICAgaWYgKGNsaWVudElkICE9PSB1bmRlZmluZWQgJiYgY2xpZW50SWQgIT09IG51bGwpIHtcclxuICAgICAgICAgICAgcXVlcnlQYXJhbWV0ZXJzID0gcXVlcnlQYXJhbWV0ZXJzLnNldCgnY2xpZW50SWQnLCA8YW55PmNsaWVudElkKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgaWYgKGxhbmd1YWdlcykge1xyXG4gICAgICAgICAgICBsYW5ndWFnZXMuZm9yRWFjaCgoZWxlbWVudCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgcXVlcnlQYXJhbWV0ZXJzID0gcXVlcnlQYXJhbWV0ZXJzLmFwcGVuZCgnbGFuZ3VhZ2VzJywgPGFueT5lbGVtZW50KTtcclxuICAgICAgICAgICAgfSlcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGxldCBoZWFkZXJzID0gdGhpcy5kZWZhdWx0SGVhZGVycztcclxuXHJcbiAgICAgICAgLy8gdG8gZGV0ZXJtaW5lIHRoZSBBY2NlcHQgaGVhZGVyXHJcbiAgICAgICAgbGV0IGh0dHBIZWFkZXJBY2NlcHRzOiBzdHJpbmdbXSA9IFtcclxuICAgICAgICAgICAgJ2FwcGxpY2F0aW9uL2pzb24nXHJcbiAgICAgICAgXTtcclxuICAgICAgICBjb25zdCBodHRwSGVhZGVyQWNjZXB0U2VsZWN0ZWQ6IHN0cmluZyB8IHVuZGVmaW5lZCA9IHRoaXMuY29uZmlndXJhdGlvbi5zZWxlY3RIZWFkZXJBY2NlcHQoaHR0cEhlYWRlckFjY2VwdHMpO1xyXG4gICAgICAgIGlmIChodHRwSGVhZGVyQWNjZXB0U2VsZWN0ZWQgIT0gdW5kZWZpbmVkKSB7XHJcbiAgICAgICAgICAgIGhlYWRlcnMgPSBoZWFkZXJzLnNldCgnQWNjZXB0JywgaHR0cEhlYWRlckFjY2VwdFNlbGVjdGVkKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8vIHRvIGRldGVybWluZSB0aGUgQ29udGVudC1UeXBlIGhlYWRlclxyXG4gICAgICAgIGNvbnN0IGNvbnN1bWVzOiBzdHJpbmdbXSA9IFtcclxuICAgICAgICBdO1xyXG5cclxuICAgICAgICByZXR1cm4gdGhpcy5odHRwQ2xpZW50LnJlcXVlc3Q8YW55PignZGVsZXRlJyxgJHt0aGlzLmJhc2VQYXRofS9pbmJveC9xdWV1ZS90YXNrL2l0ZW1zYCxcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgcGFyYW1zOiBxdWVyeVBhcmFtZXRlcnMsXHJcbiAgICAgICAgICAgICAgICB3aXRoQ3JlZGVudGlhbHM6IHRoaXMuY29uZmlndXJhdGlvbi53aXRoQ3JlZGVudGlhbHMsXHJcbiAgICAgICAgICAgICAgICBoZWFkZXJzOiBoZWFkZXJzLFxyXG4gICAgICAgICAgICAgICAgb2JzZXJ2ZTogb2JzZXJ2ZSxcclxuICAgICAgICAgICAgICAgIHJlcG9ydFByb2dyZXNzOiByZXBvcnRQcm9ncmVzc1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgKTtcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIERlbGV0ZSBhIHVzZXJzIGRhdGFcclxuICAgICAqIFRoaXMgd2lsbCBkZWxldGUgYWxsIGRhdGEgd2UgaGF2ZSBvbiBhIHVzZXIuIFRoaXMgaXMgcmVjb21tZW5kZWQgZm9yIEdEUFIgYW5kIENDUEEgY29tcGxpYW5jZSBhcm91bmQgdGVybXMgbGlrZSByaWdodCB0byBiZSBmb3JnZXR0ZW4uICBQcm9iYWJseSB3aGF0IHlvdSB3YW50IGluc3RlYWQgaG93ZXZlciBpcyB0byBwc2V1ZG9ueW1pemUgYWxsIHRoZSBkYXRhIHdpdGggYSBwdXQgcmVxdWVzdCBpbnN0ZWFkLiBcclxuICAgICAqIEBwYXJhbSB1c2VySWQgVGhlIHVuaXF1ZSBpZGVudGlmaWVyIGZvciB0aGlzIHVzZXJcclxuICAgICAqIEBwYXJhbSBvYnNlcnZlIHNldCB3aGV0aGVyIG9yIG5vdCB0byByZXR1cm4gdGhlIGRhdGEgT2JzZXJ2YWJsZSBhcyB0aGUgYm9keSwgcmVzcG9uc2Ugb3IgZXZlbnRzLiBkZWZhdWx0cyB0byByZXR1cm5pbmcgdGhlIGJvZHkuXHJcbiAgICAgKiBAcGFyYW0gcmVwb3J0UHJvZ3Jlc3MgZmxhZyB0byByZXBvcnQgcmVxdWVzdCBhbmQgcmVzcG9uc2UgcHJvZ3Jlc3MuXHJcbiAgICAgKi9cclxuICAgIHB1YmxpYyBkZWxldGVVc2VyKHVzZXJJZDogc3RyaW5nLCBvYnNlcnZlPzogJ2JvZHknLCByZXBvcnRQcm9ncmVzcz86IGJvb2xlYW4pOiBPYnNlcnZhYmxlPFF1ZXVlPjtcclxuICAgIHB1YmxpYyBkZWxldGVVc2VyKHVzZXJJZDogc3RyaW5nLCBvYnNlcnZlPzogJ3Jlc3BvbnNlJywgcmVwb3J0UHJvZ3Jlc3M/OiBib29sZWFuKTogT2JzZXJ2YWJsZTxIdHRwUmVzcG9uc2U8UXVldWU+PjtcclxuICAgIHB1YmxpYyBkZWxldGVVc2VyKHVzZXJJZDogc3RyaW5nLCBvYnNlcnZlPzogJ2V2ZW50cycsIHJlcG9ydFByb2dyZXNzPzogYm9vbGVhbik6IE9ic2VydmFibGU8SHR0cEV2ZW50PFF1ZXVlPj47XHJcbiAgICBwdWJsaWMgZGVsZXRlVXNlcih1c2VySWQ6IHN0cmluZywgb2JzZXJ2ZTogYW55ID0gJ2JvZHknLCByZXBvcnRQcm9ncmVzczogYm9vbGVhbiA9IGZhbHNlICk6IE9ic2VydmFibGU8YW55PiB7XHJcblxyXG4gICAgICAgIGlmICh1c2VySWQgPT09IG51bGwgfHwgdXNlcklkID09PSB1bmRlZmluZWQpIHtcclxuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdSZXF1aXJlZCBwYXJhbWV0ZXIgdXNlcklkIHdhcyBudWxsIG9yIHVuZGVmaW5lZCB3aGVuIGNhbGxpbmcgZGVsZXRlVXNlci4nKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGxldCBoZWFkZXJzID0gdGhpcy5kZWZhdWx0SGVhZGVycztcclxuXHJcbiAgICAgICAgLy8gdG8gZGV0ZXJtaW5lIHRoZSBBY2NlcHQgaGVhZGVyXHJcbiAgICAgICAgbGV0IGh0dHBIZWFkZXJBY2NlcHRzOiBzdHJpbmdbXSA9IFtcclxuICAgICAgICAgICAgJ2FwcGxpY2F0aW9uL2pzb24nXHJcbiAgICAgICAgXTtcclxuICAgICAgICBjb25zdCBodHRwSGVhZGVyQWNjZXB0U2VsZWN0ZWQ6IHN0cmluZyB8IHVuZGVmaW5lZCA9IHRoaXMuY29uZmlndXJhdGlvbi5zZWxlY3RIZWFkZXJBY2NlcHQoaHR0cEhlYWRlckFjY2VwdHMpO1xyXG4gICAgICAgIGlmIChodHRwSGVhZGVyQWNjZXB0U2VsZWN0ZWQgIT0gdW5kZWZpbmVkKSB7XHJcbiAgICAgICAgICAgIGhlYWRlcnMgPSBoZWFkZXJzLnNldCgnQWNjZXB0JywgaHR0cEhlYWRlckFjY2VwdFNlbGVjdGVkKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8vIHRvIGRldGVybWluZSB0aGUgQ29udGVudC1UeXBlIGhlYWRlclxyXG4gICAgICAgIGNvbnN0IGNvbnN1bWVzOiBzdHJpbmdbXSA9IFtcclxuICAgICAgICBdO1xyXG5cclxuICAgICAgICByZXR1cm4gdGhpcy5odHRwQ2xpZW50LnJlcXVlc3Q8UXVldWU+KCdkZWxldGUnLGAke3RoaXMuYmFzZVBhdGh9L2luYm94L3VzZXIvJHtlbmNvZGVVUklDb21wb25lbnQoU3RyaW5nKHVzZXJJZCkpfWAsXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIHdpdGhDcmVkZW50aWFsczogdGhpcy5jb25maWd1cmF0aW9uLndpdGhDcmVkZW50aWFscyxcclxuICAgICAgICAgICAgICAgIGhlYWRlcnM6IGhlYWRlcnMsXHJcbiAgICAgICAgICAgICAgICBvYnNlcnZlOiBvYnNlcnZlLFxyXG4gICAgICAgICAgICAgICAgcmVwb3J0UHJvZ3Jlc3M6IHJlcG9ydFByb2dyZXNzXHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICApO1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogRGVsZXRlIGFsbCBpdGVtcyBpbiB0aGlzIHF1ZXVlXHJcbiAgICAgKiBBcyB0aGlzIG1heSB0YWtlIHNvbWUgdGltZSBhbmQgdGhpcyBzZXJ2ZXIgbWF5IGJlIHNjYWxlZCBvdXQgd2Ugd2lsbCBzZXR1cCBhIGxvbmcgcnVubmluZyB0YXNrIHRvIGFjY29tcGxpc2ggdGhpcyBhbmQgdGhhdCB3aWxsIHJlc3RhcnQgaWYgZG9lc24mI3gyNzt0IGZpbmlzaC5cclxuICAgICAqIEBwYXJhbSBjbGllbnRJZCBTaG93IHJlc3VsdHMgZm9yIGEgZ2l2ZW4gY2xpZW50LiAgVHlwaWNhbGx5IHRoaXMgaXMgc2V0IGZvciB5b3UgYnkgdGhlIGludGVybmFsIHN5c3RlbSBiYXNlZCBvbiB0aGUgQVBJX0tFWSB5b3UgYXJlIHVzaW5nLiAgSG93ZXZlciBzb21lIGNsaWVudHMgYXJlIGFsbG93ZWQgdG8gdmlldyBvdGhlciBjbGllbnRzIHN1Y2ggYXMgd2hlbiB0aGV5IGhhdmUgYSBzYW5kYm94IG9yIHdoZW4gdGhleSBhcmUgYSBsYXJnZSBlbnRlcnByaXNlIGFuZCBoYXZlIG11bHRpcGxlIGNsaWVudHMgdGhleSBtYW5hZ2UuICBJdCB3aWxsIG9ubHkgYWxsb3cgeW91IHRvIHZpZXcgY2xpZW50IGRhdGEgeW91IGhhdmUgYWNjZXNzIHRvLlxyXG4gICAgICogQHBhcmFtIGxhbmd1YWdlcyBXaGljaCBsYW5ndWFnZXMgZG9lcyB0aGlzIGFwcGx5IHRvXHJcbiAgICAgKiBAcGFyYW0gb2JzZXJ2ZSBzZXQgd2hldGhlciBvciBub3QgdG8gcmV0dXJuIHRoZSBkYXRhIE9ic2VydmFibGUgYXMgdGhlIGJvZHksIHJlc3BvbnNlIG9yIGV2ZW50cy4gZGVmYXVsdHMgdG8gcmV0dXJuaW5nIHRoZSBib2R5LlxyXG4gICAgICogQHBhcmFtIHJlcG9ydFByb2dyZXNzIGZsYWcgdG8gcmVwb3J0IHJlcXVlc3QgYW5kIHJlc3BvbnNlIHByb2dyZXNzLlxyXG4gICAgICovXHJcbiAgICBwdWJsaWMgZGVsZXRlVXNlcm5hbWVJdGVtcyhjbGllbnRJZD86IG51bWJlciwgbGFuZ3VhZ2VzPzogQXJyYXk8c3RyaW5nPiwgb2JzZXJ2ZT86ICdib2R5JywgcmVwb3J0UHJvZ3Jlc3M/OiBib29sZWFuKTogT2JzZXJ2YWJsZTxhbnk+O1xyXG4gICAgcHVibGljIGRlbGV0ZVVzZXJuYW1lSXRlbXMoY2xpZW50SWQ/OiBudW1iZXIsIGxhbmd1YWdlcz86IEFycmF5PHN0cmluZz4sIG9ic2VydmU/OiAncmVzcG9uc2UnLCByZXBvcnRQcm9ncmVzcz86IGJvb2xlYW4pOiBPYnNlcnZhYmxlPEh0dHBSZXNwb25zZTxhbnk+PjtcclxuICAgIHB1YmxpYyBkZWxldGVVc2VybmFtZUl0ZW1zKGNsaWVudElkPzogbnVtYmVyLCBsYW5ndWFnZXM/OiBBcnJheTxzdHJpbmc+LCBvYnNlcnZlPzogJ2V2ZW50cycsIHJlcG9ydFByb2dyZXNzPzogYm9vbGVhbik6IE9ic2VydmFibGU8SHR0cEV2ZW50PGFueT4+O1xyXG4gICAgcHVibGljIGRlbGV0ZVVzZXJuYW1lSXRlbXMoY2xpZW50SWQ/OiBudW1iZXIsIGxhbmd1YWdlcz86IEFycmF5PHN0cmluZz4sIG9ic2VydmU6IGFueSA9ICdib2R5JywgcmVwb3J0UHJvZ3Jlc3M6IGJvb2xlYW4gPSBmYWxzZSApOiBPYnNlcnZhYmxlPGFueT4ge1xyXG5cclxuXHJcblxyXG4gICAgICAgIGxldCBxdWVyeVBhcmFtZXRlcnMgPSBuZXcgSHR0cFBhcmFtcyh7ZW5jb2RlcjogbmV3IEN1c3RvbUh0dHBVcmxFbmNvZGluZ0NvZGVjKCl9KTtcclxuICAgICAgICBpZiAoY2xpZW50SWQgIT09IHVuZGVmaW5lZCAmJiBjbGllbnRJZCAhPT0gbnVsbCkge1xyXG4gICAgICAgICAgICBxdWVyeVBhcmFtZXRlcnMgPSBxdWVyeVBhcmFtZXRlcnMuc2V0KCdjbGllbnRJZCcsIDxhbnk+Y2xpZW50SWQpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpZiAobGFuZ3VhZ2VzKSB7XHJcbiAgICAgICAgICAgIGxhbmd1YWdlcy5mb3JFYWNoKChlbGVtZW50KSA9PiB7XHJcbiAgICAgICAgICAgICAgICBxdWVyeVBhcmFtZXRlcnMgPSBxdWVyeVBhcmFtZXRlcnMuYXBwZW5kKCdsYW5ndWFnZXMnLCA8YW55PmVsZW1lbnQpO1xyXG4gICAgICAgICAgICB9KVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgbGV0IGhlYWRlcnMgPSB0aGlzLmRlZmF1bHRIZWFkZXJzO1xyXG5cclxuICAgICAgICAvLyB0byBkZXRlcm1pbmUgdGhlIEFjY2VwdCBoZWFkZXJcclxuICAgICAgICBsZXQgaHR0cEhlYWRlckFjY2VwdHM6IHN0cmluZ1tdID0gW1xyXG4gICAgICAgICAgICAnYXBwbGljYXRpb24vanNvbidcclxuICAgICAgICBdO1xyXG4gICAgICAgIGNvbnN0IGh0dHBIZWFkZXJBY2NlcHRTZWxlY3RlZDogc3RyaW5nIHwgdW5kZWZpbmVkID0gdGhpcy5jb25maWd1cmF0aW9uLnNlbGVjdEhlYWRlckFjY2VwdChodHRwSGVhZGVyQWNjZXB0cyk7XHJcbiAgICAgICAgaWYgKGh0dHBIZWFkZXJBY2NlcHRTZWxlY3RlZCAhPSB1bmRlZmluZWQpIHtcclxuICAgICAgICAgICAgaGVhZGVycyA9IGhlYWRlcnMuc2V0KCdBY2NlcHQnLCBodHRwSGVhZGVyQWNjZXB0U2VsZWN0ZWQpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLy8gdG8gZGV0ZXJtaW5lIHRoZSBDb250ZW50LVR5cGUgaGVhZGVyXHJcbiAgICAgICAgY29uc3QgY29uc3VtZXM6IHN0cmluZ1tdID0gW1xyXG4gICAgICAgIF07XHJcblxyXG4gICAgICAgIHJldHVybiB0aGlzLmh0dHBDbGllbnQucmVxdWVzdDxhbnk+KCdkZWxldGUnLGAke3RoaXMuYmFzZVBhdGh9L2luYm94L3F1ZXVlL3VzZXJuYW1lcy9pdGVtc2AsXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIHBhcmFtczogcXVlcnlQYXJhbWV0ZXJzLFxyXG4gICAgICAgICAgICAgICAgd2l0aENyZWRlbnRpYWxzOiB0aGlzLmNvbmZpZ3VyYXRpb24ud2l0aENyZWRlbnRpYWxzLFxyXG4gICAgICAgICAgICAgICAgaGVhZGVyczogaGVhZGVycyxcclxuICAgICAgICAgICAgICAgIG9ic2VydmU6IG9ic2VydmUsXHJcbiAgICAgICAgICAgICAgICByZXBvcnRQcm9ncmVzczogcmVwb3J0UHJvZ3Jlc3NcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICk7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBHZXQgYSBjb21tZW50c1xyXG4gICAgICogQHBhcmFtIHF1ZXVlSWQgVGhlIHVuaXF1ZSBpZGVudGlmaWVyIGZvciB0aGlzIHF1ZXVlXHJcbiAgICAgKiBAcGFyYW0gY29udGVudElkIFRoZSB1bmlxdWUgaWRlbnRpZmllciBmb3IgdGhlIGNvbnRlbnRcclxuICAgICAqIEBwYXJhbSBvYnNlcnZlIHNldCB3aGV0aGVyIG9yIG5vdCB0byByZXR1cm4gdGhlIGRhdGEgT2JzZXJ2YWJsZSBhcyB0aGUgYm9keSwgcmVzcG9uc2Ugb3IgZXZlbnRzLiBkZWZhdWx0cyB0byByZXR1cm5pbmcgdGhlIGJvZHkuXHJcbiAgICAgKiBAcGFyYW0gcmVwb3J0UHJvZ3Jlc3MgZmxhZyB0byByZXBvcnQgcmVxdWVzdCBhbmQgcmVzcG9uc2UgcHJvZ3Jlc3MuXHJcbiAgICAgKi9cclxuICAgIHB1YmxpYyBnZXRDb21tZW50cyhxdWV1ZUlkOiBzdHJpbmcsIGNvbnRlbnRJZDogc3RyaW5nLCBvYnNlcnZlPzogJ2JvZHknLCByZXBvcnRQcm9ncmVzcz86IGJvb2xlYW4pOiBPYnNlcnZhYmxlPEFycmF5PENvbW1lbnQ+PjtcclxuICAgIHB1YmxpYyBnZXRDb21tZW50cyhxdWV1ZUlkOiBzdHJpbmcsIGNvbnRlbnRJZDogc3RyaW5nLCBvYnNlcnZlPzogJ3Jlc3BvbnNlJywgcmVwb3J0UHJvZ3Jlc3M/OiBib29sZWFuKTogT2JzZXJ2YWJsZTxIdHRwUmVzcG9uc2U8QXJyYXk8Q29tbWVudD4+PjtcclxuICAgIHB1YmxpYyBnZXRDb21tZW50cyhxdWV1ZUlkOiBzdHJpbmcsIGNvbnRlbnRJZDogc3RyaW5nLCBvYnNlcnZlPzogJ2V2ZW50cycsIHJlcG9ydFByb2dyZXNzPzogYm9vbGVhbik6IE9ic2VydmFibGU8SHR0cEV2ZW50PEFycmF5PENvbW1lbnQ+Pj47XHJcbiAgICBwdWJsaWMgZ2V0Q29tbWVudHMocXVldWVJZDogc3RyaW5nLCBjb250ZW50SWQ6IHN0cmluZywgb2JzZXJ2ZTogYW55ID0gJ2JvZHknLCByZXBvcnRQcm9ncmVzczogYm9vbGVhbiA9IGZhbHNlICk6IE9ic2VydmFibGU8YW55PiB7XHJcblxyXG4gICAgICAgIGlmIChxdWV1ZUlkID09PSBudWxsIHx8IHF1ZXVlSWQgPT09IHVuZGVmaW5lZCkge1xyXG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ1JlcXVpcmVkIHBhcmFtZXRlciBxdWV1ZUlkIHdhcyBudWxsIG9yIHVuZGVmaW5lZCB3aGVuIGNhbGxpbmcgZ2V0Q29tbWVudC4nKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGlmIChjb250ZW50SWQgPT09IG51bGwgfHwgY29udGVudElkID09PSB1bmRlZmluZWQpIHtcclxuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdSZXF1aXJlZCBwYXJhbWV0ZXIgY29udGVudElkIHdhcyBudWxsIG9yIHVuZGVmaW5lZCB3aGVuIGNhbGxpbmcgZ2V0Q29tbWVudC4nKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGxldCBoZWFkZXJzID0gdGhpcy5kZWZhdWx0SGVhZGVycztcclxuXHJcbiAgICAgICAgLy8gdG8gZGV0ZXJtaW5lIHRoZSBBY2NlcHQgaGVhZGVyXHJcbiAgICAgICAgbGV0IGh0dHBIZWFkZXJBY2NlcHRzOiBzdHJpbmdbXSA9IFtcclxuICAgICAgICAgICAgJ2FwcGxpY2F0aW9uL2pzb24nXHJcbiAgICAgICAgXTtcclxuICAgICAgICBjb25zdCBodHRwSGVhZGVyQWNjZXB0U2VsZWN0ZWQ6IHN0cmluZyB8IHVuZGVmaW5lZCA9IHRoaXMuY29uZmlndXJhdGlvbi5zZWxlY3RIZWFkZXJBY2NlcHQoaHR0cEhlYWRlckFjY2VwdHMpO1xyXG4gICAgICAgIGlmIChodHRwSGVhZGVyQWNjZXB0U2VsZWN0ZWQgIT0gdW5kZWZpbmVkKSB7XHJcbiAgICAgICAgICAgIGhlYWRlcnMgPSBoZWFkZXJzLnNldCgnQWNjZXB0JywgaHR0cEhlYWRlckFjY2VwdFNlbGVjdGVkKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8vIHRvIGRldGVybWluZSB0aGUgQ29udGVudC1UeXBlIGhlYWRlclxyXG4gICAgICAgIGNvbnN0IGNvbnN1bWVzOiBzdHJpbmdbXSA9IFtcclxuICAgICAgICBdO1xyXG5cclxuICAgICAgICByZXR1cm4gdGhpcy5odHRwQ2xpZW50LnJlcXVlc3Q8Q29tbWVudD4oJ2dldCcsYCR7dGhpcy5iYXNlUGF0aH0vaW5ib3gvcXVldWUvJHtlbmNvZGVVUklDb21wb25lbnQoU3RyaW5nKHF1ZXVlSWQpKX0vaXRlbXMvJHtlbmNvZGVVUklDb21wb25lbnQoU3RyaW5nKGNvbnRlbnRJZCkpfS9jb21tZW50c2AsXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIHdpdGhDcmVkZW50aWFsczogdGhpcy5jb25maWd1cmF0aW9uLndpdGhDcmVkZW50aWFscyxcclxuICAgICAgICAgICAgICAgIGhlYWRlcnM6IGhlYWRlcnMsXHJcbiAgICAgICAgICAgICAgICBvYnNlcnZlOiBvYnNlcnZlLFxyXG4gICAgICAgICAgICAgICAgcmVwb3J0UHJvZ3Jlc3M6IHJlcG9ydFByb2dyZXNzXHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICApO1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogR2V0IGEgY29tbWVudFxyXG4gICAgICogR2V0IGEgY29tbWVudCBieSBJZCBmb3IgdGhpcyBpdGVtXHJcbiAgICAgKiBAcGFyYW0gcXVldWVJZCBUaGUgdW5pcXVlIGlkZW50aWZpZXIgZm9yIHRoaXMgcXVldWVcclxuICAgICAqIEBwYXJhbSBjb250ZW50SWQgVGhlIHVuaXF1ZSBpZGVudGlmaWVyIGZvciB0aGUgY29udGVudFxyXG4gICAgICogQHBhcmFtIGNvbW1lbnRJZCBUaGUgdW5pcXVlIGlkZW50aWZpZXIgZm9yIHRoZSBjb21tZW50XHJcbiAgICAgKiBAcGFyYW0gb2JzZXJ2ZSBzZXQgd2hldGhlciBvciBub3QgdG8gcmV0dXJuIHRoZSBkYXRhIE9ic2VydmFibGUgYXMgdGhlIGJvZHksIHJlc3BvbnNlIG9yIGV2ZW50cy4gZGVmYXVsdHMgdG8gcmV0dXJuaW5nIHRoZSBib2R5LlxyXG4gICAgICogQHBhcmFtIHJlcG9ydFByb2dyZXNzIGZsYWcgdG8gcmVwb3J0IHJlcXVlc3QgYW5kIHJlc3BvbnNlIHByb2dyZXNzLlxyXG4gICAgICovXHJcbiAgICBwdWJsaWMgZ2V0Q29tbWVudChxdWV1ZUlkOiBzdHJpbmcsIGNvbnRlbnRJZDogc3RyaW5nLCBjb21tZW50SWQ6IHN0cmluZywgb2JzZXJ2ZT86ICdib2R5JywgcmVwb3J0UHJvZ3Jlc3M/OiBib29sZWFuKTogT2JzZXJ2YWJsZTxDb21tZW50PjtcclxuICAgIHB1YmxpYyBnZXRDb21tZW50KHF1ZXVlSWQ6IHN0cmluZywgY29udGVudElkOiBzdHJpbmcsIGNvbW1lbnRJZDogc3RyaW5nLCBvYnNlcnZlPzogJ3Jlc3BvbnNlJywgcmVwb3J0UHJvZ3Jlc3M/OiBib29sZWFuKTogT2JzZXJ2YWJsZTxIdHRwUmVzcG9uc2U8Q29tbWVudD4+O1xyXG4gICAgcHVibGljIGdldENvbW1lbnQocXVldWVJZDogc3RyaW5nLCBjb250ZW50SWQ6IHN0cmluZywgY29tbWVudElkOiBzdHJpbmcsIG9ic2VydmU/OiAnZXZlbnRzJywgcmVwb3J0UHJvZ3Jlc3M/OiBib29sZWFuKTogT2JzZXJ2YWJsZTxIdHRwRXZlbnQ8Q29tbWVudD4+O1xyXG4gICAgcHVibGljIGdldENvbW1lbnQocXVldWVJZDogc3RyaW5nLCBjb250ZW50SWQ6IHN0cmluZywgY29tbWVudElkOiBzdHJpbmcsIG9ic2VydmU6IGFueSA9ICdib2R5JywgcmVwb3J0UHJvZ3Jlc3M6IGJvb2xlYW4gPSBmYWxzZSApOiBPYnNlcnZhYmxlPGFueT4ge1xyXG5cclxuICAgICAgICBpZiAocXVldWVJZCA9PT0gbnVsbCB8fCBxdWV1ZUlkID09PSB1bmRlZmluZWQpIHtcclxuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdSZXF1aXJlZCBwYXJhbWV0ZXIgcXVldWVJZCB3YXMgbnVsbCBvciB1bmRlZmluZWQgd2hlbiBjYWxsaW5nIGdldENvbW1lbnQuJyk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBpZiAoY29udGVudElkID09PSBudWxsIHx8IGNvbnRlbnRJZCA9PT0gdW5kZWZpbmVkKSB7XHJcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcignUmVxdWlyZWQgcGFyYW1ldGVyIGNvbnRlbnRJZCB3YXMgbnVsbCBvciB1bmRlZmluZWQgd2hlbiBjYWxsaW5nIGdldENvbW1lbnQuJyk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBpZiAoY29tbWVudElkID09PSBudWxsIHx8IGNvbW1lbnRJZCA9PT0gdW5kZWZpbmVkKSB7XHJcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcignUmVxdWlyZWQgcGFyYW1ldGVyIGNvbW1lbnRJZCB3YXMgbnVsbCBvciB1bmRlZmluZWQgd2hlbiBjYWxsaW5nIGdldENvbW1lbnQuJyk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBsZXQgaGVhZGVycyA9IHRoaXMuZGVmYXVsdEhlYWRlcnM7XHJcblxyXG4gICAgICAgIC8vIHRvIGRldGVybWluZSB0aGUgQWNjZXB0IGhlYWRlclxyXG4gICAgICAgIGxldCBodHRwSGVhZGVyQWNjZXB0czogc3RyaW5nW10gPSBbXHJcbiAgICAgICAgICAgICdhcHBsaWNhdGlvbi9qc29uJ1xyXG4gICAgICAgIF07XHJcbiAgICAgICAgY29uc3QgaHR0cEhlYWRlckFjY2VwdFNlbGVjdGVkOiBzdHJpbmcgfCB1bmRlZmluZWQgPSB0aGlzLmNvbmZpZ3VyYXRpb24uc2VsZWN0SGVhZGVyQWNjZXB0KGh0dHBIZWFkZXJBY2NlcHRzKTtcclxuICAgICAgICBpZiAoaHR0cEhlYWRlckFjY2VwdFNlbGVjdGVkICE9IHVuZGVmaW5lZCkge1xyXG4gICAgICAgICAgICBoZWFkZXJzID0gaGVhZGVycy5zZXQoJ0FjY2VwdCcsIGh0dHBIZWFkZXJBY2NlcHRTZWxlY3RlZCk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvLyB0byBkZXRlcm1pbmUgdGhlIENvbnRlbnQtVHlwZSBoZWFkZXJcclxuICAgICAgICBjb25zdCBjb25zdW1lczogc3RyaW5nW10gPSBbXHJcbiAgICAgICAgXTtcclxuXHJcbiAgICAgICAgcmV0dXJuIHRoaXMuaHR0cENsaWVudC5yZXF1ZXN0PENvbW1lbnQ+KCdnZXQnLGAke3RoaXMuYmFzZVBhdGh9L2luYm94L3F1ZXVlLyR7ZW5jb2RlVVJJQ29tcG9uZW50KFN0cmluZyhxdWV1ZUlkKSl9L2l0ZW1zLyR7ZW5jb2RlVVJJQ29tcG9uZW50KFN0cmluZyhjb250ZW50SWQpKX0vY29tbWVudHMvJHtlbmNvZGVVUklDb21wb25lbnQoU3RyaW5nKGNvbW1lbnRJZCkpfWAsXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIHdpdGhDcmVkZW50aWFsczogdGhpcy5jb25maWd1cmF0aW9uLndpdGhDcmVkZW50aWFscyxcclxuICAgICAgICAgICAgICAgIGhlYWRlcnM6IGhlYWRlcnMsXHJcbiAgICAgICAgICAgICAgICBvYnNlcnZlOiBvYnNlcnZlLFxyXG4gICAgICAgICAgICAgICAgcmVwb3J0UHJvZ3Jlc3M6IHJlcG9ydFByb2dyZXNzXHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICApO1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogU2VhcmNoIGZvciBvciBjaGVja291dCBpdGVtcyBpbiB0aGlzIHF1ZXVlXHJcbiAgICAgKiBMb29rdXAgaXRlbXMgZm9yIHRoaXMgcXVldWVcclxuICAgICAqIEBwYXJhbSBsYW5ndWFnZSBTaG93IHJlc3VsdHMgZm9yIHRoZSBnaXZlbiBsYW5ndWFnZSBvbmx5LiAgIFRoaXMgaXMgdGhlIGxhbmd1YWdlIHVzZWQsIGNvdWxkIGhhdmUgYmVlbiBzZXQgYnkgdGhlIHVzZXIgb3IgZGV0ZWN0ZWQgYnkgbGFuZ3VhZ2UgaWQuXHJcbiAgICAgKiBAcGFyYW0gYWkgU2hvdyBpdGVtcyB0aGUgQUkgcHJlZGljdHMgYXMgdXNlZnVsIGJlY2F1c2UgbW9kZXJhdG9ycyBpbiB0aGUgcGFzdCBoYXZlIHRha2VuIGFuIGFjdGlvbiBvbiB0aGlzIGl0ZW1zLiAgUGFzc2luZyBhbiBhcnJheSBvZiBvYmplY3RzIGFzIHBhcmFtcyBjYW4gYmUgdHJpY2t5IGF0IGZpcnN0IHNvIGhlcmUgaXMgYW4gZXhhbXBsZSAmYW1wO2FpWzBdW21pblByZWRpY3Rpb25dJiN4M0Q7MC41MCZhbXA7YWlbMF1bbW9kZWxOYW1lXSYjeDNEO3RvcGljX3Z1bGdhciZhbXA7YWlbMF1bbWF4UHJlZGljdGlvbl0mI3gzRDswLjk1JmFtcDthaVsxXVttaW5QcmVkaWN0aW9uXSYjeDNEOzAuMTAmYW1wO2FpWzFdW21vZGVsTmFtZV0mI3gzRDt0b3BpY19mcmF1ZCZhbXA7YWlbMV1bbWF4UHJlZGljdGlvbl0mI3gzRDswLjgwICBJbiB1cmxlbmNvZGVkIGZvcm0gdGhhdCB3b3VsZCBiZSAmYW1wO2FpJTVCMCU1RCU1Qm1pblByZWRpY3Rpb24lNUQmI3gzRDswLjUwJmFtcDthaSU1QjAlNUQlNUJtb2RlbE5hbWUlNUQmI3gzRDt0b3BpY192dWxnYXImYW1wO2FpJTVCMCU1RCU1Qm1heFByZWRpY3Rpb24lNUQmI3gzRDswLjk1JmFtcDthaSU1QjElNUQlNUJtaW5QcmVkaWN0aW9uJTVEJiN4M0Q7MC4xMCZhbXA7YWklNUIxJTVEJTVCbW9kZWxOYW1lJTVEJiN4M0Q7dG9waWNfZnJhdWQmYW1wO2FpJTVCMSU1RCU1Qm1heFByZWRpY3Rpb24lNUQmI3gzRDswLjgwIFxyXG4gICAgICogQHBhcmFtIGNoZWNrb3V0IENoZWNrb3V0IHRoaXMgaXRlbSBmb3IgcmV2aWV3XHJcbiAgICAgKiBAcGFyYW0gY2xpZW50SWRzIFNob3cgcmVzdWx0cyBmb3IgYSBnaXZlbiBjbGllbnQuICBUeXBpY2FsbHkgdGhpcyBpcyBzZXQgZm9yIHlvdSBieSB0aGUgaW50ZXJuYWwgc3lzdGVtIGJhc2VkIG9uIHRoZSBBUElfS0VZIHlvdSBhcmUgdXNpbmcuICBIb3dldmVyIHNvbWUgY2xpZW50cyBhcmUgYWxsb3dlZCB0byB2aWV3IG90aGVyIGNsaWVudHMgc3VjaCBhcyB3aGVuIHRoZXkgaGF2ZSBhIHNhbmRib3ggb3Igd2hlbiB0aGV5IGFyZSBhIGxhcmdlIGVudGVycHJpc2UgYW5kIGhhdmUgbXVsdGlwbGUgY2xpZW50cyB0aGV5IG1hbmFnZS4gIEl0IHdpbGwgb25seSBhbGxvdyB5b3UgdG8gdmlldyBjbGllbnQgZGF0YSB5b3UgaGF2ZSBhY2Nlc3MgdG8uIFlvdSBjYW4gc2V0IHRoaXMgdG8gLTEgdG8gYXBwbHkgdG8gYWxsIGNsaWVudHMgeW91IGhhdmUgYWNjZXNzIHRvLlxyXG4gICAgICogQHBhcmFtIGNvbnRlbnRJZHMgR2V0IHRoZXNlIHNwZWNpZmljIGNvbnRlbnRJZHMuICBGcmVxdWVudGx5IHVzZWQgd2hlbiB5b3UgdXNlIHRoZSBQcmV2aW91cyBidXR0b24uXHJcbiAgICAgKiBAcGFyYW0gbm90Q29udGVudElkcyBFeGNsdWRlIHRoZXNlIHNwZWNpZmljIGNvbnRlbnRJZHMuICBPcmlnaW5hbGx5IGRlc2lnbmVkIHNvIHlvdSBjYW4gY2FsbCBjaGVja291dCBhbmQgcGFzcyBpbiB0aGUgaXRlbSB5b3UgYXJlIHdvcmtpbmcgb24gcmlnaHQgbm93IGFuZCBpdCB3aWxsIGdpdmUgeW91IGEgZGlmZmVyZW50IG9uZS4gIFRoZSBkZWZhdWx0IGNoZWNrb3V0IGJlaGF2aW91ciB3aWxsIGFzc2lnbiB0aGUgaXRlbXMgeW91IGFscmVhZHkgaGF2ZSBjaGVja2VkIG91dCAgKHdoaWNoIGlzIG9uIHlvdXIgc2NyZWVuKS4gXHJcbiAgICAgKiBAcGFyYW0gZW5kRGF0ZSBTaG93IHJlc3VsdHMgb2NjdXJyaW5nIGJlZm9yZSB0aGUgZ2l2ZW4gZGF0ZSBpbiB1bml4dGltZXN0YW1wIChtaWxsaXNlY29uZHMgc2luY2UgRXBvY2gpXHJcbiAgICAgKiBAcGFyYW0gc3RhcnREYXRlIFNob3cgcmVzdWx0cyBvY2N1cnJpbmcgYWZ0ZXIgdGhlIGdpdmVuIGRhdGUgaW4gdW5peHRpbWVzdGFtcCAobWlsbGlzZWNvbmRzIHNpbmNlIEVwb2NoKVxyXG4gICAgICogQHBhcmFtIHJldmlld2VkU3RhcnREYXRlIFNob3cgcmVzdWx0cyB0aGF0IHdoZXJlIHJldmlld2VkIGJldHdlZW4gZ2l2ZW4gZGF0ZSBpbiB1bml4dGltZXN0YW1wIChtaWxsaXNlY29uZHMgc2luY2UgRXBvY2gpXHJcbiAgICAgKiBAcGFyYW0gcmV2aWV3ZWRFbmREYXRlIFNob3cgcmVzdWx0cyB0aGF0IHdoZXJlIHJldmlld2VkIGJldHdlZW4gZ2l2ZW4gZGF0ZSBpbiB1bml4dGltZXN0YW1wIChtaWxsaXNlY29uZHMgc2luY2UgRXBvY2gpXHJcbiAgICAgKiBAcGFyYW0gY2hlY2tvdXRBdmFpbGFibGUgT25seSBzaG93IGl0ZW1zIHdoZXJlIHRoZSBpdGVtIGNvdWxkIGJlIGNoZWNrZWQgb3V0IGJ5IG1lLiAgVGhpcyBpcyB0aGUgc2FtZSBhcyBjaGVja291dCYjeDNEO3RydWUgYnV0IGl0IGRvZXMgbm90IGNoZWNrIGl0IG91dC5cclxuICAgICAqIEBwYXJhbSBkb25lQnlNb2RlcmF0b3JJZCBPbmx5IHNob3cgd29yayBkb25lIGJ5IHRoaXMgbW9kZXJhdG9ySWRcclxuICAgICAqIEBwYXJhbSBsaW1pdCBMaW1pdCB0aGUgbnVtYmVyIG9mIHJlc3VsdHNcclxuICAgICAqIEBwYXJhbSBvZmZzZXQgU3RhcnQgdGhlIHNlYXJjaCBmcm9tIG9mZnNldCAwLiAgRm9yIGluc3RhbmNlIGlmIHlvdXIgdXNpbmcgcGFnaW5hdGlvbiBwYWdlIDIgd291bGQgYmUgb24gdG90YWxJdGVtc1BlclBhZ2UqcGFnZU51bS4gXHJcbiAgICAgKiBAcGFyYW0gc29ydEJ5IFdoYXQgZG8geW91IHdhbnQgdG8gc29ydCB0aGUgcmVzdWx0cyBieSAgLSBGSUZPIHwgRmlyc3QgaW4gRmlyc3QgT3V0LCB0aGUgc2FtZSBvcmRlciB0aGV5IGNhbWUgaW4gLSBSZWNlbnQgfCBIYW5kbGUgdGhlIG1vc3QgcmVjZW50IGl0ZW1zIGZpcnN0IC0gUHJpb3JpdHkgfCBCeSBwcmlvcml0eSAoaWYgYXBwbGljYWJsZSkuICBGb3IgcXVhbGl0eSBjb250cm9sIGxpa2Ugc3BlbGxpbmcgaXQgaXMgdGhlIHRpbWVzIHVzZWQgc28gaXQgd2lsbCBzaG93IHRoZSBpdGVtcyBtaXNzcGVsbGVkIDEwMDAgdGltZXMgYmVmb3JlIHRoZSBvbmVzIDUwMCB0aW1lcy4gIEZvciByZXBvcnRlZCB1c2VycyBpdCB3aWxsIGJlIHRoZSBvbmVzIHdoZXJlIG11bHRpcGxlIHVzZXJzIGhhdmUgcmVwb3J0ZWQgdGhlIHNhbWUgdXNlci4gLSBBSSB8IERlYWwgd2l0aCB0aGUgaGlnZXN0IEFJIHByZWRpY3Rpb25zIGZpcnN0IHRoYXQgcHJlZGljdCB0aGlzIHNob3VsZCBiZSByZWxldmFudCBmb3IgbWUuICAoTk9URTogdG8gc2VhcmNoIGJ5IEFJIHlvdSBtdXN0IGFsc28gaGF2ZSBzZXQgdGhlIGFpLm1vZGVsTmFtZSBpbiB0aGUgZmlyc3QgaXRlbSBvZiB0aGUgcGFyYW1ldGVyIGFpKSBcclxuICAgICAqIEBwYXJhbSB0YWdzIE9ubHkgZmluZCBpdGVtcyBtYXRjaGluZyBhIGNlcnRhaW4gdGFnXHJcbiAgICAgKiBAcGFyYW0gdGV4dCBUZXh0IHNlYXJjaC4gIFRoaXMgdXNlcyBmdXp6eSBtYXRjaGluZy5cclxuICAgICAqIEBwYXJhbSB0b3BpY3MgT25seSBzaG93IGl0ZW1zIGZvciB0aGVzZSB0b3BpY3MgKHRvcGljSWQpIGJldHdlZW4gcmlzayBsZXZlbCBtaW5SaXNrIGFuZCBtYXhSaXNrXHJcbiAgICAgKiBAcGFyYW0gdW5yZXNvbHZlZENvbW1lbnRzIFdpbGwgc2VlIGlmIHRoZXJlIGFyZSBhbnkgdW5yZXNvbHZlZCBjb21tZW50cyBmb3IgeW91IGFuZCBzaG93IG9ubHkgdGhvc2VcclxuICAgICAqIEBwYXJhbSBvYnNlcnZlIHNldCB3aGV0aGVyIG9yIG5vdCB0byByZXR1cm4gdGhlIGRhdGEgT2JzZXJ2YWJsZSBhcyB0aGUgYm9keSwgcmVzcG9uc2Ugb3IgZXZlbnRzLiBkZWZhdWx0cyB0byByZXR1cm5pbmcgdGhlIGJvZHkuXHJcbiAgICAgKiBAcGFyYW0gcmVwb3J0UHJvZ3Jlc3MgZmxhZyB0byByZXBvcnQgcmVxdWVzdCBhbmQgcmVzcG9uc2UgcHJvZ3Jlc3MuXHJcbiAgICAgKi9cclxuICAgIHB1YmxpYyBnZXRFeGFtcGxlcyhsYW5ndWFnZTogc3RyaW5nLCBhaT86IEFycmF5PEFpPiwgY2hlY2tvdXQ/OiBib29sZWFuLCBjbGllbnRJZHM/OiBBcnJheTxudW1iZXI+LCBjb250ZW50SWRzPzogQXJyYXk8c3RyaW5nPiwgbm90Q29udGVudElkcz86IEFycmF5PHN0cmluZz4sIGVuZERhdGU/OiBudW1iZXIsIHN0YXJ0RGF0ZT86IG51bWJlciwgcmV2aWV3ZWRTdGFydERhdGU/OiBudW1iZXIsIHJldmlld2VkRW5kRGF0ZT86IG51bWJlciwgY2hlY2tvdXRBdmFpbGFibGU/OiBib29sZWFuLCBkb25lQnlNb2RlcmF0b3JJZD86IE1vZGVyYXRvcklkLCBsaW1pdD86IG51bWJlciwgb2Zmc2V0PzogbnVtYmVyLCBzb3J0Qnk/OiBzdHJpbmcsIHRhZ3M/OiBBcnJheTxzdHJpbmc+LCB0ZXh0Pzogc3RyaW5nLCB0b3BpY3M/OiBBcnJheTxUb3BpY3M+LCB1bnJlc29sdmVkQ29tbWVudHM/OiBib29sZWFuLCBvYnNlcnZlPzogJ2JvZHknLCByZXBvcnRQcm9ncmVzcz86IGJvb2xlYW4pOiBPYnNlcnZhYmxlPEV4YW1wbGVPdXRwdXQ+O1xyXG4gICAgcHVibGljIGdldEV4YW1wbGVzKGxhbmd1YWdlOiBzdHJpbmcsIGFpPzogQXJyYXk8QWk+LCBjaGVja291dD86IGJvb2xlYW4sIGNsaWVudElkcz86IEFycmF5PG51bWJlcj4sIGNvbnRlbnRJZHM/OiBBcnJheTxzdHJpbmc+LCBub3RDb250ZW50SWRzPzogQXJyYXk8c3RyaW5nPiwgZW5kRGF0ZT86IG51bWJlciwgc3RhcnREYXRlPzogbnVtYmVyLCByZXZpZXdlZFN0YXJ0RGF0ZT86IG51bWJlciwgcmV2aWV3ZWRFbmREYXRlPzogbnVtYmVyLCBjaGVja291dEF2YWlsYWJsZT86IGJvb2xlYW4sIGRvbmVCeU1vZGVyYXRvcklkPzogTW9kZXJhdG9ySWQsIGxpbWl0PzogbnVtYmVyLCBvZmZzZXQ/OiBudW1iZXIsIHNvcnRCeT86IHN0cmluZywgdGFncz86IEFycmF5PHN0cmluZz4sIHRleHQ/OiBzdHJpbmcsIHRvcGljcz86IEFycmF5PFRvcGljcz4sIHVucmVzb2x2ZWRDb21tZW50cz86IGJvb2xlYW4sIG9ic2VydmU/OiAncmVzcG9uc2UnLCByZXBvcnRQcm9ncmVzcz86IGJvb2xlYW4pOiBPYnNlcnZhYmxlPEh0dHBSZXNwb25zZTxFeGFtcGxlT3V0cHV0Pj47XHJcbiAgICBwdWJsaWMgZ2V0RXhhbXBsZXMobGFuZ3VhZ2U6IHN0cmluZywgYWk/OiBBcnJheTxBaT4sIGNoZWNrb3V0PzogYm9vbGVhbiwgY2xpZW50SWRzPzogQXJyYXk8bnVtYmVyPiwgY29udGVudElkcz86IEFycmF5PHN0cmluZz4sIG5vdENvbnRlbnRJZHM/OiBBcnJheTxzdHJpbmc+LCBlbmREYXRlPzogbnVtYmVyLCBzdGFydERhdGU/OiBudW1iZXIsIHJldmlld2VkU3RhcnREYXRlPzogbnVtYmVyLCByZXZpZXdlZEVuZERhdGU/OiBudW1iZXIsIGNoZWNrb3V0QXZhaWxhYmxlPzogYm9vbGVhbiwgZG9uZUJ5TW9kZXJhdG9ySWQ/OiBNb2RlcmF0b3JJZCwgbGltaXQ/OiBudW1iZXIsIG9mZnNldD86IG51bWJlciwgc29ydEJ5Pzogc3RyaW5nLCB0YWdzPzogQXJyYXk8c3RyaW5nPiwgdGV4dD86IHN0cmluZywgdG9waWNzPzogQXJyYXk8VG9waWNzPiwgdW5yZXNvbHZlZENvbW1lbnRzPzogYm9vbGVhbiwgb2JzZXJ2ZT86ICdldmVudHMnLCByZXBvcnRQcm9ncmVzcz86IGJvb2xlYW4pOiBPYnNlcnZhYmxlPEh0dHBFdmVudDxFeGFtcGxlT3V0cHV0Pj47XHJcbiAgICBwdWJsaWMgZ2V0RXhhbXBsZXMobGFuZ3VhZ2U6IHN0cmluZywgYWk/OiBBcnJheTxBaT4sIGNoZWNrb3V0PzogYm9vbGVhbiwgY2xpZW50SWRzPzogQXJyYXk8bnVtYmVyPiwgY29udGVudElkcz86IEFycmF5PHN0cmluZz4sIG5vdENvbnRlbnRJZHM/OiBBcnJheTxzdHJpbmc+LCBlbmREYXRlPzogbnVtYmVyLCBzdGFydERhdGU/OiBudW1iZXIsIHJldmlld2VkU3RhcnREYXRlPzogbnVtYmVyLCByZXZpZXdlZEVuZERhdGU/OiBudW1iZXIsIGNoZWNrb3V0QXZhaWxhYmxlPzogYm9vbGVhbiwgZG9uZUJ5TW9kZXJhdG9ySWQ/OiBNb2RlcmF0b3JJZCwgbGltaXQ/OiBudW1iZXIsIG9mZnNldD86IG51bWJlciwgc29ydEJ5Pzogc3RyaW5nLCB0YWdzPzogQXJyYXk8c3RyaW5nPiwgdGV4dD86IHN0cmluZywgdG9waWNzPzogQXJyYXk8VG9waWNzPiwgdW5yZXNvbHZlZENvbW1lbnRzPzogYm9vbGVhbiwgb2JzZXJ2ZTogYW55ID0gJ2JvZHknLCByZXBvcnRQcm9ncmVzczogYm9vbGVhbiA9IGZhbHNlICk6IE9ic2VydmFibGU8YW55PiB7XHJcblxyXG4gICAgICAgIGlmIChsYW5ndWFnZSA9PT0gbnVsbCB8fCBsYW5ndWFnZSA9PT0gdW5kZWZpbmVkKSB7XHJcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcignUmVxdWlyZWQgcGFyYW1ldGVyIGxhbmd1YWdlIHdhcyBudWxsIG9yIHVuZGVmaW5lZCB3aGVuIGNhbGxpbmcgZ2V0RXhhbXBsZXMuJyk7XHJcbiAgICAgICAgfVxyXG5cclxuXHJcblxyXG5cclxuXHJcblxyXG5cclxuXHJcblxyXG5cclxuXHJcblxyXG5cclxuXHJcblxyXG5cclxuXHJcblxyXG5cclxuICAgICAgICBsZXQgcXVlcnlQYXJhbWV0ZXJzID0gbmV3IEh0dHBQYXJhbXMoe2VuY29kZXI6IG5ldyBDdXN0b21IdHRwVXJsRW5jb2RpbmdDb2RlYygpfSk7XHJcbiAgICAgICAgaWYgKGFpKSB7XHJcbiAgICAgICAgICAgIGFpLmZvckVhY2goKGVsZW1lbnQpID0+IHtcclxuICAgICAgICAgICAgICAgIHF1ZXJ5UGFyYW1ldGVycyA9IHF1ZXJ5UGFyYW1ldGVycy5hcHBlbmQoJ2FpJywgPGFueT5lbGVtZW50KTtcclxuICAgICAgICAgICAgfSlcclxuICAgICAgICB9XHJcbiAgICAgICAgaWYgKGNoZWNrb3V0ICE9PSB1bmRlZmluZWQgJiYgY2hlY2tvdXQgIT09IG51bGwpIHtcclxuICAgICAgICAgICAgcXVlcnlQYXJhbWV0ZXJzID0gcXVlcnlQYXJhbWV0ZXJzLnNldCgnY2hlY2tvdXQnLCA8YW55PmNoZWNrb3V0KTtcclxuICAgICAgICB9XHJcbiAgICAgICAgaWYgKGNsaWVudElkcykge1xyXG4gICAgICAgICAgICBxdWVyeVBhcmFtZXRlcnMgPSBxdWVyeVBhcmFtZXRlcnMuc2V0KCdjbGllbnRJZHMnLCBjbGllbnRJZHMuam9pbihDT0xMRUNUSU9OX0ZPUk1BVFNbJ2NzdiddKSk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGlmIChjb250ZW50SWRzKSB7XHJcbiAgICAgICAgICAgIHF1ZXJ5UGFyYW1ldGVycyA9IHF1ZXJ5UGFyYW1ldGVycy5zZXQoJ2NvbnRlbnRJZHMnLCBjb250ZW50SWRzLmpvaW4oQ09MTEVDVElPTl9GT1JNQVRTWydjc3YnXSkpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpZiAobm90Q29udGVudElkcykge1xyXG4gICAgICAgICAgICBxdWVyeVBhcmFtZXRlcnMgPSBxdWVyeVBhcmFtZXRlcnMuc2V0KCdub3RDb250ZW50SWRzJywgbm90Q29udGVudElkcy5qb2luKENPTExFQ1RJT05fRk9STUFUU1snY3N2J10pKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgaWYgKGVuZERhdGUgIT09IHVuZGVmaW5lZCAmJiBlbmREYXRlICE9PSBudWxsKSB7XHJcbiAgICAgICAgICAgIHF1ZXJ5UGFyYW1ldGVycyA9IHF1ZXJ5UGFyYW1ldGVycy5zZXQoJ2VuZERhdGUnLCA8YW55PmVuZERhdGUpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpZiAoc3RhcnREYXRlICE9PSB1bmRlZmluZWQgJiYgc3RhcnREYXRlICE9PSBudWxsKSB7XHJcbiAgICAgICAgICAgIHF1ZXJ5UGFyYW1ldGVycyA9IHF1ZXJ5UGFyYW1ldGVycy5zZXQoJ3N0YXJ0RGF0ZScsIDxhbnk+c3RhcnREYXRlKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgaWYgKHJldmlld2VkU3RhcnREYXRlICE9PSB1bmRlZmluZWQgJiYgcmV2aWV3ZWRTdGFydERhdGUgIT09IG51bGwpIHtcclxuICAgICAgICAgICAgcXVlcnlQYXJhbWV0ZXJzID0gcXVlcnlQYXJhbWV0ZXJzLnNldCgncmV2aWV3ZWRTdGFydERhdGUnLCA8YW55PnJldmlld2VkU3RhcnREYXRlKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgaWYgKHJldmlld2VkRW5kRGF0ZSAhPT0gdW5kZWZpbmVkICYmIHJldmlld2VkRW5kRGF0ZSAhPT0gbnVsbCkge1xyXG4gICAgICAgICAgICBxdWVyeVBhcmFtZXRlcnMgPSBxdWVyeVBhcmFtZXRlcnMuc2V0KCdyZXZpZXdlZEVuZERhdGUnLCA8YW55PnJldmlld2VkRW5kRGF0ZSk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGlmIChjaGVja291dEF2YWlsYWJsZSAhPT0gdW5kZWZpbmVkICYmIGNoZWNrb3V0QXZhaWxhYmxlICE9PSBudWxsKSB7XHJcbiAgICAgICAgICAgIHF1ZXJ5UGFyYW1ldGVycyA9IHF1ZXJ5UGFyYW1ldGVycy5zZXQoJ2NoZWNrb3V0QXZhaWxhYmxlJywgPGFueT5jaGVja291dEF2YWlsYWJsZSk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGlmIChkb25lQnlNb2RlcmF0b3JJZCAhPT0gdW5kZWZpbmVkICYmIGRvbmVCeU1vZGVyYXRvcklkICE9PSBudWxsKSB7XHJcbiAgICAgICAgICAgIHF1ZXJ5UGFyYW1ldGVycyA9IHF1ZXJ5UGFyYW1ldGVycy5zZXQoJ2RvbmVCeU1vZGVyYXRvcklkJywgPGFueT5kb25lQnlNb2RlcmF0b3JJZCk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGlmIChsYW5ndWFnZSAhPT0gdW5kZWZpbmVkICYmIGxhbmd1YWdlICE9PSBudWxsKSB7XHJcbiAgICAgICAgICAgIHF1ZXJ5UGFyYW1ldGVycyA9IHF1ZXJ5UGFyYW1ldGVycy5zZXQoJ2xhbmd1YWdlJywgPGFueT5sYW5ndWFnZSk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGlmIChsaW1pdCAhPT0gdW5kZWZpbmVkICYmIGxpbWl0ICE9PSBudWxsKSB7XHJcbiAgICAgICAgICAgIHF1ZXJ5UGFyYW1ldGVycyA9IHF1ZXJ5UGFyYW1ldGVycy5zZXQoJ2xpbWl0JywgPGFueT5saW1pdCk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGlmIChvZmZzZXQgIT09IHVuZGVmaW5lZCAmJiBvZmZzZXQgIT09IG51bGwpIHtcclxuICAgICAgICAgICAgcXVlcnlQYXJhbWV0ZXJzID0gcXVlcnlQYXJhbWV0ZXJzLnNldCgnb2Zmc2V0JywgPGFueT5vZmZzZXQpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpZiAoc29ydEJ5ICE9PSB1bmRlZmluZWQgJiYgc29ydEJ5ICE9PSBudWxsKSB7XHJcbiAgICAgICAgICAgIHF1ZXJ5UGFyYW1ldGVycyA9IHF1ZXJ5UGFyYW1ldGVycy5zZXQoJ3NvcnRCeScsIDxhbnk+c29ydEJ5KTtcclxuICAgICAgICB9XHJcbiAgICAgICAgaWYgKHRhZ3MpIHtcclxuICAgICAgICAgICAgcXVlcnlQYXJhbWV0ZXJzID0gcXVlcnlQYXJhbWV0ZXJzLnNldCgndGFncycsIHRhZ3Muam9pbihDT0xMRUNUSU9OX0ZPUk1BVFNbJ2NzdiddKSk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGlmICh0ZXh0ICE9PSB1bmRlZmluZWQgJiYgdGV4dCAhPT0gbnVsbCkge1xyXG4gICAgICAgICAgICBxdWVyeVBhcmFtZXRlcnMgPSBxdWVyeVBhcmFtZXRlcnMuc2V0KCd0ZXh0JywgPGFueT50ZXh0KTtcclxuICAgICAgICB9XHJcbiAgICAgICAgaWYgKHRvcGljcykge1xyXG4gICAgICAgICAgICB0b3BpY3MuZm9yRWFjaCgoZWxlbWVudCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgcXVlcnlQYXJhbWV0ZXJzID0gcXVlcnlQYXJhbWV0ZXJzLmFwcGVuZCgndG9waWNzJywgPGFueT5lbGVtZW50KTtcclxuICAgICAgICAgICAgfSlcclxuICAgICAgICB9XHJcbiAgICAgICAgaWYgKHVucmVzb2x2ZWRDb21tZW50cyAhPT0gdW5kZWZpbmVkICYmIHVucmVzb2x2ZWRDb21tZW50cyAhPT0gbnVsbCkge1xyXG4gICAgICAgICAgICBxdWVyeVBhcmFtZXRlcnMgPSBxdWVyeVBhcmFtZXRlcnMuc2V0KCd1bnJlc29sdmVkQ29tbWVudHMnLCA8YW55PnVucmVzb2x2ZWRDb21tZW50cyk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBsZXQgaGVhZGVycyA9IHRoaXMuZGVmYXVsdEhlYWRlcnM7XHJcblxyXG4gICAgICAgIC8vIHRvIGRldGVybWluZSB0aGUgQWNjZXB0IGhlYWRlclxyXG4gICAgICAgIGxldCBodHRwSGVhZGVyQWNjZXB0czogc3RyaW5nW10gPSBbXHJcbiAgICAgICAgICAgICdhcHBsaWNhdGlvbi9qc29uJ1xyXG4gICAgICAgIF07XHJcbiAgICAgICAgY29uc3QgaHR0cEhlYWRlckFjY2VwdFNlbGVjdGVkOiBzdHJpbmcgfCB1bmRlZmluZWQgPSB0aGlzLmNvbmZpZ3VyYXRpb24uc2VsZWN0SGVhZGVyQWNjZXB0KGh0dHBIZWFkZXJBY2NlcHRzKTtcclxuICAgICAgICBpZiAoaHR0cEhlYWRlckFjY2VwdFNlbGVjdGVkICE9IHVuZGVmaW5lZCkge1xyXG4gICAgICAgICAgICBoZWFkZXJzID0gaGVhZGVycy5zZXQoJ0FjY2VwdCcsIGh0dHBIZWFkZXJBY2NlcHRTZWxlY3RlZCk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvLyB0byBkZXRlcm1pbmUgdGhlIENvbnRlbnQtVHlwZSBoZWFkZXJcclxuICAgICAgICBjb25zdCBjb25zdW1lczogc3RyaW5nW10gPSBbXHJcbiAgICAgICAgXTtcclxuXHJcbiAgICAgICAgcmV0dXJuIHRoaXMuaHR0cENsaWVudC5yZXF1ZXN0PEV4YW1wbGVPdXRwdXQ+KCdnZXQnLGAke3RoaXMuYmFzZVBhdGh9L2luYm94L3F1ZXVlL2V4YW1wbGVzL2l0ZW1zYCxcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgcGFyYW1zOiBxdWVyeVBhcmFtZXRlcnMsXHJcbiAgICAgICAgICAgICAgICB3aXRoQ3JlZGVudGlhbHM6IHRoaXMuY29uZmlndXJhdGlvbi53aXRoQ3JlZGVudGlhbHMsXHJcbiAgICAgICAgICAgICAgICBoZWFkZXJzOiBoZWFkZXJzLFxyXG4gICAgICAgICAgICAgICAgb2JzZXJ2ZTogb2JzZXJ2ZSxcclxuICAgICAgICAgICAgICAgIHJlcG9ydFByb2dyZXNzOiByZXBvcnRQcm9ncmVzc1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgKTtcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIGxpc3QgYWxsIHF1ZXVlcyB3aXRoIHBlbmRpbmcgYW5kIHRvdGFsIGNvdW50c1xyXG4gICAgICogV2lsbCBsaXN0IGFsbCB0aGUgcXVldWVzIHRoYXQgYXJlIGF2YWlsYWJsZSBhbmQgdGhlIGNvdW50IG9mIGl0ZW1zIGluIHRoZW1cclxuICAgICAqIEBwYXJhbSBvYnNlcnZlIHNldCB3aGV0aGVyIG9yIG5vdCB0byByZXR1cm4gdGhlIGRhdGEgT2JzZXJ2YWJsZSBhcyB0aGUgYm9keSwgcmVzcG9uc2Ugb3IgZXZlbnRzLiBkZWZhdWx0cyB0byByZXR1cm5pbmcgdGhlIGJvZHkuXHJcbiAgICAgKiBAcGFyYW0gcmVwb3J0UHJvZ3Jlc3MgZmxhZyB0byByZXBvcnQgcmVxdWVzdCBhbmQgcmVzcG9uc2UgcHJvZ3Jlc3MuXHJcbiAgICAgKi9cclxuICAgIHB1YmxpYyBnZXRJbmJveChvYnNlcnZlPzogJ2JvZHknLCByZXBvcnRQcm9ncmVzcz86IGJvb2xlYW4pOiBPYnNlcnZhYmxlPEFycmF5PFF1ZXVlPj47XHJcbiAgICBwdWJsaWMgZ2V0SW5ib3gob2JzZXJ2ZT86ICdyZXNwb25zZScsIHJlcG9ydFByb2dyZXNzPzogYm9vbGVhbik6IE9ic2VydmFibGU8SHR0cFJlc3BvbnNlPEFycmF5PFF1ZXVlPj4+O1xyXG4gICAgcHVibGljIGdldEluYm94KG9ic2VydmU/OiAnZXZlbnRzJywgcmVwb3J0UHJvZ3Jlc3M/OiBib29sZWFuKTogT2JzZXJ2YWJsZTxIdHRwRXZlbnQ8QXJyYXk8UXVldWU+Pj47XHJcbiAgICBwdWJsaWMgZ2V0SW5ib3gob2JzZXJ2ZTogYW55ID0gJ2JvZHknLCByZXBvcnRQcm9ncmVzczogYm9vbGVhbiA9IGZhbHNlICk6IE9ic2VydmFibGU8YW55PiB7XHJcblxyXG4gICAgICAgIGxldCBoZWFkZXJzID0gdGhpcy5kZWZhdWx0SGVhZGVycztcclxuXHJcbiAgICAgICAgLy8gdG8gZGV0ZXJtaW5lIHRoZSBBY2NlcHQgaGVhZGVyXHJcbiAgICAgICAgbGV0IGh0dHBIZWFkZXJBY2NlcHRzOiBzdHJpbmdbXSA9IFtcclxuICAgICAgICAgICAgJ2FwcGxpY2F0aW9uL2pzb24nXHJcbiAgICAgICAgXTtcclxuICAgICAgICBjb25zdCBodHRwSGVhZGVyQWNjZXB0U2VsZWN0ZWQ6IHN0cmluZyB8IHVuZGVmaW5lZCA9IHRoaXMuY29uZmlndXJhdGlvbi5zZWxlY3RIZWFkZXJBY2NlcHQoaHR0cEhlYWRlckFjY2VwdHMpO1xyXG4gICAgICAgIGlmIChodHRwSGVhZGVyQWNjZXB0U2VsZWN0ZWQgIT0gdW5kZWZpbmVkKSB7XHJcbiAgICAgICAgICAgIGhlYWRlcnMgPSBoZWFkZXJzLnNldCgnQWNjZXB0JywgaHR0cEhlYWRlckFjY2VwdFNlbGVjdGVkKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8vIHRvIGRldGVybWluZSB0aGUgQ29udGVudC1UeXBlIGhlYWRlclxyXG4gICAgICAgIGNvbnN0IGNvbnN1bWVzOiBzdHJpbmdbXSA9IFtcclxuICAgICAgICBdO1xyXG5cclxuICAgICAgICByZXR1cm4gdGhpcy5odHRwQ2xpZW50LnJlcXVlc3Q8QXJyYXk8UXVldWU+PignZ2V0JyxgJHt0aGlzLmJhc2VQYXRofS9pbmJveGAsXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIHdpdGhDcmVkZW50aWFsczogdGhpcy5jb25maWd1cmF0aW9uLndpdGhDcmVkZW50aWFscyxcclxuICAgICAgICAgICAgICAgIGhlYWRlcnM6IGhlYWRlcnMsXHJcbiAgICAgICAgICAgICAgICBvYnNlcnZlOiBvYnNlcnZlLFxyXG4gICAgICAgICAgICAgICAgcmVwb3J0UHJvZ3Jlc3M6IHJlcG9ydFByb2dyZXNzXHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICApO1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogR2V0IHRoZSBjaGVja291dCBmb3IgdGhpcyBpdGVtXHJcbiAgICAgKiBHZXQgdGhlIGNoZWNrb3V0IGZvciB0aGlzIGl0ZW1cclxuICAgICAqIEBwYXJhbSBxdWV1ZUlkIFRoZSB1bmlxdWUgaWRlbnRpZmllciBmb3IgdGhpcyBxdWV1ZVxyXG4gICAgICogQHBhcmFtIGNvbnRlbnRJZCBUaGUgdW5pcXVlIGlkZW50aWZpZXIgZm9yIHRoZSBjb250ZW50XHJcbiAgICAgKiBAcGFyYW0gb2JzZXJ2ZSBzZXQgd2hldGhlciBvciBub3QgdG8gcmV0dXJuIHRoZSBkYXRhIE9ic2VydmFibGUgYXMgdGhlIGJvZHksIHJlc3BvbnNlIG9yIGV2ZW50cy4gZGVmYXVsdHMgdG8gcmV0dXJuaW5nIHRoZSBib2R5LlxyXG4gICAgICogQHBhcmFtIHJlcG9ydFByb2dyZXNzIGZsYWcgdG8gcmVwb3J0IHJlcXVlc3QgYW5kIHJlc3BvbnNlIHByb2dyZXNzLlxyXG4gICAgICovXHJcbiAgICBwdWJsaWMgZ2V0SXRlbUNoZWNrb3V0KHF1ZXVlSWQ6IHN0cmluZywgY29udGVudElkOiBzdHJpbmcsIG9ic2VydmU/OiAnYm9keScsIHJlcG9ydFByb2dyZXNzPzogYm9vbGVhbik6IE9ic2VydmFibGU8Q2hlY2tvdXQ+O1xyXG4gICAgcHVibGljIGdldEl0ZW1DaGVja291dChxdWV1ZUlkOiBzdHJpbmcsIGNvbnRlbnRJZDogc3RyaW5nLCBvYnNlcnZlPzogJ3Jlc3BvbnNlJywgcmVwb3J0UHJvZ3Jlc3M/OiBib29sZWFuKTogT2JzZXJ2YWJsZTxIdHRwUmVzcG9uc2U8Q2hlY2tvdXQ+PjtcclxuICAgIHB1YmxpYyBnZXRJdGVtQ2hlY2tvdXQocXVldWVJZDogc3RyaW5nLCBjb250ZW50SWQ6IHN0cmluZywgb2JzZXJ2ZT86ICdldmVudHMnLCByZXBvcnRQcm9ncmVzcz86IGJvb2xlYW4pOiBPYnNlcnZhYmxlPEh0dHBFdmVudDxDaGVja291dD4+O1xyXG4gICAgcHVibGljIGdldEl0ZW1DaGVja291dChxdWV1ZUlkOiBzdHJpbmcsIGNvbnRlbnRJZDogc3RyaW5nLCBvYnNlcnZlOiBhbnkgPSAnYm9keScsIHJlcG9ydFByb2dyZXNzOiBib29sZWFuID0gZmFsc2UgKTogT2JzZXJ2YWJsZTxhbnk+IHtcclxuXHJcbiAgICAgICAgaWYgKHF1ZXVlSWQgPT09IG51bGwgfHwgcXVldWVJZCA9PT0gdW5kZWZpbmVkKSB7XHJcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcignUmVxdWlyZWQgcGFyYW1ldGVyIHF1ZXVlSWQgd2FzIG51bGwgb3IgdW5kZWZpbmVkIHdoZW4gY2FsbGluZyBnZXRJdGVtQ2hlY2tvdXQuJyk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBpZiAoY29udGVudElkID09PSBudWxsIHx8IGNvbnRlbnRJZCA9PT0gdW5kZWZpbmVkKSB7XHJcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcignUmVxdWlyZWQgcGFyYW1ldGVyIGNvbnRlbnRJZCB3YXMgbnVsbCBvciB1bmRlZmluZWQgd2hlbiBjYWxsaW5nIGdldEl0ZW1DaGVja291dC4nKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGxldCBoZWFkZXJzID0gdGhpcy5kZWZhdWx0SGVhZGVycztcclxuXHJcbiAgICAgICAgLy8gdG8gZGV0ZXJtaW5lIHRoZSBBY2NlcHQgaGVhZGVyXHJcbiAgICAgICAgbGV0IGh0dHBIZWFkZXJBY2NlcHRzOiBzdHJpbmdbXSA9IFtcclxuICAgICAgICAgICAgJ2FwcGxpY2F0aW9uL2pzb24nXHJcbiAgICAgICAgXTtcclxuICAgICAgICBjb25zdCBodHRwSGVhZGVyQWNjZXB0U2VsZWN0ZWQ6IHN0cmluZyB8IHVuZGVmaW5lZCA9IHRoaXMuY29uZmlndXJhdGlvbi5zZWxlY3RIZWFkZXJBY2NlcHQoaHR0cEhlYWRlckFjY2VwdHMpO1xyXG4gICAgICAgIGlmIChodHRwSGVhZGVyQWNjZXB0U2VsZWN0ZWQgIT0gdW5kZWZpbmVkKSB7XHJcbiAgICAgICAgICAgIGhlYWRlcnMgPSBoZWFkZXJzLnNldCgnQWNjZXB0JywgaHR0cEhlYWRlckFjY2VwdFNlbGVjdGVkKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8vIHRvIGRldGVybWluZSB0aGUgQ29udGVudC1UeXBlIGhlYWRlclxyXG4gICAgICAgIGNvbnN0IGNvbnN1bWVzOiBzdHJpbmdbXSA9IFtcclxuICAgICAgICBdO1xyXG5cclxuICAgICAgICByZXR1cm4gdGhpcy5odHRwQ2xpZW50LnJlcXVlc3Q8Q2hlY2tvdXQ+KCdnZXQnLGAke3RoaXMuYmFzZVBhdGh9L2luYm94L3F1ZXVlLyR7ZW5jb2RlVVJJQ29tcG9uZW50KFN0cmluZyhxdWV1ZUlkKSl9L2l0ZW1zLyR7ZW5jb2RlVVJJQ29tcG9uZW50KFN0cmluZyhjb250ZW50SWQpKX0vY2hlY2tvdXRgLFxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICB3aXRoQ3JlZGVudGlhbHM6IHRoaXMuY29uZmlndXJhdGlvbi53aXRoQ3JlZGVudGlhbHMsXHJcbiAgICAgICAgICAgICAgICBoZWFkZXJzOiBoZWFkZXJzLFxyXG4gICAgICAgICAgICAgICAgb2JzZXJ2ZTogb2JzZXJ2ZSxcclxuICAgICAgICAgICAgICAgIHJlcG9ydFByb2dyZXNzOiByZXBvcnRQcm9ncmVzc1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgKTtcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIEdldCB0aGUgcXVldWVcclxuICAgICAqIEEgUXVldWUgaXMgYSBncm91cCBvZiB3b3JrIHRvIGJlIGRvbmUgYnkgbW9kZXJhdG9ycy4gIFRoaXMgd2lsbCBnZXQgdGhlIHF1ZXVlIGFuZCBpdCYjeDI3O3MgaW5mb3JtYXRpb25cclxuICAgICAqIEBwYXJhbSBxdWV1ZUlkIFRoZSB1bmlxdWUgaWRlbnRpZmllciBmb3IgdGhpcyBxdWV1ZVxyXG4gICAgICogQHBhcmFtIG9ic2VydmUgc2V0IHdoZXRoZXIgb3Igbm90IHRvIHJldHVybiB0aGUgZGF0YSBPYnNlcnZhYmxlIGFzIHRoZSBib2R5LCByZXNwb25zZSBvciBldmVudHMuIGRlZmF1bHRzIHRvIHJldHVybmluZyB0aGUgYm9keS5cclxuICAgICAqIEBwYXJhbSByZXBvcnRQcm9ncmVzcyBmbGFnIHRvIHJlcG9ydCByZXF1ZXN0IGFuZCByZXNwb25zZSBwcm9ncmVzcy5cclxuICAgICAqL1xyXG4gICAgcHVibGljIGdldFF1ZXVlKHF1ZXVlSWQ6IHN0cmluZywgb2JzZXJ2ZT86ICdib2R5JywgcmVwb3J0UHJvZ3Jlc3M/OiBib29sZWFuKTogT2JzZXJ2YWJsZTxRdWV1ZT47XHJcbiAgICBwdWJsaWMgZ2V0UXVldWUocXVldWVJZDogc3RyaW5nLCBvYnNlcnZlPzogJ3Jlc3BvbnNlJywgcmVwb3J0UHJvZ3Jlc3M/OiBib29sZWFuKTogT2JzZXJ2YWJsZTxIdHRwUmVzcG9uc2U8UXVldWU+PjtcclxuICAgIHB1YmxpYyBnZXRRdWV1ZShxdWV1ZUlkOiBzdHJpbmcsIG9ic2VydmU/OiAnZXZlbnRzJywgcmVwb3J0UHJvZ3Jlc3M/OiBib29sZWFuKTogT2JzZXJ2YWJsZTxIdHRwRXZlbnQ8UXVldWU+PjtcclxuICAgIHB1YmxpYyBnZXRRdWV1ZShxdWV1ZUlkOiBzdHJpbmcsIG9ic2VydmU6IGFueSA9ICdib2R5JywgcmVwb3J0UHJvZ3Jlc3M6IGJvb2xlYW4gPSBmYWxzZSApOiBPYnNlcnZhYmxlPGFueT4ge1xyXG5cclxuICAgICAgICBpZiAocXVldWVJZCA9PT0gbnVsbCB8fCBxdWV1ZUlkID09PSB1bmRlZmluZWQpIHtcclxuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdSZXF1aXJlZCBwYXJhbWV0ZXIgcXVldWVJZCB3YXMgbnVsbCBvciB1bmRlZmluZWQgd2hlbiBjYWxsaW5nIGdldFF1ZXVlLicpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgbGV0IGhlYWRlcnMgPSB0aGlzLmRlZmF1bHRIZWFkZXJzO1xyXG5cclxuICAgICAgICAvLyB0byBkZXRlcm1pbmUgdGhlIEFjY2VwdCBoZWFkZXJcclxuICAgICAgICBsZXQgaHR0cEhlYWRlckFjY2VwdHM6IHN0cmluZ1tdID0gW1xyXG4gICAgICAgICAgICAnYXBwbGljYXRpb24vanNvbidcclxuICAgICAgICBdO1xyXG4gICAgICAgIGNvbnN0IGh0dHBIZWFkZXJBY2NlcHRTZWxlY3RlZDogc3RyaW5nIHwgdW5kZWZpbmVkID0gdGhpcy5jb25maWd1cmF0aW9uLnNlbGVjdEhlYWRlckFjY2VwdChodHRwSGVhZGVyQWNjZXB0cyk7XHJcbiAgICAgICAgaWYgKGh0dHBIZWFkZXJBY2NlcHRTZWxlY3RlZCAhPSB1bmRlZmluZWQpIHtcclxuICAgICAgICAgICAgaGVhZGVycyA9IGhlYWRlcnMuc2V0KCdBY2NlcHQnLCBodHRwSGVhZGVyQWNjZXB0U2VsZWN0ZWQpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLy8gdG8gZGV0ZXJtaW5lIHRoZSBDb250ZW50LVR5cGUgaGVhZGVyXHJcbiAgICAgICAgY29uc3QgY29uc3VtZXM6IHN0cmluZ1tdID0gW1xyXG4gICAgICAgIF07XHJcblxyXG4gICAgICAgIHJldHVybiB0aGlzLmh0dHBDbGllbnQucmVxdWVzdDxRdWV1ZT4oJ2dldCcsYCR7dGhpcy5iYXNlUGF0aH0vaW5ib3gvcXVldWUvJHtlbmNvZGVVUklDb21wb25lbnQoU3RyaW5nKHF1ZXVlSWQpKX1gLFxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICB3aXRoQ3JlZGVudGlhbHM6IHRoaXMuY29uZmlndXJhdGlvbi53aXRoQ3JlZGVudGlhbHMsXHJcbiAgICAgICAgICAgICAgICBoZWFkZXJzOiBoZWFkZXJzLFxyXG4gICAgICAgICAgICAgICAgb2JzZXJ2ZTogb2JzZXJ2ZSxcclxuICAgICAgICAgICAgICAgIHJlcG9ydFByb2dyZXNzOiByZXBvcnRQcm9ncmVzc1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgKTtcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIFNlYXJjaCBmb3IgaXRlbXMgaW4gdGhpcyBxdWV1ZVxyXG4gICAgICogTG9va3VwIGl0ZW1zIGZvciB0aGlzIHF1ZXVlXHJcbiAgICAgKiBAcGFyYW0gbGFuZ3VhZ2UgU2hvdyByZXN1bHRzIGZvciB0aGUgZ2l2ZW4gbGFuZ3VhZ2Ugb25seS4gICBUaGlzIGlzIHRoZSBsYW5ndWFnZSB1c2VkLCBjb3VsZCBoYXZlIGJlZW4gc2V0IGJ5IHRoZSB1c2VyIG9yIGRldGVjdGVkIGJ5IGxhbmd1YWdlIGlkLlxyXG4gICAgICogQHBhcmFtIGFpIFNob3cgaXRlbXMgdGhlIEFJIHByZWRpY3RzIGFzIHVzZWZ1bCBiZWNhdXNlIG1vZGVyYXRvcnMgaW4gdGhlIHBhc3QgaGF2ZSB0YWtlbiBhbiBhY3Rpb24gb24gdGhpcyBpdGVtcy4gIFBhc3NpbmcgYW4gYXJyYXkgb2Ygb2JqZWN0cyBhcyBwYXJhbXMgY2FuIGJlIHRyaWNreSBhdCBmaXJzdCBzbyBoZXJlIGlzIGFuIGV4YW1wbGUgJmFtcDthaVswXVttaW5QcmVkaWN0aW9uXSYjeDNEOzAuNTAmYW1wO2FpWzBdW21vZGVsTmFtZV0mI3gzRDt0b3BpY192dWxnYXImYW1wO2FpWzBdW21heFByZWRpY3Rpb25dJiN4M0Q7MC45NSZhbXA7YWlbMV1bbWluUHJlZGljdGlvbl0mI3gzRDswLjEwJmFtcDthaVsxXVttb2RlbE5hbWVdJiN4M0Q7dG9waWNfZnJhdWQmYW1wO2FpWzFdW21heFByZWRpY3Rpb25dJiN4M0Q7MC44MCAgSW4gdXJsZW5jb2RlZCBmb3JtIHRoYXQgd291bGQgYmUgJmFtcDthaSU1QjAlNUQlNUJtaW5QcmVkaWN0aW9uJTVEJiN4M0Q7MC41MCZhbXA7YWklNUIwJTVEJTVCbW9kZWxOYW1lJTVEJiN4M0Q7dG9waWNfdnVsZ2FyJmFtcDthaSU1QjAlNUQlNUJtYXhQcmVkaWN0aW9uJTVEJiN4M0Q7MC45NSZhbXA7YWklNUIxJTVEJTVCbWluUHJlZGljdGlvbiU1RCYjeDNEOzAuMTAmYW1wO2FpJTVCMSU1RCU1Qm1vZGVsTmFtZSU1RCYjeDNEO3RvcGljX2ZyYXVkJmFtcDthaSU1QjElNUQlNUJtYXhQcmVkaWN0aW9uJTVEJiN4M0Q7MC44MCBcclxuICAgICAqIEBwYXJhbSBjaGVja291dCBDaGVja291dCB0aGlzIGl0ZW0gZm9yIHJldmlld1xyXG4gICAgICogQHBhcmFtIGNsaWVudElkcyBTaG93IHJlc3VsdHMgZm9yIGEgZ2l2ZW4gY2xpZW50LiAgVHlwaWNhbGx5IHRoaXMgaXMgc2V0IGZvciB5b3UgYnkgdGhlIGludGVybmFsIHN5c3RlbSBiYXNlZCBvbiB0aGUgQVBJX0tFWSB5b3UgYXJlIHVzaW5nLiAgSG93ZXZlciBzb21lIGNsaWVudHMgYXJlIGFsbG93ZWQgdG8gdmlldyBvdGhlciBjbGllbnRzIHN1Y2ggYXMgd2hlbiB0aGV5IGhhdmUgYSBzYW5kYm94IG9yIHdoZW4gdGhleSBhcmUgYSBsYXJnZSBlbnRlcnByaXNlIGFuZCBoYXZlIG11bHRpcGxlIGNsaWVudHMgdGhleSBtYW5hZ2UuICBJdCB3aWxsIG9ubHkgYWxsb3cgeW91IHRvIHZpZXcgY2xpZW50IGRhdGEgeW91IGhhdmUgYWNjZXNzIHRvLiBZb3UgY2FuIHNldCB0aGlzIHRvIC0xIHRvIGFwcGx5IHRvIGFsbCBjbGllbnRzIHlvdSBoYXZlIGFjY2VzcyB0by5cclxuICAgICAqIEBwYXJhbSBjb250ZW50SWRzIEdldCB0aGVzZSBzcGVjaWZpYyBjb250ZW50SWRzLiAgRnJlcXVlbnRseSB1c2VkIHdoZW4geW91IHVzZSB0aGUgUHJldmlvdXMgYnV0dG9uLlxyXG4gICAgICogQHBhcmFtIG5vdENvbnRlbnRJZHMgRXhjbHVkZSB0aGVzZSBzcGVjaWZpYyBjb250ZW50SWRzLiAgT3JpZ2luYWxseSBkZXNpZ25lZCBzbyB5b3UgY2FuIGNhbGwgY2hlY2tvdXQgYW5kIHBhc3MgaW4gdGhlIGl0ZW0geW91IGFyZSB3b3JraW5nIG9uIHJpZ2h0IG5vdyBhbmQgaXQgd2lsbCBnaXZlIHlvdSBhIGRpZmZlcmVudCBvbmUuICBUaGUgZGVmYXVsdCBjaGVja291dCBiZWhhdmlvdXIgd2lsbCBhc3NpZ24gdGhlIGl0ZW1zIHlvdSBhbHJlYWR5IGhhdmUgY2hlY2tlZCBvdXQgICh3aGljaCBpcyBvbiB5b3VyIHNjcmVlbikuIFxyXG4gICAgICogQHBhcmFtIGVuZERhdGUgU2hvdyByZXN1bHRzIG9jY3VycmluZyBiZWZvcmUgdGhlIGdpdmVuIGRhdGUgaW4gdW5peHRpbWVzdGFtcCAobWlsbGlzZWNvbmRzIHNpbmNlIEVwb2NoKVxyXG4gICAgICogQHBhcmFtIHN0YXJ0RGF0ZSBTaG93IHJlc3VsdHMgb2NjdXJyaW5nIGFmdGVyIHRoZSBnaXZlbiBkYXRlIGluIHVuaXh0aW1lc3RhbXAgKG1pbGxpc2Vjb25kcyBzaW5jZSBFcG9jaClcclxuICAgICAqIEBwYXJhbSByZXZpZXdlZFN0YXJ0RGF0ZSBTaG93IHJlc3VsdHMgdGhhdCB3aGVyZSByZXZpZXdlZCBiZXR3ZWVuIGdpdmVuIGRhdGUgaW4gdW5peHRpbWVzdGFtcCAobWlsbGlzZWNvbmRzIHNpbmNlIEVwb2NoKVxyXG4gICAgICogQHBhcmFtIHJldmlld2VkRW5kRGF0ZSBTaG93IHJlc3VsdHMgdGhhdCB3aGVyZSByZXZpZXdlZCBiZXR3ZWVuIGdpdmVuIGRhdGUgaW4gdW5peHRpbWVzdGFtcCAobWlsbGlzZWNvbmRzIHNpbmNlIEVwb2NoKVxyXG4gICAgICogQHBhcmFtIGNoZWNrb3V0QXZhaWxhYmxlIE9ubHkgc2hvdyBpdGVtcyB3aGVyZSB0aGUgaXRlbSBjb3VsZCBiZSBjaGVja2VkIG91dCBieSBtZS4gIFRoaXMgaXMgdGhlIHNhbWUgYXMgY2hlY2tvdXQmI3gzRDt0cnVlIGJ1dCBpdCBkb2VzIG5vdCBjaGVjayBpdCBvdXQuXHJcbiAgICAgKiBAcGFyYW0gZG9uZUJ5TW9kZXJhdG9ySWQgT25seSBzaG93IHdvcmsgZG9uZSBieSB0aGlzIG1vZGVyYXRvcklkXHJcbiAgICAgKiBAcGFyYW0gbGltaXQgTGltaXQgdGhlIG51bWJlciBvZiByZXN1bHRzXHJcbiAgICAgKiBAcGFyYW0gb2Zmc2V0IFN0YXJ0IHRoZSBzZWFyY2ggZnJvbSBvZmZzZXQgMC4gIEZvciBpbnN0YW5jZSBpZiB5b3VyIHVzaW5nIHBhZ2luYXRpb24gcGFnZSAyIHdvdWxkIGJlIG9uIHRvdGFsSXRlbXNQZXJQYWdlKnBhZ2VOdW0uIFxyXG4gICAgICogQHBhcmFtIHNvcnRCeSBXaGF0IGRvIHlvdSB3YW50IHRvIHNvcnQgdGhlIHJlc3VsdHMgYnkgIC0gRklGTyB8IEZpcnN0IGluIEZpcnN0IE91dCwgdGhlIHNhbWUgb3JkZXIgdGhleSBjYW1lIGluIC0gUmVjZW50IHwgSGFuZGxlIHRoZSBtb3N0IHJlY2VudCBpdGVtcyBmaXJzdCAtIFByaW9yaXR5IHwgQnkgcHJpb3JpdHkgKGlmIGFwcGxpY2FibGUpLiAgRm9yIHF1YWxpdHkgY29udHJvbCBsaWtlIHNwZWxsaW5nIGl0IGlzIHRoZSB0aW1lcyB1c2VkIHNvIGl0IHdpbGwgc2hvdyB0aGUgaXRlbXMgbWlzc3BlbGxlZCAxMDAwIHRpbWVzIGJlZm9yZSB0aGUgb25lcyA1MDAgdGltZXMuICBGb3IgcmVwb3J0ZWQgdXNlcnMgaXQgd2lsbCBiZSB0aGUgb25lcyB3aGVyZSBtdWx0aXBsZSB1c2VycyBoYXZlIHJlcG9ydGVkIHRoZSBzYW1lIHVzZXIuIC0gQUkgfCBEZWFsIHdpdGggdGhlIGhpZ2VzdCBBSSBwcmVkaWN0aW9ucyBmaXJzdCB0aGF0IHByZWRpY3QgdGhpcyBzaG91bGQgYmUgcmVsZXZhbnQgZm9yIG1lLiAgKE5PVEU6IHRvIHNlYXJjaCBieSBBSSB5b3UgbXVzdCBhbHNvIGhhdmUgc2V0IHRoZSBhaS5tb2RlbE5hbWUgaW4gdGhlIGZpcnN0IGl0ZW0gb2YgdGhlIHBhcmFtZXRlciBhaSkgXHJcbiAgICAgKiBAcGFyYW0gdGFncyBPbmx5IGZpbmQgaXRlbXMgbWF0Y2hpbmcgYSBjZXJ0YWluIHRhZ1xyXG4gICAgICogQHBhcmFtIHRleHQgVGV4dCBzZWFyY2guICBUaGlzIHVzZXMgZnV6enkgbWF0Y2hpbmcuXHJcbiAgICAgKiBAcGFyYW0gdG9waWNzIE9ubHkgc2hvdyBpdGVtcyBmb3IgdGhlc2UgdG9waWNzICh0b3BpY0lkKSBiZXR3ZWVuIHJpc2sgbGV2ZWwgbWluUmlzayBhbmQgbWF4Umlza1xyXG4gICAgICogQHBhcmFtIHVucmVzb2x2ZWRDb21tZW50cyBXaWxsIHNlZSBpZiB0aGVyZSBhcmUgYW55IHVucmVzb2x2ZWQgY29tbWVudHMgZm9yIHlvdSBhbmQgc2hvdyBvbmx5IHRob3NlXHJcbiAgICAgKiBAcGFyYW0gb2JzZXJ2ZSBzZXQgd2hldGhlciBvciBub3QgdG8gcmV0dXJuIHRoZSBkYXRhIE9ic2VydmFibGUgYXMgdGhlIGJvZHksIHJlc3BvbnNlIG9yIGV2ZW50cy4gZGVmYXVsdHMgdG8gcmV0dXJuaW5nIHRoZSBib2R5LlxyXG4gICAgICogQHBhcmFtIHJlcG9ydFByb2dyZXNzIGZsYWcgdG8gcmVwb3J0IHJlcXVlc3QgYW5kIHJlc3BvbnNlIHByb2dyZXNzLlxyXG4gICAgICovXHJcbiAgICBwdWJsaWMgZ2V0UnVsZUF1ZGl0SXRlbXMobGFuZ3VhZ2U6IHN0cmluZywgYWk/OiBBcnJheTxBaT4sIGNoZWNrb3V0PzogYm9vbGVhbiwgY2xpZW50SWRzPzogQXJyYXk8bnVtYmVyPiwgY29udGVudElkcz86IEFycmF5PHN0cmluZz4sIG5vdENvbnRlbnRJZHM/OiBBcnJheTxzdHJpbmc+LCBlbmREYXRlPzogbnVtYmVyLCBzdGFydERhdGU/OiBudW1iZXIsIHJldmlld2VkU3RhcnREYXRlPzogbnVtYmVyLCByZXZpZXdlZEVuZERhdGU/OiBudW1iZXIsIGNoZWNrb3V0QXZhaWxhYmxlPzogYm9vbGVhbiwgZG9uZUJ5TW9kZXJhdG9ySWQ/OiBNb2RlcmF0b3JJZCwgbGltaXQ/OiBudW1iZXIsIG9mZnNldD86IG51bWJlciwgc29ydEJ5Pzogc3RyaW5nLCB0YWdzPzogQXJyYXk8c3RyaW5nPiwgdGV4dD86IHN0cmluZywgdG9waWNzPzogQXJyYXk8VG9waWNzPiwgdW5yZXNvbHZlZENvbW1lbnRzPzogYm9vbGVhbiwgb2JzZXJ2ZT86ICdib2R5JywgcmVwb3J0UHJvZ3Jlc3M/OiBib29sZWFuKTogT2JzZXJ2YWJsZTxSdWxlQXVkaXRPdXRwdXQ+O1xyXG4gICAgcHVibGljIGdldFJ1bGVBdWRpdEl0ZW1zKGxhbmd1YWdlOiBzdHJpbmcsIGFpPzogQXJyYXk8QWk+LCBjaGVja291dD86IGJvb2xlYW4sIGNsaWVudElkcz86IEFycmF5PG51bWJlcj4sIGNvbnRlbnRJZHM/OiBBcnJheTxzdHJpbmc+LCBub3RDb250ZW50SWRzPzogQXJyYXk8c3RyaW5nPiwgZW5kRGF0ZT86IG51bWJlciwgc3RhcnREYXRlPzogbnVtYmVyLCByZXZpZXdlZFN0YXJ0RGF0ZT86IG51bWJlciwgcmV2aWV3ZWRFbmREYXRlPzogbnVtYmVyLCBjaGVja291dEF2YWlsYWJsZT86IGJvb2xlYW4sIGRvbmVCeU1vZGVyYXRvcklkPzogTW9kZXJhdG9ySWQsIGxpbWl0PzogbnVtYmVyLCBvZmZzZXQ/OiBudW1iZXIsIHNvcnRCeT86IHN0cmluZywgdGFncz86IEFycmF5PHN0cmluZz4sIHRleHQ/OiBzdHJpbmcsIHRvcGljcz86IEFycmF5PFRvcGljcz4sIHVucmVzb2x2ZWRDb21tZW50cz86IGJvb2xlYW4sIG9ic2VydmU/OiAncmVzcG9uc2UnLCByZXBvcnRQcm9ncmVzcz86IGJvb2xlYW4pOiBPYnNlcnZhYmxlPEh0dHBSZXNwb25zZTxSdWxlQXVkaXRPdXRwdXQ+PjtcclxuICAgIHB1YmxpYyBnZXRSdWxlQXVkaXRJdGVtcyhsYW5ndWFnZTogc3RyaW5nLCBhaT86IEFycmF5PEFpPiwgY2hlY2tvdXQ/OiBib29sZWFuLCBjbGllbnRJZHM/OiBBcnJheTxudW1iZXI+LCBjb250ZW50SWRzPzogQXJyYXk8c3RyaW5nPiwgbm90Q29udGVudElkcz86IEFycmF5PHN0cmluZz4sIGVuZERhdGU/OiBudW1iZXIsIHN0YXJ0RGF0ZT86IG51bWJlciwgcmV2aWV3ZWRTdGFydERhdGU/OiBudW1iZXIsIHJldmlld2VkRW5kRGF0ZT86IG51bWJlciwgY2hlY2tvdXRBdmFpbGFibGU/OiBib29sZWFuLCBkb25lQnlNb2RlcmF0b3JJZD86IE1vZGVyYXRvcklkLCBsaW1pdD86IG51bWJlciwgb2Zmc2V0PzogbnVtYmVyLCBzb3J0Qnk/OiBzdHJpbmcsIHRhZ3M/OiBBcnJheTxzdHJpbmc+LCB0ZXh0Pzogc3RyaW5nLCB0b3BpY3M/OiBBcnJheTxUb3BpY3M+LCB1bnJlc29sdmVkQ29tbWVudHM/OiBib29sZWFuLCBvYnNlcnZlPzogJ2V2ZW50cycsIHJlcG9ydFByb2dyZXNzPzogYm9vbGVhbik6IE9ic2VydmFibGU8SHR0cEV2ZW50PFJ1bGVBdWRpdE91dHB1dD4+O1xyXG4gICAgcHVibGljIGdldFJ1bGVBdWRpdEl0ZW1zKGxhbmd1YWdlOiBzdHJpbmcsIGFpPzogQXJyYXk8QWk+LCBjaGVja291dD86IGJvb2xlYW4sIGNsaWVudElkcz86IEFycmF5PG51bWJlcj4sIGNvbnRlbnRJZHM/OiBBcnJheTxzdHJpbmc+LCBub3RDb250ZW50SWRzPzogQXJyYXk8c3RyaW5nPiwgZW5kRGF0ZT86IG51bWJlciwgc3RhcnREYXRlPzogbnVtYmVyLCByZXZpZXdlZFN0YXJ0RGF0ZT86IG51bWJlciwgcmV2aWV3ZWRFbmREYXRlPzogbnVtYmVyLCBjaGVja291dEF2YWlsYWJsZT86IGJvb2xlYW4sIGRvbmVCeU1vZGVyYXRvcklkPzogTW9kZXJhdG9ySWQsIGxpbWl0PzogbnVtYmVyLCBvZmZzZXQ/OiBudW1iZXIsIHNvcnRCeT86IHN0cmluZywgdGFncz86IEFycmF5PHN0cmluZz4sIHRleHQ/OiBzdHJpbmcsIHRvcGljcz86IEFycmF5PFRvcGljcz4sIHVucmVzb2x2ZWRDb21tZW50cz86IGJvb2xlYW4sIG9ic2VydmU6IGFueSA9ICdib2R5JywgcmVwb3J0UHJvZ3Jlc3M6IGJvb2xlYW4gPSBmYWxzZSApOiBPYnNlcnZhYmxlPGFueT4ge1xyXG5cclxuICAgICAgICBpZiAobGFuZ3VhZ2UgPT09IG51bGwgfHwgbGFuZ3VhZ2UgPT09IHVuZGVmaW5lZCkge1xyXG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ1JlcXVpcmVkIHBhcmFtZXRlciBsYW5ndWFnZSB3YXMgbnVsbCBvciB1bmRlZmluZWQgd2hlbiBjYWxsaW5nIGdldFJ1bGVBdWRpdEl0ZW1zLicpO1xyXG4gICAgICAgIH1cclxuXHJcblxyXG5cclxuXHJcblxyXG5cclxuXHJcblxyXG5cclxuXHJcblxyXG5cclxuXHJcblxyXG5cclxuXHJcblxyXG5cclxuXHJcbiAgICAgICAgbGV0IHF1ZXJ5UGFyYW1ldGVycyA9IG5ldyBIdHRwUGFyYW1zKHtlbmNvZGVyOiBuZXcgQ3VzdG9tSHR0cFVybEVuY29kaW5nQ29kZWMoKX0pO1xyXG4gICAgICAgIGlmIChhaSkge1xyXG4gICAgICAgICAgICBhaS5mb3JFYWNoKChlbGVtZW50KSA9PiB7XHJcbiAgICAgICAgICAgICAgICBxdWVyeVBhcmFtZXRlcnMgPSBxdWVyeVBhcmFtZXRlcnMuYXBwZW5kKCdhaScsIDxhbnk+ZWxlbWVudCk7XHJcbiAgICAgICAgICAgIH0pXHJcbiAgICAgICAgfVxyXG4gICAgICAgIGlmIChjaGVja291dCAhPT0gdW5kZWZpbmVkICYmIGNoZWNrb3V0ICE9PSBudWxsKSB7XHJcbiAgICAgICAgICAgIHF1ZXJ5UGFyYW1ldGVycyA9IHF1ZXJ5UGFyYW1ldGVycy5zZXQoJ2NoZWNrb3V0JywgPGFueT5jaGVja291dCk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGlmIChjbGllbnRJZHMpIHtcclxuICAgICAgICAgICAgcXVlcnlQYXJhbWV0ZXJzID0gcXVlcnlQYXJhbWV0ZXJzLnNldCgnY2xpZW50SWRzJywgY2xpZW50SWRzLmpvaW4oQ09MTEVDVElPTl9GT1JNQVRTWydjc3YnXSkpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpZiAoY29udGVudElkcykge1xyXG4gICAgICAgICAgICBxdWVyeVBhcmFtZXRlcnMgPSBxdWVyeVBhcmFtZXRlcnMuc2V0KCdjb250ZW50SWRzJywgY29udGVudElkcy5qb2luKENPTExFQ1RJT05fRk9STUFUU1snY3N2J10pKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgaWYgKG5vdENvbnRlbnRJZHMpIHtcclxuICAgICAgICAgICAgcXVlcnlQYXJhbWV0ZXJzID0gcXVlcnlQYXJhbWV0ZXJzLnNldCgnbm90Q29udGVudElkcycsIG5vdENvbnRlbnRJZHMuam9pbihDT0xMRUNUSU9OX0ZPUk1BVFNbJ2NzdiddKSk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGlmIChlbmREYXRlICE9PSB1bmRlZmluZWQgJiYgZW5kRGF0ZSAhPT0gbnVsbCkge1xyXG4gICAgICAgICAgICBxdWVyeVBhcmFtZXRlcnMgPSBxdWVyeVBhcmFtZXRlcnMuc2V0KCdlbmREYXRlJywgPGFueT5lbmREYXRlKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgaWYgKHN0YXJ0RGF0ZSAhPT0gdW5kZWZpbmVkICYmIHN0YXJ0RGF0ZSAhPT0gbnVsbCkge1xyXG4gICAgICAgICAgICBxdWVyeVBhcmFtZXRlcnMgPSBxdWVyeVBhcmFtZXRlcnMuc2V0KCdzdGFydERhdGUnLCA8YW55PnN0YXJ0RGF0ZSk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGlmIChyZXZpZXdlZFN0YXJ0RGF0ZSAhPT0gdW5kZWZpbmVkICYmIHJldmlld2VkU3RhcnREYXRlICE9PSBudWxsKSB7XHJcbiAgICAgICAgICAgIHF1ZXJ5UGFyYW1ldGVycyA9IHF1ZXJ5UGFyYW1ldGVycy5zZXQoJ3Jldmlld2VkU3RhcnREYXRlJywgPGFueT5yZXZpZXdlZFN0YXJ0RGF0ZSk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGlmIChyZXZpZXdlZEVuZERhdGUgIT09IHVuZGVmaW5lZCAmJiByZXZpZXdlZEVuZERhdGUgIT09IG51bGwpIHtcclxuICAgICAgICAgICAgcXVlcnlQYXJhbWV0ZXJzID0gcXVlcnlQYXJhbWV0ZXJzLnNldCgncmV2aWV3ZWRFbmREYXRlJywgPGFueT5yZXZpZXdlZEVuZERhdGUpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpZiAoY2hlY2tvdXRBdmFpbGFibGUgIT09IHVuZGVmaW5lZCAmJiBjaGVja291dEF2YWlsYWJsZSAhPT0gbnVsbCkge1xyXG4gICAgICAgICAgICBxdWVyeVBhcmFtZXRlcnMgPSBxdWVyeVBhcmFtZXRlcnMuc2V0KCdjaGVja291dEF2YWlsYWJsZScsIDxhbnk+Y2hlY2tvdXRBdmFpbGFibGUpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpZiAoZG9uZUJ5TW9kZXJhdG9ySWQgIT09IHVuZGVmaW5lZCAmJiBkb25lQnlNb2RlcmF0b3JJZCAhPT0gbnVsbCkge1xyXG4gICAgICAgICAgICBxdWVyeVBhcmFtZXRlcnMgPSBxdWVyeVBhcmFtZXRlcnMuc2V0KCdkb25lQnlNb2RlcmF0b3JJZCcsIDxhbnk+ZG9uZUJ5TW9kZXJhdG9ySWQpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpZiAobGFuZ3VhZ2UgIT09IHVuZGVmaW5lZCAmJiBsYW5ndWFnZSAhPT0gbnVsbCkge1xyXG4gICAgICAgICAgICBxdWVyeVBhcmFtZXRlcnMgPSBxdWVyeVBhcmFtZXRlcnMuc2V0KCdsYW5ndWFnZScsIDxhbnk+bGFuZ3VhZ2UpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpZiAobGltaXQgIT09IHVuZGVmaW5lZCAmJiBsaW1pdCAhPT0gbnVsbCkge1xyXG4gICAgICAgICAgICBxdWVyeVBhcmFtZXRlcnMgPSBxdWVyeVBhcmFtZXRlcnMuc2V0KCdsaW1pdCcsIDxhbnk+bGltaXQpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpZiAob2Zmc2V0ICE9PSB1bmRlZmluZWQgJiYgb2Zmc2V0ICE9PSBudWxsKSB7XHJcbiAgICAgICAgICAgIHF1ZXJ5UGFyYW1ldGVycyA9IHF1ZXJ5UGFyYW1ldGVycy5zZXQoJ29mZnNldCcsIDxhbnk+b2Zmc2V0KTtcclxuICAgICAgICB9XHJcbiAgICAgICAgaWYgKHNvcnRCeSAhPT0gdW5kZWZpbmVkICYmIHNvcnRCeSAhPT0gbnVsbCkge1xyXG4gICAgICAgICAgICBxdWVyeVBhcmFtZXRlcnMgPSBxdWVyeVBhcmFtZXRlcnMuc2V0KCdzb3J0QnknLCA8YW55PnNvcnRCeSk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGlmICh0YWdzKSB7XHJcbiAgICAgICAgICAgIHF1ZXJ5UGFyYW1ldGVycyA9IHF1ZXJ5UGFyYW1ldGVycy5zZXQoJ3RhZ3MnLCB0YWdzLmpvaW4oQ09MTEVDVElPTl9GT1JNQVRTWydjc3YnXSkpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpZiAodGV4dCAhPT0gdW5kZWZpbmVkICYmIHRleHQgIT09IG51bGwpIHtcclxuICAgICAgICAgICAgcXVlcnlQYXJhbWV0ZXJzID0gcXVlcnlQYXJhbWV0ZXJzLnNldCgndGV4dCcsIDxhbnk+dGV4dCk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGlmICh0b3BpY3MpIHtcclxuICAgICAgICAgICAgdG9waWNzLmZvckVhY2goKGVsZW1lbnQpID0+IHtcclxuICAgICAgICAgICAgICAgIHF1ZXJ5UGFyYW1ldGVycyA9IHF1ZXJ5UGFyYW1ldGVycy5hcHBlbmQoJ3RvcGljcycsIDxhbnk+ZWxlbWVudCk7XHJcbiAgICAgICAgICAgIH0pXHJcbiAgICAgICAgfVxyXG4gICAgICAgIGlmICh1bnJlc29sdmVkQ29tbWVudHMgIT09IHVuZGVmaW5lZCAmJiB1bnJlc29sdmVkQ29tbWVudHMgIT09IG51bGwpIHtcclxuICAgICAgICAgICAgcXVlcnlQYXJhbWV0ZXJzID0gcXVlcnlQYXJhbWV0ZXJzLnNldCgndW5yZXNvbHZlZENvbW1lbnRzJywgPGFueT51bnJlc29sdmVkQ29tbWVudHMpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgbGV0IGhlYWRlcnMgPSB0aGlzLmRlZmF1bHRIZWFkZXJzO1xyXG5cclxuICAgICAgICAvLyB0byBkZXRlcm1pbmUgdGhlIEFjY2VwdCBoZWFkZXJcclxuICAgICAgICBsZXQgaHR0cEhlYWRlckFjY2VwdHM6IHN0cmluZ1tdID0gW1xyXG4gICAgICAgICAgICAnYXBwbGljYXRpb24vanNvbidcclxuICAgICAgICBdO1xyXG4gICAgICAgIGNvbnN0IGh0dHBIZWFkZXJBY2NlcHRTZWxlY3RlZDogc3RyaW5nIHwgdW5kZWZpbmVkID0gdGhpcy5jb25maWd1cmF0aW9uLnNlbGVjdEhlYWRlckFjY2VwdChodHRwSGVhZGVyQWNjZXB0cyk7XHJcbiAgICAgICAgaWYgKGh0dHBIZWFkZXJBY2NlcHRTZWxlY3RlZCAhPSB1bmRlZmluZWQpIHtcclxuICAgICAgICAgICAgaGVhZGVycyA9IGhlYWRlcnMuc2V0KCdBY2NlcHQnLCBodHRwSGVhZGVyQWNjZXB0U2VsZWN0ZWQpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLy8gdG8gZGV0ZXJtaW5lIHRoZSBDb250ZW50LVR5cGUgaGVhZGVyXHJcbiAgICAgICAgY29uc3QgY29uc3VtZXM6IHN0cmluZ1tdID0gW1xyXG4gICAgICAgIF07XHJcblxyXG4gICAgICAgIHJldHVybiB0aGlzLmh0dHBDbGllbnQucmVxdWVzdDxSdWxlQXVkaXRPdXRwdXQ+KCdnZXQnLGAke3RoaXMuYmFzZVBhdGh9L2luYm94L3F1ZXVlL3J1bGVzQXVkaXQvaXRlbXNgLFxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICBwYXJhbXM6IHF1ZXJ5UGFyYW1ldGVycyxcclxuICAgICAgICAgICAgICAgIHdpdGhDcmVkZW50aWFsczogdGhpcy5jb25maWd1cmF0aW9uLndpdGhDcmVkZW50aWFscyxcclxuICAgICAgICAgICAgICAgIGhlYWRlcnM6IGhlYWRlcnMsXHJcbiAgICAgICAgICAgICAgICBvYnNlcnZlOiBvYnNlcnZlLFxyXG4gICAgICAgICAgICAgICAgcmVwb3J0UHJvZ3Jlc3M6IHJlcG9ydFByb2dyZXNzXHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICApO1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogU2VhcmNoIGZvciBvciBjaGVja291dCBpdGVtcyBpbiB0aGlzIHF1ZXVlXHJcbiAgICAgKiBMb29rdXAgaXRlbXMgZm9yIHRoaXMgcXVldWVcclxuICAgICAqIEBwYXJhbSBsYW5ndWFnZSBTaG93IHJlc3VsdHMgZm9yIHRoZSBnaXZlbiBsYW5ndWFnZSBvbmx5LiAgIFRoaXMgaXMgdGhlIGxhbmd1YWdlIHVzZWQsIGNvdWxkIGhhdmUgYmVlbiBzZXQgYnkgdGhlIHVzZXIgb3IgZGV0ZWN0ZWQgYnkgbGFuZ3VhZ2UgaWQuXHJcbiAgICAgKiBAcGFyYW0gYWkgU2hvdyBpdGVtcyB0aGUgQUkgcHJlZGljdHMgYXMgdXNlZnVsIGJlY2F1c2UgbW9kZXJhdG9ycyBpbiB0aGUgcGFzdCBoYXZlIHRha2VuIGFuIGFjdGlvbiBvbiB0aGlzIGl0ZW1zLiAgUGFzc2luZyBhbiBhcnJheSBvZiBvYmplY3RzIGFzIHBhcmFtcyBjYW4gYmUgdHJpY2t5IGF0IGZpcnN0IHNvIGhlcmUgaXMgYW4gZXhhbXBsZSAmYW1wO2FpWzBdW21pblByZWRpY3Rpb25dJiN4M0Q7MC41MCZhbXA7YWlbMF1bbW9kZWxOYW1lXSYjeDNEO3RvcGljX3Z1bGdhciZhbXA7YWlbMF1bbWF4UHJlZGljdGlvbl0mI3gzRDswLjk1JmFtcDthaVsxXVttaW5QcmVkaWN0aW9uXSYjeDNEOzAuMTAmYW1wO2FpWzFdW21vZGVsTmFtZV0mI3gzRDt0b3BpY19mcmF1ZCZhbXA7YWlbMV1bbWF4UHJlZGljdGlvbl0mI3gzRDswLjgwICBJbiB1cmxlbmNvZGVkIGZvcm0gdGhhdCB3b3VsZCBiZSAmYW1wO2FpJTVCMCU1RCU1Qm1pblByZWRpY3Rpb24lNUQmI3gzRDswLjUwJmFtcDthaSU1QjAlNUQlNUJtb2RlbE5hbWUlNUQmI3gzRDt0b3BpY192dWxnYXImYW1wO2FpJTVCMCU1RCU1Qm1heFByZWRpY3Rpb24lNUQmI3gzRDswLjk1JmFtcDthaSU1QjElNUQlNUJtaW5QcmVkaWN0aW9uJTVEJiN4M0Q7MC4xMCZhbXA7YWklNUIxJTVEJTVCbW9kZWxOYW1lJTVEJiN4M0Q7dG9waWNfZnJhdWQmYW1wO2FpJTVCMSU1RCU1Qm1heFByZWRpY3Rpb24lNUQmI3gzRDswLjgwIFxyXG4gICAgICogQHBhcmFtIGNoZWNrb3V0IENoZWNrb3V0IHRoaXMgaXRlbSBmb3IgcmV2aWV3XHJcbiAgICAgKiBAcGFyYW0gY2xpZW50SWRzIFNob3cgcmVzdWx0cyBmb3IgYSBnaXZlbiBjbGllbnQuICBUeXBpY2FsbHkgdGhpcyBpcyBzZXQgZm9yIHlvdSBieSB0aGUgaW50ZXJuYWwgc3lzdGVtIGJhc2VkIG9uIHRoZSBBUElfS0VZIHlvdSBhcmUgdXNpbmcuICBIb3dldmVyIHNvbWUgY2xpZW50cyBhcmUgYWxsb3dlZCB0byB2aWV3IG90aGVyIGNsaWVudHMgc3VjaCBhcyB3aGVuIHRoZXkgaGF2ZSBhIHNhbmRib3ggb3Igd2hlbiB0aGV5IGFyZSBhIGxhcmdlIGVudGVycHJpc2UgYW5kIGhhdmUgbXVsdGlwbGUgY2xpZW50cyB0aGV5IG1hbmFnZS4gIEl0IHdpbGwgb25seSBhbGxvdyB5b3UgdG8gdmlldyBjbGllbnQgZGF0YSB5b3UgaGF2ZSBhY2Nlc3MgdG8uIFlvdSBjYW4gc2V0IHRoaXMgdG8gLTEgdG8gYXBwbHkgdG8gYWxsIGNsaWVudHMgeW91IGhhdmUgYWNjZXNzIHRvLlxyXG4gICAgICogQHBhcmFtIGNvbnRlbnRJZHMgR2V0IHRoZXNlIHNwZWNpZmljIGNvbnRlbnRJZHMuICBGcmVxdWVudGx5IHVzZWQgd2hlbiB5b3UgdXNlIHRoZSBQcmV2aW91cyBidXR0b24uXHJcbiAgICAgKiBAcGFyYW0gbm90Q29udGVudElkcyBFeGNsdWRlIHRoZXNlIHNwZWNpZmljIGNvbnRlbnRJZHMuICBPcmlnaW5hbGx5IGRlc2lnbmVkIHNvIHlvdSBjYW4gY2FsbCBjaGVja291dCBhbmQgcGFzcyBpbiB0aGUgaXRlbSB5b3UgYXJlIHdvcmtpbmcgb24gcmlnaHQgbm93IGFuZCBpdCB3aWxsIGdpdmUgeW91IGEgZGlmZmVyZW50IG9uZS4gIFRoZSBkZWZhdWx0IGNoZWNrb3V0IGJlaGF2aW91ciB3aWxsIGFzc2lnbiB0aGUgaXRlbXMgeW91IGFscmVhZHkgaGF2ZSBjaGVja2VkIG91dCAgKHdoaWNoIGlzIG9uIHlvdXIgc2NyZWVuKS4gXHJcbiAgICAgKiBAcGFyYW0gZW5kRGF0ZSBTaG93IHJlc3VsdHMgb2NjdXJyaW5nIGJlZm9yZSB0aGUgZ2l2ZW4gZGF0ZSBpbiB1bml4dGltZXN0YW1wIChtaWxsaXNlY29uZHMgc2luY2UgRXBvY2gpXHJcbiAgICAgKiBAcGFyYW0gc3RhcnREYXRlIFNob3cgcmVzdWx0cyBvY2N1cnJpbmcgYWZ0ZXIgdGhlIGdpdmVuIGRhdGUgaW4gdW5peHRpbWVzdGFtcCAobWlsbGlzZWNvbmRzIHNpbmNlIEVwb2NoKVxyXG4gICAgICogQHBhcmFtIHJldmlld2VkU3RhcnREYXRlIFNob3cgcmVzdWx0cyB0aGF0IHdoZXJlIHJldmlld2VkIGJldHdlZW4gZ2l2ZW4gZGF0ZSBpbiB1bml4dGltZXN0YW1wIChtaWxsaXNlY29uZHMgc2luY2UgRXBvY2gpXHJcbiAgICAgKiBAcGFyYW0gcmV2aWV3ZWRFbmREYXRlIFNob3cgcmVzdWx0cyB0aGF0IHdoZXJlIHJldmlld2VkIGJldHdlZW4gZ2l2ZW4gZGF0ZSBpbiB1bml4dGltZXN0YW1wIChtaWxsaXNlY29uZHMgc2luY2UgRXBvY2gpXHJcbiAgICAgKiBAcGFyYW0gY2hlY2tvdXRBdmFpbGFibGUgT25seSBzaG93IGl0ZW1zIHdoZXJlIHRoZSBpdGVtIGNvdWxkIGJlIGNoZWNrZWQgb3V0IGJ5IG1lLiAgVGhpcyBpcyB0aGUgc2FtZSBhcyBjaGVja291dCYjeDNEO3RydWUgYnV0IGl0IGRvZXMgbm90IGNoZWNrIGl0IG91dC5cclxuICAgICAqIEBwYXJhbSBkb25lQnlNb2RlcmF0b3JJZCBPbmx5IHNob3cgd29yayBkb25lIGJ5IHRoaXMgbW9kZXJhdG9ySWRcclxuICAgICAqIEBwYXJhbSBsaW1pdCBMaW1pdCB0aGUgbnVtYmVyIG9mIHJlc3VsdHNcclxuICAgICAqIEBwYXJhbSBvZmZzZXQgU3RhcnQgdGhlIHNlYXJjaCBmcm9tIG9mZnNldCAwLiAgRm9yIGluc3RhbmNlIGlmIHlvdXIgdXNpbmcgcGFnaW5hdGlvbiBwYWdlIDIgd291bGQgYmUgb24gdG90YWxJdGVtc1BlclBhZ2UqcGFnZU51bS4gXHJcbiAgICAgKiBAcGFyYW0gc29ydEJ5IFdoYXQgZG8geW91IHdhbnQgdG8gc29ydCB0aGUgcmVzdWx0cyBieSAgLSBGSUZPIHwgRmlyc3QgaW4gRmlyc3QgT3V0LCB0aGUgc2FtZSBvcmRlciB0aGV5IGNhbWUgaW4gLSBSZWNlbnQgfCBIYW5kbGUgdGhlIG1vc3QgcmVjZW50IGl0ZW1zIGZpcnN0IC0gUHJpb3JpdHkgfCBCeSBwcmlvcml0eSAoaWYgYXBwbGljYWJsZSkuICBGb3IgcXVhbGl0eSBjb250cm9sIGxpa2Ugc3BlbGxpbmcgaXQgaXMgdGhlIHRpbWVzIHVzZWQgc28gaXQgd2lsbCBzaG93IHRoZSBpdGVtcyBtaXNzcGVsbGVkIDEwMDAgdGltZXMgYmVmb3JlIHRoZSBvbmVzIDUwMCB0aW1lcy4gIEZvciByZXBvcnRlZCB1c2VycyBpdCB3aWxsIGJlIHRoZSBvbmVzIHdoZXJlIG11bHRpcGxlIHVzZXJzIGhhdmUgcmVwb3J0ZWQgdGhlIHNhbWUgdXNlci4gLSBBSSB8IERlYWwgd2l0aCB0aGUgaGlnZXN0IEFJIHByZWRpY3Rpb25zIGZpcnN0IHRoYXQgcHJlZGljdCB0aGlzIHNob3VsZCBiZSByZWxldmFudCBmb3IgbWUuICAoTk9URTogdG8gc2VhcmNoIGJ5IEFJIHlvdSBtdXN0IGFsc28gaGF2ZSBzZXQgdGhlIGFpLm1vZGVsTmFtZSBpbiB0aGUgZmlyc3QgaXRlbSBvZiB0aGUgcGFyYW1ldGVyIGFpKSBcclxuICAgICAqIEBwYXJhbSB0YWdzIE9ubHkgZmluZCBpdGVtcyBtYXRjaGluZyBhIGNlcnRhaW4gdGFnXHJcbiAgICAgKiBAcGFyYW0gdGV4dCBUZXh0IHNlYXJjaC4gIFRoaXMgdXNlcyBmdXp6eSBtYXRjaGluZy5cclxuICAgICAqIEBwYXJhbSB0b3BpY3MgT25seSBzaG93IGl0ZW1zIGZvciB0aGVzZSB0b3BpY3MgKHRvcGljSWQpIGJldHdlZW4gcmlzayBsZXZlbCBtaW5SaXNrIGFuZCBtYXhSaXNrXHJcbiAgICAgKiBAcGFyYW0gdW5yZXNvbHZlZENvbW1lbnRzIFdpbGwgc2VlIGlmIHRoZXJlIGFyZSBhbnkgdW5yZXNvbHZlZCBjb21tZW50cyBmb3IgeW91IGFuZCBzaG93IG9ubHkgdGhvc2VcclxuICAgICAqIEBwYXJhbSBvYnNlcnZlIHNldCB3aGV0aGVyIG9yIG5vdCB0byByZXR1cm4gdGhlIGRhdGEgT2JzZXJ2YWJsZSBhcyB0aGUgYm9keSwgcmVzcG9uc2Ugb3IgZXZlbnRzLiBkZWZhdWx0cyB0byByZXR1cm5pbmcgdGhlIGJvZHkuXHJcbiAgICAgKiBAcGFyYW0gcmVwb3J0UHJvZ3Jlc3MgZmxhZyB0byByZXBvcnQgcmVxdWVzdCBhbmQgcmVzcG9uc2UgcHJvZ3Jlc3MuXHJcbiAgICAgKi9cclxuICAgIHB1YmxpYyBnZXRTcGVsbGluZyhsYW5ndWFnZTogc3RyaW5nLCBhaT86IEFycmF5PEFpPiwgY2hlY2tvdXQ/OiBib29sZWFuLCBjbGllbnRJZHM/OiBBcnJheTxudW1iZXI+LCBjb250ZW50SWRzPzogQXJyYXk8c3RyaW5nPiwgbm90Q29udGVudElkcz86IEFycmF5PHN0cmluZz4sIGVuZERhdGU/OiBudW1iZXIsIHN0YXJ0RGF0ZT86IG51bWJlciwgcmV2aWV3ZWRTdGFydERhdGU/OiBudW1iZXIsIHJldmlld2VkRW5kRGF0ZT86IG51bWJlciwgY2hlY2tvdXRBdmFpbGFibGU/OiBib29sZWFuLCBkb25lQnlNb2RlcmF0b3JJZD86IE1vZGVyYXRvcklkLCBsaW1pdD86IG51bWJlciwgb2Zmc2V0PzogbnVtYmVyLCBzb3J0Qnk/OiBzdHJpbmcsIHRhZ3M/OiBBcnJheTxzdHJpbmc+LCB0ZXh0Pzogc3RyaW5nLCB0b3BpY3M/OiBBcnJheTxUb3BpY3M+LCB1bnJlc29sdmVkQ29tbWVudHM/OiBib29sZWFuLCBvYnNlcnZlPzogJ2JvZHknLCByZXBvcnRQcm9ncmVzcz86IGJvb2xlYW4pOiBPYnNlcnZhYmxlPFNwZWxsaW5nTWlzdGFrZU91dHB1dD47XHJcbiAgICBwdWJsaWMgZ2V0U3BlbGxpbmcobGFuZ3VhZ2U6IHN0cmluZywgYWk/OiBBcnJheTxBaT4sIGNoZWNrb3V0PzogYm9vbGVhbiwgY2xpZW50SWRzPzogQXJyYXk8bnVtYmVyPiwgY29udGVudElkcz86IEFycmF5PHN0cmluZz4sIG5vdENvbnRlbnRJZHM/OiBBcnJheTxzdHJpbmc+LCBlbmREYXRlPzogbnVtYmVyLCBzdGFydERhdGU/OiBudW1iZXIsIHJldmlld2VkU3RhcnREYXRlPzogbnVtYmVyLCByZXZpZXdlZEVuZERhdGU/OiBudW1iZXIsIGNoZWNrb3V0QXZhaWxhYmxlPzogYm9vbGVhbiwgZG9uZUJ5TW9kZXJhdG9ySWQ/OiBNb2RlcmF0b3JJZCwgbGltaXQ/OiBudW1iZXIsIG9mZnNldD86IG51bWJlciwgc29ydEJ5Pzogc3RyaW5nLCB0YWdzPzogQXJyYXk8c3RyaW5nPiwgdGV4dD86IHN0cmluZywgdG9waWNzPzogQXJyYXk8VG9waWNzPiwgdW5yZXNvbHZlZENvbW1lbnRzPzogYm9vbGVhbiwgb2JzZXJ2ZT86ICdyZXNwb25zZScsIHJlcG9ydFByb2dyZXNzPzogYm9vbGVhbik6IE9ic2VydmFibGU8SHR0cFJlc3BvbnNlPFNwZWxsaW5nTWlzdGFrZU91dHB1dD4+O1xyXG4gICAgcHVibGljIGdldFNwZWxsaW5nKGxhbmd1YWdlOiBzdHJpbmcsIGFpPzogQXJyYXk8QWk+LCBjaGVja291dD86IGJvb2xlYW4sIGNsaWVudElkcz86IEFycmF5PG51bWJlcj4sIGNvbnRlbnRJZHM/OiBBcnJheTxzdHJpbmc+LCBub3RDb250ZW50SWRzPzogQXJyYXk8c3RyaW5nPiwgZW5kRGF0ZT86IG51bWJlciwgc3RhcnREYXRlPzogbnVtYmVyLCByZXZpZXdlZFN0YXJ0RGF0ZT86IG51bWJlciwgcmV2aWV3ZWRFbmREYXRlPzogbnVtYmVyLCBjaGVja291dEF2YWlsYWJsZT86IGJvb2xlYW4sIGRvbmVCeU1vZGVyYXRvcklkPzogTW9kZXJhdG9ySWQsIGxpbWl0PzogbnVtYmVyLCBvZmZzZXQ/OiBudW1iZXIsIHNvcnRCeT86IHN0cmluZywgdGFncz86IEFycmF5PHN0cmluZz4sIHRleHQ/OiBzdHJpbmcsIHRvcGljcz86IEFycmF5PFRvcGljcz4sIHVucmVzb2x2ZWRDb21tZW50cz86IGJvb2xlYW4sIG9ic2VydmU/OiAnZXZlbnRzJywgcmVwb3J0UHJvZ3Jlc3M/OiBib29sZWFuKTogT2JzZXJ2YWJsZTxIdHRwRXZlbnQ8U3BlbGxpbmdNaXN0YWtlT3V0cHV0Pj47XHJcbiAgICBwdWJsaWMgZ2V0U3BlbGxpbmcobGFuZ3VhZ2U6IHN0cmluZywgYWk/OiBBcnJheTxBaT4sIGNoZWNrb3V0PzogYm9vbGVhbiwgY2xpZW50SWRzPzogQXJyYXk8bnVtYmVyPiwgY29udGVudElkcz86IEFycmF5PHN0cmluZz4sIG5vdENvbnRlbnRJZHM/OiBBcnJheTxzdHJpbmc+LCBlbmREYXRlPzogbnVtYmVyLCBzdGFydERhdGU/OiBudW1iZXIsIHJldmlld2VkU3RhcnREYXRlPzogbnVtYmVyLCByZXZpZXdlZEVuZERhdGU/OiBudW1iZXIsIGNoZWNrb3V0QXZhaWxhYmxlPzogYm9vbGVhbiwgZG9uZUJ5TW9kZXJhdG9ySWQ/OiBNb2RlcmF0b3JJZCwgbGltaXQ/OiBudW1iZXIsIG9mZnNldD86IG51bWJlciwgc29ydEJ5Pzogc3RyaW5nLCB0YWdzPzogQXJyYXk8c3RyaW5nPiwgdGV4dD86IHN0cmluZywgdG9waWNzPzogQXJyYXk8VG9waWNzPiwgdW5yZXNvbHZlZENvbW1lbnRzPzogYm9vbGVhbiwgb2JzZXJ2ZTogYW55ID0gJ2JvZHknLCByZXBvcnRQcm9ncmVzczogYm9vbGVhbiA9IGZhbHNlICk6IE9ic2VydmFibGU8YW55PiB7XHJcblxyXG4gICAgICAgIGlmIChsYW5ndWFnZSA9PT0gbnVsbCB8fCBsYW5ndWFnZSA9PT0gdW5kZWZpbmVkKSB7XHJcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcignUmVxdWlyZWQgcGFyYW1ldGVyIGxhbmd1YWdlIHdhcyBudWxsIG9yIHVuZGVmaW5lZCB3aGVuIGNhbGxpbmcgZ2V0U3BlbGxpbmcuJyk7XHJcbiAgICAgICAgfVxyXG5cclxuXHJcblxyXG5cclxuXHJcblxyXG5cclxuXHJcblxyXG5cclxuXHJcblxyXG5cclxuXHJcblxyXG5cclxuXHJcblxyXG5cclxuICAgICAgICBsZXQgcXVlcnlQYXJhbWV0ZXJzID0gbmV3IEh0dHBQYXJhbXMoe2VuY29kZXI6IG5ldyBDdXN0b21IdHRwVXJsRW5jb2RpbmdDb2RlYygpfSk7XHJcbiAgICAgICAgaWYgKGFpKSB7XHJcbiAgICAgICAgICAgIGFpLmZvckVhY2goKGVsZW1lbnQpID0+IHtcclxuICAgICAgICAgICAgICAgIHF1ZXJ5UGFyYW1ldGVycyA9IHF1ZXJ5UGFyYW1ldGVycy5hcHBlbmQoJ2FpJywgPGFueT5lbGVtZW50KTtcclxuICAgICAgICAgICAgfSlcclxuICAgICAgICB9XHJcbiAgICAgICAgaWYgKGNoZWNrb3V0ICE9PSB1bmRlZmluZWQgJiYgY2hlY2tvdXQgIT09IG51bGwpIHtcclxuICAgICAgICAgICAgcXVlcnlQYXJhbWV0ZXJzID0gcXVlcnlQYXJhbWV0ZXJzLnNldCgnY2hlY2tvdXQnLCA8YW55PmNoZWNrb3V0KTtcclxuICAgICAgICB9XHJcbiAgICAgICAgaWYgKGNsaWVudElkcykge1xyXG4gICAgICAgICAgICBxdWVyeVBhcmFtZXRlcnMgPSBxdWVyeVBhcmFtZXRlcnMuc2V0KCdjbGllbnRJZHMnLCBjbGllbnRJZHMuam9pbihDT0xMRUNUSU9OX0ZPUk1BVFNbJ2NzdiddKSk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGlmIChjb250ZW50SWRzKSB7XHJcbiAgICAgICAgICAgIHF1ZXJ5UGFyYW1ldGVycyA9IHF1ZXJ5UGFyYW1ldGVycy5zZXQoJ2NvbnRlbnRJZHMnLCBjb250ZW50SWRzLmpvaW4oQ09MTEVDVElPTl9GT1JNQVRTWydjc3YnXSkpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpZiAobm90Q29udGVudElkcykge1xyXG4gICAgICAgICAgICBxdWVyeVBhcmFtZXRlcnMgPSBxdWVyeVBhcmFtZXRlcnMuc2V0KCdub3RDb250ZW50SWRzJywgbm90Q29udGVudElkcy5qb2luKENPTExFQ1RJT05fRk9STUFUU1snY3N2J10pKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgaWYgKGVuZERhdGUgIT09IHVuZGVmaW5lZCAmJiBlbmREYXRlICE9PSBudWxsKSB7XHJcbiAgICAgICAgICAgIHF1ZXJ5UGFyYW1ldGVycyA9IHF1ZXJ5UGFyYW1ldGVycy5zZXQoJ2VuZERhdGUnLCA8YW55PmVuZERhdGUpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpZiAoc3RhcnREYXRlICE9PSB1bmRlZmluZWQgJiYgc3RhcnREYXRlICE9PSBudWxsKSB7XHJcbiAgICAgICAgICAgIHF1ZXJ5UGFyYW1ldGVycyA9IHF1ZXJ5UGFyYW1ldGVycy5zZXQoJ3N0YXJ0RGF0ZScsIDxhbnk+c3RhcnREYXRlKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgaWYgKHJldmlld2VkU3RhcnREYXRlICE9PSB1bmRlZmluZWQgJiYgcmV2aWV3ZWRTdGFydERhdGUgIT09IG51bGwpIHtcclxuICAgICAgICAgICAgcXVlcnlQYXJhbWV0ZXJzID0gcXVlcnlQYXJhbWV0ZXJzLnNldCgncmV2aWV3ZWRTdGFydERhdGUnLCA8YW55PnJldmlld2VkU3RhcnREYXRlKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgaWYgKHJldmlld2VkRW5kRGF0ZSAhPT0gdW5kZWZpbmVkICYmIHJldmlld2VkRW5kRGF0ZSAhPT0gbnVsbCkge1xyXG4gICAgICAgICAgICBxdWVyeVBhcmFtZXRlcnMgPSBxdWVyeVBhcmFtZXRlcnMuc2V0KCdyZXZpZXdlZEVuZERhdGUnLCA8YW55PnJldmlld2VkRW5kRGF0ZSk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGlmIChjaGVja291dEF2YWlsYWJsZSAhPT0gdW5kZWZpbmVkICYmIGNoZWNrb3V0QXZhaWxhYmxlICE9PSBudWxsKSB7XHJcbiAgICAgICAgICAgIHF1ZXJ5UGFyYW1ldGVycyA9IHF1ZXJ5UGFyYW1ldGVycy5zZXQoJ2NoZWNrb3V0QXZhaWxhYmxlJywgPGFueT5jaGVja291dEF2YWlsYWJsZSk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGlmIChkb25lQnlNb2RlcmF0b3JJZCAhPT0gdW5kZWZpbmVkICYmIGRvbmVCeU1vZGVyYXRvcklkICE9PSBudWxsKSB7XHJcbiAgICAgICAgICAgIHF1ZXJ5UGFyYW1ldGVycyA9IHF1ZXJ5UGFyYW1ldGVycy5zZXQoJ2RvbmVCeU1vZGVyYXRvcklkJywgPGFueT5kb25lQnlNb2RlcmF0b3JJZCk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGlmIChsYW5ndWFnZSAhPT0gdW5kZWZpbmVkICYmIGxhbmd1YWdlICE9PSBudWxsKSB7XHJcbiAgICAgICAgICAgIHF1ZXJ5UGFyYW1ldGVycyA9IHF1ZXJ5UGFyYW1ldGVycy5zZXQoJ2xhbmd1YWdlJywgPGFueT5sYW5ndWFnZSk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGlmIChsaW1pdCAhPT0gdW5kZWZpbmVkICYmIGxpbWl0ICE9PSBudWxsKSB7XHJcbiAgICAgICAgICAgIHF1ZXJ5UGFyYW1ldGVycyA9IHF1ZXJ5UGFyYW1ldGVycy5zZXQoJ2xpbWl0JywgPGFueT5saW1pdCk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGlmIChvZmZzZXQgIT09IHVuZGVmaW5lZCAmJiBvZmZzZXQgIT09IG51bGwpIHtcclxuICAgICAgICAgICAgcXVlcnlQYXJhbWV0ZXJzID0gcXVlcnlQYXJhbWV0ZXJzLnNldCgnb2Zmc2V0JywgPGFueT5vZmZzZXQpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpZiAoc29ydEJ5ICE9PSB1bmRlZmluZWQgJiYgc29ydEJ5ICE9PSBudWxsKSB7XHJcbiAgICAgICAgICAgIHF1ZXJ5UGFyYW1ldGVycyA9IHF1ZXJ5UGFyYW1ldGVycy5zZXQoJ3NvcnRCeScsIDxhbnk+c29ydEJ5KTtcclxuICAgICAgICB9XHJcbiAgICAgICAgaWYgKHRhZ3MpIHtcclxuICAgICAgICAgICAgcXVlcnlQYXJhbWV0ZXJzID0gcXVlcnlQYXJhbWV0ZXJzLnNldCgndGFncycsIHRhZ3Muam9pbihDT0xMRUNUSU9OX0ZPUk1BVFNbJ2NzdiddKSk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGlmICh0ZXh0ICE9PSB1bmRlZmluZWQgJiYgdGV4dCAhPT0gbnVsbCkge1xyXG4gICAgICAgICAgICBxdWVyeVBhcmFtZXRlcnMgPSBxdWVyeVBhcmFtZXRlcnMuc2V0KCd0ZXh0JywgPGFueT50ZXh0KTtcclxuICAgICAgICB9XHJcbiAgICAgICAgaWYgKHRvcGljcykge1xyXG4gICAgICAgICAgICB0b3BpY3MuZm9yRWFjaCgoZWxlbWVudCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgcXVlcnlQYXJhbWV0ZXJzID0gcXVlcnlQYXJhbWV0ZXJzLmFwcGVuZCgndG9waWNzJywgPGFueT5lbGVtZW50KTtcclxuICAgICAgICAgICAgfSlcclxuICAgICAgICB9XHJcbiAgICAgICAgaWYgKHVucmVzb2x2ZWRDb21tZW50cyAhPT0gdW5kZWZpbmVkICYmIHVucmVzb2x2ZWRDb21tZW50cyAhPT0gbnVsbCkge1xyXG4gICAgICAgICAgICBxdWVyeVBhcmFtZXRlcnMgPSBxdWVyeVBhcmFtZXRlcnMuc2V0KCd1bnJlc29sdmVkQ29tbWVudHMnLCA8YW55PnVucmVzb2x2ZWRDb21tZW50cyk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBsZXQgaGVhZGVycyA9IHRoaXMuZGVmYXVsdEhlYWRlcnM7XHJcblxyXG4gICAgICAgIC8vIHRvIGRldGVybWluZSB0aGUgQWNjZXB0IGhlYWRlclxyXG4gICAgICAgIGxldCBodHRwSGVhZGVyQWNjZXB0czogc3RyaW5nW10gPSBbXHJcbiAgICAgICAgICAgICdhcHBsaWNhdGlvbi9qc29uJ1xyXG4gICAgICAgIF07XHJcbiAgICAgICAgY29uc3QgaHR0cEhlYWRlckFjY2VwdFNlbGVjdGVkOiBzdHJpbmcgfCB1bmRlZmluZWQgPSB0aGlzLmNvbmZpZ3VyYXRpb24uc2VsZWN0SGVhZGVyQWNjZXB0KGh0dHBIZWFkZXJBY2NlcHRzKTtcclxuICAgICAgICBpZiAoaHR0cEhlYWRlckFjY2VwdFNlbGVjdGVkICE9IHVuZGVmaW5lZCkge1xyXG4gICAgICAgICAgICBoZWFkZXJzID0gaGVhZGVycy5zZXQoJ0FjY2VwdCcsIGh0dHBIZWFkZXJBY2NlcHRTZWxlY3RlZCk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvLyB0byBkZXRlcm1pbmUgdGhlIENvbnRlbnQtVHlwZSBoZWFkZXJcclxuICAgICAgICBjb25zdCBjb25zdW1lczogc3RyaW5nW10gPSBbXHJcbiAgICAgICAgXTtcclxuXHJcbiAgICAgICAgcmV0dXJuIHRoaXMuaHR0cENsaWVudC5yZXF1ZXN0PFNwZWxsaW5nTWlzdGFrZU91dHB1dD4oJ2dldCcsYCR7dGhpcy5iYXNlUGF0aH0vaW5ib3gvcXVldWUvc3BlbGxpbmcvaXRlbXNgLFxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICBwYXJhbXM6IHF1ZXJ5UGFyYW1ldGVycyxcclxuICAgICAgICAgICAgICAgIHdpdGhDcmVkZW50aWFsczogdGhpcy5jb25maWd1cmF0aW9uLndpdGhDcmVkZW50aWFscyxcclxuICAgICAgICAgICAgICAgIGhlYWRlcnM6IGhlYWRlcnMsXHJcbiAgICAgICAgICAgICAgICBvYnNlcnZlOiBvYnNlcnZlLFxyXG4gICAgICAgICAgICAgICAgcmVwb3J0UHJvZ3Jlc3M6IHJlcG9ydFByb2dyZXNzXHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICApO1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogU2VhcmNoIGZvciB0YXNrcyBpbiB0aGUgcXVldWVcclxuICAgICAqIExvb2t1cCBpdGVtcyBmb3IgdGhpcyBxdWV1ZVxyXG4gICAgICogQHBhcmFtIGxhbmd1YWdlIFNob3cgcmVzdWx0cyBmb3IgdGhlIGdpdmVuIGxhbmd1YWdlIG9ubHkuICAgVGhpcyBpcyB0aGUgbGFuZ3VhZ2UgdXNlZCwgY291bGQgaGF2ZSBiZWVuIHNldCBieSB0aGUgdXNlciBvciBkZXRlY3RlZCBieSBsYW5ndWFnZSBpZC5cclxuICAgICAqIEBwYXJhbSBjbGllbnRJZHMgU2hvdyByZXN1bHRzIGZvciBhIGdpdmVuIGNsaWVudC4gIFR5cGljYWxseSB0aGlzIGlzIHNldCBmb3IgeW91IGJ5IHRoZSBpbnRlcm5hbCBzeXN0ZW0gYmFzZWQgb24gdGhlIEFQSV9LRVkgeW91IGFyZSB1c2luZy4gIEhvd2V2ZXIgc29tZSBjbGllbnRzIGFyZSBhbGxvd2VkIHRvIHZpZXcgb3RoZXIgY2xpZW50cyBzdWNoIGFzIHdoZW4gdGhleSBoYXZlIGEgc2FuZGJveCBvciB3aGVuIHRoZXkgYXJlIGEgbGFyZ2UgZW50ZXJwcmlzZSBhbmQgaGF2ZSBtdWx0aXBsZSBjbGllbnRzIHRoZXkgbWFuYWdlLiAgSXQgd2lsbCBvbmx5IGFsbG93IHlvdSB0byB2aWV3IGNsaWVudCBkYXRhIHlvdSBoYXZlIGFjY2VzcyB0by4gWW91IGNhbiBzZXQgdGhpcyB0byAtMSB0byBhcHBseSB0byBhbGwgY2xpZW50cyB5b3UgaGF2ZSBhY2Nlc3MgdG8uXHJcbiAgICAgKiBAcGFyYW0gY29udGVudElkcyBHZXQgdGhlc2Ugc3BlY2lmaWMgY29udGVudElkcy4gIEZyZXF1ZW50bHkgdXNlZCB3aGVuIHlvdSB1c2UgdGhlIFByZXZpb3VzIGJ1dHRvbi5cclxuICAgICAqIEBwYXJhbSBub3RDb250ZW50SWRzIEV4Y2x1ZGUgdGhlc2Ugc3BlY2lmaWMgY29udGVudElkcy4gIE9yaWdpbmFsbHkgZGVzaWduZWQgc28geW91IGNhbiBjYWxsIGNoZWNrb3V0IGFuZCBwYXNzIGluIHRoZSBpdGVtIHlvdSBhcmUgd29ya2luZyBvbiByaWdodCBub3cgYW5kIGl0IHdpbGwgZ2l2ZSB5b3UgYSBkaWZmZXJlbnQgb25lLiAgVGhlIGRlZmF1bHQgY2hlY2tvdXQgYmVoYXZpb3VyIHdpbGwgYXNzaWduIHRoZSBpdGVtcyB5b3UgYWxyZWFkeSBoYXZlIGNoZWNrZWQgb3V0ICAod2hpY2ggaXMgb24geW91ciBzY3JlZW4pLiBcclxuICAgICAqIEBwYXJhbSBlbmREYXRlIFNob3cgcmVzdWx0cyBvY2N1cnJpbmcgYmVmb3JlIHRoZSBnaXZlbiBkYXRlIGluIHVuaXh0aW1lc3RhbXAgKG1pbGxpc2Vjb25kcyBzaW5jZSBFcG9jaClcclxuICAgICAqIEBwYXJhbSBzdGFydERhdGUgU2hvdyByZXN1bHRzIG9jY3VycmluZyBhZnRlciB0aGUgZ2l2ZW4gZGF0ZSBpbiB1bml4dGltZXN0YW1wIChtaWxsaXNlY29uZHMgc2luY2UgRXBvY2gpXHJcbiAgICAgKiBAcGFyYW0gcmV2aWV3ZWRTdGFydERhdGUgU2hvdyByZXN1bHRzIHRoYXQgd2hlcmUgcmV2aWV3ZWQgYmV0d2VlbiBnaXZlbiBkYXRlIGluIHVuaXh0aW1lc3RhbXAgKG1pbGxpc2Vjb25kcyBzaW5jZSBFcG9jaClcclxuICAgICAqIEBwYXJhbSByZXZpZXdlZEVuZERhdGUgU2hvdyByZXN1bHRzIHRoYXQgd2hlcmUgcmV2aWV3ZWQgYmV0d2VlbiBnaXZlbiBkYXRlIGluIHVuaXh0aW1lc3RhbXAgKG1pbGxpc2Vjb25kcyBzaW5jZSBFcG9jaClcclxuICAgICAqIEBwYXJhbSBjaGVja291dEF2YWlsYWJsZSBPbmx5IHNob3cgaXRlbXMgd2hlcmUgdGhlIGl0ZW0gY291bGQgYmUgY2hlY2tlZCBvdXQgYnkgbWUuICBUaGlzIGlzIHRoZSBzYW1lIGFzIGNoZWNrb3V0JiN4M0Q7dHJ1ZSBidXQgaXQgZG9lcyBub3QgY2hlY2sgaXQgb3V0LlxyXG4gICAgICogQHBhcmFtIGRvbmVCeU1vZGVyYXRvcklkIE9ubHkgc2hvdyB3b3JrIGRvbmUgYnkgdGhpcyBtb2RlcmF0b3JJZFxyXG4gICAgICogQHBhcmFtIGFzc2lnbmVkVG9Nb2RlcmF0b3JJZCBTaG93IGl0ZW1zIGFzc2lnbmVkIHRvIHRoaXMgbW9kZXJhdG9yXHJcbiAgICAgKiBAcGFyYW0gbGltaXQgTGltaXQgdGhlIG51bWJlciBvZiByZXN1bHRzXHJcbiAgICAgKiBAcGFyYW0gb2Zmc2V0IFN0YXJ0IHRoZSBzZWFyY2ggZnJvbSBvZmZzZXQgMC4gIEZvciBpbnN0YW5jZSBpZiB5b3VyIHVzaW5nIHBhZ2luYXRpb24gcGFnZSAyIHdvdWxkIGJlIG9uIHRvdGFsSXRlbXNQZXJQYWdlKnBhZ2VOdW0uIFxyXG4gICAgICogQHBhcmFtIHNvcnRCeSBXaGF0IGRvIHlvdSB3YW50IHRvIHNvcnQgdGhlIHJlc3VsdHMgYnkgIC0gRklGTyB8IEZpcnN0IGluIEZpcnN0IE91dCwgdGhlIHNhbWUgb3JkZXIgdGhleSBjYW1lIGluIC0gUmVjZW50IHwgSGFuZGxlIHRoZSBtb3N0IHJlY2VudCBpdGVtcyBmaXJzdCAtIFByaW9yaXR5IHwgQnkgcHJpb3JpdHkgKGlmIGFwcGxpY2FibGUpLiAgRm9yIHF1YWxpdHkgY29udHJvbCBsaWtlIHNwZWxsaW5nIGl0IGlzIHRoZSB0aW1lcyB1c2VkIHNvIGl0IHdpbGwgc2hvdyB0aGUgaXRlbXMgbWlzc3BlbGxlZCAxMDAwIHRpbWVzIGJlZm9yZSB0aGUgb25lcyA1MDAgdGltZXMuICBGb3IgcmVwb3J0ZWQgdXNlcnMgaXQgd2lsbCBiZSB0aGUgb25lcyB3aGVyZSBtdWx0aXBsZSB1c2VycyBoYXZlIHJlcG9ydGVkIHRoZSBzYW1lIHVzZXIuIC0gQUkgfCBEZWFsIHdpdGggdGhlIGhpZ2VzdCBBSSBwcmVkaWN0aW9ucyBmaXJzdCB0aGF0IHByZWRpY3QgdGhpcyBzaG91bGQgYmUgcmVsZXZhbnQgZm9yIG1lLiAgKE5PVEU6IHRvIHNlYXJjaCBieSBBSSB5b3UgbXVzdCBhbHNvIGhhdmUgc2V0IHRoZSBhaS5tb2RlbE5hbWUgaW4gdGhlIGZpcnN0IGl0ZW0gb2YgdGhlIHBhcmFtZXRlciBhaSkgXHJcbiAgICAgKiBAcGFyYW0gdGFncyBPbmx5IGZpbmQgaXRlbXMgbWF0Y2hpbmcgYSBjZXJ0YWluIHRhZ1xyXG4gICAgICogQHBhcmFtIHRleHQgVGV4dCBzZWFyY2guICBUaGlzIHVzZXMgZnV6enkgbWF0Y2hpbmcuXHJcbiAgICAgKiBAcGFyYW0gdW5yZXNvbHZlZENvbW1lbnRzIFdpbGwgc2VlIGlmIHRoZXJlIGFyZSBhbnkgdW5yZXNvbHZlZCBjb21tZW50cyBmb3IgeW91IGFuZCBzaG93IG9ubHkgdGhvc2VcclxuICAgICAqIEBwYXJhbSBvYnNlcnZlIHNldCB3aGV0aGVyIG9yIG5vdCB0byByZXR1cm4gdGhlIGRhdGEgT2JzZXJ2YWJsZSBhcyB0aGUgYm9keSwgcmVzcG9uc2Ugb3IgZXZlbnRzLiBkZWZhdWx0cyB0byByZXR1cm5pbmcgdGhlIGJvZHkuXHJcbiAgICAgKiBAcGFyYW0gcmVwb3J0UHJvZ3Jlc3MgZmxhZyB0byByZXBvcnQgcmVxdWVzdCBhbmQgcmVzcG9uc2UgcHJvZ3Jlc3MuXHJcbiAgICAgKi9cclxuICAgIHB1YmxpYyBnZXRUYXNrSXRlbXMobGFuZ3VhZ2U6IHN0cmluZywgY2xpZW50SWRzPzogQXJyYXk8bnVtYmVyPiwgY29udGVudElkcz86IEFycmF5PHN0cmluZz4sIG5vdENvbnRlbnRJZHM/OiBBcnJheTxzdHJpbmc+LCBlbmREYXRlPzogbnVtYmVyLCBzdGFydERhdGU/OiBudW1iZXIsIHJldmlld2VkU3RhcnREYXRlPzogbnVtYmVyLCByZXZpZXdlZEVuZERhdGU/OiBudW1iZXIsIGNoZWNrb3V0QXZhaWxhYmxlPzogYm9vbGVhbiwgZG9uZUJ5TW9kZXJhdG9ySWQ/OiBNb2RlcmF0b3JJZCwgYXNzaWduZWRUb01vZGVyYXRvcklkPzogTW9kZXJhdG9ySWQsIGxpbWl0PzogbnVtYmVyLCBvZmZzZXQ/OiBudW1iZXIsIHNvcnRCeT86IHN0cmluZywgdGFncz86IEFycmF5PHN0cmluZz4sIHRleHQ/OiBzdHJpbmcsIHVucmVzb2x2ZWRDb21tZW50cz86IGJvb2xlYW4sIG9ic2VydmU/OiAnYm9keScsIHJlcG9ydFByb2dyZXNzPzogYm9vbGVhbik6IE9ic2VydmFibGU8VGFza091dHB1dD47XHJcbiAgICBwdWJsaWMgZ2V0VGFza0l0ZW1zKGxhbmd1YWdlOiBzdHJpbmcsIGNsaWVudElkcz86IEFycmF5PG51bWJlcj4sIGNvbnRlbnRJZHM/OiBBcnJheTxzdHJpbmc+LCBub3RDb250ZW50SWRzPzogQXJyYXk8c3RyaW5nPiwgZW5kRGF0ZT86IG51bWJlciwgc3RhcnREYXRlPzogbnVtYmVyLCByZXZpZXdlZFN0YXJ0RGF0ZT86IG51bWJlciwgcmV2aWV3ZWRFbmREYXRlPzogbnVtYmVyLCBjaGVja291dEF2YWlsYWJsZT86IGJvb2xlYW4sIGRvbmVCeU1vZGVyYXRvcklkPzogTW9kZXJhdG9ySWQsIGFzc2lnbmVkVG9Nb2RlcmF0b3JJZD86IE1vZGVyYXRvcklkLCBsaW1pdD86IG51bWJlciwgb2Zmc2V0PzogbnVtYmVyLCBzb3J0Qnk/OiBzdHJpbmcsIHRhZ3M/OiBBcnJheTxzdHJpbmc+LCB0ZXh0Pzogc3RyaW5nLCB1bnJlc29sdmVkQ29tbWVudHM/OiBib29sZWFuLCBvYnNlcnZlPzogJ3Jlc3BvbnNlJywgcmVwb3J0UHJvZ3Jlc3M/OiBib29sZWFuKTogT2JzZXJ2YWJsZTxIdHRwUmVzcG9uc2U8VGFza091dHB1dD4+O1xyXG4gICAgcHVibGljIGdldFRhc2tJdGVtcyhsYW5ndWFnZTogc3RyaW5nLCBjbGllbnRJZHM/OiBBcnJheTxudW1iZXI+LCBjb250ZW50SWRzPzogQXJyYXk8c3RyaW5nPiwgbm90Q29udGVudElkcz86IEFycmF5PHN0cmluZz4sIGVuZERhdGU/OiBudW1iZXIsIHN0YXJ0RGF0ZT86IG51bWJlciwgcmV2aWV3ZWRTdGFydERhdGU/OiBudW1iZXIsIHJldmlld2VkRW5kRGF0ZT86IG51bWJlciwgY2hlY2tvdXRBdmFpbGFibGU/OiBib29sZWFuLCBkb25lQnlNb2RlcmF0b3JJZD86IE1vZGVyYXRvcklkLCBhc3NpZ25lZFRvTW9kZXJhdG9ySWQ/OiBNb2RlcmF0b3JJZCwgbGltaXQ/OiBudW1iZXIsIG9mZnNldD86IG51bWJlciwgc29ydEJ5Pzogc3RyaW5nLCB0YWdzPzogQXJyYXk8c3RyaW5nPiwgdGV4dD86IHN0cmluZywgdW5yZXNvbHZlZENvbW1lbnRzPzogYm9vbGVhbiwgb2JzZXJ2ZT86ICdldmVudHMnLCByZXBvcnRQcm9ncmVzcz86IGJvb2xlYW4pOiBPYnNlcnZhYmxlPEh0dHBFdmVudDxUYXNrT3V0cHV0Pj47XHJcbiAgICBwdWJsaWMgZ2V0VGFza0l0ZW1zKGxhbmd1YWdlOiBzdHJpbmcsIGNsaWVudElkcz86IEFycmF5PG51bWJlcj4sIGNvbnRlbnRJZHM/OiBBcnJheTxzdHJpbmc+LCBub3RDb250ZW50SWRzPzogQXJyYXk8c3RyaW5nPiwgZW5kRGF0ZT86IG51bWJlciwgc3RhcnREYXRlPzogbnVtYmVyLCByZXZpZXdlZFN0YXJ0RGF0ZT86IG51bWJlciwgcmV2aWV3ZWRFbmREYXRlPzogbnVtYmVyLCBjaGVja291dEF2YWlsYWJsZT86IGJvb2xlYW4sIGRvbmVCeU1vZGVyYXRvcklkPzogTW9kZXJhdG9ySWQsIGFzc2lnbmVkVG9Nb2RlcmF0b3JJZD86IE1vZGVyYXRvcklkLCBsaW1pdD86IG51bWJlciwgb2Zmc2V0PzogbnVtYmVyLCBzb3J0Qnk/OiBzdHJpbmcsIHRhZ3M/OiBBcnJheTxzdHJpbmc+LCB0ZXh0Pzogc3RyaW5nLCB1bnJlc29sdmVkQ29tbWVudHM/OiBib29sZWFuLCBvYnNlcnZlOiBhbnkgPSAnYm9keScsIHJlcG9ydFByb2dyZXNzOiBib29sZWFuID0gZmFsc2UgKTogT2JzZXJ2YWJsZTxhbnk+IHtcclxuXHJcbiAgICAgICAgaWYgKGxhbmd1YWdlID09PSBudWxsIHx8IGxhbmd1YWdlID09PSB1bmRlZmluZWQpIHtcclxuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdSZXF1aXJlZCBwYXJhbWV0ZXIgbGFuZ3VhZ2Ugd2FzIG51bGwgb3IgdW5kZWZpbmVkIHdoZW4gY2FsbGluZyBnZXRUYXNrSXRlbXMuJyk7XHJcbiAgICAgICAgfVxyXG5cclxuXHJcblxyXG5cclxuXHJcblxyXG5cclxuXHJcblxyXG5cclxuXHJcblxyXG5cclxuXHJcblxyXG5cclxuXHJcbiAgICAgICAgbGV0IHF1ZXJ5UGFyYW1ldGVycyA9IG5ldyBIdHRwUGFyYW1zKHtlbmNvZGVyOiBuZXcgQ3VzdG9tSHR0cFVybEVuY29kaW5nQ29kZWMoKX0pO1xyXG4gICAgICAgIGlmIChjbGllbnRJZHMpIHtcclxuICAgICAgICAgICAgcXVlcnlQYXJhbWV0ZXJzID0gcXVlcnlQYXJhbWV0ZXJzLnNldCgnY2xpZW50SWRzJywgY2xpZW50SWRzLmpvaW4oQ09MTEVDVElPTl9GT1JNQVRTWydjc3YnXSkpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpZiAoY29udGVudElkcykge1xyXG4gICAgICAgICAgICBxdWVyeVBhcmFtZXRlcnMgPSBxdWVyeVBhcmFtZXRlcnMuc2V0KCdjb250ZW50SWRzJywgY29udGVudElkcy5qb2luKENPTExFQ1RJT05fRk9STUFUU1snY3N2J10pKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgaWYgKG5vdENvbnRlbnRJZHMpIHtcclxuICAgICAgICAgICAgcXVlcnlQYXJhbWV0ZXJzID0gcXVlcnlQYXJhbWV0ZXJzLnNldCgnbm90Q29udGVudElkcycsIG5vdENvbnRlbnRJZHMuam9pbihDT0xMRUNUSU9OX0ZPUk1BVFNbJ2NzdiddKSk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGlmIChlbmREYXRlICE9PSB1bmRlZmluZWQgJiYgZW5kRGF0ZSAhPT0gbnVsbCkge1xyXG4gICAgICAgICAgICBxdWVyeVBhcmFtZXRlcnMgPSBxdWVyeVBhcmFtZXRlcnMuc2V0KCdlbmREYXRlJywgPGFueT5lbmREYXRlKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgaWYgKHN0YXJ0RGF0ZSAhPT0gdW5kZWZpbmVkICYmIHN0YXJ0RGF0ZSAhPT0gbnVsbCkge1xyXG4gICAgICAgICAgICBxdWVyeVBhcmFtZXRlcnMgPSBxdWVyeVBhcmFtZXRlcnMuc2V0KCdzdGFydERhdGUnLCA8YW55PnN0YXJ0RGF0ZSk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGlmIChyZXZpZXdlZFN0YXJ0RGF0ZSAhPT0gdW5kZWZpbmVkICYmIHJldmlld2VkU3RhcnREYXRlICE9PSBudWxsKSB7XHJcbiAgICAgICAgICAgIHF1ZXJ5UGFyYW1ldGVycyA9IHF1ZXJ5UGFyYW1ldGVycy5zZXQoJ3Jldmlld2VkU3RhcnREYXRlJywgPGFueT5yZXZpZXdlZFN0YXJ0RGF0ZSk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGlmIChyZXZpZXdlZEVuZERhdGUgIT09IHVuZGVmaW5lZCAmJiByZXZpZXdlZEVuZERhdGUgIT09IG51bGwpIHtcclxuICAgICAgICAgICAgcXVlcnlQYXJhbWV0ZXJzID0gcXVlcnlQYXJhbWV0ZXJzLnNldCgncmV2aWV3ZWRFbmREYXRlJywgPGFueT5yZXZpZXdlZEVuZERhdGUpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpZiAoY2hlY2tvdXRBdmFpbGFibGUgIT09IHVuZGVmaW5lZCAmJiBjaGVja291dEF2YWlsYWJsZSAhPT0gbnVsbCkge1xyXG4gICAgICAgICAgICBxdWVyeVBhcmFtZXRlcnMgPSBxdWVyeVBhcmFtZXRlcnMuc2V0KCdjaGVja291dEF2YWlsYWJsZScsIDxhbnk+Y2hlY2tvdXRBdmFpbGFibGUpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpZiAoZG9uZUJ5TW9kZXJhdG9ySWQgIT09IHVuZGVmaW5lZCAmJiBkb25lQnlNb2RlcmF0b3JJZCAhPT0gbnVsbCkge1xyXG4gICAgICAgICAgICBxdWVyeVBhcmFtZXRlcnMgPSBxdWVyeVBhcmFtZXRlcnMuc2V0KCdkb25lQnlNb2RlcmF0b3JJZCcsIDxhbnk+ZG9uZUJ5TW9kZXJhdG9ySWQpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpZiAoYXNzaWduZWRUb01vZGVyYXRvcklkICE9PSB1bmRlZmluZWQgJiYgYXNzaWduZWRUb01vZGVyYXRvcklkICE9PSBudWxsKSB7XHJcbiAgICAgICAgICAgIHF1ZXJ5UGFyYW1ldGVycyA9IHF1ZXJ5UGFyYW1ldGVycy5zZXQoJ2Fzc2lnbmVkVG9Nb2RlcmF0b3JJZCcsIDxhbnk+YXNzaWduZWRUb01vZGVyYXRvcklkKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgaWYgKGxhbmd1YWdlICE9PSB1bmRlZmluZWQgJiYgbGFuZ3VhZ2UgIT09IG51bGwpIHtcclxuICAgICAgICAgICAgcXVlcnlQYXJhbWV0ZXJzID0gcXVlcnlQYXJhbWV0ZXJzLnNldCgnbGFuZ3VhZ2UnLCA8YW55Pmxhbmd1YWdlKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgaWYgKGxpbWl0ICE9PSB1bmRlZmluZWQgJiYgbGltaXQgIT09IG51bGwpIHtcclxuICAgICAgICAgICAgcXVlcnlQYXJhbWV0ZXJzID0gcXVlcnlQYXJhbWV0ZXJzLnNldCgnbGltaXQnLCA8YW55PmxpbWl0KTtcclxuICAgICAgICB9XHJcbiAgICAgICAgaWYgKG9mZnNldCAhPT0gdW5kZWZpbmVkICYmIG9mZnNldCAhPT0gbnVsbCkge1xyXG4gICAgICAgICAgICBxdWVyeVBhcmFtZXRlcnMgPSBxdWVyeVBhcmFtZXRlcnMuc2V0KCdvZmZzZXQnLCA8YW55Pm9mZnNldCk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGlmIChzb3J0QnkgIT09IHVuZGVmaW5lZCAmJiBzb3J0QnkgIT09IG51bGwpIHtcclxuICAgICAgICAgICAgcXVlcnlQYXJhbWV0ZXJzID0gcXVlcnlQYXJhbWV0ZXJzLnNldCgnc29ydEJ5JywgPGFueT5zb3J0QnkpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpZiAodGFncykge1xyXG4gICAgICAgICAgICBxdWVyeVBhcmFtZXRlcnMgPSBxdWVyeVBhcmFtZXRlcnMuc2V0KCd0YWdzJywgdGFncy5qb2luKENPTExFQ1RJT05fRk9STUFUU1snY3N2J10pKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgaWYgKHRleHQgIT09IHVuZGVmaW5lZCAmJiB0ZXh0ICE9PSBudWxsKSB7XHJcbiAgICAgICAgICAgIHF1ZXJ5UGFyYW1ldGVycyA9IHF1ZXJ5UGFyYW1ldGVycy5zZXQoJ3RleHQnLCA8YW55PnRleHQpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpZiAodW5yZXNvbHZlZENvbW1lbnRzICE9PSB1bmRlZmluZWQgJiYgdW5yZXNvbHZlZENvbW1lbnRzICE9PSBudWxsKSB7XHJcbiAgICAgICAgICAgIHF1ZXJ5UGFyYW1ldGVycyA9IHF1ZXJ5UGFyYW1ldGVycy5zZXQoJ3VucmVzb2x2ZWRDb21tZW50cycsIDxhbnk+dW5yZXNvbHZlZENvbW1lbnRzKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGxldCBoZWFkZXJzID0gdGhpcy5kZWZhdWx0SGVhZGVycztcclxuXHJcbiAgICAgICAgLy8gdG8gZGV0ZXJtaW5lIHRoZSBBY2NlcHQgaGVhZGVyXHJcbiAgICAgICAgbGV0IGh0dHBIZWFkZXJBY2NlcHRzOiBzdHJpbmdbXSA9IFtcclxuICAgICAgICAgICAgJ2FwcGxpY2F0aW9uL2pzb24nXHJcbiAgICAgICAgXTtcclxuICAgICAgICBjb25zdCBodHRwSGVhZGVyQWNjZXB0U2VsZWN0ZWQ6IHN0cmluZyB8IHVuZGVmaW5lZCA9IHRoaXMuY29uZmlndXJhdGlvbi5zZWxlY3RIZWFkZXJBY2NlcHQoaHR0cEhlYWRlckFjY2VwdHMpO1xyXG4gICAgICAgIGlmIChodHRwSGVhZGVyQWNjZXB0U2VsZWN0ZWQgIT0gdW5kZWZpbmVkKSB7XHJcbiAgICAgICAgICAgIGhlYWRlcnMgPSBoZWFkZXJzLnNldCgnQWNjZXB0JywgaHR0cEhlYWRlckFjY2VwdFNlbGVjdGVkKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8vIHRvIGRldGVybWluZSB0aGUgQ29udGVudC1UeXBlIGhlYWRlclxyXG4gICAgICAgIGNvbnN0IGNvbnN1bWVzOiBzdHJpbmdbXSA9IFtcclxuICAgICAgICBdO1xyXG5cclxuICAgICAgICByZXR1cm4gdGhpcy5odHRwQ2xpZW50LnJlcXVlc3Q8VGFza091dHB1dD4oJ2dldCcsYCR7dGhpcy5iYXNlUGF0aH0vaW5ib3gvcXVldWUvdGFzay9pdGVtc2AsXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIHBhcmFtczogcXVlcnlQYXJhbWV0ZXJzLFxyXG4gICAgICAgICAgICAgICAgd2l0aENyZWRlbnRpYWxzOiB0aGlzLmNvbmZpZ3VyYXRpb24ud2l0aENyZWRlbnRpYWxzLFxyXG4gICAgICAgICAgICAgICAgaGVhZGVyczogaGVhZGVycyxcclxuICAgICAgICAgICAgICAgIG9ic2VydmU6IG9ic2VydmUsXHJcbiAgICAgICAgICAgICAgICByZXBvcnRQcm9ncmVzczogcmVwb3J0UHJvZ3Jlc3NcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICk7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBHZXQgYSB1c2VycyBkYXRhXHJcbiAgICAgKiBUaGlzIHdpbGwgcmV0cmlldmUgYWxsIGluZm9ybWF0aW9uIG9uIGEgdXNlci4gIFRoaXMgaXMgcmVjb21tZW5kZWQgZm9yIEdEUFIgYXJvdW5kIHJpZ2h0IHRvIGFjY2Vzcy4gIEl0IGNhbiBhbHNvIGJlIHVzZWQgaWYgeW91IGFyZSBkb3dubG9hZGluZyBhIHJlcG9ydCB0byBzZW5kIGluIHRvIHRoZSBwb2xpY2UgYXJvdW5kIGNyaW1pbmFsIGFjdGl2aXR5LiBcclxuICAgICAqIEBwYXJhbSB1c2VySWQgVGhlIHVuaXF1ZSBpZGVudGlmaWVyIGZvciB0aGlzIHVzZXJcclxuICAgICAqIEBwYXJhbSBvYnNlcnZlIHNldCB3aGV0aGVyIG9yIG5vdCB0byByZXR1cm4gdGhlIGRhdGEgT2JzZXJ2YWJsZSBhcyB0aGUgYm9keSwgcmVzcG9uc2Ugb3IgZXZlbnRzLiBkZWZhdWx0cyB0byByZXR1cm5pbmcgdGhlIGJvZHkuXHJcbiAgICAgKiBAcGFyYW0gcmVwb3J0UHJvZ3Jlc3MgZmxhZyB0byByZXBvcnQgcmVxdWVzdCBhbmQgcmVzcG9uc2UgcHJvZ3Jlc3MuXHJcbiAgICAgKi9cclxuICAgIHB1YmxpYyBnZXRVc2VyRGF0YSh1c2VySWQ6IHN0cmluZywgb2JzZXJ2ZT86ICdib2R5JywgcmVwb3J0UHJvZ3Jlc3M/OiBib29sZWFuKTogT2JzZXJ2YWJsZTxBcnJheTxhbnk+PjtcclxuICAgIHB1YmxpYyBnZXRVc2VyRGF0YSh1c2VySWQ6IHN0cmluZywgb2JzZXJ2ZT86ICdyZXNwb25zZScsIHJlcG9ydFByb2dyZXNzPzogYm9vbGVhbik6IE9ic2VydmFibGU8SHR0cFJlc3BvbnNlPEFycmF5PGFueT4+PjtcclxuICAgIHB1YmxpYyBnZXRVc2VyRGF0YSh1c2VySWQ6IHN0cmluZywgb2JzZXJ2ZT86ICdldmVudHMnLCByZXBvcnRQcm9ncmVzcz86IGJvb2xlYW4pOiBPYnNlcnZhYmxlPEh0dHBFdmVudDxBcnJheTxhbnk+Pj47XHJcbiAgICBwdWJsaWMgZ2V0VXNlckRhdGEodXNlcklkOiBzdHJpbmcsIG9ic2VydmU6IGFueSA9ICdib2R5JywgcmVwb3J0UHJvZ3Jlc3M6IGJvb2xlYW4gPSBmYWxzZSApOiBPYnNlcnZhYmxlPGFueT4ge1xyXG5cclxuICAgICAgICBpZiAodXNlcklkID09PSBudWxsIHx8IHVzZXJJZCA9PT0gdW5kZWZpbmVkKSB7XHJcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcignUmVxdWlyZWQgcGFyYW1ldGVyIHVzZXJJZCB3YXMgbnVsbCBvciB1bmRlZmluZWQgd2hlbiBjYWxsaW5nIGdldFVzZXJEYXRhLicpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgbGV0IGhlYWRlcnMgPSB0aGlzLmRlZmF1bHRIZWFkZXJzO1xyXG5cclxuICAgICAgICAvLyB0byBkZXRlcm1pbmUgdGhlIEFjY2VwdCBoZWFkZXJcclxuICAgICAgICBsZXQgaHR0cEhlYWRlckFjY2VwdHM6IHN0cmluZ1tdID0gW1xyXG4gICAgICAgICAgICAnYXBwbGljYXRpb24veC1uZGpzb24nLFxyXG4gICAgICAgICAgICAnYXBwbGljYXRpb24vanNvbidcclxuICAgICAgICBdO1xyXG4gICAgICAgIGNvbnN0IGh0dHBIZWFkZXJBY2NlcHRTZWxlY3RlZDogc3RyaW5nIHwgdW5kZWZpbmVkID0gdGhpcy5jb25maWd1cmF0aW9uLnNlbGVjdEhlYWRlckFjY2VwdChodHRwSGVhZGVyQWNjZXB0cyk7XHJcbiAgICAgICAgaWYgKGh0dHBIZWFkZXJBY2NlcHRTZWxlY3RlZCAhPSB1bmRlZmluZWQpIHtcclxuICAgICAgICAgICAgaGVhZGVycyA9IGhlYWRlcnMuc2V0KCdBY2NlcHQnLCBodHRwSGVhZGVyQWNjZXB0U2VsZWN0ZWQpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLy8gdG8gZGV0ZXJtaW5lIHRoZSBDb250ZW50LVR5cGUgaGVhZGVyXHJcbiAgICAgICAgY29uc3QgY29uc3VtZXM6IHN0cmluZ1tdID0gW1xyXG4gICAgICAgIF07XHJcblxyXG4gICAgICAgIHJldHVybiB0aGlzLmh0dHBDbGllbnQucmVxdWVzdDxBcnJheTxhbnk+PignZ2V0JyxgJHt0aGlzLmJhc2VQYXRofS9pbmJveC91c2VyLyR7ZW5jb2RlVVJJQ29tcG9uZW50KFN0cmluZyh1c2VySWQpKX1gLFxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICB3aXRoQ3JlZGVudGlhbHM6IHRoaXMuY29uZmlndXJhdGlvbi53aXRoQ3JlZGVudGlhbHMsXHJcbiAgICAgICAgICAgICAgICBoZWFkZXJzOiBoZWFkZXJzLFxyXG4gICAgICAgICAgICAgICAgb2JzZXJ2ZTogb2JzZXJ2ZSxcclxuICAgICAgICAgICAgICAgIHJlcG9ydFByb2dyZXNzOiByZXBvcnRQcm9ncmVzc1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgKTtcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIFNlYXJjaCBmb3Igb3IgY2hlY2tvdXQgaXRlbXMgaW4gdGhpcyBxdWV1ZVxyXG4gICAgICogTG9va3VwIGl0ZW1zIGZvciB0aGlzIHF1ZXVlXHJcbiAgICAgKiBAcGFyYW0gbGFuZ3VhZ2UgU2hvdyByZXN1bHRzIGZvciB0aGUgZ2l2ZW4gbGFuZ3VhZ2Ugb25seS4gICBUaGlzIGlzIHRoZSBsYW5ndWFnZSB1c2VkLCBjb3VsZCBoYXZlIGJlZW4gc2V0IGJ5IHRoZSB1c2VyIG9yIGRldGVjdGVkIGJ5IGxhbmd1YWdlIGlkLlxyXG4gICAgICogQHBhcmFtIGFpIFNob3cgaXRlbXMgdGhlIEFJIHByZWRpY3RzIGFzIHVzZWZ1bCBiZWNhdXNlIG1vZGVyYXRvcnMgaW4gdGhlIHBhc3QgaGF2ZSB0YWtlbiBhbiBhY3Rpb24gb24gdGhpcyBpdGVtcy4gIFBhc3NpbmcgYW4gYXJyYXkgb2Ygb2JqZWN0cyBhcyBwYXJhbXMgY2FuIGJlIHRyaWNreSBhdCBmaXJzdCBzbyBoZXJlIGlzIGFuIGV4YW1wbGUgJmFtcDthaVswXVttaW5QcmVkaWN0aW9uXSYjeDNEOzAuNTAmYW1wO2FpWzBdW21vZGVsTmFtZV0mI3gzRDt0b3BpY192dWxnYXImYW1wO2FpWzBdW21heFByZWRpY3Rpb25dJiN4M0Q7MC45NSZhbXA7YWlbMV1bbWluUHJlZGljdGlvbl0mI3gzRDswLjEwJmFtcDthaVsxXVttb2RlbE5hbWVdJiN4M0Q7dG9waWNfZnJhdWQmYW1wO2FpWzFdW21heFByZWRpY3Rpb25dJiN4M0Q7MC44MCAgSW4gdXJsZW5jb2RlZCBmb3JtIHRoYXQgd291bGQgYmUgJmFtcDthaSU1QjAlNUQlNUJtaW5QcmVkaWN0aW9uJTVEJiN4M0Q7MC41MCZhbXA7YWklNUIwJTVEJTVCbW9kZWxOYW1lJTVEJiN4M0Q7dG9waWNfdnVsZ2FyJmFtcDthaSU1QjAlNUQlNUJtYXhQcmVkaWN0aW9uJTVEJiN4M0Q7MC45NSZhbXA7YWklNUIxJTVEJTVCbWluUHJlZGljdGlvbiU1RCYjeDNEOzAuMTAmYW1wO2FpJTVCMSU1RCU1Qm1vZGVsTmFtZSU1RCYjeDNEO3RvcGljX2ZyYXVkJmFtcDthaSU1QjElNUQlNUJtYXhQcmVkaWN0aW9uJTVEJiN4M0Q7MC44MCBcclxuICAgICAqIEBwYXJhbSBjaGVja291dCBDaGVja291dCB0aGlzIGl0ZW0gZm9yIHJldmlld1xyXG4gICAgICogQHBhcmFtIGNsaWVudElkcyBTaG93IHJlc3VsdHMgZm9yIGEgZ2l2ZW4gY2xpZW50LiAgVHlwaWNhbGx5IHRoaXMgaXMgc2V0IGZvciB5b3UgYnkgdGhlIGludGVybmFsIHN5c3RlbSBiYXNlZCBvbiB0aGUgQVBJX0tFWSB5b3UgYXJlIHVzaW5nLiAgSG93ZXZlciBzb21lIGNsaWVudHMgYXJlIGFsbG93ZWQgdG8gdmlldyBvdGhlciBjbGllbnRzIHN1Y2ggYXMgd2hlbiB0aGV5IGhhdmUgYSBzYW5kYm94IG9yIHdoZW4gdGhleSBhcmUgYSBsYXJnZSBlbnRlcnByaXNlIGFuZCBoYXZlIG11bHRpcGxlIGNsaWVudHMgdGhleSBtYW5hZ2UuICBJdCB3aWxsIG9ubHkgYWxsb3cgeW91IHRvIHZpZXcgY2xpZW50IGRhdGEgeW91IGhhdmUgYWNjZXNzIHRvLiBZb3UgY2FuIHNldCB0aGlzIHRvIC0xIHRvIGFwcGx5IHRvIGFsbCBjbGllbnRzIHlvdSBoYXZlIGFjY2VzcyB0by5cclxuICAgICAqIEBwYXJhbSBjb250ZW50SWRzIEdldCB0aGVzZSBzcGVjaWZpYyBjb250ZW50SWRzLiAgRnJlcXVlbnRseSB1c2VkIHdoZW4geW91IHVzZSB0aGUgUHJldmlvdXMgYnV0dG9uLlxyXG4gICAgICogQHBhcmFtIG5vdENvbnRlbnRJZHMgRXhjbHVkZSB0aGVzZSBzcGVjaWZpYyBjb250ZW50SWRzLiAgT3JpZ2luYWxseSBkZXNpZ25lZCBzbyB5b3UgY2FuIGNhbGwgY2hlY2tvdXQgYW5kIHBhc3MgaW4gdGhlIGl0ZW0geW91IGFyZSB3b3JraW5nIG9uIHJpZ2h0IG5vdyBhbmQgaXQgd2lsbCBnaXZlIHlvdSBhIGRpZmZlcmVudCBvbmUuICBUaGUgZGVmYXVsdCBjaGVja291dCBiZWhhdmlvdXIgd2lsbCBhc3NpZ24gdGhlIGl0ZW1zIHlvdSBhbHJlYWR5IGhhdmUgY2hlY2tlZCBvdXQgICh3aGljaCBpcyBvbiB5b3VyIHNjcmVlbikuIFxyXG4gICAgICogQHBhcmFtIGVuZERhdGUgU2hvdyByZXN1bHRzIG9jY3VycmluZyBiZWZvcmUgdGhlIGdpdmVuIGRhdGUgaW4gdW5peHRpbWVzdGFtcCAobWlsbGlzZWNvbmRzIHNpbmNlIEVwb2NoKVxyXG4gICAgICogQHBhcmFtIHN0YXJ0RGF0ZSBTaG93IHJlc3VsdHMgb2NjdXJyaW5nIGFmdGVyIHRoZSBnaXZlbiBkYXRlIGluIHVuaXh0aW1lc3RhbXAgKG1pbGxpc2Vjb25kcyBzaW5jZSBFcG9jaClcclxuICAgICAqIEBwYXJhbSByZXZpZXdlZFN0YXJ0RGF0ZSBTaG93IHJlc3VsdHMgdGhhdCB3aGVyZSByZXZpZXdlZCBiZXR3ZWVuIGdpdmVuIGRhdGUgaW4gdW5peHRpbWVzdGFtcCAobWlsbGlzZWNvbmRzIHNpbmNlIEVwb2NoKVxyXG4gICAgICogQHBhcmFtIHJldmlld2VkRW5kRGF0ZSBTaG93IHJlc3VsdHMgdGhhdCB3aGVyZSByZXZpZXdlZCBiZXR3ZWVuIGdpdmVuIGRhdGUgaW4gdW5peHRpbWVzdGFtcCAobWlsbGlzZWNvbmRzIHNpbmNlIEVwb2NoKVxyXG4gICAgICogQHBhcmFtIGNoZWNrb3V0QXZhaWxhYmxlIE9ubHkgc2hvdyBpdGVtcyB3aGVyZSB0aGUgaXRlbSBjb3VsZCBiZSBjaGVja2VkIG91dCBieSBtZS4gIFRoaXMgaXMgdGhlIHNhbWUgYXMgY2hlY2tvdXQmI3gzRDt0cnVlIGJ1dCBpdCBkb2VzIG5vdCBjaGVjayBpdCBvdXQuXHJcbiAgICAgKiBAcGFyYW0gZG9uZUJ5TW9kZXJhdG9ySWQgT25seSBzaG93IHdvcmsgZG9uZSBieSB0aGlzIG1vZGVyYXRvcklkXHJcbiAgICAgKiBAcGFyYW0gbGltaXQgTGltaXQgdGhlIG51bWJlciBvZiByZXN1bHRzXHJcbiAgICAgKiBAcGFyYW0gb2Zmc2V0IFN0YXJ0IHRoZSBzZWFyY2ggZnJvbSBvZmZzZXQgMC4gIEZvciBpbnN0YW5jZSBpZiB5b3VyIHVzaW5nIHBhZ2luYXRpb24gcGFnZSAyIHdvdWxkIGJlIG9uIHRvdGFsSXRlbXNQZXJQYWdlKnBhZ2VOdW0uIFxyXG4gICAgICogQHBhcmFtIHNvcnRCeSBXaGF0IGRvIHlvdSB3YW50IHRvIHNvcnQgdGhlIHJlc3VsdHMgYnkgIC0gRklGTyB8IEZpcnN0IGluIEZpcnN0IE91dCwgdGhlIHNhbWUgb3JkZXIgdGhleSBjYW1lIGluIC0gUmVjZW50IHwgSGFuZGxlIHRoZSBtb3N0IHJlY2VudCBpdGVtcyBmaXJzdCAtIFByaW9yaXR5IHwgQnkgcHJpb3JpdHkgKGlmIGFwcGxpY2FibGUpLiAgRm9yIHF1YWxpdHkgY29udHJvbCBsaWtlIHNwZWxsaW5nIGl0IGlzIHRoZSB0aW1lcyB1c2VkIHNvIGl0IHdpbGwgc2hvdyB0aGUgaXRlbXMgbWlzc3BlbGxlZCAxMDAwIHRpbWVzIGJlZm9yZSB0aGUgb25lcyA1MDAgdGltZXMuICBGb3IgcmVwb3J0ZWQgdXNlcnMgaXQgd2lsbCBiZSB0aGUgb25lcyB3aGVyZSBtdWx0aXBsZSB1c2VycyBoYXZlIHJlcG9ydGVkIHRoZSBzYW1lIHVzZXIuIC0gQUkgfCBEZWFsIHdpdGggdGhlIGhpZ2VzdCBBSSBwcmVkaWN0aW9ucyBmaXJzdCB0aGF0IHByZWRpY3QgdGhpcyBzaG91bGQgYmUgcmVsZXZhbnQgZm9yIG1lLiAgKE5PVEU6IHRvIHNlYXJjaCBieSBBSSB5b3UgbXVzdCBhbHNvIGhhdmUgc2V0IHRoZSBhaS5tb2RlbE5hbWUgaW4gdGhlIGZpcnN0IGl0ZW0gb2YgdGhlIHBhcmFtZXRlciBhaSkgXHJcbiAgICAgKiBAcGFyYW0gdGFncyBPbmx5IGZpbmQgaXRlbXMgbWF0Y2hpbmcgYSBjZXJ0YWluIHRhZ1xyXG4gICAgICogQHBhcmFtIHRleHQgVGV4dCBzZWFyY2guICBUaGlzIHVzZXMgZnV6enkgbWF0Y2hpbmcuXHJcbiAgICAgKiBAcGFyYW0gdG9waWNzIE9ubHkgc2hvdyBpdGVtcyBmb3IgdGhlc2UgdG9waWNzICh0b3BpY0lkKSBiZXR3ZWVuIHJpc2sgbGV2ZWwgbWluUmlzayBhbmQgbWF4Umlza1xyXG4gICAgICogQHBhcmFtIHVucmVzb2x2ZWRDb21tZW50cyBXaWxsIHNlZSBpZiB0aGVyZSBhcmUgYW55IHVucmVzb2x2ZWQgY29tbWVudHMgZm9yIHlvdSBhbmQgc2hvdyBvbmx5IHRob3NlXHJcbiAgICAgKiBAcGFyYW0gb2JzZXJ2ZSBzZXQgd2hldGhlciBvciBub3QgdG8gcmV0dXJuIHRoZSBkYXRhIE9ic2VydmFibGUgYXMgdGhlIGJvZHksIHJlc3BvbnNlIG9yIGV2ZW50cy4gZGVmYXVsdHMgdG8gcmV0dXJuaW5nIHRoZSBib2R5LlxyXG4gICAgICogQHBhcmFtIHJlcG9ydFByb2dyZXNzIGZsYWcgdG8gcmVwb3J0IHJlcXVlc3QgYW5kIHJlc3BvbnNlIHByb2dyZXNzLlxyXG4gICAgICovXHJcbiAgICBwdWJsaWMgZ2V0VXNlcm5hbWVzKGxhbmd1YWdlOiBzdHJpbmcsIGFpPzogQXJyYXk8QWk+LCBjaGVja291dD86IGJvb2xlYW4sIGNsaWVudElkcz86IEFycmF5PG51bWJlcj4sIGNvbnRlbnRJZHM/OiBBcnJheTxzdHJpbmc+LCBub3RDb250ZW50SWRzPzogQXJyYXk8c3RyaW5nPiwgZW5kRGF0ZT86IG51bWJlciwgc3RhcnREYXRlPzogbnVtYmVyLCByZXZpZXdlZFN0YXJ0RGF0ZT86IG51bWJlciwgcmV2aWV3ZWRFbmREYXRlPzogbnVtYmVyLCBjaGVja291dEF2YWlsYWJsZT86IGJvb2xlYW4sIGRvbmVCeU1vZGVyYXRvcklkPzogTW9kZXJhdG9ySWQsIGxpbWl0PzogbnVtYmVyLCBvZmZzZXQ/OiBudW1iZXIsIHNvcnRCeT86IHN0cmluZywgdGFncz86IEFycmF5PHN0cmluZz4sIHRleHQ/OiBzdHJpbmcsIHRvcGljcz86IEFycmF5PFRvcGljcz4sIHVucmVzb2x2ZWRDb21tZW50cz86IGJvb2xlYW4sIG9ic2VydmU/OiAnYm9keScsIHJlcG9ydFByb2dyZXNzPzogYm9vbGVhbik6IE9ic2VydmFibGU8VXNlcm5hbWVPdXRwdXQ+O1xyXG4gICAgcHVibGljIGdldFVzZXJuYW1lcyhsYW5ndWFnZTogc3RyaW5nLCBhaT86IEFycmF5PEFpPiwgY2hlY2tvdXQ/OiBib29sZWFuLCBjbGllbnRJZHM/OiBBcnJheTxudW1iZXI+LCBjb250ZW50SWRzPzogQXJyYXk8c3RyaW5nPiwgbm90Q29udGVudElkcz86IEFycmF5PHN0cmluZz4sIGVuZERhdGU/OiBudW1iZXIsIHN0YXJ0RGF0ZT86IG51bWJlciwgcmV2aWV3ZWRTdGFydERhdGU/OiBudW1iZXIsIHJldmlld2VkRW5kRGF0ZT86IG51bWJlciwgY2hlY2tvdXRBdmFpbGFibGU/OiBib29sZWFuLCBkb25lQnlNb2RlcmF0b3JJZD86IE1vZGVyYXRvcklkLCBsaW1pdD86IG51bWJlciwgb2Zmc2V0PzogbnVtYmVyLCBzb3J0Qnk/OiBzdHJpbmcsIHRhZ3M/OiBBcnJheTxzdHJpbmc+LCB0ZXh0Pzogc3RyaW5nLCB0b3BpY3M/OiBBcnJheTxUb3BpY3M+LCB1bnJlc29sdmVkQ29tbWVudHM/OiBib29sZWFuLCBvYnNlcnZlPzogJ3Jlc3BvbnNlJywgcmVwb3J0UHJvZ3Jlc3M/OiBib29sZWFuKTogT2JzZXJ2YWJsZTxIdHRwUmVzcG9uc2U8VXNlcm5hbWVPdXRwdXQ+PjtcclxuICAgIHB1YmxpYyBnZXRVc2VybmFtZXMobGFuZ3VhZ2U6IHN0cmluZywgYWk/OiBBcnJheTxBaT4sIGNoZWNrb3V0PzogYm9vbGVhbiwgY2xpZW50SWRzPzogQXJyYXk8bnVtYmVyPiwgY29udGVudElkcz86IEFycmF5PHN0cmluZz4sIG5vdENvbnRlbnRJZHM/OiBBcnJheTxzdHJpbmc+LCBlbmREYXRlPzogbnVtYmVyLCBzdGFydERhdGU/OiBudW1iZXIsIHJldmlld2VkU3RhcnREYXRlPzogbnVtYmVyLCByZXZpZXdlZEVuZERhdGU/OiBudW1iZXIsIGNoZWNrb3V0QXZhaWxhYmxlPzogYm9vbGVhbiwgZG9uZUJ5TW9kZXJhdG9ySWQ/OiBNb2RlcmF0b3JJZCwgbGltaXQ/OiBudW1iZXIsIG9mZnNldD86IG51bWJlciwgc29ydEJ5Pzogc3RyaW5nLCB0YWdzPzogQXJyYXk8c3RyaW5nPiwgdGV4dD86IHN0cmluZywgdG9waWNzPzogQXJyYXk8VG9waWNzPiwgdW5yZXNvbHZlZENvbW1lbnRzPzogYm9vbGVhbiwgb2JzZXJ2ZT86ICdldmVudHMnLCByZXBvcnRQcm9ncmVzcz86IGJvb2xlYW4pOiBPYnNlcnZhYmxlPEh0dHBFdmVudDxVc2VybmFtZU91dHB1dD4+O1xyXG4gICAgcHVibGljIGdldFVzZXJuYW1lcyhsYW5ndWFnZTogc3RyaW5nLCBhaT86IEFycmF5PEFpPiwgY2hlY2tvdXQ/OiBib29sZWFuLCBjbGllbnRJZHM/OiBBcnJheTxudW1iZXI+LCBjb250ZW50SWRzPzogQXJyYXk8c3RyaW5nPiwgbm90Q29udGVudElkcz86IEFycmF5PHN0cmluZz4sIGVuZERhdGU/OiBudW1iZXIsIHN0YXJ0RGF0ZT86IG51bWJlciwgcmV2aWV3ZWRTdGFydERhdGU/OiBudW1iZXIsIHJldmlld2VkRW5kRGF0ZT86IG51bWJlciwgY2hlY2tvdXRBdmFpbGFibGU/OiBib29sZWFuLCBkb25lQnlNb2RlcmF0b3JJZD86IE1vZGVyYXRvcklkLCBsaW1pdD86IG51bWJlciwgb2Zmc2V0PzogbnVtYmVyLCBzb3J0Qnk/OiBzdHJpbmcsIHRhZ3M/OiBBcnJheTxzdHJpbmc+LCB0ZXh0Pzogc3RyaW5nLCB0b3BpY3M/OiBBcnJheTxUb3BpY3M+LCB1bnJlc29sdmVkQ29tbWVudHM/OiBib29sZWFuLCBvYnNlcnZlOiBhbnkgPSAnYm9keScsIHJlcG9ydFByb2dyZXNzOiBib29sZWFuID0gZmFsc2UgKTogT2JzZXJ2YWJsZTxhbnk+IHtcclxuXHJcbiAgICAgICAgaWYgKGxhbmd1YWdlID09PSBudWxsIHx8IGxhbmd1YWdlID09PSB1bmRlZmluZWQpIHtcclxuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdSZXF1aXJlZCBwYXJhbWV0ZXIgbGFuZ3VhZ2Ugd2FzIG51bGwgb3IgdW5kZWZpbmVkIHdoZW4gY2FsbGluZyBnZXRVc2VybmFtZXMuJyk7XHJcbiAgICAgICAgfVxyXG5cclxuXHJcblxyXG5cclxuXHJcblxyXG5cclxuXHJcblxyXG5cclxuXHJcblxyXG5cclxuXHJcblxyXG5cclxuXHJcblxyXG5cclxuICAgICAgICBsZXQgcXVlcnlQYXJhbWV0ZXJzID0gbmV3IEh0dHBQYXJhbXMoe2VuY29kZXI6IG5ldyBDdXN0b21IdHRwVXJsRW5jb2RpbmdDb2RlYygpfSk7XHJcbiAgICAgICAgaWYgKGFpKSB7XHJcbiAgICAgICAgICAgIGFpLmZvckVhY2goKGVsZW1lbnQpID0+IHtcclxuICAgICAgICAgICAgICAgIHF1ZXJ5UGFyYW1ldGVycyA9IHF1ZXJ5UGFyYW1ldGVycy5hcHBlbmQoJ2FpJywgPGFueT5lbGVtZW50KTtcclxuICAgICAgICAgICAgfSlcclxuICAgICAgICB9XHJcbiAgICAgICAgaWYgKGNoZWNrb3V0ICE9PSB1bmRlZmluZWQgJiYgY2hlY2tvdXQgIT09IG51bGwpIHtcclxuICAgICAgICAgICAgcXVlcnlQYXJhbWV0ZXJzID0gcXVlcnlQYXJhbWV0ZXJzLnNldCgnY2hlY2tvdXQnLCA8YW55PmNoZWNrb3V0KTtcclxuICAgICAgICB9XHJcbiAgICAgICAgaWYgKGNsaWVudElkcykge1xyXG4gICAgICAgICAgICBxdWVyeVBhcmFtZXRlcnMgPSBxdWVyeVBhcmFtZXRlcnMuc2V0KCdjbGllbnRJZHMnLCBjbGllbnRJZHMuam9pbihDT0xMRUNUSU9OX0ZPUk1BVFNbJ2NzdiddKSk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGlmIChjb250ZW50SWRzKSB7XHJcbiAgICAgICAgICAgIHF1ZXJ5UGFyYW1ldGVycyA9IHF1ZXJ5UGFyYW1ldGVycy5zZXQoJ2NvbnRlbnRJZHMnLCBjb250ZW50SWRzLmpvaW4oQ09MTEVDVElPTl9GT1JNQVRTWydjc3YnXSkpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpZiAobm90Q29udGVudElkcykge1xyXG4gICAgICAgICAgICBxdWVyeVBhcmFtZXRlcnMgPSBxdWVyeVBhcmFtZXRlcnMuc2V0KCdub3RDb250ZW50SWRzJywgbm90Q29udGVudElkcy5qb2luKENPTExFQ1RJT05fRk9STUFUU1snY3N2J10pKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgaWYgKGVuZERhdGUgIT09IHVuZGVmaW5lZCAmJiBlbmREYXRlICE9PSBudWxsKSB7XHJcbiAgICAgICAgICAgIHF1ZXJ5UGFyYW1ldGVycyA9IHF1ZXJ5UGFyYW1ldGVycy5zZXQoJ2VuZERhdGUnLCA8YW55PmVuZERhdGUpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpZiAoc3RhcnREYXRlICE9PSB1bmRlZmluZWQgJiYgc3RhcnREYXRlICE9PSBudWxsKSB7XHJcbiAgICAgICAgICAgIHF1ZXJ5UGFyYW1ldGVycyA9IHF1ZXJ5UGFyYW1ldGVycy5zZXQoJ3N0YXJ0RGF0ZScsIDxhbnk+c3RhcnREYXRlKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgaWYgKHJldmlld2VkU3RhcnREYXRlICE9PSB1bmRlZmluZWQgJiYgcmV2aWV3ZWRTdGFydERhdGUgIT09IG51bGwpIHtcclxuICAgICAgICAgICAgcXVlcnlQYXJhbWV0ZXJzID0gcXVlcnlQYXJhbWV0ZXJzLnNldCgncmV2aWV3ZWRTdGFydERhdGUnLCA8YW55PnJldmlld2VkU3RhcnREYXRlKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgaWYgKHJldmlld2VkRW5kRGF0ZSAhPT0gdW5kZWZpbmVkICYmIHJldmlld2VkRW5kRGF0ZSAhPT0gbnVsbCkge1xyXG4gICAgICAgICAgICBxdWVyeVBhcmFtZXRlcnMgPSBxdWVyeVBhcmFtZXRlcnMuc2V0KCdyZXZpZXdlZEVuZERhdGUnLCA8YW55PnJldmlld2VkRW5kRGF0ZSk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGlmIChjaGVja291dEF2YWlsYWJsZSAhPT0gdW5kZWZpbmVkICYmIGNoZWNrb3V0QXZhaWxhYmxlICE9PSBudWxsKSB7XHJcbiAgICAgICAgICAgIHF1ZXJ5UGFyYW1ldGVycyA9IHF1ZXJ5UGFyYW1ldGVycy5zZXQoJ2NoZWNrb3V0QXZhaWxhYmxlJywgPGFueT5jaGVja291dEF2YWlsYWJsZSk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGlmIChkb25lQnlNb2RlcmF0b3JJZCAhPT0gdW5kZWZpbmVkICYmIGRvbmVCeU1vZGVyYXRvcklkICE9PSBudWxsKSB7XHJcbiAgICAgICAgICAgIHF1ZXJ5UGFyYW1ldGVycyA9IHF1ZXJ5UGFyYW1ldGVycy5zZXQoJ2RvbmVCeU1vZGVyYXRvcklkJywgPGFueT5kb25lQnlNb2RlcmF0b3JJZCk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGlmIChsYW5ndWFnZSAhPT0gdW5kZWZpbmVkICYmIGxhbmd1YWdlICE9PSBudWxsKSB7XHJcbiAgICAgICAgICAgIHF1ZXJ5UGFyYW1ldGVycyA9IHF1ZXJ5UGFyYW1ldGVycy5zZXQoJ2xhbmd1YWdlJywgPGFueT5sYW5ndWFnZSk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGlmIChsaW1pdCAhPT0gdW5kZWZpbmVkICYmIGxpbWl0ICE9PSBudWxsKSB7XHJcbiAgICAgICAgICAgIHF1ZXJ5UGFyYW1ldGVycyA9IHF1ZXJ5UGFyYW1ldGVycy5zZXQoJ2xpbWl0JywgPGFueT5saW1pdCk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGlmIChvZmZzZXQgIT09IHVuZGVmaW5lZCAmJiBvZmZzZXQgIT09IG51bGwpIHtcclxuICAgICAgICAgICAgcXVlcnlQYXJhbWV0ZXJzID0gcXVlcnlQYXJhbWV0ZXJzLnNldCgnb2Zmc2V0JywgPGFueT5vZmZzZXQpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpZiAoc29ydEJ5ICE9PSB1bmRlZmluZWQgJiYgc29ydEJ5ICE9PSBudWxsKSB7XHJcbiAgICAgICAgICAgIHF1ZXJ5UGFyYW1ldGVycyA9IHF1ZXJ5UGFyYW1ldGVycy5zZXQoJ3NvcnRCeScsIDxhbnk+c29ydEJ5KTtcclxuICAgICAgICB9XHJcbiAgICAgICAgaWYgKHRhZ3MpIHtcclxuICAgICAgICAgICAgcXVlcnlQYXJhbWV0ZXJzID0gcXVlcnlQYXJhbWV0ZXJzLnNldCgndGFncycsIHRhZ3Muam9pbihDT0xMRUNUSU9OX0ZPUk1BVFNbJ2NzdiddKSk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGlmICh0ZXh0ICE9PSB1bmRlZmluZWQgJiYgdGV4dCAhPT0gbnVsbCkge1xyXG4gICAgICAgICAgICBxdWVyeVBhcmFtZXRlcnMgPSBxdWVyeVBhcmFtZXRlcnMuc2V0KCd0ZXh0JywgPGFueT50ZXh0KTtcclxuICAgICAgICB9XHJcbiAgICAgICAgaWYgKHRvcGljcykge1xyXG4gICAgICAgICAgICB0b3BpY3MuZm9yRWFjaCgoZWxlbWVudCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgcXVlcnlQYXJhbWV0ZXJzID0gcXVlcnlQYXJhbWV0ZXJzLmFwcGVuZCgndG9waWNzJywgPGFueT5lbGVtZW50KTtcclxuICAgICAgICAgICAgfSlcclxuICAgICAgICB9XHJcbiAgICAgICAgaWYgKHVucmVzb2x2ZWRDb21tZW50cyAhPT0gdW5kZWZpbmVkICYmIHVucmVzb2x2ZWRDb21tZW50cyAhPT0gbnVsbCkge1xyXG4gICAgICAgICAgICBxdWVyeVBhcmFtZXRlcnMgPSBxdWVyeVBhcmFtZXRlcnMuc2V0KCd1bnJlc29sdmVkQ29tbWVudHMnLCA8YW55PnVucmVzb2x2ZWRDb21tZW50cyk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBsZXQgaGVhZGVycyA9IHRoaXMuZGVmYXVsdEhlYWRlcnM7XHJcblxyXG4gICAgICAgIC8vIHRvIGRldGVybWluZSB0aGUgQWNjZXB0IGhlYWRlclxyXG4gICAgICAgIGxldCBodHRwSGVhZGVyQWNjZXB0czogc3RyaW5nW10gPSBbXHJcbiAgICAgICAgICAgICdhcHBsaWNhdGlvbi9qc29uJ1xyXG4gICAgICAgIF07XHJcbiAgICAgICAgY29uc3QgaHR0cEhlYWRlckFjY2VwdFNlbGVjdGVkOiBzdHJpbmcgfCB1bmRlZmluZWQgPSB0aGlzLmNvbmZpZ3VyYXRpb24uc2VsZWN0SGVhZGVyQWNjZXB0KGh0dHBIZWFkZXJBY2NlcHRzKTtcclxuICAgICAgICBpZiAoaHR0cEhlYWRlckFjY2VwdFNlbGVjdGVkICE9IHVuZGVmaW5lZCkge1xyXG4gICAgICAgICAgICBoZWFkZXJzID0gaGVhZGVycy5zZXQoJ0FjY2VwdCcsIGh0dHBIZWFkZXJBY2NlcHRTZWxlY3RlZCk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvLyB0byBkZXRlcm1pbmUgdGhlIENvbnRlbnQtVHlwZSBoZWFkZXJcclxuICAgICAgICBjb25zdCBjb25zdW1lczogc3RyaW5nW10gPSBbXHJcbiAgICAgICAgXTtcclxuXHJcbiAgICAgICAgcmV0dXJuIHRoaXMuaHR0cENsaWVudC5yZXF1ZXN0PFVzZXJuYW1lT3V0cHV0PignZ2V0JyxgJHt0aGlzLmJhc2VQYXRofS9pbmJveC9xdWV1ZS91c2VybmFtZXMvaXRlbXNgLFxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICBwYXJhbXM6IHF1ZXJ5UGFyYW1ldGVycyxcclxuICAgICAgICAgICAgICAgIHdpdGhDcmVkZW50aWFsczogdGhpcy5jb25maWd1cmF0aW9uLndpdGhDcmVkZW50aWFscyxcclxuICAgICAgICAgICAgICAgIGhlYWRlcnM6IGhlYWRlcnMsXHJcbiAgICAgICAgICAgICAgICBvYnNlcnZlOiBvYnNlcnZlLFxyXG4gICAgICAgICAgICAgICAgcmVwb3J0UHJvZ3Jlc3M6IHJlcG9ydFByb2dyZXNzXHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICApO1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogQWRkIHlvdXIgZGVjaXNpb24gdG8gdGhpcyBjb250ZW50IGl0ZW1cclxuICAgICAqIFRoaXMgd2lsbCAgIC0gUmVsZWFzZSB5b3VyIGNoZWNrb3V0IG9uIHRoZSBpdGVtICAtIFJlY29yZCBob3cgbG9uZyB5b3Ugc3BlbnQgb24gaXQgKHNob3VsZCBiZSB0b3RhbCBpdGVtcyBvbiBzY3JlZW4gLyBzZWNvbmRzIHNpbmNlIHN0YXJ0ZWQgbWludXMgYW55IHBhdXNlcykgIC0gcmVjb3JkIHdoYXQgdGhlIGN1cnJlbnQgcmlzayBpcyB3aGVuIHJldmlld2VkIChpZiBhcHBsaWNhYmxlKSAgLSByZWNvcmQgd2hhdCB0YWdzIHlvdSBzZXQgaXQgYXMgKGluY2x1ZGluZyB0aGUgZGVjaXNpb24geW91IG1hZGUgd2hlcmUgYmFuIHVzZXIsIGFncmVlLCBkaXNhZ3JlZSwgZGVsZXRlIGNvbnRlbnQgYXJlIGFsbCB0YWdzKSBcclxuICAgICAqIEBwYXJhbSBxdWV1ZUlkIFRoZSB1bmlxdWUgaWRlbnRpZmllciBmb3IgdGhpcyBxdWV1ZVxyXG4gICAgICogQHBhcmFtIGNvbnRlbnRJZCBUaGUgdW5pcXVlIGlkZW50aWZpZXIgZm9yIHRoZSBjb250ZW50XHJcbiAgICAgKiBAcGFyYW0gYm9keSBcclxuICAgICAqIEBwYXJhbSBvYnNlcnZlIHNldCB3aGV0aGVyIG9yIG5vdCB0byByZXR1cm4gdGhlIGRhdGEgT2JzZXJ2YWJsZSBhcyB0aGUgYm9keSwgcmVzcG9uc2Ugb3IgZXZlbnRzLiBkZWZhdWx0cyB0byByZXR1cm5pbmcgdGhlIGJvZHkuXHJcbiAgICAgKiBAcGFyYW0gcmVwb3J0UHJvZ3Jlc3MgZmxhZyB0byByZXBvcnQgcmVxdWVzdCBhbmQgcmVzcG9uc2UgcHJvZ3Jlc3MuXHJcbiAgICAgKi9cclxuICAgIHB1YmxpYyBpdGVtRG9uZShxdWV1ZUlkOiBzdHJpbmcsIGNvbnRlbnRJZDogc3RyaW5nLCBib2R5PzogRGVjaXNpb24sIG9ic2VydmU/OiAnYm9keScsIHJlcG9ydFByb2dyZXNzPzogYm9vbGVhbik6IE9ic2VydmFibGU8SW5saW5lUmVzcG9uc2UyMDE+O1xyXG4gICAgcHVibGljIGl0ZW1Eb25lKHF1ZXVlSWQ6IHN0cmluZywgY29udGVudElkOiBzdHJpbmcsIGJvZHk/OiBEZWNpc2lvbiwgb2JzZXJ2ZT86ICdyZXNwb25zZScsIHJlcG9ydFByb2dyZXNzPzogYm9vbGVhbik6IE9ic2VydmFibGU8SHR0cFJlc3BvbnNlPElubGluZVJlc3BvbnNlMjAxPj47XHJcbiAgICBwdWJsaWMgaXRlbURvbmUocXVldWVJZDogc3RyaW5nLCBjb250ZW50SWQ6IHN0cmluZywgYm9keT86IERlY2lzaW9uLCBvYnNlcnZlPzogJ2V2ZW50cycsIHJlcG9ydFByb2dyZXNzPzogYm9vbGVhbik6IE9ic2VydmFibGU8SHR0cEV2ZW50PElubGluZVJlc3BvbnNlMjAxPj47XHJcbiAgICBwdWJsaWMgaXRlbURvbmUocXVldWVJZDogc3RyaW5nLCBjb250ZW50SWQ6IHN0cmluZywgYm9keT86IERlY2lzaW9uLCBvYnNlcnZlOiBhbnkgPSAnYm9keScsIHJlcG9ydFByb2dyZXNzOiBib29sZWFuID0gZmFsc2UgKTogT2JzZXJ2YWJsZTxhbnk+IHtcclxuXHJcbiAgICAgICAgaWYgKHF1ZXVlSWQgPT09IG51bGwgfHwgcXVldWVJZCA9PT0gdW5kZWZpbmVkKSB7XHJcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcignUmVxdWlyZWQgcGFyYW1ldGVyIHF1ZXVlSWQgd2FzIG51bGwgb3IgdW5kZWZpbmVkIHdoZW4gY2FsbGluZyBpdGVtRG9uZS4nKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGlmIChjb250ZW50SWQgPT09IG51bGwgfHwgY29udGVudElkID09PSB1bmRlZmluZWQpIHtcclxuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdSZXF1aXJlZCBwYXJhbWV0ZXIgY29udGVudElkIHdhcyBudWxsIG9yIHVuZGVmaW5lZCB3aGVuIGNhbGxpbmcgaXRlbURvbmUuJyk7XHJcbiAgICAgICAgfVxyXG5cclxuXHJcbiAgICAgICAgbGV0IGhlYWRlcnMgPSB0aGlzLmRlZmF1bHRIZWFkZXJzO1xyXG5cclxuICAgICAgICAvLyB0byBkZXRlcm1pbmUgdGhlIEFjY2VwdCBoZWFkZXJcclxuICAgICAgICBsZXQgaHR0cEhlYWRlckFjY2VwdHM6IHN0cmluZ1tdID0gW1xyXG4gICAgICAgICAgICAnYXBwbGljYXRpb24vanNvbidcclxuICAgICAgICBdO1xyXG4gICAgICAgIGNvbnN0IGh0dHBIZWFkZXJBY2NlcHRTZWxlY3RlZDogc3RyaW5nIHwgdW5kZWZpbmVkID0gdGhpcy5jb25maWd1cmF0aW9uLnNlbGVjdEhlYWRlckFjY2VwdChodHRwSGVhZGVyQWNjZXB0cyk7XHJcbiAgICAgICAgaWYgKGh0dHBIZWFkZXJBY2NlcHRTZWxlY3RlZCAhPSB1bmRlZmluZWQpIHtcclxuICAgICAgICAgICAgaGVhZGVycyA9IGhlYWRlcnMuc2V0KCdBY2NlcHQnLCBodHRwSGVhZGVyQWNjZXB0U2VsZWN0ZWQpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLy8gdG8gZGV0ZXJtaW5lIHRoZSBDb250ZW50LVR5cGUgaGVhZGVyXHJcbiAgICAgICAgY29uc3QgY29uc3VtZXM6IHN0cmluZ1tdID0gW1xyXG4gICAgICAgICAgICAnYXBwbGljYXRpb24vanNvbidcclxuICAgICAgICBdO1xyXG4gICAgICAgIGNvbnN0IGh0dHBDb250ZW50VHlwZVNlbGVjdGVkOiBzdHJpbmcgfCB1bmRlZmluZWQgPSB0aGlzLmNvbmZpZ3VyYXRpb24uc2VsZWN0SGVhZGVyQ29udGVudFR5cGUoY29uc3VtZXMpO1xyXG4gICAgICAgIGlmIChodHRwQ29udGVudFR5cGVTZWxlY3RlZCAhPSB1bmRlZmluZWQpIHtcclxuICAgICAgICAgICAgaGVhZGVycyA9IGhlYWRlcnMuc2V0KCdDb250ZW50LVR5cGUnLCBodHRwQ29udGVudFR5cGVTZWxlY3RlZCk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICByZXR1cm4gdGhpcy5odHRwQ2xpZW50LnJlcXVlc3Q8SW5saW5lUmVzcG9uc2UyMDE+KCdwb3N0JyxgJHt0aGlzLmJhc2VQYXRofS9pbmJveC9xdWV1ZS8ke2VuY29kZVVSSUNvbXBvbmVudChTdHJpbmcocXVldWVJZCkpfS9pdGVtcy8ke2VuY29kZVVSSUNvbXBvbmVudChTdHJpbmcoY29udGVudElkKSl9L2RlY2lzaW9uYCxcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgYm9keTogYm9keSxcclxuICAgICAgICAgICAgICAgIHdpdGhDcmVkZW50aWFsczogdGhpcy5jb25maWd1cmF0aW9uLndpdGhDcmVkZW50aWFscyxcclxuICAgICAgICAgICAgICAgIGhlYWRlcnM6IGhlYWRlcnMsXHJcbiAgICAgICAgICAgICAgICBvYnNlcnZlOiBvYnNlcnZlLFxyXG4gICAgICAgICAgICAgICAgcmVwb3J0UHJvZ3Jlc3M6IHJlcG9ydFByb2dyZXNzXHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICApO1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogTGlzdCBjb21tZW50cyBvbiB0aGlzIGNvbnRlbnQgaXRlbVxyXG4gICAgICogXHJcbiAgICAgKiBAcGFyYW0gcXVldWVJZCBUaGUgdW5pcXVlIGlkZW50aWZpZXIgZm9yIHRoaXMgcXVldWVcclxuICAgICAqIEBwYXJhbSBjb250ZW50SWQgVGhlIHVuaXF1ZSBpZGVudGlmaWVyIGZvciB0aGUgY29udGVudFxyXG4gICAgICogQHBhcmFtIG9ic2VydmUgc2V0IHdoZXRoZXIgb3Igbm90IHRvIHJldHVybiB0aGUgZGF0YSBPYnNlcnZhYmxlIGFzIHRoZSBib2R5LCByZXNwb25zZSBvciBldmVudHMuIGRlZmF1bHRzIHRvIHJldHVybmluZyB0aGUgYm9keS5cclxuICAgICAqIEBwYXJhbSByZXBvcnRQcm9ncmVzcyBmbGFnIHRvIHJlcG9ydCByZXF1ZXN0IGFuZCByZXNwb25zZSBwcm9ncmVzcy5cclxuICAgICAqL1xyXG4gICAgcHVibGljIGxpc3RDb21tZW50c0ZvckNvbnRlbnRJZChxdWV1ZUlkOiBzdHJpbmcsIGNvbnRlbnRJZDogc3RyaW5nLCBvYnNlcnZlPzogJ2JvZHknLCByZXBvcnRQcm9ncmVzcz86IGJvb2xlYW4pOiBPYnNlcnZhYmxlPEFycmF5PENvbW1lbnQ+PjtcclxuICAgIHB1YmxpYyBsaXN0Q29tbWVudHNGb3JDb250ZW50SWQocXVldWVJZDogc3RyaW5nLCBjb250ZW50SWQ6IHN0cmluZywgb2JzZXJ2ZT86ICdyZXNwb25zZScsIHJlcG9ydFByb2dyZXNzPzogYm9vbGVhbik6IE9ic2VydmFibGU8SHR0cFJlc3BvbnNlPEFycmF5PENvbW1lbnQ+Pj47XHJcbiAgICBwdWJsaWMgbGlzdENvbW1lbnRzRm9yQ29udGVudElkKHF1ZXVlSWQ6IHN0cmluZywgY29udGVudElkOiBzdHJpbmcsIG9ic2VydmU/OiAnZXZlbnRzJywgcmVwb3J0UHJvZ3Jlc3M/OiBib29sZWFuKTogT2JzZXJ2YWJsZTxIdHRwRXZlbnQ8QXJyYXk8Q29tbWVudD4+PjtcclxuICAgIHB1YmxpYyBsaXN0Q29tbWVudHNGb3JDb250ZW50SWQocXVldWVJZDogc3RyaW5nLCBjb250ZW50SWQ6IHN0cmluZywgb2JzZXJ2ZTogYW55ID0gJ2JvZHknLCByZXBvcnRQcm9ncmVzczogYm9vbGVhbiA9IGZhbHNlICk6IE9ic2VydmFibGU8YW55PiB7XHJcblxyXG4gICAgICAgIGlmIChxdWV1ZUlkID09PSBudWxsIHx8IHF1ZXVlSWQgPT09IHVuZGVmaW5lZCkge1xyXG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ1JlcXVpcmVkIHBhcmFtZXRlciBxdWV1ZUlkIHdhcyBudWxsIG9yIHVuZGVmaW5lZCB3aGVuIGNhbGxpbmcgbGlzdENvbW1lbnRzRm9yQ29udGVudElkLicpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgaWYgKGNvbnRlbnRJZCA9PT0gbnVsbCB8fCBjb250ZW50SWQgPT09IHVuZGVmaW5lZCkge1xyXG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ1JlcXVpcmVkIHBhcmFtZXRlciBjb250ZW50SWQgd2FzIG51bGwgb3IgdW5kZWZpbmVkIHdoZW4gY2FsbGluZyBsaXN0Q29tbWVudHNGb3JDb250ZW50SWQuJyk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBsZXQgaGVhZGVycyA9IHRoaXMuZGVmYXVsdEhlYWRlcnM7XHJcblxyXG4gICAgICAgIC8vIHRvIGRldGVybWluZSB0aGUgQWNjZXB0IGhlYWRlclxyXG4gICAgICAgIGxldCBodHRwSGVhZGVyQWNjZXB0czogc3RyaW5nW10gPSBbXHJcbiAgICAgICAgICAgICdhcHBsaWNhdGlvbi9qc29uJ1xyXG4gICAgICAgIF07XHJcbiAgICAgICAgY29uc3QgaHR0cEhlYWRlckFjY2VwdFNlbGVjdGVkOiBzdHJpbmcgfCB1bmRlZmluZWQgPSB0aGlzLmNvbmZpZ3VyYXRpb24uc2VsZWN0SGVhZGVyQWNjZXB0KGh0dHBIZWFkZXJBY2NlcHRzKTtcclxuICAgICAgICBpZiAoaHR0cEhlYWRlckFjY2VwdFNlbGVjdGVkICE9IHVuZGVmaW5lZCkge1xyXG4gICAgICAgICAgICBoZWFkZXJzID0gaGVhZGVycy5zZXQoJ0FjY2VwdCcsIGh0dHBIZWFkZXJBY2NlcHRTZWxlY3RlZCk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvLyB0byBkZXRlcm1pbmUgdGhlIENvbnRlbnQtVHlwZSBoZWFkZXJcclxuICAgICAgICBjb25zdCBjb25zdW1lczogc3RyaW5nW10gPSBbXHJcbiAgICAgICAgXTtcclxuXHJcbiAgICAgICAgcmV0dXJuIHRoaXMuaHR0cENsaWVudC5yZXF1ZXN0PEFycmF5PENvbW1lbnQ+PignZ2V0JyxgJHt0aGlzLmJhc2VQYXRofS9pbmJveC9xdWV1ZS8ke2VuY29kZVVSSUNvbXBvbmVudChTdHJpbmcocXVldWVJZCkpfS9pdGVtcy8ke2VuY29kZVVSSUNvbXBvbmVudChTdHJpbmcoY29udGVudElkKSl9L2NvbW1lbnRzYCxcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgd2l0aENyZWRlbnRpYWxzOiB0aGlzLmNvbmZpZ3VyYXRpb24ud2l0aENyZWRlbnRpYWxzLFxyXG4gICAgICAgICAgICAgICAgaGVhZGVyczogaGVhZGVycyxcclxuICAgICAgICAgICAgICAgIG9ic2VydmU6IG9ic2VydmUsXHJcbiAgICAgICAgICAgICAgICByZXBvcnRQcm9ncmVzczogcmVwb3J0UHJvZ3Jlc3NcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICk7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBVcGRhdGUgdGhlIHRleHQgb2YgYW4gaXRlbVxyXG4gICAgICogVXBkYXRlIHRoZSBjb250ZW50LiAgVHlwaWNhbGx5IHVzZWQgZm9yIHJlZGFjdGluZy4gIEl0IGlzIGxpbWl0ZWQgaW4gd2hhdCB5b3UgY2FuIGRvLiBcclxuICAgICAqIEBwYXJhbSBxdWV1ZUlkIFRoZSB1bmlxdWUgaWRlbnRpZmllciBmb3IgdGhpcyBxdWV1ZVxyXG4gICAgICogQHBhcmFtIGNvbnRlbnRJZCBUaGUgdW5pcXVlIGlkZW50aWZpZXIgZm9yIHRoZSBjb250ZW50XHJcbiAgICAgKiBAcGFyYW0gYm9keSBcclxuICAgICAqIEBwYXJhbSBvYnNlcnZlIHNldCB3aGV0aGVyIG9yIG5vdCB0byByZXR1cm4gdGhlIGRhdGEgT2JzZXJ2YWJsZSBhcyB0aGUgYm9keSwgcmVzcG9uc2Ugb3IgZXZlbnRzLiBkZWZhdWx0cyB0byByZXR1cm5pbmcgdGhlIGJvZHkuXHJcbiAgICAgKiBAcGFyYW0gcmVwb3J0UHJvZ3Jlc3MgZmxhZyB0byByZXBvcnQgcmVxdWVzdCBhbmQgcmVzcG9uc2UgcHJvZ3Jlc3MuXHJcbiAgICAgKi9cclxuICAgIHB1YmxpYyByZWRhY3RJdGVtKHF1ZXVlSWQ6IHN0cmluZywgY29udGVudElkOiBzdHJpbmcsIGJvZHk/OiBCb2R5LCBvYnNlcnZlPzogJ2JvZHknLCByZXBvcnRQcm9ncmVzcz86IGJvb2xlYW4pOiBPYnNlcnZhYmxlPElubGluZVJlc3BvbnNlMjAwMT47XHJcbiAgICBwdWJsaWMgcmVkYWN0SXRlbShxdWV1ZUlkOiBzdHJpbmcsIGNvbnRlbnRJZDogc3RyaW5nLCBib2R5PzogQm9keSwgb2JzZXJ2ZT86ICdyZXNwb25zZScsIHJlcG9ydFByb2dyZXNzPzogYm9vbGVhbik6IE9ic2VydmFibGU8SHR0cFJlc3BvbnNlPElubGluZVJlc3BvbnNlMjAwMT4+O1xyXG4gICAgcHVibGljIHJlZGFjdEl0ZW0ocXVldWVJZDogc3RyaW5nLCBjb250ZW50SWQ6IHN0cmluZywgYm9keT86IEJvZHksIG9ic2VydmU/OiAnZXZlbnRzJywgcmVwb3J0UHJvZ3Jlc3M/OiBib29sZWFuKTogT2JzZXJ2YWJsZTxIdHRwRXZlbnQ8SW5saW5lUmVzcG9uc2UyMDAxPj47XHJcbiAgICBwdWJsaWMgcmVkYWN0SXRlbShxdWV1ZUlkOiBzdHJpbmcsIGNvbnRlbnRJZDogc3RyaW5nLCBib2R5PzogQm9keSwgb2JzZXJ2ZTogYW55ID0gJ2JvZHknLCByZXBvcnRQcm9ncmVzczogYm9vbGVhbiA9IGZhbHNlICk6IE9ic2VydmFibGU8YW55PiB7XHJcblxyXG4gICAgICAgIGlmIChxdWV1ZUlkID09PSBudWxsIHx8IHF1ZXVlSWQgPT09IHVuZGVmaW5lZCkge1xyXG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ1JlcXVpcmVkIHBhcmFtZXRlciBxdWV1ZUlkIHdhcyBudWxsIG9yIHVuZGVmaW5lZCB3aGVuIGNhbGxpbmcgcmVkYWN0SXRlbS4nKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGlmIChjb250ZW50SWQgPT09IG51bGwgfHwgY29udGVudElkID09PSB1bmRlZmluZWQpIHtcclxuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdSZXF1aXJlZCBwYXJhbWV0ZXIgY29udGVudElkIHdhcyBudWxsIG9yIHVuZGVmaW5lZCB3aGVuIGNhbGxpbmcgcmVkYWN0SXRlbS4nKTtcclxuICAgICAgICB9XHJcblxyXG5cclxuICAgICAgICBsZXQgaGVhZGVycyA9IHRoaXMuZGVmYXVsdEhlYWRlcnM7XHJcblxyXG4gICAgICAgIC8vIHRvIGRldGVybWluZSB0aGUgQWNjZXB0IGhlYWRlclxyXG4gICAgICAgIGxldCBodHRwSGVhZGVyQWNjZXB0czogc3RyaW5nW10gPSBbXHJcbiAgICAgICAgICAgICdhcHBsaWNhdGlvbi9qc29uJ1xyXG4gICAgICAgIF07XHJcbiAgICAgICAgY29uc3QgaHR0cEhlYWRlckFjY2VwdFNlbGVjdGVkOiBzdHJpbmcgfCB1bmRlZmluZWQgPSB0aGlzLmNvbmZpZ3VyYXRpb24uc2VsZWN0SGVhZGVyQWNjZXB0KGh0dHBIZWFkZXJBY2NlcHRzKTtcclxuICAgICAgICBpZiAoaHR0cEhlYWRlckFjY2VwdFNlbGVjdGVkICE9IHVuZGVmaW5lZCkge1xyXG4gICAgICAgICAgICBoZWFkZXJzID0gaGVhZGVycy5zZXQoJ0FjY2VwdCcsIGh0dHBIZWFkZXJBY2NlcHRTZWxlY3RlZCk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvLyB0byBkZXRlcm1pbmUgdGhlIENvbnRlbnQtVHlwZSBoZWFkZXJcclxuICAgICAgICBjb25zdCBjb25zdW1lczogc3RyaW5nW10gPSBbXHJcbiAgICAgICAgICAgICdhcHBsaWNhdGlvbi9qc29uJ1xyXG4gICAgICAgIF07XHJcbiAgICAgICAgY29uc3QgaHR0cENvbnRlbnRUeXBlU2VsZWN0ZWQ6IHN0cmluZyB8IHVuZGVmaW5lZCA9IHRoaXMuY29uZmlndXJhdGlvbi5zZWxlY3RIZWFkZXJDb250ZW50VHlwZShjb25zdW1lcyk7XHJcbiAgICAgICAgaWYgKGh0dHBDb250ZW50VHlwZVNlbGVjdGVkICE9IHVuZGVmaW5lZCkge1xyXG4gICAgICAgICAgICBoZWFkZXJzID0gaGVhZGVycy5zZXQoJ0NvbnRlbnQtVHlwZScsIGh0dHBDb250ZW50VHlwZVNlbGVjdGVkKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHJldHVybiB0aGlzLmh0dHBDbGllbnQucmVxdWVzdDxJbmxpbmVSZXNwb25zZTIwMDE+KCdwdXQnLGAke3RoaXMuYmFzZVBhdGh9L2luYm94L3F1ZXVlLyR7ZW5jb2RlVVJJQ29tcG9uZW50KFN0cmluZyhxdWV1ZUlkKSl9L2l0ZW1zLyR7ZW5jb2RlVVJJQ29tcG9uZW50KFN0cmluZyhjb250ZW50SWQpKX0vdGV4dGAsXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIGJvZHk6IGJvZHksXHJcbiAgICAgICAgICAgICAgICB3aXRoQ3JlZGVudGlhbHM6IHRoaXMuY29uZmlndXJhdGlvbi53aXRoQ3JlZGVudGlhbHMsXHJcbiAgICAgICAgICAgICAgICBoZWFkZXJzOiBoZWFkZXJzLFxyXG4gICAgICAgICAgICAgICAgb2JzZXJ2ZTogb2JzZXJ2ZSxcclxuICAgICAgICAgICAgICAgIHJlcG9ydFByb2dyZXNzOiByZXBvcnRQcm9ncmVzc1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgKTtcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIFJlZGFjdCBhIHVzZXJzIGRhdGFcclxuICAgICAqIFRoaXMgd2lsbCByZWRhY3QgYW5kIHBzZXVkb255bWl6ZSBhbGwgZGF0YSB3ZSBoYXZlIG9uIGEgdXNlci4gVGhpcyBpcyByZWNvbW1lbmRlZCBmb3IgR0RQUiBhbmQgQ0NQQSBjb21wbGlhbmNlIGFyb3VuZCB0ZXJtcyBsaWtlIHJpZ2h0IHRvIGJlIGZvcmdldHRlbi4gXHJcbiAgICAgKiBAcGFyYW0gdXNlcklkIFRoZSB1bmlxdWUgaWRlbnRpZmllciBmb3IgdGhpcyB1c2VyXHJcbiAgICAgKiBAcGFyYW0gb2JzZXJ2ZSBzZXQgd2hldGhlciBvciBub3QgdG8gcmV0dXJuIHRoZSBkYXRhIE9ic2VydmFibGUgYXMgdGhlIGJvZHksIHJlc3BvbnNlIG9yIGV2ZW50cy4gZGVmYXVsdHMgdG8gcmV0dXJuaW5nIHRoZSBib2R5LlxyXG4gICAgICogQHBhcmFtIHJlcG9ydFByb2dyZXNzIGZsYWcgdG8gcmVwb3J0IHJlcXVlc3QgYW5kIHJlc3BvbnNlIHByb2dyZXNzLlxyXG4gICAgICovXHJcbiAgICBwdWJsaWMgcmVkYWN0VXNlcih1c2VySWQ6IHN0cmluZywgb2JzZXJ2ZT86ICdib2R5JywgcmVwb3J0UHJvZ3Jlc3M/OiBib29sZWFuKTogT2JzZXJ2YWJsZTxRdWV1ZT47XHJcbiAgICBwdWJsaWMgcmVkYWN0VXNlcih1c2VySWQ6IHN0cmluZywgb2JzZXJ2ZT86ICdyZXNwb25zZScsIHJlcG9ydFByb2dyZXNzPzogYm9vbGVhbik6IE9ic2VydmFibGU8SHR0cFJlc3BvbnNlPFF1ZXVlPj47XHJcbiAgICBwdWJsaWMgcmVkYWN0VXNlcih1c2VySWQ6IHN0cmluZywgb2JzZXJ2ZT86ICdldmVudHMnLCByZXBvcnRQcm9ncmVzcz86IGJvb2xlYW4pOiBPYnNlcnZhYmxlPEh0dHBFdmVudDxRdWV1ZT4+O1xyXG4gICAgcHVibGljIHJlZGFjdFVzZXIodXNlcklkOiBzdHJpbmcsIG9ic2VydmU6IGFueSA9ICdib2R5JywgcmVwb3J0UHJvZ3Jlc3M6IGJvb2xlYW4gPSBmYWxzZSApOiBPYnNlcnZhYmxlPGFueT4ge1xyXG5cclxuICAgICAgICBpZiAodXNlcklkID09PSBudWxsIHx8IHVzZXJJZCA9PT0gdW5kZWZpbmVkKSB7XHJcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcignUmVxdWlyZWQgcGFyYW1ldGVyIHVzZXJJZCB3YXMgbnVsbCBvciB1bmRlZmluZWQgd2hlbiBjYWxsaW5nIHJlZGFjdFVzZXIuJyk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBsZXQgaGVhZGVycyA9IHRoaXMuZGVmYXVsdEhlYWRlcnM7XHJcblxyXG4gICAgICAgIC8vIHRvIGRldGVybWluZSB0aGUgQWNjZXB0IGhlYWRlclxyXG4gICAgICAgIGxldCBodHRwSGVhZGVyQWNjZXB0czogc3RyaW5nW10gPSBbXHJcbiAgICAgICAgICAgICdhcHBsaWNhdGlvbi9qc29uJ1xyXG4gICAgICAgIF07XHJcbiAgICAgICAgY29uc3QgaHR0cEhlYWRlckFjY2VwdFNlbGVjdGVkOiBzdHJpbmcgfCB1bmRlZmluZWQgPSB0aGlzLmNvbmZpZ3VyYXRpb24uc2VsZWN0SGVhZGVyQWNjZXB0KGh0dHBIZWFkZXJBY2NlcHRzKTtcclxuICAgICAgICBpZiAoaHR0cEhlYWRlckFjY2VwdFNlbGVjdGVkICE9IHVuZGVmaW5lZCkge1xyXG4gICAgICAgICAgICBoZWFkZXJzID0gaGVhZGVycy5zZXQoJ0FjY2VwdCcsIGh0dHBIZWFkZXJBY2NlcHRTZWxlY3RlZCk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvLyB0byBkZXRlcm1pbmUgdGhlIENvbnRlbnQtVHlwZSBoZWFkZXJcclxuICAgICAgICBjb25zdCBjb25zdW1lczogc3RyaW5nW10gPSBbXHJcbiAgICAgICAgXTtcclxuXHJcbiAgICAgICAgcmV0dXJuIHRoaXMuaHR0cENsaWVudC5yZXF1ZXN0PFF1ZXVlPigncHV0JyxgJHt0aGlzLmJhc2VQYXRofS9pbmJveC91c2VyLyR7ZW5jb2RlVVJJQ29tcG9uZW50KFN0cmluZyh1c2VySWQpKX1gLFxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICB3aXRoQ3JlZGVudGlhbHM6IHRoaXMuY29uZmlndXJhdGlvbi53aXRoQ3JlZGVudGlhbHMsXHJcbiAgICAgICAgICAgICAgICBoZWFkZXJzOiBoZWFkZXJzLFxyXG4gICAgICAgICAgICAgICAgb2JzZXJ2ZTogb2JzZXJ2ZSxcclxuICAgICAgICAgICAgICAgIHJlcG9ydFByb2dyZXNzOiByZXBvcnRQcm9ncmVzc1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgKTtcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIE1hcmsgYSBjb21tZW50IGFzIHJlc29sdmVkIChvciByZW9wZW4pXHJcbiAgICAgKiBDb21tZW50cyBjYW4gYmUgbWFya2VkIGFzIG5lZWRpbmcgdG8gYmUgYW5zd2VyZWQuIFxyXG4gICAgICogQHBhcmFtIHF1ZXVlSWQgVGhlIHVuaXF1ZSBpZGVudGlmaWVyIGZvciB0aGlzIHF1ZXVlXHJcbiAgICAgKiBAcGFyYW0gY29udGVudElkIFRoZSB1bmlxdWUgaWRlbnRpZmllciBmb3IgdGhlIGNvbnRlbnRcclxuICAgICAqIEBwYXJhbSBjb21tZW50SWQgVGhlIHVuaXF1ZSBpZGVudGlmaWVyIGZvciB0aGUgY29tbWVudFxyXG4gICAgICogQHBhcmFtIGJvZHkgXHJcbiAgICAgKiBAcGFyYW0gb2JzZXJ2ZSBzZXQgd2hldGhlciBvciBub3QgdG8gcmV0dXJuIHRoZSBkYXRhIE9ic2VydmFibGUgYXMgdGhlIGJvZHksIHJlc3BvbnNlIG9yIGV2ZW50cy4gZGVmYXVsdHMgdG8gcmV0dXJuaW5nIHRoZSBib2R5LlxyXG4gICAgICogQHBhcmFtIHJlcG9ydFByb2dyZXNzIGZsYWcgdG8gcmVwb3J0IHJlcXVlc3QgYW5kIHJlc3BvbnNlIHByb2dyZXNzLlxyXG4gICAgICovXHJcbiAgICBwdWJsaWMgcmVzb2x2ZUNvbW1lbnQocXVldWVJZDogc3RyaW5nLCBjb250ZW50SWQ6IHN0cmluZywgY29tbWVudElkOiBzdHJpbmcsIGJvZHk/OiBCb2R5MSwgb2JzZXJ2ZT86ICdib2R5JywgcmVwb3J0UHJvZ3Jlc3M/OiBib29sZWFuKTogT2JzZXJ2YWJsZTxDb21tZW50PjtcclxuICAgIHB1YmxpYyByZXNvbHZlQ29tbWVudChxdWV1ZUlkOiBzdHJpbmcsIGNvbnRlbnRJZDogc3RyaW5nLCBjb21tZW50SWQ6IHN0cmluZywgYm9keT86IEJvZHkxLCBvYnNlcnZlPzogJ3Jlc3BvbnNlJywgcmVwb3J0UHJvZ3Jlc3M/OiBib29sZWFuKTogT2JzZXJ2YWJsZTxIdHRwUmVzcG9uc2U8Q29tbWVudD4+O1xyXG4gICAgcHVibGljIHJlc29sdmVDb21tZW50KHF1ZXVlSWQ6IHN0cmluZywgY29udGVudElkOiBzdHJpbmcsIGNvbW1lbnRJZDogc3RyaW5nLCBib2R5PzogQm9keTEsIG9ic2VydmU/OiAnZXZlbnRzJywgcmVwb3J0UHJvZ3Jlc3M/OiBib29sZWFuKTogT2JzZXJ2YWJsZTxIdHRwRXZlbnQ8Q29tbWVudD4+O1xyXG4gICAgcHVibGljIHJlc29sdmVDb21tZW50KHF1ZXVlSWQ6IHN0cmluZywgY29udGVudElkOiBzdHJpbmcsIGNvbW1lbnRJZDogc3RyaW5nLCBib2R5PzogQm9keTEsIG9ic2VydmU6IGFueSA9ICdib2R5JywgcmVwb3J0UHJvZ3Jlc3M6IGJvb2xlYW4gPSBmYWxzZSApOiBPYnNlcnZhYmxlPGFueT4ge1xyXG5cclxuICAgICAgICBpZiAocXVldWVJZCA9PT0gbnVsbCB8fCBxdWV1ZUlkID09PSB1bmRlZmluZWQpIHtcclxuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdSZXF1aXJlZCBwYXJhbWV0ZXIgcXVldWVJZCB3YXMgbnVsbCBvciB1bmRlZmluZWQgd2hlbiBjYWxsaW5nIHJlc29sdmVDb21tZW50LicpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgaWYgKGNvbnRlbnRJZCA9PT0gbnVsbCB8fCBjb250ZW50SWQgPT09IHVuZGVmaW5lZCkge1xyXG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ1JlcXVpcmVkIHBhcmFtZXRlciBjb250ZW50SWQgd2FzIG51bGwgb3IgdW5kZWZpbmVkIHdoZW4gY2FsbGluZyByZXNvbHZlQ29tbWVudC4nKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGlmIChjb21tZW50SWQgPT09IG51bGwgfHwgY29tbWVudElkID09PSB1bmRlZmluZWQpIHtcclxuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdSZXF1aXJlZCBwYXJhbWV0ZXIgY29tbWVudElkIHdhcyBudWxsIG9yIHVuZGVmaW5lZCB3aGVuIGNhbGxpbmcgcmVzb2x2ZUNvbW1lbnQuJyk7XHJcbiAgICAgICAgfVxyXG5cclxuXHJcbiAgICAgICAgbGV0IGhlYWRlcnMgPSB0aGlzLmRlZmF1bHRIZWFkZXJzO1xyXG5cclxuICAgICAgICAvLyB0byBkZXRlcm1pbmUgdGhlIEFjY2VwdCBoZWFkZXJcclxuICAgICAgICBsZXQgaHR0cEhlYWRlckFjY2VwdHM6IHN0cmluZ1tdID0gW1xyXG4gICAgICAgICAgICAnYXBwbGljYXRpb24vanNvbidcclxuICAgICAgICBdO1xyXG4gICAgICAgIGNvbnN0IGh0dHBIZWFkZXJBY2NlcHRTZWxlY3RlZDogc3RyaW5nIHwgdW5kZWZpbmVkID0gdGhpcy5jb25maWd1cmF0aW9uLnNlbGVjdEhlYWRlckFjY2VwdChodHRwSGVhZGVyQWNjZXB0cyk7XHJcbiAgICAgICAgaWYgKGh0dHBIZWFkZXJBY2NlcHRTZWxlY3RlZCAhPSB1bmRlZmluZWQpIHtcclxuICAgICAgICAgICAgaGVhZGVycyA9IGhlYWRlcnMuc2V0KCdBY2NlcHQnLCBodHRwSGVhZGVyQWNjZXB0U2VsZWN0ZWQpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLy8gdG8gZGV0ZXJtaW5lIHRoZSBDb250ZW50LVR5cGUgaGVhZGVyXHJcbiAgICAgICAgY29uc3QgY29uc3VtZXM6IHN0cmluZ1tdID0gW1xyXG4gICAgICAgICAgICAnYXBwbGljYXRpb24vanNvbidcclxuICAgICAgICBdO1xyXG4gICAgICAgIGNvbnN0IGh0dHBDb250ZW50VHlwZVNlbGVjdGVkOiBzdHJpbmcgfCB1bmRlZmluZWQgPSB0aGlzLmNvbmZpZ3VyYXRpb24uc2VsZWN0SGVhZGVyQ29udGVudFR5cGUoY29uc3VtZXMpO1xyXG4gICAgICAgIGlmIChodHRwQ29udGVudFR5cGVTZWxlY3RlZCAhPSB1bmRlZmluZWQpIHtcclxuICAgICAgICAgICAgaGVhZGVycyA9IGhlYWRlcnMuc2V0KCdDb250ZW50LVR5cGUnLCBodHRwQ29udGVudFR5cGVTZWxlY3RlZCk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICByZXR1cm4gdGhpcy5odHRwQ2xpZW50LnJlcXVlc3Q8Q29tbWVudD4oJ3B1dCcsYCR7dGhpcy5iYXNlUGF0aH0vaW5ib3gvcXVldWUvJHtlbmNvZGVVUklDb21wb25lbnQoU3RyaW5nKHF1ZXVlSWQpKX0vaXRlbXMvJHtlbmNvZGVVUklDb21wb25lbnQoU3RyaW5nKGNvbnRlbnRJZCkpfS9jb21tZW50cy8ke2VuY29kZVVSSUNvbXBvbmVudChTdHJpbmcoY29tbWVudElkKSl9L3Jlc29sdmVkYCxcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgYm9keTogYm9keSxcclxuICAgICAgICAgICAgICAgIHdpdGhDcmVkZW50aWFsczogdGhpcy5jb25maWd1cmF0aW9uLndpdGhDcmVkZW50aWFscyxcclxuICAgICAgICAgICAgICAgIGhlYWRlcnM6IGhlYWRlcnMsXHJcbiAgICAgICAgICAgICAgICBvYnNlcnZlOiBvYnNlcnZlLFxyXG4gICAgICAgICAgICAgICAgcmVwb3J0UHJvZ3Jlc3M6IHJlcG9ydFByb2dyZXNzXHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICApO1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogVXBkYXRlIGEgY29tbWVudFxyXG4gICAgICogQ29tbWVudHMgYXJlIHdheXMgdG8gbGVhdmUgYSBub3RlIHRvIHNheSB3aHkgYSBwZXJzb24gbWFkZSB0aGUgZGVjaXNpb24gdGhleSBkaWQuICBPciBpdCBjb3VsZCBiZSBhIHF1ZXN0aW9uIG9yIGFuc3dlciB0cnlpbmcgdG8gZ2V0IGhlbHAgb24gYW4gaXRlbS4gXHJcbiAgICAgKiBAcGFyYW0gcXVldWVJZCBUaGUgdW5pcXVlIGlkZW50aWZpZXIgZm9yIHRoaXMgcXVldWVcclxuICAgICAqIEBwYXJhbSBjb250ZW50SWQgVGhlIHVuaXF1ZSBpZGVudGlmaWVyIGZvciB0aGUgY29udGVudFxyXG4gICAgICogQHBhcmFtIGNvbW1lbnRJZCBUaGUgdW5pcXVlIGlkZW50aWZpZXIgZm9yIHRoZSBjb21tZW50XHJcbiAgICAgKiBAcGFyYW0gYm9keSBcclxuICAgICAqIEBwYXJhbSBvYnNlcnZlIHNldCB3aGV0aGVyIG9yIG5vdCB0byByZXR1cm4gdGhlIGRhdGEgT2JzZXJ2YWJsZSBhcyB0aGUgYm9keSwgcmVzcG9uc2Ugb3IgZXZlbnRzLiBkZWZhdWx0cyB0byByZXR1cm5pbmcgdGhlIGJvZHkuXHJcbiAgICAgKiBAcGFyYW0gcmVwb3J0UHJvZ3Jlc3MgZmxhZyB0byByZXBvcnQgcmVxdWVzdCBhbmQgcmVzcG9uc2UgcHJvZ3Jlc3MuXHJcbiAgICAgKi9cclxuICAgIHB1YmxpYyB1cGRhdGVDb21tZW50KHF1ZXVlSWQ6IHN0cmluZywgY29udGVudElkOiBzdHJpbmcsIGNvbW1lbnRJZDogc3RyaW5nLCBib2R5PzogQ29tbWVudCwgb2JzZXJ2ZT86ICdib2R5JywgcmVwb3J0UHJvZ3Jlc3M/OiBib29sZWFuKTogT2JzZXJ2YWJsZTxDb21tZW50PjtcclxuICAgIHB1YmxpYyB1cGRhdGVDb21tZW50KHF1ZXVlSWQ6IHN0cmluZywgY29udGVudElkOiBzdHJpbmcsIGNvbW1lbnRJZDogc3RyaW5nLCBib2R5PzogQ29tbWVudCwgb2JzZXJ2ZT86ICdyZXNwb25zZScsIHJlcG9ydFByb2dyZXNzPzogYm9vbGVhbik6IE9ic2VydmFibGU8SHR0cFJlc3BvbnNlPENvbW1lbnQ+PjtcclxuICAgIHB1YmxpYyB1cGRhdGVDb21tZW50KHF1ZXVlSWQ6IHN0cmluZywgY29udGVudElkOiBzdHJpbmcsIGNvbW1lbnRJZDogc3RyaW5nLCBib2R5PzogQ29tbWVudCwgb2JzZXJ2ZT86ICdldmVudHMnLCByZXBvcnRQcm9ncmVzcz86IGJvb2xlYW4pOiBPYnNlcnZhYmxlPEh0dHBFdmVudDxDb21tZW50Pj47XHJcbiAgICBwdWJsaWMgdXBkYXRlQ29tbWVudChxdWV1ZUlkOiBzdHJpbmcsIGNvbnRlbnRJZDogc3RyaW5nLCBjb21tZW50SWQ6IHN0cmluZywgYm9keT86IENvbW1lbnQsIG9ic2VydmU6IGFueSA9ICdib2R5JywgcmVwb3J0UHJvZ3Jlc3M6IGJvb2xlYW4gPSBmYWxzZSApOiBPYnNlcnZhYmxlPGFueT4ge1xyXG5cclxuICAgICAgICBpZiAocXVldWVJZCA9PT0gbnVsbCB8fCBxdWV1ZUlkID09PSB1bmRlZmluZWQpIHtcclxuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdSZXF1aXJlZCBwYXJhbWV0ZXIgcXVldWVJZCB3YXMgbnVsbCBvciB1bmRlZmluZWQgd2hlbiBjYWxsaW5nIHVwZGF0ZUNvbW1lbnQuJyk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBpZiAoY29udGVudElkID09PSBudWxsIHx8IGNvbnRlbnRJZCA9PT0gdW5kZWZpbmVkKSB7XHJcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcignUmVxdWlyZWQgcGFyYW1ldGVyIGNvbnRlbnRJZCB3YXMgbnVsbCBvciB1bmRlZmluZWQgd2hlbiBjYWxsaW5nIHVwZGF0ZUNvbW1lbnQuJyk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBpZiAoY29tbWVudElkID09PSBudWxsIHx8IGNvbW1lbnRJZCA9PT0gdW5kZWZpbmVkKSB7XHJcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcignUmVxdWlyZWQgcGFyYW1ldGVyIGNvbW1lbnRJZCB3YXMgbnVsbCBvciB1bmRlZmluZWQgd2hlbiBjYWxsaW5nIHVwZGF0ZUNvbW1lbnQuJyk7XHJcbiAgICAgICAgfVxyXG5cclxuXHJcbiAgICAgICAgbGV0IGhlYWRlcnMgPSB0aGlzLmRlZmF1bHRIZWFkZXJzO1xyXG5cclxuICAgICAgICAvLyB0byBkZXRlcm1pbmUgdGhlIEFjY2VwdCBoZWFkZXJcclxuICAgICAgICBsZXQgaHR0cEhlYWRlckFjY2VwdHM6IHN0cmluZ1tdID0gW1xyXG4gICAgICAgICAgICAnYXBwbGljYXRpb24vanNvbidcclxuICAgICAgICBdO1xyXG4gICAgICAgIGNvbnN0IGh0dHBIZWFkZXJBY2NlcHRTZWxlY3RlZDogc3RyaW5nIHwgdW5kZWZpbmVkID0gdGhpcy5jb25maWd1cmF0aW9uLnNlbGVjdEhlYWRlckFjY2VwdChodHRwSGVhZGVyQWNjZXB0cyk7XHJcbiAgICAgICAgaWYgKGh0dHBIZWFkZXJBY2NlcHRTZWxlY3RlZCAhPSB1bmRlZmluZWQpIHtcclxuICAgICAgICAgICAgaGVhZGVycyA9IGhlYWRlcnMuc2V0KCdBY2NlcHQnLCBodHRwSGVhZGVyQWNjZXB0U2VsZWN0ZWQpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLy8gdG8gZGV0ZXJtaW5lIHRoZSBDb250ZW50LVR5cGUgaGVhZGVyXHJcbiAgICAgICAgY29uc3QgY29uc3VtZXM6IHN0cmluZ1tdID0gW1xyXG4gICAgICAgICAgICAnYXBwbGljYXRpb24vanNvbidcclxuICAgICAgICBdO1xyXG4gICAgICAgIGNvbnN0IGh0dHBDb250ZW50VHlwZVNlbGVjdGVkOiBzdHJpbmcgfCB1bmRlZmluZWQgPSB0aGlzLmNvbmZpZ3VyYXRpb24uc2VsZWN0SGVhZGVyQ29udGVudFR5cGUoY29uc3VtZXMpO1xyXG4gICAgICAgIGlmIChodHRwQ29udGVudFR5cGVTZWxlY3RlZCAhPSB1bmRlZmluZWQpIHtcclxuICAgICAgICAgICAgaGVhZGVycyA9IGhlYWRlcnMuc2V0KCdDb250ZW50LVR5cGUnLCBodHRwQ29udGVudFR5cGVTZWxlY3RlZCk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICByZXR1cm4gdGhpcy5odHRwQ2xpZW50LnJlcXVlc3Q8Q29tbWVudD4oJ3B1dCcsYCR7dGhpcy5iYXNlUGF0aH0vaW5ib3gvcXVldWUvJHtlbmNvZGVVUklDb21wb25lbnQoU3RyaW5nKHF1ZXVlSWQpKX0vaXRlbXMvJHtlbmNvZGVVUklDb21wb25lbnQoU3RyaW5nKGNvbnRlbnRJZCkpfS9jb21tZW50cy8ke2VuY29kZVVSSUNvbXBvbmVudChTdHJpbmcoY29tbWVudElkKSl9YCxcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgYm9keTogYm9keSxcclxuICAgICAgICAgICAgICAgIHdpdGhDcmVkZW50aWFsczogdGhpcy5jb25maWd1cmF0aW9uLndpdGhDcmVkZW50aWFscyxcclxuICAgICAgICAgICAgICAgIGhlYWRlcnM6IGhlYWRlcnMsXHJcbiAgICAgICAgICAgICAgICBvYnNlcnZlOiBvYnNlcnZlLFxyXG4gICAgICAgICAgICAgICAgcmVwb3J0UHJvZ3Jlc3M6IHJlcG9ydFByb2dyZXNzXHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICApO1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogUmVuZXcgYSBjaGVja291dCBvbiBhbiBpdGVtXHJcbiAgICAgKiBXaGVuIHlvdSBmaXJzdCBnZXQgYW4gaXRlbSBpZiBjaGVja291dCYjeDNEO1RydWUgeW91IHdpbGwgaGF2ZSBjaGVja2VkIGl0IG91dC4gIFlvdSBzaG91bGQgYmUgc2hvd2luZyBhIHdhcm5pbmcgd2hlbiB0aGUgY2hlY2tvdXQgaXMgYWxtb3N0IGV4cGlyZWQuICBDYWxsaW5nIHRoaXMgQVBJIHdpbGwgYWxsb3cgeW91IHRvIHJlbmV3IGl0LiBcclxuICAgICAqIEBwYXJhbSBxdWV1ZUlkIFRoZSB1bmlxdWUgaWRlbnRpZmllciBmb3IgdGhpcyBxdWV1ZVxyXG4gICAgICogQHBhcmFtIGNvbnRlbnRJZCBUaGUgdW5pcXVlIGlkZW50aWZpZXIgZm9yIHRoZSBjb250ZW50XHJcbiAgICAgKiBAcGFyYW0gYm9keSBcclxuICAgICAqIEBwYXJhbSBvYnNlcnZlIHNldCB3aGV0aGVyIG9yIG5vdCB0byByZXR1cm4gdGhlIGRhdGEgT2JzZXJ2YWJsZSBhcyB0aGUgYm9keSwgcmVzcG9uc2Ugb3IgZXZlbnRzLiBkZWZhdWx0cyB0byByZXR1cm5pbmcgdGhlIGJvZHkuXHJcbiAgICAgKiBAcGFyYW0gcmVwb3J0UHJvZ3Jlc3MgZmxhZyB0byByZXBvcnQgcmVxdWVzdCBhbmQgcmVzcG9uc2UgcHJvZ3Jlc3MuXHJcbiAgICAgKi9cclxuICAgIHB1YmxpYyB1cGRhdGVJdGVtQ2hlY2tvdXQocXVldWVJZDogc3RyaW5nLCBjb250ZW50SWQ6IHN0cmluZywgYm9keT86IENoZWNrb3V0LCBvYnNlcnZlPzogJ2JvZHknLCByZXBvcnRQcm9ncmVzcz86IGJvb2xlYW4pOiBPYnNlcnZhYmxlPElubGluZVJlc3BvbnNlMjAwMT47XHJcbiAgICBwdWJsaWMgdXBkYXRlSXRlbUNoZWNrb3V0KHF1ZXVlSWQ6IHN0cmluZywgY29udGVudElkOiBzdHJpbmcsIGJvZHk/OiBDaGVja291dCwgb2JzZXJ2ZT86ICdyZXNwb25zZScsIHJlcG9ydFByb2dyZXNzPzogYm9vbGVhbik6IE9ic2VydmFibGU8SHR0cFJlc3BvbnNlPElubGluZVJlc3BvbnNlMjAwMT4+O1xyXG4gICAgcHVibGljIHVwZGF0ZUl0ZW1DaGVja291dChxdWV1ZUlkOiBzdHJpbmcsIGNvbnRlbnRJZDogc3RyaW5nLCBib2R5PzogQ2hlY2tvdXQsIG9ic2VydmU/OiAnZXZlbnRzJywgcmVwb3J0UHJvZ3Jlc3M/OiBib29sZWFuKTogT2JzZXJ2YWJsZTxIdHRwRXZlbnQ8SW5saW5lUmVzcG9uc2UyMDAxPj47XHJcbiAgICBwdWJsaWMgdXBkYXRlSXRlbUNoZWNrb3V0KHF1ZXVlSWQ6IHN0cmluZywgY29udGVudElkOiBzdHJpbmcsIGJvZHk/OiBDaGVja291dCwgb2JzZXJ2ZTogYW55ID0gJ2JvZHknLCByZXBvcnRQcm9ncmVzczogYm9vbGVhbiA9IGZhbHNlICk6IE9ic2VydmFibGU8YW55PiB7XHJcblxyXG4gICAgICAgIGlmIChxdWV1ZUlkID09PSBudWxsIHx8IHF1ZXVlSWQgPT09IHVuZGVmaW5lZCkge1xyXG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ1JlcXVpcmVkIHBhcmFtZXRlciBxdWV1ZUlkIHdhcyBudWxsIG9yIHVuZGVmaW5lZCB3aGVuIGNhbGxpbmcgdXBkYXRlSXRlbUNoZWNrb3V0LicpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgaWYgKGNvbnRlbnRJZCA9PT0gbnVsbCB8fCBjb250ZW50SWQgPT09IHVuZGVmaW5lZCkge1xyXG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ1JlcXVpcmVkIHBhcmFtZXRlciBjb250ZW50SWQgd2FzIG51bGwgb3IgdW5kZWZpbmVkIHdoZW4gY2FsbGluZyB1cGRhdGVJdGVtQ2hlY2tvdXQuJyk7XHJcbiAgICAgICAgfVxyXG5cclxuXHJcbiAgICAgICAgbGV0IGhlYWRlcnMgPSB0aGlzLmRlZmF1bHRIZWFkZXJzO1xyXG5cclxuICAgICAgICAvLyB0byBkZXRlcm1pbmUgdGhlIEFjY2VwdCBoZWFkZXJcclxuICAgICAgICBsZXQgaHR0cEhlYWRlckFjY2VwdHM6IHN0cmluZ1tdID0gW1xyXG4gICAgICAgICAgICAnYXBwbGljYXRpb24vanNvbidcclxuICAgICAgICBdO1xyXG4gICAgICAgIGNvbnN0IGh0dHBIZWFkZXJBY2NlcHRTZWxlY3RlZDogc3RyaW5nIHwgdW5kZWZpbmVkID0gdGhpcy5jb25maWd1cmF0aW9uLnNlbGVjdEhlYWRlckFjY2VwdChodHRwSGVhZGVyQWNjZXB0cyk7XHJcbiAgICAgICAgaWYgKGh0dHBIZWFkZXJBY2NlcHRTZWxlY3RlZCAhPSB1bmRlZmluZWQpIHtcclxuICAgICAgICAgICAgaGVhZGVycyA9IGhlYWRlcnMuc2V0KCdBY2NlcHQnLCBodHRwSGVhZGVyQWNjZXB0U2VsZWN0ZWQpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLy8gdG8gZGV0ZXJtaW5lIHRoZSBDb250ZW50LVR5cGUgaGVhZGVyXHJcbiAgICAgICAgY29uc3QgY29uc3VtZXM6IHN0cmluZ1tdID0gW1xyXG4gICAgICAgICAgICAnYXBwbGljYXRpb24vanNvbidcclxuICAgICAgICBdO1xyXG4gICAgICAgIGNvbnN0IGh0dHBDb250ZW50VHlwZVNlbGVjdGVkOiBzdHJpbmcgfCB1bmRlZmluZWQgPSB0aGlzLmNvbmZpZ3VyYXRpb24uc2VsZWN0SGVhZGVyQ29udGVudFR5cGUoY29uc3VtZXMpO1xyXG4gICAgICAgIGlmIChodHRwQ29udGVudFR5cGVTZWxlY3RlZCAhPSB1bmRlZmluZWQpIHtcclxuICAgICAgICAgICAgaGVhZGVycyA9IGhlYWRlcnMuc2V0KCdDb250ZW50LVR5cGUnLCBodHRwQ29udGVudFR5cGVTZWxlY3RlZCk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICByZXR1cm4gdGhpcy5odHRwQ2xpZW50LnJlcXVlc3Q8SW5saW5lUmVzcG9uc2UyMDAxPigncHV0JyxgJHt0aGlzLmJhc2VQYXRofS9pbmJveC9xdWV1ZS8ke2VuY29kZVVSSUNvbXBvbmVudChTdHJpbmcocXVldWVJZCkpfS9pdGVtcy8ke2VuY29kZVVSSUNvbXBvbmVudChTdHJpbmcoY29udGVudElkKSl9L2NoZWNrb3V0YCxcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgYm9keTogYm9keSxcclxuICAgICAgICAgICAgICAgIHdpdGhDcmVkZW50aWFsczogdGhpcy5jb25maWd1cmF0aW9uLndpdGhDcmVkZW50aWFscyxcclxuICAgICAgICAgICAgICAgIGhlYWRlcnM6IGhlYWRlcnMsXHJcbiAgICAgICAgICAgICAgICBvYnNlcnZlOiBvYnNlcnZlLFxyXG4gICAgICAgICAgICAgICAgcmVwb3J0UHJvZ3Jlc3M6IHJlcG9ydFByb2dyZXNzXHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICApO1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogQWRkIGEgY3VzdG9tIHBhcmFtXHJcbiAgICAgKiBZb3UgY2FuIGN1c3RvbWl6ZSBzb21lIGZpZWxkcy4gIFRvIGdldCBhbGwgdGhlIHBhcmFtcyB1c2UgR0VUIC9pbmJveC9xdWV1ZS97cXVldWVJZH0gXHJcbiAgICAgKiBAcGFyYW0gcXVldWVJZCBUaGUgdW5pcXVlIGlkZW50aWZpZXIgZm9yIHRoaXMgcXVldWVcclxuICAgICAqIEBwYXJhbSBwYXJhbUlkIEEgY3VzdG9tIGNvbmZpZ3VyYXRpb24gZm9yIGEgY2xpZW50XHJcbiAgICAgKiBAcGFyYW0gYm9keSBcclxuICAgICAqIEBwYXJhbSBvYnNlcnZlIHNldCB3aGV0aGVyIG9yIG5vdCB0byByZXR1cm4gdGhlIGRhdGEgT2JzZXJ2YWJsZSBhcyB0aGUgYm9keSwgcmVzcG9uc2Ugb3IgZXZlbnRzLiBkZWZhdWx0cyB0byByZXR1cm5pbmcgdGhlIGJvZHkuXHJcbiAgICAgKiBAcGFyYW0gcmVwb3J0UHJvZ3Jlc3MgZmxhZyB0byByZXBvcnQgcmVxdWVzdCBhbmQgcmVzcG9uc2UgcHJvZ3Jlc3MuXHJcbiAgICAgKi9cclxuICAgIHB1YmxpYyB1cGRhdGVQYXJhbShxdWV1ZUlkOiBzdHJpbmcsIHBhcmFtSWQ6IHN0cmluZywgYm9keT86IEJvZHkyLCBvYnNlcnZlPzogJ2JvZHknLCByZXBvcnRQcm9ncmVzcz86IGJvb2xlYW4pOiBPYnNlcnZhYmxlPGFueT47XHJcbiAgICBwdWJsaWMgdXBkYXRlUGFyYW0ocXVldWVJZDogc3RyaW5nLCBwYXJhbUlkOiBzdHJpbmcsIGJvZHk/OiBCb2R5Miwgb2JzZXJ2ZT86ICdyZXNwb25zZScsIHJlcG9ydFByb2dyZXNzPzogYm9vbGVhbik6IE9ic2VydmFibGU8SHR0cFJlc3BvbnNlPGFueT4+O1xyXG4gICAgcHVibGljIHVwZGF0ZVBhcmFtKHF1ZXVlSWQ6IHN0cmluZywgcGFyYW1JZDogc3RyaW5nLCBib2R5PzogQm9keTIsIG9ic2VydmU/OiAnZXZlbnRzJywgcmVwb3J0UHJvZ3Jlc3M/OiBib29sZWFuKTogT2JzZXJ2YWJsZTxIdHRwRXZlbnQ8YW55Pj47XHJcbiAgICBwdWJsaWMgdXBkYXRlUGFyYW0ocXVldWVJZDogc3RyaW5nLCBwYXJhbUlkOiBzdHJpbmcsIGJvZHk/OiBCb2R5Miwgb2JzZXJ2ZTogYW55ID0gJ2JvZHknLCByZXBvcnRQcm9ncmVzczogYm9vbGVhbiA9IGZhbHNlICk6IE9ic2VydmFibGU8YW55PiB7XHJcblxyXG4gICAgICAgIGlmIChxdWV1ZUlkID09PSBudWxsIHx8IHF1ZXVlSWQgPT09IHVuZGVmaW5lZCkge1xyXG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ1JlcXVpcmVkIHBhcmFtZXRlciBxdWV1ZUlkIHdhcyBudWxsIG9yIHVuZGVmaW5lZCB3aGVuIGNhbGxpbmcgdXBkYXRlUGFyYW0uJyk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBpZiAocGFyYW1JZCA9PT0gbnVsbCB8fCBwYXJhbUlkID09PSB1bmRlZmluZWQpIHtcclxuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdSZXF1aXJlZCBwYXJhbWV0ZXIgcGFyYW1JZCB3YXMgbnVsbCBvciB1bmRlZmluZWQgd2hlbiBjYWxsaW5nIHVwZGF0ZVBhcmFtLicpO1xyXG4gICAgICAgIH1cclxuXHJcblxyXG4gICAgICAgIGxldCBoZWFkZXJzID0gdGhpcy5kZWZhdWx0SGVhZGVycztcclxuXHJcbiAgICAgICAgLy8gdG8gZGV0ZXJtaW5lIHRoZSBBY2NlcHQgaGVhZGVyXHJcbiAgICAgICAgbGV0IGh0dHBIZWFkZXJBY2NlcHRzOiBzdHJpbmdbXSA9IFtcclxuICAgICAgICAgICAgJ2FwcGxpY2F0aW9uL2pzb24nXHJcbiAgICAgICAgXTtcclxuICAgICAgICBjb25zdCBodHRwSGVhZGVyQWNjZXB0U2VsZWN0ZWQ6IHN0cmluZyB8IHVuZGVmaW5lZCA9IHRoaXMuY29uZmlndXJhdGlvbi5zZWxlY3RIZWFkZXJBY2NlcHQoaHR0cEhlYWRlckFjY2VwdHMpO1xyXG4gICAgICAgIGlmIChodHRwSGVhZGVyQWNjZXB0U2VsZWN0ZWQgIT0gdW5kZWZpbmVkKSB7XHJcbiAgICAgICAgICAgIGhlYWRlcnMgPSBoZWFkZXJzLnNldCgnQWNjZXB0JywgaHR0cEhlYWRlckFjY2VwdFNlbGVjdGVkKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8vIHRvIGRldGVybWluZSB0aGUgQ29udGVudC1UeXBlIGhlYWRlclxyXG4gICAgICAgIGNvbnN0IGNvbnN1bWVzOiBzdHJpbmdbXSA9IFtcclxuICAgICAgICAgICAgJ2FwcGxpY2F0aW9uL2pzb24nXHJcbiAgICAgICAgXTtcclxuICAgICAgICBjb25zdCBodHRwQ29udGVudFR5cGVTZWxlY3RlZDogc3RyaW5nIHwgdW5kZWZpbmVkID0gdGhpcy5jb25maWd1cmF0aW9uLnNlbGVjdEhlYWRlckNvbnRlbnRUeXBlKGNvbnN1bWVzKTtcclxuICAgICAgICBpZiAoaHR0cENvbnRlbnRUeXBlU2VsZWN0ZWQgIT0gdW5kZWZpbmVkKSB7XHJcbiAgICAgICAgICAgIGhlYWRlcnMgPSBoZWFkZXJzLnNldCgnQ29udGVudC1UeXBlJywgaHR0cENvbnRlbnRUeXBlU2VsZWN0ZWQpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcmV0dXJuIHRoaXMuaHR0cENsaWVudC5yZXF1ZXN0PGFueT4oJ3B1dCcsYCR7dGhpcy5iYXNlUGF0aH0vaW5ib3gvcXVldWUvJHtlbmNvZGVVUklDb21wb25lbnQoU3RyaW5nKHF1ZXVlSWQpKX0vcGFyYW0vJHtlbmNvZGVVUklDb21wb25lbnQoU3RyaW5nKHBhcmFtSWQpKX1gLFxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICBib2R5OiBib2R5LFxyXG4gICAgICAgICAgICAgICAgd2l0aENyZWRlbnRpYWxzOiB0aGlzLmNvbmZpZ3VyYXRpb24ud2l0aENyZWRlbnRpYWxzLFxyXG4gICAgICAgICAgICAgICAgaGVhZGVyczogaGVhZGVycyxcclxuICAgICAgICAgICAgICAgIG9ic2VydmU6IG9ic2VydmUsXHJcbiAgICAgICAgICAgICAgICByZXBvcnRQcm9ncmVzczogcmVwb3J0UHJvZ3Jlc3NcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICk7XHJcbiAgICB9XHJcblxyXG59XHJcbiJdfQ==